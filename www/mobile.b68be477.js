function e(e,t,r,i){Object.defineProperty(e,t,{get:r,set:i,enumerable:!0,configurable:!0})}var t=globalThis;function r(e){return e&&e.__esModule?e.default:e}var i={},n={},s=t.parcelRequirea81d;null==s&&((s=function(e){if(e in i)return i[e].exports;if(e in n){var t=n[e];delete n[e];var r={id:e,exports:{}};return i[e]=r,t.call(r.exports,r,r.exports),r.exports}var s=Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){n[e]=t},t.parcelRequirea81d=s);var o=s.register;o("9EePZ",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0});var r=s("3kKyL");r.__exportStar(s("fUPCt"),e.exports),r.__exportStar(s("3NXE9"),e.exports)}),o("3kKyL",function(t,r){e(t.exports,"__exportStar",()=>i);function i(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||(t[r]=e[r])}}),o("fUPCt",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.delay=void 0,e.exports.delay=function(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}}),o("3NXE9",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.fromMiliseconds=e.exports.toMiliseconds=void 0;var r=s("2MWZl");e.exports.toMiliseconds=function(e){return e*r.ONE_THOUSAND},e.exports.fromMiliseconds=function(e){return Math.floor(e/r.ONE_THOUSAND)}}),o("2MWZl",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0});var r=s("3kKyL");r.__exportStar(s("lfr75"),e.exports),r.__exportStar(s("1qmVT"),e.exports)}),o("lfr75",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ONE_THOUSAND=e.exports.ONE_HUNDRED=void 0,e.exports.ONE_HUNDRED=100,e.exports.ONE_THOUSAND=1e3}),o("1qmVT",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ONE_YEAR=e.exports.FOUR_WEEKS=e.exports.THREE_WEEKS=e.exports.TWO_WEEKS=e.exports.ONE_WEEK=e.exports.THIRTY_DAYS=e.exports.SEVEN_DAYS=e.exports.FIVE_DAYS=e.exports.THREE_DAYS=e.exports.ONE_DAY=e.exports.TWENTY_FOUR_HOURS=e.exports.TWELVE_HOURS=e.exports.SIX_HOURS=e.exports.THREE_HOURS=e.exports.ONE_HOUR=e.exports.SIXTY_MINUTES=e.exports.THIRTY_MINUTES=e.exports.TEN_MINUTES=e.exports.FIVE_MINUTES=e.exports.ONE_MINUTE=e.exports.SIXTY_SECONDS=e.exports.THIRTY_SECONDS=e.exports.TEN_SECONDS=e.exports.FIVE_SECONDS=e.exports.ONE_SECOND=void 0,e.exports.ONE_SECOND=1,e.exports.FIVE_SECONDS=5,e.exports.TEN_SECONDS=10,e.exports.THIRTY_SECONDS=30,e.exports.SIXTY_SECONDS=60,e.exports.ONE_MINUTE=e.exports.SIXTY_SECONDS,e.exports.FIVE_MINUTES=5*e.exports.ONE_MINUTE,e.exports.TEN_MINUTES=10*e.exports.ONE_MINUTE,e.exports.THIRTY_MINUTES=30*e.exports.ONE_MINUTE,e.exports.SIXTY_MINUTES=60*e.exports.ONE_MINUTE,e.exports.ONE_HOUR=e.exports.SIXTY_MINUTES,e.exports.THREE_HOURS=3*e.exports.ONE_HOUR,e.exports.SIX_HOURS=6*e.exports.ONE_HOUR,e.exports.TWELVE_HOURS=12*e.exports.ONE_HOUR,e.exports.TWENTY_FOUR_HOURS=24*e.exports.ONE_HOUR,e.exports.ONE_DAY=e.exports.TWENTY_FOUR_HOURS,e.exports.THREE_DAYS=3*e.exports.ONE_DAY,e.exports.FIVE_DAYS=5*e.exports.ONE_DAY,e.exports.SEVEN_DAYS=7*e.exports.ONE_DAY,e.exports.THIRTY_DAYS=30*e.exports.ONE_DAY,e.exports.ONE_WEEK=e.exports.SEVEN_DAYS,e.exports.TWO_WEEKS=2*e.exports.ONE_WEEK,e.exports.THREE_WEEKS=3*e.exports.ONE_WEEK,e.exports.FOUR_WEEKS=4*e.exports.ONE_WEEK,e.exports.ONE_YEAR=365*e.exports.ONE_DAY}),o("iD73S",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Watch=void 0;class r{constructor(){this.timestamps=new Map}start(e){if(this.timestamps.has(e))throw Error(`Watch already started for label: ${e}`);this.timestamps.set(e,{started:Date.now()})}stop(e){let t=this.get(e);if(void 0!==t.elapsed)throw Error(`Watch already stopped for label: ${e}`);let r=Date.now()-t.started;this.timestamps.set(e,{started:t.started,elapsed:r})}get(e){let t=this.timestamps.get(e);if(void 0===t)throw Error(`No timestamp found for label: ${e}`);return t}elapsed(e){let t=this.get(e);return t.elapsed||Date.now()-t.started}}e.exports.Watch=r,e.exports.default=r}),o("dTXLC",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),s("3kKyL").__exportStar(s("b5rRE"),e.exports)}),o("b5rRE",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.IWatch=void 0,e.exports.IWatch=class{}}),o("lgCxf",function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.wNAF=function(e,t){return{constTimeNegate:a,hasPrecomputes:e=>1!==g(e),unsafeLadder(t,r,i=e.ZERO){let s=t;for(;r>n;)r&o&&(i=i.add(s)),s=s.double(),r>>=o;return i},precomputeWindow(e,r){let{windows:i,windowSize:n}=u(r,t),s=[],o=e,a=o;for(let e=0;e<i;e++){a=o,s.push(a);for(let e=1;e<n;e++)a=a.add(o),s.push(a);o=a.double()}return s},wNAF(r,i,n){let s=e.ZERO,o=e.BASE,h=u(r,t);for(let e=0;e<h.windows;e++){let{nextN:t,offset:r,isZero:u,isNeg:c,isNegF:l,offsetF:d}=f(n,e,h);n=t,u?o=o.add(a(l,i[d])):s=s.add(a(c,i[r]))}return{p:s,f:o}},wNAFUnsafe(r,i,s,o=e.ZERO){let a=u(r,t);for(let e=0;e<a.windows&&s!==n;e++){let{nextN:t,offset:r,isZero:n,isNeg:h}=f(s,e,a);if(s=t,!n){let e=i[r];o=o.add(h?e.negate():e)}}return o},getPrecomputes(e,t,r){let i=d.get(t);return i||(i=this.precomputeWindow(t,e),1!==e&&d.set(t,r(i))),i},wNAFCached(e,t,r){let i=g(e);return this.wNAF(i,this.getPrecomputes(i,e,r),t)},wNAFCachedUnsafe(e,t,r,i){let n=g(e);return 1===n?this.unsafeLadder(e,t,i):this.wNAFUnsafe(n,this.getPrecomputes(n,e,r),t,i)},setWindowSize(e,r){h(r,t),p.set(e,r),d.delete(e)}}},t.pippenger=function(e,t,r,n){c(r,e),l(n,t);let s=r.length,o=n.length;if(s!==o)throw Error("arrays of points and scalars must have equal length");let a=e.ZERO,h=(0,i.bitLen)(BigInt(s)),u=1;h>12?u=h-3:h>4?u=h-2:h>0&&(u=2);let f=(0,i.bitMask)(u),d=Array(Number(f)+1).fill(a),p=Math.floor((t.BITS-1)/u)*u,g=a;for(let e=p;e>=0;e-=u){d.fill(a);for(let t=0;t<o;t++){let i=Number(n[t]>>BigInt(e)&f);d[i]=d[i].add(r[t])}let t=a;for(let e=d.length-1,r=a;e>0;e--)r=r.add(d[e]),t=t.add(r);if(g=g.add(t),0!==e)for(let e=0;e<u;e++)g=g.double()}return g},t.precomputeMSMUnsafe=function(e,t,r,n){h(n,t.BITS),c(r,e);let s=e.ZERO,o=2**n-1,a=Math.ceil(t.BITS/n),u=(0,i.bitMask)(n),f=r.map(e=>{let t=[];for(let r=0,i=e;r<o;r++)t.push(i),i=i.add(e);return t});return e=>{if(l(e,t),e.length>r.length)throw Error("array of scalars must be smaller than array of points");let i=s;for(let t=0;t<a;t++){if(i!==s)for(let e=0;e<n;e++)i=i.double();let r=BigInt(a*n-(t+1)*n);for(let t=0;t<e.length;t++){let n=Number(e[t]>>r&u);n&&(i=i.add(f[t][n-1]))}}return i}},t.validateBasic=function(e){return(0,r.validateField)(e.Fp),(0,i.validateObject)(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,r.nLength)(e.n,e.nBitLength),...e,p:e.Fp.ORDER})};var r=s("es3xL"),i=s("5l7pf");let n=BigInt(0),o=BigInt(1);function a(e,t){let r=t.negate();return e?r:t}function h(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw Error("invalid window size, expected [1.."+t+"], got W="+e)}function u(e,t){h(e,t);let r=Math.ceil(t/e)+1,n=2**(e-1),s=2**e;return{windows:r,windowSize:n,mask:(0,i.bitMask)(e),maxNumber:s,shiftBy:BigInt(e)}}function f(e,t,r){let{windowSize:i,mask:n,maxNumber:s,shiftBy:a}=r,h=Number(e&n),u=e>>a;h>i&&(h-=s,u+=o);let f=t*i;return{nextN:u,offset:f+Math.abs(h)-1,isZero:0===h,isNeg:h<0,isNegF:t%2!=0,offsetF:f}}function c(e,t){if(!Array.isArray(e))throw Error("array expected");e.forEach((e,r)=>{if(!(e instanceof t))throw Error("invalid point at index "+r)})}function l(e,t){if(!Array.isArray(e))throw Error("array of scalars expected");e.forEach((e,r)=>{if(!t.isValid(e))throw Error("invalid scalar at index "+r)})}let d=new WeakMap,p=new WeakMap;function g(e){return p.get(e)||1}}),o("es3xL",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.isNegativeLE=void 0,e.exports.mod=l,e.exports.pow=function(e,t,r){return v(E(r),e,t)},e.exports.pow2=function(e,t,r){let i=e;for(;t-- >n;)i*=i,i%=r;return i},e.exports.invert=d,e.exports.tonelliShanks=b,e.exports.FpSqrt=y,e.exports.validateField=function(e){let t=m.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return(0,i.validateObject)(e,t)},e.exports.FpPow=v,e.exports.FpInvertBatch=w,e.exports.FpDiv=function(e,t,r){return e.mul(t,"bigint"==typeof r?d(r,e.ORDER):e.inv(r))},e.exports.FpLegendre=D,e.exports.FpIsSquare=function(e,t){return 1===D(e,t)},e.exports.nLength=x,e.exports.Field=E,e.exports.FpSqrtOdd=function(e,t){if(!e.isOdd)throw Error("Field doesn't have isOdd");let r=e.sqrt(t);return e.isOdd(r)?r:e.neg(r)},e.exports.FpSqrtEven=function(e,t){if(!e.isOdd)throw Error("Field doesn't have isOdd");let r=e.sqrt(t);return e.isOdd(r)?e.neg(r):r},e.exports.hashToPrivateScalar=function(e,t,r=!1){let n=(e=(0,i.ensureBytes)("privateHash",e)).length,s=x(t).nByteLength+8;if(s<24||n<s||n>1024)throw Error("hashToPrivateScalar: expected "+s+"-1024 bytes of input, got "+n);return l(r?(0,i.bytesToNumberLE)(e):(0,i.bytesToNumberBE)(e),t-o)+o},e.exports.getFieldBytesLength=_,e.exports.getMinHashLength=S,e.exports.mapHashToField=function(e,t,r=!1){let n=e.length,s=_(t),a=S(t);if(n<16||n<a||n>1024)throw Error("expected "+a+"-1024 bytes of input, got "+n);let h=l(r?(0,i.bytesToNumberLE)(e):(0,i.bytesToNumberBE)(e),t-o)+o;return r?(0,i.numberToBytesLE)(h,s):(0,i.numberToBytesBE)(h,s)};var r=s("cLJKR"),i=s("5l7pf");let n=BigInt(0),o=BigInt(1),a=BigInt(2),h=BigInt(3),u=BigInt(4),f=BigInt(5),c=BigInt(8);function l(e,t){let r=e%t;return r>=n?r:t+r}function d(e,t){if(e===n)throw Error("invert: expected non-zero number");if(t<=n)throw Error("invert: expected positive modulus, got "+t);let r=l(e,t),i=t,s=n,a=o,h=o,u=n;for(;r!==n;){let e=i/r,t=i%r,n=s-h*e,o=a-u*e;i=r,r=t,s=h,a=u,h=n,u=o}if(i!==o)throw Error("invert: does not exist");return l(s,t)}function p(e,t){let r=(e.ORDER+o)/u,i=e.pow(t,r);if(!e.eql(e.sqr(i),t))throw Error("Cannot find square root");return i}function g(e,t){let r=(e.ORDER-f)/c,i=e.mul(t,a),n=e.pow(i,r),s=e.mul(t,n),o=e.mul(e.mul(s,a),n),h=e.mul(s,e.sub(o,e.ONE));if(!e.eql(e.sqr(h),t))throw Error("Cannot find square root");return h}function b(e){if(e<BigInt(3))throw Error("sqrt is not defined for small field");let t=e-o,r=0;for(;t%a===n;)t/=a,r++;let i=a,s=E(e);for(;1===D(s,i);)if(i++>1e3)throw Error("Cannot find square root: probably non-prime P");if(1===r)return p;let h=s.pow(i,t),u=(t+o)/a;return function(e,i){if(e.is0(i))return i;if(1!==D(e,i))throw Error("Cannot find square root");let n=r,s=e.mul(e.ONE,h),a=e.pow(i,t),f=e.pow(i,u);for(;!e.eql(a,e.ONE);){if(e.is0(a))return e.ZERO;let t=1,r=e.sqr(a);for(;!e.eql(r,e.ONE);)if(t++,r=e.sqr(r),t===n)throw Error("Cannot find square root");let i=o<<BigInt(n-t-1),h=e.pow(s,i);n=t,s=e.sqr(h),a=e.mul(a,s),f=e.mul(f,h)}return f}}function y(e){return e%u===h?p:e%c===f?g:b(e)}e.exports.isNegativeLE=(e,t)=>(l(e,t)&o)===o;let m=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function v(e,t,r){if(r<n)throw Error("invalid exponent, negatives unsupported");if(r===n)return e.ONE;if(r===o)return t;let i=e.ONE,s=t;for(;r>n;)r&o&&(i=e.mul(i,s)),s=e.sqr(s),r>>=o;return i}function w(e,t,r=!1){let i=Array(t.length).fill(r?e.ZERO:void 0),n=t.reduce((t,r,n)=>e.is0(r)?t:(i[n]=t,e.mul(t,r)),e.ONE),s=e.inv(n);return t.reduceRight((t,r,n)=>e.is0(r)?t:(i[n]=e.mul(t,i[n]),e.mul(t,r)),s),i}function D(e,t){let r=(e.ORDER-o)/a,i=e.pow(t,r),n=e.eql(i,e.ONE),s=e.eql(i,e.ZERO),h=e.eql(i,e.neg(e.ONE));if(!n&&!s&&!h)throw Error("invalid Legendre symbol result");return n?1:s?0:-1}function x(e,t){void 0!==t&&(0,r.anumber)(t);let i=void 0!==t?t:e.toString(2).length,n=Math.ceil(i/8);return{nBitLength:i,nByteLength:n}}function E(e,t,r=!1,s={}){let a;if(e<=n)throw Error("invalid field: expected ORDER > 0, got "+e);let{nBitLength:h,nByteLength:u}=x(e,t);if(u>2048)throw Error("invalid field: expected ORDER of <= 2048 bytes");let f=Object.freeze({ORDER:e,isLE:r,BITS:h,BYTES:u,MASK:(0,i.bitMask)(h),ZERO:n,ONE:o,create:t=>l(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error("invalid field element: expected bigint, got "+typeof t);return n<=t&&t<e},is0:e=>e===n,isOdd:e=>(e&o)===o,neg:t=>l(-t,e),eql:(e,t)=>e===t,sqr:t=>l(t*t,e),add:(t,r)=>l(t+r,e),sub:(t,r)=>l(t-r,e),mul:(t,r)=>l(t*r,e),pow:(e,t)=>v(f,e,t),div:(t,r)=>l(t*d(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>d(t,e),sqrt:s.sqrt||(t=>(a||(a=y(e)),a(f,t))),toBytes:e=>r?(0,i.numberToBytesLE)(e,u):(0,i.numberToBytesBE)(e,u),fromBytes:e=>{if(e.length!==u)throw Error("Field.fromBytes: expected "+u+" bytes, got "+e.length);return r?(0,i.bytesToNumberLE)(e):(0,i.bytesToNumberBE)(e)},invertBatch:e=>w(f,e),cmov:(e,t,r)=>r?t:e});return Object.freeze(f)}function _(e){if("bigint"!=typeof e)throw Error("field order must be bigint");return Math.ceil(e.toString(2).length/8)}function S(e){let t=_(e);return t+Math.ceil(t/2)}}),o("cLJKR",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.wrapXOFConstructorWithOpts=e.exports.wrapConstructorWithOpts=e.exports.wrapConstructor=e.exports.Hash=e.exports.nextTick=e.exports.swap32IfBE=e.exports.byteSwapIfBE=e.exports.swap8IfBE=e.exports.isLE=void 0,e.exports.isBytes=i,e.exports.anumber=n,e.exports.abytes=o,e.exports.ahash=function(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.createHasher");n(e.outputLen),n(e.blockLen)},e.exports.aexists=function(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")},e.exports.aoutput=function(e,t){o(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)},e.exports.u8=function(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)},e.exports.u32=function(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))},e.exports.clean=function(...e){for(let t=0;t<e.length;t++)e[t].fill(0)},e.exports.createView=function(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)},e.exports.rotr=function(e,t){return e<<32-t|e>>>t},e.exports.rotl=function(e,t){return e<<t|e>>>32-t>>>0},e.exports.byteSwap=a,e.exports.byteSwap32=h,e.exports.bytesToHex=function(e){if(o(e),u)return e.toHex();let t="";for(let r=0;r<e.length;r++)t+=f[e[r]];return t},e.exports.hexToBytes=function(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);if(u)return Uint8Array.fromHex(e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let i=new Uint8Array(r);for(let t=0,n=0;t<r;t++,n+=2){let r=c(e.charCodeAt(n)),s=c(e.charCodeAt(n+1));if(void 0===r||void 0===s)throw Error('hex string expected, got non-hex character "'+(e[n]+e[n+1])+'" at index '+n);i[t]=16*r+s}return i},e.exports.asyncLoop=d,e.exports.utf8ToBytes=p,e.exports.bytesToUtf8=function(e){return new TextDecoder().decode(e)},e.exports.toBytes=g,e.exports.kdfInputToBytes=function(e){return"string"==typeof e&&(e=p(e)),o(e),e},e.exports.concatBytes=function(...e){let t=0;for(let r=0;r<e.length;r++){let i=e[r];o(i),t+=i.length}let r=new Uint8Array(t);for(let t=0,i=0;t<e.length;t++){let n=e[t];r.set(n,i),i+=n.length}return r},e.exports.checkOpts=function(e,t){if(void 0!==t&&"[object Object]"!==({}).toString.call(t))throw Error("options should be object or undefined");return Object.assign(e,t)},e.exports.createHasher=b,e.exports.createOptHasher=y,e.exports.createXOFer=m,e.exports.randomBytes=function(e=32){if(r.crypto&&"function"==typeof r.crypto.getRandomValues)return r.crypto.getRandomValues(new Uint8Array(e));if(r.crypto&&"function"==typeof r.crypto.randomBytes)return Uint8Array.from(r.crypto.randomBytes(e));throw Error("crypto.getRandomValues must be defined")};var r=s("eW4mz");function i(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function n(e){if(!Number.isSafeInteger(e)||e<0)throw Error("positive integer expected, got "+e)}function o(e,...t){if(!i(e))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function a(e){return e<<24&0xff000000|e<<8&0xff0000|e>>>8&65280|e>>>24&255}function h(e){for(let t=0;t<e.length;t++)e[t]=a(e[t]);return e}e.exports.isLE=68===new Uint8Array(new Uint32Array([0x11223344]).buffer)[0],e.exports.swap8IfBE=e.exports.isLE?e=>e:e=>a(e),e.exports.byteSwapIfBE=e.exports.swap8IfBE,e.exports.swap32IfBE=e.exports.isLE?e=>e:h;let u="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex,f=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function c(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:void 0}let l=async()=>{};async function d(t,r,i){let n=Date.now();for(let s=0;s<t;s++){i(s);let t=Date.now()-n;t>=0&&t<r||(await (0,e.exports.nextTick)(),n+=t)}}function p(e){if("string"!=typeof e)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function g(e){return"string"==typeof e&&(e=p(e)),o(e),e}function b(e){let t=t=>e().update(g(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function y(e){let t=(t,r)=>e(r).update(g(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t}function m(e){let t=(t,r)=>e(r).update(g(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t}e.exports.nextTick=l,e.exports.Hash=class{},e.exports.wrapConstructor=b,e.exports.wrapConstructorWithOpts=y,e.exports.wrapXOFConstructorWithOpts=m}),o("eW4mz",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.crypto=void 0,e.exports.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0}),o("5l7pf",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.notImplemented=e.exports.bitMask=void 0,e.exports.isBytes=n,e.exports.abytes=s,e.exports.abool=function(e,t){if("boolean"!=typeof t)throw Error(e+" boolean expected, got "+t)},e.exports.numberToHexUnpadded=o,e.exports.hexToNumber=a,e.exports.bytesToHex=f,e.exports.hexToBytes=l,e.exports.bytesToNumberBE=function(e){return a(f(e))},e.exports.bytesToNumberLE=function(e){return s(e),a(f(Uint8Array.from(e).reverse()))},e.exports.numberToBytesBE=d,e.exports.numberToBytesLE=function(e,t){return d(e,t).reverse()},e.exports.numberToVarBytesBE=function(e){return l(o(e))},e.exports.ensureBytes=function(e,t,r){let i;if("string"==typeof t)try{i=l(t)}catch(t){throw Error(e+" must be hex string or Uint8Array, cause: "+t)}else if(n(t))i=Uint8Array.from(t);else throw Error(e+" must be hex string or Uint8Array");let s=i.length;if("number"==typeof r&&s!==r)throw Error(e+" of length "+r+" expected, got "+s);return i},e.exports.concatBytes=p,e.exports.equalBytes=function(e,t){if(e.length!==t.length)return!1;let r=0;for(let i=0;i<e.length;i++)r|=e[i]^t[i];return 0===r},e.exports.utf8ToBytes=function(e){if("string"!=typeof e)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(e))},e.exports.inRange=b,e.exports.aInRange=function(e,t,r,i){if(!b(t,r,i))throw Error("expected valid "+e+": "+r+" <= n < "+i+", got "+t)},e.exports.bitLen=function(e){let t;for(t=0;e>r;e>>=i,t+=1);return t},e.exports.bitGet=function(e,t){return e>>BigInt(t)&i},e.exports.bitSet=function(e,t,n){return e|(n?i:r)<<BigInt(t)},e.exports.createHmacDrbg=function(e,t,r){if("number"!=typeof e||e<2)throw Error("hashLen must be a number");if("number"!=typeof t||t<2)throw Error("qByteLen must be a number");if("function"!=typeof r)throw Error("hmacFn must be a function");let i=y(e),n=y(e),s=0,o=()=>{i.fill(1),n.fill(0),s=0},a=(...e)=>r(n,i,...e),h=(e=y(0))=>{n=a(m([0]),e),i=a(),0!==e.length&&(n=a(m([1]),e),i=a())},u=()=>{if(s++>=1e3)throw Error("drbg: tried 1000 values");let e=0,r=[];for(;e<t;){let t=(i=a()).slice();r.push(t),e+=i.length}return p(...r)};return(e,t)=>{let r;for(o(),h(e);!(r=t(u()));)h();return o(),r}},e.exports.validateObject=function(e,t,r={}){let i=(t,r,i)=>{let n=v[r];if("function"!=typeof n)throw Error("invalid validator function");let s=e[t];if((!i||void 0!==s)&&!n(s,e))throw Error("param "+String(t)+" is invalid. Expected "+r+", got "+s)};for(let[e,r]of Object.entries(t))i(e,r,!1);for(let[e,t]of Object.entries(r))i(e,t,!0);return e},e.exports.memoized=function(e){let t=new WeakMap;return(r,...i)=>{let n=t.get(r);if(void 0!==n)return n;let s=e(r,...i);return t.set(r,s),s}};let r=BigInt(0),i=BigInt(1);function n(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function s(e){if(!n(e))throw Error("Uint8Array expected")}function o(e){let t=e.toString(16);return 1&t.length?"0"+t:t}function a(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return""===e?r:BigInt("0x"+e)}let h="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex,u=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function f(e){if(s(e),h)return e.toHex();let t="";for(let r=0;r<e.length;r++)t+=u[e[r]];return t}function c(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:void 0}function l(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);if(h)return Uint8Array.fromHex(e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let i=new Uint8Array(r);for(let t=0,n=0;t<r;t++,n+=2){let r=c(e.charCodeAt(n)),s=c(e.charCodeAt(n+1));if(void 0===r||void 0===s)throw Error('hex string expected, got non-hex character "'+(e[n]+e[n+1])+'" at index '+n);i[t]=16*r+s}return i}function d(e,t){return l(e.toString(16).padStart(2*t,"0"))}function p(...e){let t=0;for(let r=0;r<e.length;r++){let i=e[r];s(i),t+=i.length}let r=new Uint8Array(t);for(let t=0,i=0;t<e.length;t++){let n=e[t];r.set(n,i),i+=n.length}return r}let g=e=>"bigint"==typeof e&&r<=e;function b(e,t,r){return g(e)&&g(t)&&g(r)&&t<=e&&e<r}e.exports.bitMask=e=>(i<<BigInt(e))-i;let y=e=>new Uint8Array(e),m=e=>Uint8Array.from(e),v={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||n(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};e.exports.notImplemented=()=>{throw Error("not implemented")}}),o("ljFVp",function(e,r){function i(){return(null==t?void 0:t.crypto)||(null==t?void 0:t.msCrypto)||{}}function n(){let e=i();return e.subtle||e.webkitSubtle}Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.isBrowserCryptoAvailable=e.exports.getSubtleCrypto=e.exports.getBrowerCrypto=void 0,e.exports.getBrowerCrypto=i,e.exports.getSubtleCrypto=n,e.exports.isBrowserCryptoAvailable=function(){return!!i()&&!!n()}}),o("5vmD7",function(e,t){function r(){return"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product}Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.isBrowser=e.exports.isNode=e.exports.isReactNative=void 0,e.exports.isReactNative=r,e.exports.isNode=function(){return!1},e.exports.isBrowser=function(){return!r()}}),o("fvaAM",function(e,t){e.exports=function(){throw Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}}),o("dEXSZ",function(e,t){!function(e,t){function r(e,t){if(!e)throw Error(t||"Assertion failed")}function i(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function n(e,t,r){if(n.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&(("le"===t||"be"===t)&&(r=t,t=10),this._init(e||0,t||10,r||"be"))}"object"==typeof e?e.exports=n:t.BN=n,n.BN=n,n.wordSize=26;try{c="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:s("kjyEk").Buffer}catch(e){}function o(e,t){var i=e.charCodeAt(t);return i>=48&&i<=57?i-48:i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:void r(!1,"Invalid character in "+e)}function a(e,t,r){var i=o(e,r);return r-1>=t&&(i|=o(e,r-1)<<4),i}function h(e,t,i,n){for(var s=0,o=0,a=Math.min(e.length,i),h=t;h<a;h++){var u=e.charCodeAt(h)-48;s*=n,o=u>=49?u-49+10:u>=17?u-17+10:u,r(u>=0&&o<n,"Invalid character"),s+=o}return s}function u(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}if(n.isBN=function(e){return e instanceof n||null!==e&&"object"==typeof e&&e.constructor.wordSize===n.wordSize&&Array.isArray(e.words)},n.max=function(e,t){return e.cmp(t)>0?e:t},n.min=function(e,t){return 0>e.cmp(t)?e:t},n.prototype._init=function(e,t,i){if("number"==typeof e)return this._initNumber(e,t,i);if("object"==typeof e)return this._initArray(e,t,i);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var n=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(n++,this.negative=1),n<e.length&&(16===t?this._parseHex(e,n,i):(this._parseBase(e,t,n),"le"===i&&this._initArray(this.toArray(),t,i)))},n.prototype._initNumber=function(e,t,i){e<0&&(this.negative=1,e=-e),e<0x4000000?(this.words=[0x3ffffff&e],this.length=1):e<0x10000000000000?(this.words=[0x3ffffff&e,e/0x4000000&0x3ffffff],this.length=2):(r(e<0x20000000000000),this.words=[0x3ffffff&e,e/0x4000000&0x3ffffff,1],this.length=3),"le"===i&&this._initArray(this.toArray(),t,i)},n.prototype._initArray=function(e,t,i){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=Array(this.length);for(var n,s,o=0;o<this.length;o++)this.words[o]=0;var a=0;if("be"===i)for(o=e.length-1,n=0;o>=0;o-=3)s=e[o]|e[o-1]<<8|e[o-2]<<16,this.words[n]|=s<<a&0x3ffffff,this.words[n+1]=s>>>26-a&0x3ffffff,(a+=24)>=26&&(a-=26,n++);else if("le"===i)for(o=0,n=0;o<e.length;o+=3)s=e[o]|e[o+1]<<8|e[o+2]<<16,this.words[n]|=s<<a&0x3ffffff,this.words[n+1]=s>>>26-a&0x3ffffff,(a+=24)>=26&&(a-=26,n++);return this._strip()},n.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=Array(this.length);for(var i,n=0;n<this.length;n++)this.words[n]=0;var s=0,o=0;if("be"===r)for(n=e.length-1;n>=t;n-=2)i=a(e,t,n)<<s,this.words[o]|=0x3ffffff&i,s>=18?(s-=18,o+=1,this.words[o]|=i>>>26):s+=8;else for(n=(e.length-t)%2==0?t+1:t;n<e.length;n+=2)i=a(e,t,n)<<s,this.words[o]|=0x3ffffff&i,s>=18?(s-=18,o+=1,this.words[o]|=i>>>26):s+=8;this._strip()},n.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var i=0,n=1;n<=0x3ffffff;n*=t)i++;i--,n=n/t|0;for(var s=e.length-r,o=s%i,a=Math.min(s,s-o)+r,u=0,f=r;f<a;f+=i)u=h(e,f,f+i,t),this.imuln(n),this.words[0]+u<0x4000000?this.words[0]+=u:this._iaddn(u);if(0!==o){var c=1;for(u=h(e,f,e.length,t),f=0;f<o;f++)c*=t;this.imuln(c),this.words[0]+u<0x4000000?this.words[0]+=u:this._iaddn(u)}this._strip()},n.prototype.copy=function(e){e.words=Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},n.prototype._move=function(e){u(e,this)},n.prototype.clone=function(){var e=new n(null);return this.copy(e),e},n.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},n.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},n.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{n.prototype[Symbol.for("nodejs.util.inspect.custom")]=f}catch(e){n.prototype.inspect=f}else n.prototype.inspect=f;function f(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var c,l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,0x2000000,0x290d741,0x1000000,0x2e90edd,0x39aa400,0x267bf47,0x1000000,0x290d741,1e7,0x12959c3,0x222c000,0x3bd7765,7529536,0xadcea1,0x1000000,0x1704f61,0x206fc40,0x2cddcf9,64e6,4084101,5153632,6436343,7962624,9765625,0xb54ba0,0xdaf26b,0x1069c00,0x138f9ad,243e5,0x1b4d89f,0x2000000,0x25528a1,0x2b54a20,0x3216b93,0x39aa400];function g(e,t,r){r.negative=t.negative^e.negative;var i=e.length+t.length|0;r.length=i,i=i-1|0;var n=0|e.words[0],s=0|t.words[0],o=n*s,a=0x3ffffff&o,h=o/0x4000000|0;r.words[0]=a;for(var u=1;u<i;u++){for(var f=h>>>26,c=0x3ffffff&h,l=Math.min(u,t.length-1),d=Math.max(0,u-e.length+1);d<=l;d++){var p=u-d|0;f+=(o=(n=0|e.words[p])*(s=0|t.words[d])+c)/0x4000000|0,c=0x3ffffff&o}r.words[u]=0|c,h=0|f}return 0!==h?r.words[u]=0|h:r.length--,r._strip()}n.prototype.toString=function(e,t){if(t=0|t||1,16===(e=e||10)||"hex"===e){for(var i="",n=0,s=0,o=0;o<this.length;o++){var a=this.words[o],h=((a<<n|s)&0xffffff).toString(16);s=a>>>24-n&0xffffff,(n+=2)>=26&&(n-=26,o--),i=0!==s||o!==this.length-1?l[6-h.length]+h+i:h+i}for(0!==s&&(i=s.toString(16)+i);i.length%t!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(e===(0|e)&&e>=2&&e<=36){var u=d[e],f=p[e];i="";var c=this.clone();for(c.negative=0;!c.isZero();){var g=c.modrn(f).toString(e);i=(c=c.idivn(f)).isZero()?g+i:l[u-g.length]+g+i}for(this.isZero()&&(i="0"+i);i.length%t!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}r(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=0x4000000*this.words[1]:3===this.length&&1===this.words[2]?e+=0x10000000000000+0x4000000*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},n.prototype.toJSON=function(){return this.toString(16,2)},c&&(n.prototype.toBuffer=function(e,t){return this.toArrayLike(c,e,t)}),n.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},n.prototype.toArrayLike=function(e,t,i){this._strip();var n=this.byteLength(),s=i||Math.max(1,n);r(n<=s,"byte array longer than desired length"),r(s>0,"Requested array length <= 0");var o=e.allocUnsafe?e.allocUnsafe(s):new e(s);return this["_toArrayLike"+("le"===t?"LE":"BE")](o,n),o},n.prototype._toArrayLikeLE=function(e,t){for(var r=0,i=0,n=0,s=0;n<this.length;n++){var o=this.words[n]<<s|i;e[r++]=255&o,r<e.length&&(e[r++]=o>>8&255),r<e.length&&(e[r++]=o>>16&255),6===s?(r<e.length&&(e[r++]=o>>24&255),i=0,s=0):(i=o>>>24,s+=2)}if(r<e.length)for(e[r++]=i;r<e.length;)e[r++]=0},n.prototype._toArrayLikeBE=function(e,t){for(var r=e.length-1,i=0,n=0,s=0;n<this.length;n++){var o=this.words[n]<<s|i;e[r--]=255&o,r>=0&&(e[r--]=o>>8&255),r>=0&&(e[r--]=o>>16&255),6===s?(r>=0&&(e[r--]=o>>24&255),i=0,s=0):(i=o>>>24,s+=2)}if(r>=0)for(e[r--]=i;r>=0;)e[r--]=0},Math.clz32?n.prototype._countBits=function(e){return 32-Math.clz32(e)}:n.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},n.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return(8191&t)==0&&(r+=13,t>>>=13),(127&t)==0&&(r+=7,t>>>=7),(15&t)==0&&(r+=4,t>>>=4),(3&t)==0&&(r+=2,t>>>=2),(1&t)==0&&r++,r},n.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return(this.length-1)*26+t},n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},n.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return 0!==this.negative},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},n.prototype.ior=function(e){return r((this.negative|e.negative)==0),this.iuor(e)},n.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},n.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},n.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this._strip()},n.prototype.iand=function(e){return r((this.negative|e.negative)==0),this.iuand(e)},n.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},n.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},n.prototype.iuxor=function(e){this.length>e.length?(t=this,r=e):(t=e,r=this);for(var t,r,i=0;i<r.length;i++)this.words[i]=t.words[i]^r.words[i];if(this!==t)for(;i<t.length;i++)this.words[i]=t.words[i];return this.length=t.length,this._strip()},n.prototype.ixor=function(e){return r((this.negative|e.negative)==0),this.iuxor(e)},n.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},n.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},n.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),i=e%26;this._expand(t),i>0&&t--;for(var n=0;n<t;n++)this.words[n]=0x3ffffff&~this.words[n];return i>0&&(this.words[n]=~this.words[n]&0x3ffffff>>26-i),this._strip()},n.prototype.notn=function(e){return this.clone().inotn(e)},n.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var i=e/26|0,n=e%26;return this._expand(i+1),t?this.words[i]=this.words[i]|1<<n:this.words[i]=this.words[i]&~(1<<n),this._strip()},n.prototype.iadd=function(e){if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,i=e):(r=e,i=this);for(var t,r,i,n=0,s=0;s<i.length;s++)t=(0|r.words[s])+(0|i.words[s])+n,this.words[s]=0x3ffffff&t,n=t>>>26;for(;0!==n&&s<r.length;s++)t=(0|r.words[s])+n,this.words[s]=0x3ffffff&t,n=t>>>26;if(this.length=r.length,0!==n)this.words[this.length]=n,this.length++;else if(r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this},n.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},n.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t,r,i=this.iadd(e);return e.negative=1,i._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var n=this.cmp(e);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(t=this,r=e):(t=e,r=this);for(var s=0,o=0;o<r.length;o++)s=(i=(0|t.words[o])-(0|r.words[o])+s)>>26,this.words[o]=0x3ffffff&i;for(;0!==s&&o<t.length;o++)s=(i=(0|t.words[o])+s)>>26,this.words[o]=0x3ffffff&i;if(0===s&&o<t.length&&t!==this)for(;o<t.length;o++)this.words[o]=t.words[o];return this.length=Math.max(this.length,o),t!==this&&(this.negative=1),this._strip()},n.prototype.sub=function(e){return this.clone().isub(e)};var b=function(e,t,r){var i,n,s,o=e.words,a=t.words,h=r.words,u=0,f=0|o[0],c=8191&f,l=f>>>13,d=0|o[1],p=8191&d,g=d>>>13,b=0|o[2],y=8191&b,m=b>>>13,v=0|o[3],w=8191&v,D=v>>>13,x=0|o[4],E=8191&x,_=x>>>13,S=0|o[5],I=8191&S,A=S>>>13,M=0|o[6],C=8191&M,O=M>>>13,P=0|o[7],R=8191&P,T=P>>>13,N=0|o[8],B=8191&N,L=N>>>13,k=0|o[9],U=8191&k,z=k>>>13,j=0|a[0],q=8191&j,F=j>>>13,H=0|a[1],K=8191&H,$=H>>>13,V=0|a[2],W=8191&V,G=V>>>13,Y=0|a[3],Z=8191&Y,J=Y>>>13,X=0|a[4],Q=8191&X,ee=X>>>13,et=0|a[5],er=8191&et,ei=et>>>13,en=0|a[6],es=8191&en,eo=en>>>13,ea=0|a[7],eh=8191&ea,eu=ea>>>13,ef=0|a[8],ec=8191&ef,el=ef>>>13,ed=0|a[9],ep=8191&ed,eg=ed>>>13;r.negative=e.negative^t.negative,r.length=19,i=Math.imul(c,q);var eb=(u+i|0)+((8191&(n=(n=Math.imul(c,F))+Math.imul(l,q)|0))<<13)|0;u=((s=Math.imul(l,F))+(n>>>13)|0)+(eb>>>26)|0,eb&=0x3ffffff,i=Math.imul(p,q),n=(n=Math.imul(p,F))+Math.imul(g,q)|0,s=Math.imul(g,F),i=i+Math.imul(c,K)|0;var ey=(u+i|0)+((8191&(n=(n=n+Math.imul(c,$)|0)+Math.imul(l,K)|0))<<13)|0;u=((s=s+Math.imul(l,$)|0)+(n>>>13)|0)+(ey>>>26)|0,ey&=0x3ffffff,i=Math.imul(y,q),n=(n=Math.imul(y,F))+Math.imul(m,q)|0,s=Math.imul(m,F),i=i+Math.imul(p,K)|0,n=(n=n+Math.imul(p,$)|0)+Math.imul(g,K)|0,s=s+Math.imul(g,$)|0,i=i+Math.imul(c,W)|0;var em=(u+i|0)+((8191&(n=(n=n+Math.imul(c,G)|0)+Math.imul(l,W)|0))<<13)|0;u=((s=s+Math.imul(l,G)|0)+(n>>>13)|0)+(em>>>26)|0,em&=0x3ffffff,i=Math.imul(w,q),n=(n=Math.imul(w,F))+Math.imul(D,q)|0,s=Math.imul(D,F),i=i+Math.imul(y,K)|0,n=(n=n+Math.imul(y,$)|0)+Math.imul(m,K)|0,s=s+Math.imul(m,$)|0,i=i+Math.imul(p,W)|0,n=(n=n+Math.imul(p,G)|0)+Math.imul(g,W)|0,s=s+Math.imul(g,G)|0,i=i+Math.imul(c,Z)|0;var ev=(u+i|0)+((8191&(n=(n=n+Math.imul(c,J)|0)+Math.imul(l,Z)|0))<<13)|0;u=((s=s+Math.imul(l,J)|0)+(n>>>13)|0)+(ev>>>26)|0,ev&=0x3ffffff,i=Math.imul(E,q),n=(n=Math.imul(E,F))+Math.imul(_,q)|0,s=Math.imul(_,F),i=i+Math.imul(w,K)|0,n=(n=n+Math.imul(w,$)|0)+Math.imul(D,K)|0,s=s+Math.imul(D,$)|0,i=i+Math.imul(y,W)|0,n=(n=n+Math.imul(y,G)|0)+Math.imul(m,W)|0,s=s+Math.imul(m,G)|0,i=i+Math.imul(p,Z)|0,n=(n=n+Math.imul(p,J)|0)+Math.imul(g,Z)|0,s=s+Math.imul(g,J)|0,i=i+Math.imul(c,Q)|0;var ew=(u+i|0)+((8191&(n=(n=n+Math.imul(c,ee)|0)+Math.imul(l,Q)|0))<<13)|0;u=((s=s+Math.imul(l,ee)|0)+(n>>>13)|0)+(ew>>>26)|0,ew&=0x3ffffff,i=Math.imul(I,q),n=(n=Math.imul(I,F))+Math.imul(A,q)|0,s=Math.imul(A,F),i=i+Math.imul(E,K)|0,n=(n=n+Math.imul(E,$)|0)+Math.imul(_,K)|0,s=s+Math.imul(_,$)|0,i=i+Math.imul(w,W)|0,n=(n=n+Math.imul(w,G)|0)+Math.imul(D,W)|0,s=s+Math.imul(D,G)|0,i=i+Math.imul(y,Z)|0,n=(n=n+Math.imul(y,J)|0)+Math.imul(m,Z)|0,s=s+Math.imul(m,J)|0,i=i+Math.imul(p,Q)|0,n=(n=n+Math.imul(p,ee)|0)+Math.imul(g,Q)|0,s=s+Math.imul(g,ee)|0,i=i+Math.imul(c,er)|0;var eD=(u+i|0)+((8191&(n=(n=n+Math.imul(c,ei)|0)+Math.imul(l,er)|0))<<13)|0;u=((s=s+Math.imul(l,ei)|0)+(n>>>13)|0)+(eD>>>26)|0,eD&=0x3ffffff,i=Math.imul(C,q),n=(n=Math.imul(C,F))+Math.imul(O,q)|0,s=Math.imul(O,F),i=i+Math.imul(I,K)|0,n=(n=n+Math.imul(I,$)|0)+Math.imul(A,K)|0,s=s+Math.imul(A,$)|0,i=i+Math.imul(E,W)|0,n=(n=n+Math.imul(E,G)|0)+Math.imul(_,W)|0,s=s+Math.imul(_,G)|0,i=i+Math.imul(w,Z)|0,n=(n=n+Math.imul(w,J)|0)+Math.imul(D,Z)|0,s=s+Math.imul(D,J)|0,i=i+Math.imul(y,Q)|0,n=(n=n+Math.imul(y,ee)|0)+Math.imul(m,Q)|0,s=s+Math.imul(m,ee)|0,i=i+Math.imul(p,er)|0,n=(n=n+Math.imul(p,ei)|0)+Math.imul(g,er)|0,s=s+Math.imul(g,ei)|0,i=i+Math.imul(c,es)|0;var ex=(u+i|0)+((8191&(n=(n=n+Math.imul(c,eo)|0)+Math.imul(l,es)|0))<<13)|0;u=((s=s+Math.imul(l,eo)|0)+(n>>>13)|0)+(ex>>>26)|0,ex&=0x3ffffff,i=Math.imul(R,q),n=(n=Math.imul(R,F))+Math.imul(T,q)|0,s=Math.imul(T,F),i=i+Math.imul(C,K)|0,n=(n=n+Math.imul(C,$)|0)+Math.imul(O,K)|0,s=s+Math.imul(O,$)|0,i=i+Math.imul(I,W)|0,n=(n=n+Math.imul(I,G)|0)+Math.imul(A,W)|0,s=s+Math.imul(A,G)|0,i=i+Math.imul(E,Z)|0,n=(n=n+Math.imul(E,J)|0)+Math.imul(_,Z)|0,s=s+Math.imul(_,J)|0,i=i+Math.imul(w,Q)|0,n=(n=n+Math.imul(w,ee)|0)+Math.imul(D,Q)|0,s=s+Math.imul(D,ee)|0,i=i+Math.imul(y,er)|0,n=(n=n+Math.imul(y,ei)|0)+Math.imul(m,er)|0,s=s+Math.imul(m,ei)|0,i=i+Math.imul(p,es)|0,n=(n=n+Math.imul(p,eo)|0)+Math.imul(g,es)|0,s=s+Math.imul(g,eo)|0,i=i+Math.imul(c,eh)|0;var eE=(u+i|0)+((8191&(n=(n=n+Math.imul(c,eu)|0)+Math.imul(l,eh)|0))<<13)|0;u=((s=s+Math.imul(l,eu)|0)+(n>>>13)|0)+(eE>>>26)|0,eE&=0x3ffffff,i=Math.imul(B,q),n=(n=Math.imul(B,F))+Math.imul(L,q)|0,s=Math.imul(L,F),i=i+Math.imul(R,K)|0,n=(n=n+Math.imul(R,$)|0)+Math.imul(T,K)|0,s=s+Math.imul(T,$)|0,i=i+Math.imul(C,W)|0,n=(n=n+Math.imul(C,G)|0)+Math.imul(O,W)|0,s=s+Math.imul(O,G)|0,i=i+Math.imul(I,Z)|0,n=(n=n+Math.imul(I,J)|0)+Math.imul(A,Z)|0,s=s+Math.imul(A,J)|0,i=i+Math.imul(E,Q)|0,n=(n=n+Math.imul(E,ee)|0)+Math.imul(_,Q)|0,s=s+Math.imul(_,ee)|0,i=i+Math.imul(w,er)|0,n=(n=n+Math.imul(w,ei)|0)+Math.imul(D,er)|0,s=s+Math.imul(D,ei)|0,i=i+Math.imul(y,es)|0,n=(n=n+Math.imul(y,eo)|0)+Math.imul(m,es)|0,s=s+Math.imul(m,eo)|0,i=i+Math.imul(p,eh)|0,n=(n=n+Math.imul(p,eu)|0)+Math.imul(g,eh)|0,s=s+Math.imul(g,eu)|0,i=i+Math.imul(c,ec)|0;var e_=(u+i|0)+((8191&(n=(n=n+Math.imul(c,el)|0)+Math.imul(l,ec)|0))<<13)|0;u=((s=s+Math.imul(l,el)|0)+(n>>>13)|0)+(e_>>>26)|0,e_&=0x3ffffff,i=Math.imul(U,q),n=(n=Math.imul(U,F))+Math.imul(z,q)|0,s=Math.imul(z,F),i=i+Math.imul(B,K)|0,n=(n=n+Math.imul(B,$)|0)+Math.imul(L,K)|0,s=s+Math.imul(L,$)|0,i=i+Math.imul(R,W)|0,n=(n=n+Math.imul(R,G)|0)+Math.imul(T,W)|0,s=s+Math.imul(T,G)|0,i=i+Math.imul(C,Z)|0,n=(n=n+Math.imul(C,J)|0)+Math.imul(O,Z)|0,s=s+Math.imul(O,J)|0,i=i+Math.imul(I,Q)|0,n=(n=n+Math.imul(I,ee)|0)+Math.imul(A,Q)|0,s=s+Math.imul(A,ee)|0,i=i+Math.imul(E,er)|0,n=(n=n+Math.imul(E,ei)|0)+Math.imul(_,er)|0,s=s+Math.imul(_,ei)|0,i=i+Math.imul(w,es)|0,n=(n=n+Math.imul(w,eo)|0)+Math.imul(D,es)|0,s=s+Math.imul(D,eo)|0,i=i+Math.imul(y,eh)|0,n=(n=n+Math.imul(y,eu)|0)+Math.imul(m,eh)|0,s=s+Math.imul(m,eu)|0,i=i+Math.imul(p,ec)|0,n=(n=n+Math.imul(p,el)|0)+Math.imul(g,ec)|0,s=s+Math.imul(g,el)|0,i=i+Math.imul(c,ep)|0;var eS=(u+i|0)+((8191&(n=(n=n+Math.imul(c,eg)|0)+Math.imul(l,ep)|0))<<13)|0;u=((s=s+Math.imul(l,eg)|0)+(n>>>13)|0)+(eS>>>26)|0,eS&=0x3ffffff,i=Math.imul(U,K),n=(n=Math.imul(U,$))+Math.imul(z,K)|0,s=Math.imul(z,$),i=i+Math.imul(B,W)|0,n=(n=n+Math.imul(B,G)|0)+Math.imul(L,W)|0,s=s+Math.imul(L,G)|0,i=i+Math.imul(R,Z)|0,n=(n=n+Math.imul(R,J)|0)+Math.imul(T,Z)|0,s=s+Math.imul(T,J)|0,i=i+Math.imul(C,Q)|0,n=(n=n+Math.imul(C,ee)|0)+Math.imul(O,Q)|0,s=s+Math.imul(O,ee)|0,i=i+Math.imul(I,er)|0,n=(n=n+Math.imul(I,ei)|0)+Math.imul(A,er)|0,s=s+Math.imul(A,ei)|0,i=i+Math.imul(E,es)|0,n=(n=n+Math.imul(E,eo)|0)+Math.imul(_,es)|0,s=s+Math.imul(_,eo)|0,i=i+Math.imul(w,eh)|0,n=(n=n+Math.imul(w,eu)|0)+Math.imul(D,eh)|0,s=s+Math.imul(D,eu)|0,i=i+Math.imul(y,ec)|0,n=(n=n+Math.imul(y,el)|0)+Math.imul(m,ec)|0,s=s+Math.imul(m,el)|0,i=i+Math.imul(p,ep)|0;var eI=(u+i|0)+((8191&(n=(n=n+Math.imul(p,eg)|0)+Math.imul(g,ep)|0))<<13)|0;u=((s=s+Math.imul(g,eg)|0)+(n>>>13)|0)+(eI>>>26)|0,eI&=0x3ffffff,i=Math.imul(U,W),n=(n=Math.imul(U,G))+Math.imul(z,W)|0,s=Math.imul(z,G),i=i+Math.imul(B,Z)|0,n=(n=n+Math.imul(B,J)|0)+Math.imul(L,Z)|0,s=s+Math.imul(L,J)|0,i=i+Math.imul(R,Q)|0,n=(n=n+Math.imul(R,ee)|0)+Math.imul(T,Q)|0,s=s+Math.imul(T,ee)|0,i=i+Math.imul(C,er)|0,n=(n=n+Math.imul(C,ei)|0)+Math.imul(O,er)|0,s=s+Math.imul(O,ei)|0,i=i+Math.imul(I,es)|0,n=(n=n+Math.imul(I,eo)|0)+Math.imul(A,es)|0,s=s+Math.imul(A,eo)|0,i=i+Math.imul(E,eh)|0,n=(n=n+Math.imul(E,eu)|0)+Math.imul(_,eh)|0,s=s+Math.imul(_,eu)|0,i=i+Math.imul(w,ec)|0,n=(n=n+Math.imul(w,el)|0)+Math.imul(D,ec)|0,s=s+Math.imul(D,el)|0,i=i+Math.imul(y,ep)|0;var eA=(u+i|0)+((8191&(n=(n=n+Math.imul(y,eg)|0)+Math.imul(m,ep)|0))<<13)|0;u=((s=s+Math.imul(m,eg)|0)+(n>>>13)|0)+(eA>>>26)|0,eA&=0x3ffffff,i=Math.imul(U,Z),n=(n=Math.imul(U,J))+Math.imul(z,Z)|0,s=Math.imul(z,J),i=i+Math.imul(B,Q)|0,n=(n=n+Math.imul(B,ee)|0)+Math.imul(L,Q)|0,s=s+Math.imul(L,ee)|0,i=i+Math.imul(R,er)|0,n=(n=n+Math.imul(R,ei)|0)+Math.imul(T,er)|0,s=s+Math.imul(T,ei)|0,i=i+Math.imul(C,es)|0,n=(n=n+Math.imul(C,eo)|0)+Math.imul(O,es)|0,s=s+Math.imul(O,eo)|0,i=i+Math.imul(I,eh)|0,n=(n=n+Math.imul(I,eu)|0)+Math.imul(A,eh)|0,s=s+Math.imul(A,eu)|0,i=i+Math.imul(E,ec)|0,n=(n=n+Math.imul(E,el)|0)+Math.imul(_,ec)|0,s=s+Math.imul(_,el)|0,i=i+Math.imul(w,ep)|0;var eM=(u+i|0)+((8191&(n=(n=n+Math.imul(w,eg)|0)+Math.imul(D,ep)|0))<<13)|0;u=((s=s+Math.imul(D,eg)|0)+(n>>>13)|0)+(eM>>>26)|0,eM&=0x3ffffff,i=Math.imul(U,Q),n=(n=Math.imul(U,ee))+Math.imul(z,Q)|0,s=Math.imul(z,ee),i=i+Math.imul(B,er)|0,n=(n=n+Math.imul(B,ei)|0)+Math.imul(L,er)|0,s=s+Math.imul(L,ei)|0,i=i+Math.imul(R,es)|0,n=(n=n+Math.imul(R,eo)|0)+Math.imul(T,es)|0,s=s+Math.imul(T,eo)|0,i=i+Math.imul(C,eh)|0,n=(n=n+Math.imul(C,eu)|0)+Math.imul(O,eh)|0,s=s+Math.imul(O,eu)|0,i=i+Math.imul(I,ec)|0,n=(n=n+Math.imul(I,el)|0)+Math.imul(A,ec)|0,s=s+Math.imul(A,el)|0,i=i+Math.imul(E,ep)|0;var eC=(u+i|0)+((8191&(n=(n=n+Math.imul(E,eg)|0)+Math.imul(_,ep)|0))<<13)|0;u=((s=s+Math.imul(_,eg)|0)+(n>>>13)|0)+(eC>>>26)|0,eC&=0x3ffffff,i=Math.imul(U,er),n=(n=Math.imul(U,ei))+Math.imul(z,er)|0,s=Math.imul(z,ei),i=i+Math.imul(B,es)|0,n=(n=n+Math.imul(B,eo)|0)+Math.imul(L,es)|0,s=s+Math.imul(L,eo)|0,i=i+Math.imul(R,eh)|0,n=(n=n+Math.imul(R,eu)|0)+Math.imul(T,eh)|0,s=s+Math.imul(T,eu)|0,i=i+Math.imul(C,ec)|0,n=(n=n+Math.imul(C,el)|0)+Math.imul(O,ec)|0,s=s+Math.imul(O,el)|0,i=i+Math.imul(I,ep)|0;var eO=(u+i|0)+((8191&(n=(n=n+Math.imul(I,eg)|0)+Math.imul(A,ep)|0))<<13)|0;u=((s=s+Math.imul(A,eg)|0)+(n>>>13)|0)+(eO>>>26)|0,eO&=0x3ffffff,i=Math.imul(U,es),n=(n=Math.imul(U,eo))+Math.imul(z,es)|0,s=Math.imul(z,eo),i=i+Math.imul(B,eh)|0,n=(n=n+Math.imul(B,eu)|0)+Math.imul(L,eh)|0,s=s+Math.imul(L,eu)|0,i=i+Math.imul(R,ec)|0,n=(n=n+Math.imul(R,el)|0)+Math.imul(T,ec)|0,s=s+Math.imul(T,el)|0,i=i+Math.imul(C,ep)|0;var eP=(u+i|0)+((8191&(n=(n=n+Math.imul(C,eg)|0)+Math.imul(O,ep)|0))<<13)|0;u=((s=s+Math.imul(O,eg)|0)+(n>>>13)|0)+(eP>>>26)|0,eP&=0x3ffffff,i=Math.imul(U,eh),n=(n=Math.imul(U,eu))+Math.imul(z,eh)|0,s=Math.imul(z,eu),i=i+Math.imul(B,ec)|0,n=(n=n+Math.imul(B,el)|0)+Math.imul(L,ec)|0,s=s+Math.imul(L,el)|0,i=i+Math.imul(R,ep)|0;var eR=(u+i|0)+((8191&(n=(n=n+Math.imul(R,eg)|0)+Math.imul(T,ep)|0))<<13)|0;u=((s=s+Math.imul(T,eg)|0)+(n>>>13)|0)+(eR>>>26)|0,eR&=0x3ffffff,i=Math.imul(U,ec),n=(n=Math.imul(U,el))+Math.imul(z,ec)|0,s=Math.imul(z,el),i=i+Math.imul(B,ep)|0;var eT=(u+i|0)+((8191&(n=(n=n+Math.imul(B,eg)|0)+Math.imul(L,ep)|0))<<13)|0;u=((s=s+Math.imul(L,eg)|0)+(n>>>13)|0)+(eT>>>26)|0,eT&=0x3ffffff,i=Math.imul(U,ep);var eN=(u+i|0)+((8191&(n=(n=Math.imul(U,eg))+Math.imul(z,ep)|0))<<13)|0;return u=((s=Math.imul(z,eg))+(n>>>13)|0)+(eN>>>26)|0,eN&=0x3ffffff,h[0]=eb,h[1]=ey,h[2]=em,h[3]=ev,h[4]=ew,h[5]=eD,h[6]=ex,h[7]=eE,h[8]=e_,h[9]=eS,h[10]=eI,h[11]=eA,h[12]=eM,h[13]=eC,h[14]=eO,h[15]=eP,h[16]=eR,h[17]=eT,h[18]=eN,0!==u&&(h[19]=u,r.length++),r};function y(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var i=0,n=0,s=0;s<r.length-1;s++){var o=n;n=0;for(var a=0x3ffffff&i,h=Math.min(s,t.length-1),u=Math.max(0,s-e.length+1);u<=h;u++){var f=s-u,c=(0|e.words[f])*(0|t.words[u]),l=0x3ffffff&c;o=o+(c/0x4000000|0)|0,a=0x3ffffff&(l=l+a|0),n+=(o=o+(l>>>26)|0)>>>26,o&=0x3ffffff}r.words[s]=a,i=o,o=n}return 0!==i?r.words[s]=i:r.length--,r._strip()}function m(e,t){this.x=e,this.y=t}Math.imul||(b=g),n.prototype.mulTo=function(e,t){var r,i=this.length+e.length;return 10===this.length&&10===e.length?r=b(this,e,t):i<63?r=g(this,e,t):r=y(this,e,t),r},m.prototype.makeRBT=function(e){for(var t=Array(e),r=n.prototype._countBits(e)-1,i=0;i<e;i++)t[i]=this.revBin(i,r,e);return t},m.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var i=0,n=0;n<t;n++)i|=(1&e)<<t-n-1,e>>=1;return i},m.prototype.permute=function(e,t,r,i,n,s){for(var o=0;o<s;o++)i[o]=t[e[o]],n[o]=r[e[o]]},m.prototype.transform=function(e,t,r,i,n,s){this.permute(s,e,t,r,i,n);for(var o=1;o<n;o<<=1)for(var a=o<<1,h=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),f=0;f<n;f+=a)for(var c=h,l=u,d=0;d<o;d++){var p=r[f+d],g=i[f+d],b=r[f+d+o],y=i[f+d+o],m=c*b-l*y;y=c*y+l*b,b=m,r[f+d]=p+b,i[f+d]=g+y,r[f+d+o]=p-b,i[f+d+o]=g-y,d!==a&&(m=h*c-u*l,l=h*l+u*c,c=m)}},m.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),i=1&r,n=0;for(r=r/2|0;r;r>>>=1)n++;return 1<<n+1+i},m.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var i=0;i<r/2;i++){var n=e[i];e[i]=e[r-i-1],e[r-i-1]=n,n=t[i],t[i]=-t[r-i-1],t[r-i-1]=-n}},m.prototype.normalize13b=function(e,t){for(var r=0,i=0;i<t/2;i++){var n=8192*Math.round(e[2*i+1]/t)+Math.round(e[2*i]/t)+r;e[i]=0x3ffffff&n,r=n<0x4000000?0:n/0x4000000|0}return e},m.prototype.convert13b=function(e,t,i,n){for(var s=0,o=0;o<t;o++)s+=0|e[o],i[2*o]=8191&s,s>>>=13,i[2*o+1]=8191&s,s>>>=13;for(o=2*t;o<n;++o)i[o]=0;r(0===s),r((-8192&s)==0)},m.prototype.stub=function(e){for(var t=Array(e),r=0;r<e;r++)t[r]=0;return t},m.prototype.mulp=function(e,t,r){var i=2*this.guessLen13b(e.length,t.length),n=this.makeRBT(i),s=this.stub(i),o=Array(i),a=Array(i),h=Array(i),u=Array(i),f=Array(i),c=Array(i),l=r.words;l.length=i,this.convert13b(e.words,e.length,o,i),this.convert13b(t.words,t.length,u,i),this.transform(o,s,a,h,i,n),this.transform(u,s,f,c,i,n);for(var d=0;d<i;d++){var p=a[d]*f[d]-h[d]*c[d];h[d]=a[d]*c[d]+h[d]*f[d],a[d]=p}return this.conjugate(a,h,i),this.transform(a,h,l,s,i,n),this.conjugate(l,s,i),this.normalize13b(l,i),r.negative=e.negative^t.negative,r.length=e.length+t.length,r._strip()},n.prototype.mul=function(e){var t=new n(null);return t.words=Array(this.length+e.length),this.mulTo(e,t)},n.prototype.mulf=function(e){var t=new n(null);return t.words=Array(this.length+e.length),y(this,e,t)},n.prototype.imul=function(e){return this.clone().mulTo(e,this)},n.prototype.imuln=function(e){var t=e<0;t&&(e=-e),r("number"==typeof e),r(e<0x4000000);for(var i=0,n=0;n<this.length;n++){var s=(0|this.words[n])*e,o=(0x3ffffff&s)+(0x3ffffff&i);i>>=26,i+=(s/0x4000000|0)+(o>>>26),this.words[n]=0x3ffffff&o}return 0!==i&&(this.words[n]=i,this.length++),this.length=0===e?1:this.length,t?this.ineg():this},n.prototype.muln=function(e){return this.clone().imuln(e)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(e){var t=function(e){for(var t=Array(e.bitLength()),r=0;r<t.length;r++){var i=r/26|0,n=r%26;t[r]=e.words[i]>>>n&1}return t}(e);if(0===t.length)return new n(1);for(var r=this,i=0;i<t.length&&0===t[i];i++,r=r.sqr());if(++i<t.length)for(var s=r.sqr();i<t.length;i++,s=s.sqr())0!==t[i]&&(r=r.mul(s));return r},n.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,i=e%26,n=(e-i)/26,s=0x3ffffff>>>26-i<<26-i;if(0!==i){var o=0;for(t=0;t<this.length;t++){var a=this.words[t]&s,h=(0|this.words[t])-a<<i;this.words[t]=h|o,o=a>>>26-i}o&&(this.words[t]=o,this.length++)}if(0!==n){for(t=this.length-1;t>=0;t--)this.words[t+n]=this.words[t];for(t=0;t<n;t++)this.words[t]=0;this.length+=n}return this._strip()},n.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},n.prototype.iushrn=function(e,t,i){r("number"==typeof e&&e>=0);var n=t?(t-t%26)/26:0,s=e%26,o=Math.min((e-s)/26,this.length),a=0x3ffffff^0x3ffffff>>>s<<s;if(n-=o,n=Math.max(0,n),i){for(var h=0;h<o;h++)i.words[h]=this.words[h];i.length=o}if(0===o);else if(this.length>o)for(this.length-=o,h=0;h<this.length;h++)this.words[h]=this.words[h+o];else this.words[0]=0,this.length=1;var u=0;for(h=this.length-1;h>=0&&(0!==u||h>=n);h--){var f=0|this.words[h];this.words[h]=u<<26-s|f>>>s,u=f&a}return i&&0!==u&&(i.words[i.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},n.prototype.ishrn=function(e,t,i){return r(0===this.negative),this.iushrn(e,t,i)},n.prototype.shln=function(e){return this.clone().ishln(e)},n.prototype.ushln=function(e){return this.clone().iushln(e)},n.prototype.shrn=function(e){return this.clone().ishrn(e)},n.prototype.ushrn=function(e){return this.clone().iushrn(e)},n.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26;return!(this.length<=i)&&!!(this.words[i]&1<<t)},n.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26;return(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=i)?this:(0!==t&&i++,this.length=Math.min(i,this.length),0!==t&&(this.words[this.length-1]&=0x3ffffff^0x3ffffff>>>t<<t),this._strip())},n.prototype.maskn=function(e){return this.clone().imaskn(e)},n.prototype.iaddn=function(e){return(r("number"==typeof e),r(e<0x4000000),e<0)?this.isubn(-e):0!==this.negative?(1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0):(this.negative=0,this.isubn(e),this.negative=1),this):this._iaddn(e)},n.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=0x4000000;t++)this.words[t]-=0x4000000,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},n.prototype.isubn=function(e){if(r("number"==typeof e),r(e<0x4000000),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=0x4000000,this.words[t+1]-=1;return this._strip()},n.prototype.addn=function(e){return this.clone().iaddn(e)},n.prototype.subn=function(e){return this.clone().isubn(e)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(e,t,i){var n,s,o=e.length+i;this._expand(o);var a=0;for(n=0;n<e.length;n++){s=(0|this.words[n+i])+a;var h=(0|e.words[n])*t;s-=0x3ffffff&h,a=(s>>26)-(h/0x4000000|0),this.words[n+i]=0x3ffffff&s}for(;n<this.length-i;n++)a=(s=(0|this.words[n+i])+a)>>26,this.words[n+i]=0x3ffffff&s;if(0===a)return this._strip();for(r(-1===a),a=0,n=0;n<this.length;n++)a=(s=-(0|this.words[n])+a)>>26,this.words[n]=0x3ffffff&s;return this.negative=1,this._strip()},n.prototype._wordDiv=function(e,t){var r,i=this.length-e.length,s=this.clone(),o=e,a=0|o.words[o.length-1];0!=(i=26-this._countBits(a))&&(o=o.ushln(i),s.iushln(i),a=0|o.words[o.length-1]);var h=s.length-o.length;if("mod"!==t){(r=new n(null)).length=h+1,r.words=Array(r.length);for(var u=0;u<r.length;u++)r.words[u]=0}var f=s.clone()._ishlnsubmul(o,1,h);0===f.negative&&(s=f,r&&(r.words[h]=1));for(var c=h-1;c>=0;c--){var l=(0|s.words[o.length+c])*0x4000000+(0|s.words[o.length+c-1]);for(l=Math.min(l/a|0,0x3ffffff),s._ishlnsubmul(o,l,c);0!==s.negative;)l--,s.negative=0,s._ishlnsubmul(o,1,c),s.isZero()||(s.negative^=1);r&&(r.words[c]=l)}return r&&r._strip(),s._strip(),"div"!==t&&0!==i&&s.iushrn(i),{div:r||null,mod:s}},n.prototype.divmod=function(e,t,i){var s,o,a;return(r(!e.isZero()),this.isZero())?{div:new n(0),mod:new n(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(s=a.div.neg()),"div"!==t&&(o=a.mod.neg(),i&&0!==o.negative&&o.iadd(e)),{div:s,mod:o}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(s=a.div.neg()),{div:s,mod:a.mod}):(this.negative&e.negative)!=0?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(o=a.mod.neg(),i&&0!==o.negative&&o.isub(e)),{div:a.div,mod:o}):e.length>this.length||0>this.cmp(e)?{div:new n(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new n(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new n(this.modrn(e.words[0]))}:this._wordDiv(e,t)},n.prototype.div=function(e){return this.divmod(e,"div",!1).div},n.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},n.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},n.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,i=e.ushrn(1),n=e.andln(1),s=r.cmp(i);return s<0||1===n&&0===s?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},n.prototype.modrn=function(e){var t=e<0;t&&(e=-e),r(e<=0x3ffffff);for(var i=0x4000000%e,n=0,s=this.length-1;s>=0;s--)n=(i*n+(0|this.words[s]))%e;return t?-n:n},n.prototype.modn=function(e){return this.modrn(e)},n.prototype.idivn=function(e){var t=e<0;t&&(e=-e),r(e<=0x3ffffff);for(var i=0,n=this.length-1;n>=0;n--){var s=(0|this.words[n])+0x4000000*i;this.words[n]=s/e|0,i=s%e}return this._strip(),t?this.ineg():this},n.prototype.divn=function(e){return this.clone().idivn(e)},n.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,i=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var s=new n(1),o=new n(0),a=new n(0),h=new n(1),u=0;t.isEven()&&i.isEven();)t.iushrn(1),i.iushrn(1),++u;for(var f=i.clone(),c=t.clone();!t.isZero();){for(var l=0,d=1;(t.words[0]&d)==0&&l<26;++l,d<<=1);if(l>0)for(t.iushrn(l);l-- >0;)(s.isOdd()||o.isOdd())&&(s.iadd(f),o.isub(c)),s.iushrn(1),o.iushrn(1);for(var p=0,g=1;(i.words[0]&g)==0&&p<26;++p,g<<=1);if(p>0)for(i.iushrn(p);p-- >0;)(a.isOdd()||h.isOdd())&&(a.iadd(f),h.isub(c)),a.iushrn(1),h.iushrn(1);t.cmp(i)>=0?(t.isub(i),s.isub(a),o.isub(h)):(i.isub(t),a.isub(s),h.isub(o))}return{a:a,b:h,gcd:i.iushln(u)}},n.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t,i=this,s=e.clone();i=0!==i.negative?i.umod(e):i.clone();for(var o=new n(1),a=new n(0),h=s.clone();i.cmpn(1)>0&&s.cmpn(1)>0;){for(var u=0,f=1;(i.words[0]&f)==0&&u<26;++u,f<<=1);if(u>0)for(i.iushrn(u);u-- >0;)o.isOdd()&&o.iadd(h),o.iushrn(1);for(var c=0,l=1;(s.words[0]&l)==0&&c<26;++c,l<<=1);if(c>0)for(s.iushrn(c);c-- >0;)a.isOdd()&&a.iadd(h),a.iushrn(1);i.cmp(s)>=0?(i.isub(s),o.isub(a)):(s.isub(i),a.isub(o))}return 0>(t=0===i.cmpn(1)?o:a).cmpn(0)&&t.iadd(e),t},n.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var i=0;t.isEven()&&r.isEven();i++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var n=t.cmp(r);if(n<0){var s=t;t=r,r=s}else if(0===n||0===r.cmpn(1))break;t.isub(r)}return r.iushln(i)},n.prototype.invm=function(e){return this.egcd(e).a.umod(e)},n.prototype.isEven=function(){return(1&this.words[0])==0},n.prototype.isOdd=function(){return(1&this.words[0])==1},n.prototype.andln=function(e){return this.words[0]&e},n.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,i=(e-t)/26,n=1<<t;if(this.length<=i)return this._expand(i+1),this.words[i]|=n,this;for(var s=n,o=i;0!==s&&o<this.length;o++){var a=0|this.words[o];a+=s,s=a>>>26,a&=0x3ffffff,this.words[o]=a}return 0!==s&&(this.words[o]=s,this.length++),this},n.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},n.prototype.cmpn=function(e){var t,i=e<0;if(0!==this.negative&&!i)return -1;if(0===this.negative&&i)return 1;if(this._strip(),this.length>1)t=1;else{i&&(e=-e),r(e<=0x3ffffff,"Number is too big");var n=0|this.words[0];t=n===e?0:n<e?-1:1}return 0!==this.negative?0|-t:t},n.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return -1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},n.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return -1;for(var t=0,r=this.length-1;r>=0;r--){var i=0|this.words[r],n=0|e.words[r];if(i!==n){i<n?t=-1:i>n&&(t=1);break}}return t},n.prototype.gtn=function(e){return 1===this.cmpn(e)},n.prototype.gt=function(e){return 1===this.cmp(e)},n.prototype.gten=function(e){return this.cmpn(e)>=0},n.prototype.gte=function(e){return this.cmp(e)>=0},n.prototype.ltn=function(e){return -1===this.cmpn(e)},n.prototype.lt=function(e){return -1===this.cmp(e)},n.prototype.lten=function(e){return 0>=this.cmpn(e)},n.prototype.lte=function(e){return 0>=this.cmp(e)},n.prototype.eqn=function(e){return 0===this.cmpn(e)},n.prototype.eq=function(e){return 0===this.cmp(e)},n.red=function(e){return new S(e)},n.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},n.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(e){return this.red=e,this},n.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},n.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},n.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},n.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},n.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},n.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},n.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},n.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},n.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var v={k256:null,p224:null,p192:null,p25519:null};function w(e,t){this.name=e,this.p=new n(t,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function D(){w.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function x(){w.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function E(){w.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function _(){w.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(e){if("string"==typeof e){var t=n._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function I(e){S.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}w.prototype._tmp=function(){var e=new n(null);return e.words=Array(Math.ceil(this.n/13)),e},w.prototype.ireduce=function(e){var t,r=e;do this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength();while(t>this.n)var i=t<this.n?-1:r.ucmp(this.p);return 0===i?(r.words[0]=0,r.length=1):i>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},w.prototype.split=function(e,t){e.iushrn(this.n,0,t)},w.prototype.imulK=function(e){return e.imul(this.k)},i(D,w),D.prototype.split=function(e,t){for(var r=Math.min(e.length,9),i=0;i<r;i++)t.words[i]=e.words[i];if(t.length=r,e.length<=9){e.words[0]=0,e.length=1;return}var n=e.words[9];for(i=10,t.words[t.length++]=4194303&n;i<e.length;i++){var s=0|e.words[i];e.words[i-10]=(4194303&s)<<4|n>>>22,n=s}n>>>=22,e.words[i-10]=n,0===n&&e.length>10?e.length-=10:e.length-=9},D.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var i=0|e.words[r];t+=977*i,e.words[r]=0x3ffffff&t,t=64*i+(t/0x4000000|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(x,w),i(E,w),i(_,w),_.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var i=(0|e.words[r])*19+t,n=0x3ffffff&i;i>>>=26,e.words[r]=n,t=i}return 0!==t&&(e.words[e.length++]=t),e},n._prime=function(e){var t;if(v[e])return v[e];if("k256"===e)t=new D;else if("p224"===e)t=new x;else if("p192"===e)t=new E;else if("p25519"===e)t=new _;else throw Error("Unknown prime "+e);return v[e]=t,t},S.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},S.prototype._verify2=function(e,t){r((e.negative|t.negative)==0,"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},S.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(u(e,e.umod(this.m)._forceRed(this)),e)},S.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},S.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},S.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},S.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return 0>r.cmpn(0)&&r.iadd(this.m),r._forceRed(this)},S.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return 0>r.cmpn(0)&&r.iadd(this.m),r},S.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},S.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},S.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},S.prototype.isqr=function(e){return this.imul(e,e.clone())},S.prototype.sqr=function(e){return this.mul(e,e)},S.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var i=this.m.add(new n(1)).iushrn(2);return this.pow(e,i)}for(var s=this.m.subn(1),o=0;!s.isZero()&&0===s.andln(1);)o++,s.iushrn(1);r(!s.isZero());var a=new n(1).toRed(this),h=a.redNeg(),u=this.m.subn(1).iushrn(1),f=this.m.bitLength();for(f=new n(2*f*f).toRed(this);0!==this.pow(f,u).cmp(h);)f.redIAdd(h);for(var c=this.pow(f,s),l=this.pow(e,s.addn(1).iushrn(1)),d=this.pow(e,s),p=o;0!==d.cmp(a);){for(var g=d,b=0;0!==g.cmp(a);b++)g=g.redSqr();r(b<p);var y=this.pow(c,new n(1).iushln(p-b-1));l=l.redMul(y),c=y.redSqr(),d=d.redMul(c),p=b}return l},S.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},S.prototype.pow=function(e,t){if(t.isZero())return new n(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=Array(16);r[0]=new n(1).toRed(this),r[1]=e;for(var i=2;i<r.length;i++)r[i]=this.mul(r[i-1],e);var s=r[0],o=0,a=0,h=t.bitLength()%26;for(0===h&&(h=26),i=t.length-1;i>=0;i--){for(var u=t.words[i],f=h-1;f>=0;f--){var c=u>>f&1;if(s!==r[0]&&(s=this.sqr(s)),0===c&&0===o){a=0;continue}o<<=1,o|=c,(4==++a||0===i&&0===f)&&(s=this.mul(s,r[o]),a=0,o=0)}h=26}return s},S.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},S.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},n.mont=function(e){return new I(e)},i(I,S),I.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},I.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},I.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),s=n;return n.cmp(this.m)>=0?s=n.isub(this.m):0>n.cmpn(0)&&(s=n.iadd(this.m)),s._forceRed(this)},I.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new n(0)._forceRed(this);var r=e.mul(t),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=r.isub(i).iushrn(this.shift),o=s;return s.cmp(this.m)>=0?o=s.isub(this.m):0>s.cmpn(0)&&(o=s.iadd(this.m)),o._forceRed(this)},I.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,this)}),o("kjyEk",function(e,t){}),o("btcbI",function(t,r){e(t.exports,"inherits",()=>i,e=>i=e),e(t.exports,"toArray",()=>n,e=>n=e),e(t.exports,"toHex",()=>o,e=>o=e),e(t.exports,"htonl",()=>a,e=>a=e),e(t.exports,"toHex32",()=>h,e=>h=e),e(t.exports,"zero2",()=>u,e=>u=e),e(t.exports,"zero8",()=>f,e=>f=e),e(t.exports,"join32",()=>c,e=>c=e),e(t.exports,"split32",()=>l,e=>l=e),e(t.exports,"rotr32",()=>d,e=>d=e),e(t.exports,"rotl32",()=>p,e=>p=e),e(t.exports,"sum32",()=>g,e=>g=e),e(t.exports,"sum32_3",()=>b,e=>b=e),e(t.exports,"sum32_4",()=>y,e=>y=e),e(t.exports,"sum32_5",()=>m,e=>m=e),e(t.exports,"sum64",()=>v,e=>v=e),e(t.exports,"sum64_hi",()=>w,e=>w=e),e(t.exports,"sum64_lo",()=>D,e=>D=e),e(t.exports,"sum64_4_hi",()=>x,e=>x=e),e(t.exports,"sum64_4_lo",()=>E,e=>E=e),e(t.exports,"sum64_5_hi",()=>_,e=>_=e),e(t.exports,"sum64_5_lo",()=>S,e=>S=e),e(t.exports,"rotr64_hi",()=>I,e=>I=e),e(t.exports,"rotr64_lo",()=>A,e=>A=e),e(t.exports,"shr64_hi",()=>M,e=>M=e),e(t.exports,"shr64_lo",()=>C,e=>C=e);var i,n,o,a,h,u,f,c,l,d,p,g,b,y,m,v,w,D,x,E,_,S,I,A,M,C,O=s("koC21");function P(e){return(e>>>24|e>>>8&65280|e<<8&0xff0000|(255&e)<<24)>>>0}function R(e){return 1===e.length?"0"+e:e}function T(e){if(7===e.length)return"0"+e;if(6===e.length)return"00"+e;if(5===e.length)return"000"+e;if(4===e.length)return"0000"+e;if(3===e.length)return"00000"+e;else if(2===e.length)return"000000"+e;else if(1===e.length)return"0000000"+e;else return e}i=s("dlqwk"),n=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"==typeof e)if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/ig,"")).length%2!=0&&(e="0"+e),n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16))}else for(var i=0,n=0;n<e.length;n++){var s,o,a=e.charCodeAt(n);a<128?r[i++]=a:(a<2048?r[i++]=a>>6|192:((s=e,o=n,(64512&s.charCodeAt(o))!=55296||o<0||o+1>=s.length?1:(64512&s.charCodeAt(o+1))!=56320)?r[i++]=a>>12|224:(a=65536+((1023&a)<<10)+(1023&e.charCodeAt(++n)),r[i++]=a>>18|240,r[i++]=a>>12&63|128),r[i++]=a>>6&63|128),r[i++]=63&a|128)}else for(n=0;n<e.length;n++)r[n]=0|e[n];return r},o=function(e){for(var t="",r=0;r<e.length;r++)t+=R(e[r].toString(16));return t},a=P,h=function(e,t){for(var r="",i=0;i<e.length;i++){var n=e[i];"little"===t&&(n=P(n)),r+=T(n.toString(16))}return r},u=R,f=T,c=function(e,t,r,i){var n,s=r-t;O(s%4==0);for(var o=Array(s/4),a=0,h=t;a<o.length;a++,h+=4)n="big"===i?e[h]<<24|e[h+1]<<16|e[h+2]<<8|e[h+3]:e[h+3]<<24|e[h+2]<<16|e[h+1]<<8|e[h],o[a]=n>>>0;return o},l=function(e,t){for(var r=Array(4*e.length),i=0,n=0;i<e.length;i++,n+=4){var s=e[i];"big"===t?(r[n]=s>>>24,r[n+1]=s>>>16&255,r[n+2]=s>>>8&255,r[n+3]=255&s):(r[n+3]=s>>>24,r[n+2]=s>>>16&255,r[n+1]=s>>>8&255,r[n]=255&s)}return r},d=function(e,t){return e>>>t|e<<32-t},p=function(e,t){return e<<t|e>>>32-t},g=function(e,t){return e+t>>>0},b=function(e,t,r){return e+t+r>>>0},y=function(e,t,r,i){return e+t+r+i>>>0},m=function(e,t,r,i,n){return e+t+r+i+n>>>0},v=function(e,t,r,i){var n=e[t],s=i+e[t+1]>>>0;e[t]=+(s<i)+r+n>>>0,e[t+1]=s},w=function(e,t,r,i){return+(t+i>>>0<t)+e+r>>>0},D=function(e,t,r,i){return t+i>>>0},x=function(e,t,r,i,n,s,o,a){var h,u=t;return e+r+n+o+(h=0+ +((u=u+i>>>0)<t)+ +((u=u+s>>>0)<s)+ +((u=u+a>>>0)<a))>>>0},E=function(e,t,r,i,n,s,o,a){return t+i+s+a>>>0},_=function(e,t,r,i,n,s,o,a,h,u){var f,c=t;return e+r+n+o+h+(f=0+ +((c=c+i>>>0)<t)+ +((c=c+s>>>0)<s)+ +((c=c+a>>>0)<a)+ +((c=c+u>>>0)<u))>>>0},S=function(e,t,r,i,n,s,o,a,h,u){return t+i+s+a+u>>>0},I=function(e,t,r){return(t<<32-r|e>>>r)>>>0},A=function(e,t,r){return(e<<32-r|t>>>r)>>>0},M=function(e,t,r){return e>>>r},C=function(e,t,r){return(e<<32-r|t>>>r)>>>0}}),o("koC21",function(e,t){function r(e,t){if(!e)throw Error(t||"Assertion failed")}e.exports=r,r.equal=function(e,t,r){if(e!=t)throw Error(r||"Assertion failed: "+e+" != "+t)}}),o("dlqwk",function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}}),o("aAb7n",function(t,r){e(t.exports,"BlockHash",()=>i,e=>i=e);var i,n=s("btcbI"),o=s("koC21");function a(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}i=a,a.prototype.update=function(e,t){if(e=n.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var r=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-r,e.length),0===this.pending.length&&(this.pending=null),e=n.join32(e,0,e.length-r,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this},a.prototype.digest=function(e){return this.update(this._pad()),o(null===this.pending),this._digest(e)},a.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,r=t-(e+this.padLength)%t,i=Array(r+this.padLength);i[0]=128;for(var n=1;n<r;n++)i[n]=0;if(e<<=3,"big"===this.endian){for(var s=8;s<this.padLength;s++)i[n++]=0;i[n++]=0,i[n++]=0,i[n++]=0,i[n++]=0,i[n++]=e>>>24&255,i[n++]=e>>>16&255,i[n++]=e>>>8&255,i[n++]=255&e}else for(s=8,i[n++]=255&e,i[n++]=e>>>8&255,i[n++]=e>>>16&255,i[n++]=e>>>24&255,i[n++]=0,i[n++]=0,i[n++]=0,i[n++]=0;s<this.padLength;s++)i[n++]=0;return i}}),o("2wnQk",function(t,r){var i,n,o,a,h;e(t.exports,"sha1",()=>i,e=>i=e),e(t.exports,"sha224",()=>n,e=>n=e),e(t.exports,"sha256",()=>o,e=>o=e),e(t.exports,"sha384",()=>a,e=>a=e),e(t.exports,"sha512",()=>h,e=>h=e),i=s("IUW6G"),n=s("gBE2w"),o=s("a9EzX"),a=s("7j4cV"),h=s("lMBCM")}),o("IUW6G",function(e,t){var r=s("btcbI"),i=s("aAb7n"),n=s("dV8oa"),o=r.rotl32,a=r.sum32,h=r.sum32_5,u=n.ft_1,f=i.BlockHash,c=[0x5a827999,0x6ed9eba1,0x8f1bbcdc,0xca62c1d6];function l(){if(!(this instanceof l))return new l;f.call(this),this.h=[0x67452301,0xefcdab89,0x98badcfe,0x10325476,0xc3d2e1f0],this.W=Array(80)}r.inherits(l,f),e.exports=l,l.blockSize=512,l.outSize=160,l.hmacStrength=80,l.padLength=64,l.prototype._update=function(e,t){for(var r=this.W,i=0;i<16;i++)r[i]=e[t+i];for(;i<r.length;i++)r[i]=o(r[i-3]^r[i-8]^r[i-14]^r[i-16],1);var n=this.h[0],s=this.h[1],f=this.h[2],l=this.h[3],d=this.h[4];for(i=0;i<r.length;i++){var p=~~(i/20),g=h(o(n,5),u(p,s,f,l),d,r[i],c[p]);d=l,l=f,f=o(s,30),s=n,n=g}this.h[0]=a(this.h[0],n),this.h[1]=a(this.h[1],s),this.h[2]=a(this.h[2],f),this.h[3]=a(this.h[3],l),this.h[4]=a(this.h[4],d)},l.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h,"big"):r.split32(this.h,"big")}}),o("dV8oa",function(t,r){e(t.exports,"ft_1",()=>i,e=>i=e),e(t.exports,"ch32",()=>n,e=>n=e),e(t.exports,"maj32",()=>o,e=>o=e),e(t.exports,"s0_256",()=>a,e=>a=e),e(t.exports,"s1_256",()=>h,e=>h=e),e(t.exports,"g0_256",()=>u,e=>u=e),e(t.exports,"g1_256",()=>f,e=>f=e);var i,n,o,a,h,u,f,c=s("btcbI").rotr32;function l(e,t,r){return e&t^e&r^t&r}i=function(e,t,r,i){var n;return 0===e?(n=t)&r^~n&i:1===e||3===e?t^r^i:2===e?l(t,r,i):void 0},n=function(e,t,r){return e&t^~e&r},o=l,a=function(e){return c(e,2)^c(e,13)^c(e,22)},h=function(e){return c(e,6)^c(e,11)^c(e,25)},u=function(e){return c(e,7)^c(e,18)^e>>>3},f=function(e){return c(e,17)^c(e,19)^e>>>10}}),o("gBE2w",function(e,t){var r=s("btcbI"),i=s("a9EzX");function n(){if(!(this instanceof n))return new n;i.call(this),this.h=[0xc1059ed8,0x367cd507,0x3070dd17,0xf70e5939,0xffc00b31,0x68581511,0x64f98fa7,0xbefa4fa4]}r.inherits(n,i),e.exports=n,n.blockSize=512,n.outSize=224,n.hmacStrength=192,n.padLength=64,n.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h.slice(0,7),"big"):r.split32(this.h.slice(0,7),"big")}}),o("a9EzX",function(e,t){var r=s("btcbI"),i=s("aAb7n"),n=s("dV8oa"),o=s("koC21"),a=r.sum32,h=r.sum32_4,u=r.sum32_5,f=n.ch32,c=n.maj32,l=n.s0_256,d=n.s1_256,p=n.g0_256,g=n.g1_256,b=i.BlockHash,y=[0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2];function m(){if(!(this instanceof m))return new m;b.call(this),this.h=[0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19],this.k=y,this.W=Array(64)}r.inherits(m,b),e.exports=m,m.blockSize=512,m.outSize=256,m.hmacStrength=192,m.padLength=64,m.prototype._update=function(e,t){for(var r=this.W,i=0;i<16;i++)r[i]=e[t+i];for(;i<r.length;i++)r[i]=h(g(r[i-2]),r[i-7],p(r[i-15]),r[i-16]);var n=this.h[0],s=this.h[1],b=this.h[2],y=this.h[3],m=this.h[4],v=this.h[5],w=this.h[6],D=this.h[7];for(o(this.k.length===r.length),i=0;i<r.length;i++){var x=u(D,d(m),f(m,v,w),this.k[i],r[i]),E=a(l(n),c(n,s,b));D=w,w=v,v=m,m=a(y,x),y=b,b=s,s=n,n=a(x,E)}this.h[0]=a(this.h[0],n),this.h[1]=a(this.h[1],s),this.h[2]=a(this.h[2],b),this.h[3]=a(this.h[3],y),this.h[4]=a(this.h[4],m),this.h[5]=a(this.h[5],v),this.h[6]=a(this.h[6],w),this.h[7]=a(this.h[7],D)},m.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h,"big"):r.split32(this.h,"big")}}),o("7j4cV",function(e,t){var r=s("btcbI"),i=s("lMBCM");function n(){if(!(this instanceof n))return new n;i.call(this),this.h=[0xcbbb9d5d,0xc1059ed8,0x629a292a,0x367cd507,0x9159015a,0x3070dd17,0x152fecd8,0xf70e5939,0x67332667,0xffc00b31,0x8eb44a87,0x68581511,0xdb0c2e0d,0x64f98fa7,0x47b5481d,0xbefa4fa4]}r.inherits(n,i),e.exports=n,n.blockSize=1024,n.outSize=384,n.hmacStrength=192,n.padLength=128,n.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h.slice(0,12),"big"):r.split32(this.h.slice(0,12),"big")}}),o("lMBCM",function(e,t){var r=s("btcbI"),i=s("aAb7n"),n=s("koC21"),o=r.rotr64_hi,a=r.rotr64_lo,h=r.shr64_hi,u=r.shr64_lo,f=r.sum64,c=r.sum64_hi,l=r.sum64_lo,d=r.sum64_4_hi,p=r.sum64_4_lo,g=r.sum64_5_hi,b=r.sum64_5_lo,y=i.BlockHash,m=[0x428a2f98,0xd728ae22,0x71374491,0x23ef65cd,0xb5c0fbcf,0xec4d3b2f,0xe9b5dba5,0x8189dbbc,0x3956c25b,0xf348b538,0x59f111f1,0xb605d019,0x923f82a4,0xaf194f9b,0xab1c5ed5,0xda6d8118,0xd807aa98,0xa3030242,0x12835b01,0x45706fbe,0x243185be,0x4ee4b28c,0x550c7dc3,0xd5ffb4e2,0x72be5d74,0xf27b896f,0x80deb1fe,0x3b1696b1,0x9bdc06a7,0x25c71235,0xc19bf174,0xcf692694,0xe49b69c1,0x9ef14ad2,0xefbe4786,0x384f25e3,0xfc19dc6,0x8b8cd5b5,0x240ca1cc,0x77ac9c65,0x2de92c6f,0x592b0275,0x4a7484aa,0x6ea6e483,0x5cb0a9dc,0xbd41fbd4,0x76f988da,0x831153b5,0x983e5152,0xee66dfab,0xa831c66d,0x2db43210,0xb00327c8,0x98fb213f,0xbf597fc7,0xbeef0ee4,0xc6e00bf3,0x3da88fc2,0xd5a79147,0x930aa725,0x6ca6351,0xe003826f,0x14292967,0xa0e6e70,0x27b70a85,0x46d22ffc,0x2e1b2138,0x5c26c926,0x4d2c6dfc,0x5ac42aed,0x53380d13,0x9d95b3df,0x650a7354,0x8baf63de,0x766a0abb,0x3c77b2a8,0x81c2c92e,0x47edaee6,0x92722c85,0x1482353b,0xa2bfe8a1,0x4cf10364,0xa81a664b,0xbc423001,0xc24b8b70,0xd0f89791,0xc76c51a3,0x654be30,0xd192e819,0xd6ef5218,0xd6990624,0x5565a910,0xf40e3585,0x5771202a,0x106aa070,0x32bbd1b8,0x19a4c116,0xb8d2d0c8,0x1e376c08,0x5141ab53,0x2748774c,0xdf8eeb99,0x34b0bcb5,0xe19b48a8,0x391c0cb3,0xc5c95a63,0x4ed8aa4a,0xe3418acb,0x5b9cca4f,0x7763e373,0x682e6ff3,0xd6b2b8a3,0x748f82ee,0x5defb2fc,0x78a5636f,0x43172f60,0x84c87814,0xa1f0ab72,0x8cc70208,0x1a6439ec,0x90befffa,0x23631e28,0xa4506ceb,0xde82bde9,0xbef9a3f7,0xb2c67915,0xc67178f2,0xe372532b,0xca273ece,0xea26619c,0xd186b8c7,0x21c0c207,0xeada7dd6,0xcde0eb1e,0xf57d4f7f,0xee6ed178,0x6f067aa,0x72176fba,0xa637dc5,0xa2c898a6,0x113f9804,0xbef90dae,0x1b710b35,0x131c471b,0x28db77f5,0x23047d84,0x32caab7b,0x40c72493,0x3c9ebe0a,0x15c9bebc,0x431d67c4,0x9c100d4c,0x4cc5d4be,0xcb3e42b6,0x597f299c,0xfc657e2a,0x5fcb6fab,0x3ad6faec,0x6c44198c,0x4a475817];function v(){if(!(this instanceof v))return new v;y.call(this),this.h=[0x6a09e667,0xf3bcc908,0xbb67ae85,0x84caa73b,0x3c6ef372,0xfe94f82b,0xa54ff53a,0x5f1d36f1,0x510e527f,0xade682d1,0x9b05688c,0x2b3e6c1f,0x1f83d9ab,0xfb41bd6b,0x5be0cd19,0x137e2179],this.k=m,this.W=Array(160)}r.inherits(v,y),e.exports=v,v.blockSize=1024,v.outSize=512,v.hmacStrength=192,v.padLength=128,v.prototype._prepareBlock=function(e,t){for(var r=this.W,i=0;i<32;i++)r[i]=e[t+i];for(;i<r.length;i+=2){var n=function(e,t){var r=o(e,t,19)^o(t,e,29)^h(e,t,6);return r<0&&(r+=0x100000000),r}(r[i-4],r[i-3]),s=function(e,t){var r=a(e,t,19)^a(t,e,29)^u(e,t,6);return r<0&&(r+=0x100000000),r}(r[i-4],r[i-3]),f=r[i-14],c=r[i-13],l=function(e,t){var r=o(e,t,1)^o(e,t,8)^h(e,t,7);return r<0&&(r+=0x100000000),r}(r[i-30],r[i-29]),g=function(e,t){var r=a(e,t,1)^a(e,t,8)^u(e,t,7);return r<0&&(r+=0x100000000),r}(r[i-30],r[i-29]),b=r[i-32],y=r[i-31];r[i]=d(n,s,f,c,l,g,b,y),r[i+1]=p(n,s,f,c,l,g,b,y)}},v.prototype._update=function(e,t){this._prepareBlock(e,t);var r=this.W,i=this.h[0],s=this.h[1],h=this.h[2],u=this.h[3],d=this.h[4],p=this.h[5],y=this.h[6],m=this.h[7],v=this.h[8],w=this.h[9],D=this.h[10],x=this.h[11],E=this.h[12],_=this.h[13],S=this.h[14],I=this.h[15];n(this.k.length===r.length);for(var A=0;A<r.length;A+=2){var M=S,C=I,O=function(e,t){var r=o(e,t,14)^o(e,t,18)^o(t,e,9);return r<0&&(r+=0x100000000),r}(v,w),P=function(e,t){var r=a(e,t,14)^a(e,t,18)^a(t,e,9);return r<0&&(r+=0x100000000),r}(v,w),R=function(e,t,r,i,n){var s=e&r^~e&n;return s<0&&(s+=0x100000000),s}(v,0,D,0,E,_),T=function(e,t,r,i,n,s){var o=t&i^~t&s;return o<0&&(o+=0x100000000),o}(0,w,0,x,0,_),N=this.k[A],B=this.k[A+1],L=r[A],k=r[A+1],U=g(M,C,O,P,R,T,N,B,L,k),z=b(M,C,O,P,R,T,N,B,L,k);M=function(e,t){var r=o(e,t,28)^o(t,e,2)^o(t,e,7);return r<0&&(r+=0x100000000),r}(i,s),C=function(e,t){var r=a(e,t,28)^a(t,e,2)^a(t,e,7);return r<0&&(r+=0x100000000),r}(i,s);var j=c(M,C,O=function(e,t,r,i,n){var s=e&r^e&n^r&n;return s<0&&(s+=0x100000000),s}(i,0,h,0,d,p),P=function(e,t,r,i,n,s){var o=t&i^t&s^i&s;return o<0&&(o+=0x100000000),o}(0,s,0,u,0,p)),q=l(M,C,O,P);S=E,I=_,E=D,_=x,D=v,x=w,v=c(y,m,U,z),w=l(m,m,U,z),y=d,m=p,d=h,p=u,h=i,u=s,i=c(U,z,j,q),s=l(U,z,j,q)}f(this.h,0,i,s),f(this.h,2,h,u),f(this.h,4,d,p),f(this.h,6,y,m),f(this.h,8,v,w),f(this.h,10,D,x),f(this.h,12,E,_),f(this.h,14,S,I)},v.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h,"big"):r.split32(this.h,"big")}}),o("05eZB",function(t,r){e(t.exports,"ripemd160",()=>i,e=>i=e);var i,n=s("btcbI"),o=s("aAb7n"),a=n.rotl32,h=n.sum32,u=n.sum32_3,f=n.sum32_4,c=o.BlockHash;function l(){if(!(this instanceof l))return new l;c.call(this),this.h=[0x67452301,0xefcdab89,0x98badcfe,0x10325476,0xc3d2e1f0],this.endian="little"}function d(e,t,r,i){return e<=15?t^r^i:e<=31?t&r|~t&i:e<=47?(t|~r)^i:e<=63?t&i|r&~i:t^(r|~i)}n.inherits(l,c),i=l,l.blockSize=512,l.outSize=160,l.hmacStrength=192,l.padLength=64,l.prototype._update=function(e,t){for(var r=this.h[0],i=this.h[1],n=this.h[2],s=this.h[3],o=this.h[4],c=r,l=i,m=n,v=s,w=o,D=0;D<80;D++){var x,E,_=h(a(f(r,d(D,i,n,s),e[p[D]+t],(x=D)<=15?0:x<=31?0x5a827999:x<=47?0x6ed9eba1:x<=63?0x8f1bbcdc:0xa953fd4e),b[D]),o);r=o,o=s,s=a(n,10),n=i,i=_,_=h(a(f(c,d(79-D,l,m,v),e[g[D]+t],(E=D)<=15?0x50a28be6:E<=31?0x5c4dd124:E<=47?0x6d703ef3:0x7a6d76e9*!!(E<=63)),y[D]),w),c=w,w=v,v=a(m,10),m=l,l=_}_=u(this.h[1],n,v),this.h[1]=u(this.h[2],s,w),this.h[2]=u(this.h[3],o,c),this.h[3]=u(this.h[4],r,l),this.h[4]=u(this.h[0],i,m),this.h[0]=_},l.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"little"):n.split32(this.h,"little")};var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],g=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],b=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],y=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]}),o("ap2lu",function(e,t){var r=s("btcbI"),i=s("koC21");function n(e,t,i){if(!(this instanceof n))return new n(e,t,i);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(r.toArray(t,i))}e.exports=n,n.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),i(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(t=0,this.inner=new this.Hash().update(e);t<e.length;t++)e[t]^=106;this.outer=new this.Hash().update(e)},n.prototype.update=function(e,t){return this.inner.update(e,t),this},n.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}}),o("laOt8",function(t,r){function i(e,t){return t=t||{},new Promise(function(r,i){var n=new XMLHttpRequest,s=[],o=[],a={},h=function(){return{ok:2==(n.status/100|0),statusText:n.statusText,status:n.status,url:n.responseURL,text:function(){return Promise.resolve(n.responseText)},json:function(){return Promise.resolve(n.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([n.response]))},clone:h,headers:{keys:function(){return s},entries:function(){return o},get:function(e){return a[e.toLowerCase()]},has:function(e){return e.toLowerCase()in a}}}};for(var u in n.open(t.method||"get",e,!0),n.onload=function(){n.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(e,t,r){s.push(t=t.toLowerCase()),o.push([t,r]),a[t]=a[t]?a[t]+","+r:r}),r(h())},n.onerror=i,n.withCredentials="include"==t.credentials,t.headers)n.setRequestHeader(u,t.headers[u]);n.send(t.body||null)})}Object.defineProperty(t.exports,"__esModule",{value:!0,configurable:!0}),e(t.exports,"default",()=>i)}),o("5Jl2z",function(e,t){e.exports=JSON.parse('{"name":"elliptic","version":"6.5.7","description":"EC cryptography","main":"lib/elliptic.js","files":["lib"],"scripts":{"lint":"eslint lib test","lint:fix":"npm run lint -- --fix","unit":"istanbul test _mocha --reporter=spec test/index.js","test":"npm run lint && npm run unit","version":"grunt dist && git add dist/"},"repository":{"type":"git","url":"git@github.com:indutny/elliptic"},"keywords":["EC","Elliptic","curve","Cryptography"],"author":"Fedor Indutny <fedor@indutny.com>","license":"MIT","bugs":{"url":"https://github.com/indutny/elliptic/issues"},"homepage":"https://github.com/indutny/elliptic","devDependencies":{"brfs":"^2.0.2","coveralls":"^3.1.0","eslint":"^7.6.0","grunt":"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1","istanbul":"^0.4.5","mocha":"^8.0.1"},"dependencies":{"bn.js":"^4.11.9","brorand":"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1","inherits":"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}}')}),o("85hQD",function(e,t){var r=e.exports,i=s("eSnEe"),n=s("koC21"),o=s("lC4vN");r.assert=n,r.toArray=o.toArray,r.zero2=o.zero2,r.toHex=o.toHex,r.encode=o.encode,r.getNAF=function(e,t,r){var i=Array(Math.max(e.bitLength(),r)+1);for(o=0;o<i.length;o+=1)i[o]=0;var n=1<<t+1,s=e.clone();for(o=0;o<i.length;o++){var o,a,h=s.andln(n-1);s.isOdd()?(a=h>(n>>1)-1?(n>>1)-h:h,s.isubn(a)):a=0,i[o]=a,s.iushrn(1)}return i},r.getJSF=function(e,t){var r=[[],[]];e=e.clone(),t=t.clone();for(var i=0,n=0;e.cmpn(-i)>0||t.cmpn(-n)>0;){var s,o,a,h=e.andln(3)+i&3,u=t.andln(3)+n&3;3===h&&(h=-1),3===u&&(u=-1),o=(1&h)==0?0:(3==(s=e.andln(7)+i&7)||5===s)&&2===u?-h:h,r[0].push(o),a=(1&u)==0?0:(3==(s=t.andln(7)+n&7)||5===s)&&2===h?-u:u,r[1].push(a),2*i===o+1&&(i=1-i),2*n===a+1&&(n=1-n),e.iushrn(1),t.iushrn(1)}return r},r.cachedProperty=function(e,t,r){var i="_"+t;e.prototype[t]=function(){return void 0!==this[i]?this[i]:this[i]=r.call(this)}},r.parseBytes=function(e){return"string"==typeof e?r.toArray(e,"hex"):e},r.intFromLE=function(e){return new i(e,"hex","le")}}),o("eSnEe",function(e,t){!function(e,t){function r(e,t){if(!e)throw Error(t||"Assertion failed")}function i(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function n(e,t,r){if(n.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&(("le"===t||"be"===t)&&(r=t,t=10),this._init(e||0,t||10,r||"be"))}"object"==typeof e?e.exports=n:t.BN=n,n.BN=n,n.wordSize=26;try{u="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:s("kjyEk").Buffer}catch(e){}function o(e,t){var r=e.charCodeAt(t);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function a(e,t,r){var i=o(e,r);return r-1>=t&&(i|=o(e,r-1)<<4),i}function h(e,t,r,i){for(var n=0,s=Math.min(e.length,r),o=t;o<s;o++){var a=e.charCodeAt(o)-48;n*=i,a>=49?n+=a-49+10:a>=17?n+=a-17+10:n+=a}return n}n.isBN=function(e){return e instanceof n||null!==e&&"object"==typeof e&&e.constructor.wordSize===n.wordSize&&Array.isArray(e.words)},n.max=function(e,t){return e.cmp(t)>0?e:t},n.min=function(e,t){return 0>e.cmp(t)?e:t},n.prototype._init=function(e,t,i){if("number"==typeof e)return this._initNumber(e,t,i);if("object"==typeof e)return this._initArray(e,t,i);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var n=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(n++,this.negative=1),n<e.length&&(16===t?this._parseHex(e,n,i):(this._parseBase(e,t,n),"le"===i&&this._initArray(this.toArray(),t,i)))},n.prototype._initNumber=function(e,t,i){e<0&&(this.negative=1,e=-e),e<0x4000000?(this.words=[0x3ffffff&e],this.length=1):e<0x10000000000000?(this.words=[0x3ffffff&e,e/0x4000000&0x3ffffff],this.length=2):(r(e<0x20000000000000),this.words=[0x3ffffff&e,e/0x4000000&0x3ffffff,1],this.length=3),"le"===i&&this._initArray(this.toArray(),t,i)},n.prototype._initArray=function(e,t,i){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=Array(this.length);for(var n,s,o=0;o<this.length;o++)this.words[o]=0;var a=0;if("be"===i)for(o=e.length-1,n=0;o>=0;o-=3)s=e[o]|e[o-1]<<8|e[o-2]<<16,this.words[n]|=s<<a&0x3ffffff,this.words[n+1]=s>>>26-a&0x3ffffff,(a+=24)>=26&&(a-=26,n++);else if("le"===i)for(o=0,n=0;o<e.length;o+=3)s=e[o]|e[o+1]<<8|e[o+2]<<16,this.words[n]|=s<<a&0x3ffffff,this.words[n+1]=s>>>26-a&0x3ffffff,(a+=24)>=26&&(a-=26,n++);return this.strip()},n.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=Array(this.length);for(var i,n=0;n<this.length;n++)this.words[n]=0;var s=0,o=0;if("be"===r)for(n=e.length-1;n>=t;n-=2)i=a(e,t,n)<<s,this.words[o]|=0x3ffffff&i,s>=18?(s-=18,o+=1,this.words[o]|=i>>>26):s+=8;else for(n=(e.length-t)%2==0?t+1:t;n<e.length;n+=2)i=a(e,t,n)<<s,this.words[o]|=0x3ffffff&i,s>=18?(s-=18,o+=1,this.words[o]|=i>>>26):s+=8;this.strip()},n.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var i=0,n=1;n<=0x3ffffff;n*=t)i++;i--,n=n/t|0;for(var s=e.length-r,o=s%i,a=Math.min(s,s-o)+r,u=0,f=r;f<a;f+=i)u=h(e,f,f+i,t),this.imuln(n),this.words[0]+u<0x4000000?this.words[0]+=u:this._iaddn(u);if(0!==o){var c=1;for(u=h(e,f,e.length,t),f=0;f<o;f++)c*=t;this.imuln(c),this.words[0]+u<0x4000000?this.words[0]+=u:this._iaddn(u)}this.strip()},n.prototype.copy=function(e){e.words=Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},n.prototype.clone=function(){var e=new n(null);return this.copy(e),e},n.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},n.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},n.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u,f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],c=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],l=[0,0,0x2000000,0x290d741,0x1000000,0x2e90edd,0x39aa400,0x267bf47,0x1000000,0x290d741,1e7,0x12959c3,0x222c000,0x3bd7765,7529536,0xadcea1,0x1000000,0x1704f61,0x206fc40,0x2cddcf9,64e6,4084101,5153632,6436343,7962624,9765625,0xb54ba0,0xdaf26b,0x1069c00,0x138f9ad,243e5,0x1b4d89f,0x2000000,0x25528a1,0x2b54a20,0x3216b93,0x39aa400];function d(e,t,r){r.negative=t.negative^e.negative;var i=e.length+t.length|0;r.length=i,i=i-1|0;var n=0|e.words[0],s=0|t.words[0],o=n*s,a=0x3ffffff&o,h=o/0x4000000|0;r.words[0]=a;for(var u=1;u<i;u++){for(var f=h>>>26,c=0x3ffffff&h,l=Math.min(u,t.length-1),d=Math.max(0,u-e.length+1);d<=l;d++){var p=u-d|0;f+=(o=(n=0|e.words[p])*(s=0|t.words[d])+c)/0x4000000|0,c=0x3ffffff&o}r.words[u]=0|c,h=0|f}return 0!==h?r.words[u]=0|h:r.length--,r.strip()}n.prototype.toString=function(e,t){if(t=0|t||1,16===(e=e||10)||"hex"===e){for(var i="",n=0,s=0,o=0;o<this.length;o++){var a=this.words[o],h=((a<<n|s)&0xffffff).toString(16);s=a>>>24-n&0xffffff,(n+=2)>=26&&(n-=26,o--),i=0!==s||o!==this.length-1?f[6-h.length]+h+i:h+i}for(0!==s&&(i=s.toString(16)+i);i.length%t!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(e===(0|e)&&e>=2&&e<=36){var u=c[e],d=l[e];i="";var p=this.clone();for(p.negative=0;!p.isZero();){var g=p.modn(d).toString(e);i=(p=p.idivn(d)).isZero()?g+i:f[u-g.length]+g+i}for(this.isZero()&&(i="0"+i);i.length%t!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}r(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=0x4000000*this.words[1]:3===this.length&&1===this.words[2]?e+=0x10000000000000+0x4000000*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toBuffer=function(e,t){return r(void 0!==u),this.toArrayLike(u,e,t)},n.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},n.prototype.toArrayLike=function(e,t,i){var n,s,o=this.byteLength(),a=i||Math.max(1,o);r(o<=a,"byte array longer than desired length"),r(a>0,"Requested array length <= 0"),this.strip();var h=new e(a),u=this.clone();if("le"===t){for(s=0;!u.isZero();s++)n=u.andln(255),u.iushrn(8),h[s]=n;for(;s<a;s++)h[s]=0}else{for(s=0;s<a-o;s++)h[s]=0;for(s=0;!u.isZero();s++)n=u.andln(255),u.iushrn(8),h[a-s-1]=n}return h},Math.clz32?n.prototype._countBits=function(e){return 32-Math.clz32(e)}:n.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},n.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return(8191&t)==0&&(r+=13,t>>>=13),(127&t)==0&&(r+=7,t>>>=7),(15&t)==0&&(r+=4,t>>>=4),(3&t)==0&&(r+=2,t>>>=2),(1&t)==0&&r++,r},n.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return(this.length-1)*26+t},n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},n.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return 0!==this.negative},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},n.prototype.ior=function(e){return r((this.negative|e.negative)==0),this.iuor(e)},n.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},n.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},n.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this.strip()},n.prototype.iand=function(e){return r((this.negative|e.negative)==0),this.iuand(e)},n.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},n.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},n.prototype.iuxor=function(e){this.length>e.length?(t=this,r=e):(t=e,r=this);for(var t,r,i=0;i<r.length;i++)this.words[i]=t.words[i]^r.words[i];if(this!==t)for(;i<t.length;i++)this.words[i]=t.words[i];return this.length=t.length,this.strip()},n.prototype.ixor=function(e){return r((this.negative|e.negative)==0),this.iuxor(e)},n.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},n.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},n.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),i=e%26;this._expand(t),i>0&&t--;for(var n=0;n<t;n++)this.words[n]=0x3ffffff&~this.words[n];return i>0&&(this.words[n]=~this.words[n]&0x3ffffff>>26-i),this.strip()},n.prototype.notn=function(e){return this.clone().inotn(e)},n.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var i=e/26|0,n=e%26;return this._expand(i+1),t?this.words[i]=this.words[i]|1<<n:this.words[i]=this.words[i]&~(1<<n),this.strip()},n.prototype.iadd=function(e){if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,i=e):(r=e,i=this);for(var t,r,i,n=0,s=0;s<i.length;s++)t=(0|r.words[s])+(0|i.words[s])+n,this.words[s]=0x3ffffff&t,n=t>>>26;for(;0!==n&&s<r.length;s++)t=(0|r.words[s])+n,this.words[s]=0x3ffffff&t,n=t>>>26;if(this.length=r.length,0!==n)this.words[this.length]=n,this.length++;else if(r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this},n.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},n.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t,r,i=this.iadd(e);return e.negative=1,i._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var n=this.cmp(e);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(t=this,r=e):(t=e,r=this);for(var s=0,o=0;o<r.length;o++)s=(i=(0|t.words[o])-(0|r.words[o])+s)>>26,this.words[o]=0x3ffffff&i;for(;0!==s&&o<t.length;o++)s=(i=(0|t.words[o])+s)>>26,this.words[o]=0x3ffffff&i;if(0===s&&o<t.length&&t!==this)for(;o<t.length;o++)this.words[o]=t.words[o];return this.length=Math.max(this.length,o),t!==this&&(this.negative=1),this.strip()},n.prototype.sub=function(e){return this.clone().isub(e)};var p=function(e,t,r){var i,n,s,o=e.words,a=t.words,h=r.words,u=0,f=0|o[0],c=8191&f,l=f>>>13,d=0|o[1],p=8191&d,g=d>>>13,b=0|o[2],y=8191&b,m=b>>>13,v=0|o[3],w=8191&v,D=v>>>13,x=0|o[4],E=8191&x,_=x>>>13,S=0|o[5],I=8191&S,A=S>>>13,M=0|o[6],C=8191&M,O=M>>>13,P=0|o[7],R=8191&P,T=P>>>13,N=0|o[8],B=8191&N,L=N>>>13,k=0|o[9],U=8191&k,z=k>>>13,j=0|a[0],q=8191&j,F=j>>>13,H=0|a[1],K=8191&H,$=H>>>13,V=0|a[2],W=8191&V,G=V>>>13,Y=0|a[3],Z=8191&Y,J=Y>>>13,X=0|a[4],Q=8191&X,ee=X>>>13,et=0|a[5],er=8191&et,ei=et>>>13,en=0|a[6],es=8191&en,eo=en>>>13,ea=0|a[7],eh=8191&ea,eu=ea>>>13,ef=0|a[8],ec=8191&ef,el=ef>>>13,ed=0|a[9],ep=8191&ed,eg=ed>>>13;r.negative=e.negative^t.negative,r.length=19,i=Math.imul(c,q);var eb=(u+i|0)+((8191&(n=(n=Math.imul(c,F))+Math.imul(l,q)|0))<<13)|0;u=((s=Math.imul(l,F))+(n>>>13)|0)+(eb>>>26)|0,eb&=0x3ffffff,i=Math.imul(p,q),n=(n=Math.imul(p,F))+Math.imul(g,q)|0,s=Math.imul(g,F),i=i+Math.imul(c,K)|0;var ey=(u+i|0)+((8191&(n=(n=n+Math.imul(c,$)|0)+Math.imul(l,K)|0))<<13)|0;u=((s=s+Math.imul(l,$)|0)+(n>>>13)|0)+(ey>>>26)|0,ey&=0x3ffffff,i=Math.imul(y,q),n=(n=Math.imul(y,F))+Math.imul(m,q)|0,s=Math.imul(m,F),i=i+Math.imul(p,K)|0,n=(n=n+Math.imul(p,$)|0)+Math.imul(g,K)|0,s=s+Math.imul(g,$)|0,i=i+Math.imul(c,W)|0;var em=(u+i|0)+((8191&(n=(n=n+Math.imul(c,G)|0)+Math.imul(l,W)|0))<<13)|0;u=((s=s+Math.imul(l,G)|0)+(n>>>13)|0)+(em>>>26)|0,em&=0x3ffffff,i=Math.imul(w,q),n=(n=Math.imul(w,F))+Math.imul(D,q)|0,s=Math.imul(D,F),i=i+Math.imul(y,K)|0,n=(n=n+Math.imul(y,$)|0)+Math.imul(m,K)|0,s=s+Math.imul(m,$)|0,i=i+Math.imul(p,W)|0,n=(n=n+Math.imul(p,G)|0)+Math.imul(g,W)|0,s=s+Math.imul(g,G)|0,i=i+Math.imul(c,Z)|0;var ev=(u+i|0)+((8191&(n=(n=n+Math.imul(c,J)|0)+Math.imul(l,Z)|0))<<13)|0;u=((s=s+Math.imul(l,J)|0)+(n>>>13)|0)+(ev>>>26)|0,ev&=0x3ffffff,i=Math.imul(E,q),n=(n=Math.imul(E,F))+Math.imul(_,q)|0,s=Math.imul(_,F),i=i+Math.imul(w,K)|0,n=(n=n+Math.imul(w,$)|0)+Math.imul(D,K)|0,s=s+Math.imul(D,$)|0,i=i+Math.imul(y,W)|0,n=(n=n+Math.imul(y,G)|0)+Math.imul(m,W)|0,s=s+Math.imul(m,G)|0,i=i+Math.imul(p,Z)|0,n=(n=n+Math.imul(p,J)|0)+Math.imul(g,Z)|0,s=s+Math.imul(g,J)|0,i=i+Math.imul(c,Q)|0;var ew=(u+i|0)+((8191&(n=(n=n+Math.imul(c,ee)|0)+Math.imul(l,Q)|0))<<13)|0;u=((s=s+Math.imul(l,ee)|0)+(n>>>13)|0)+(ew>>>26)|0,ew&=0x3ffffff,i=Math.imul(I,q),n=(n=Math.imul(I,F))+Math.imul(A,q)|0,s=Math.imul(A,F),i=i+Math.imul(E,K)|0,n=(n=n+Math.imul(E,$)|0)+Math.imul(_,K)|0,s=s+Math.imul(_,$)|0,i=i+Math.imul(w,W)|0,n=(n=n+Math.imul(w,G)|0)+Math.imul(D,W)|0,s=s+Math.imul(D,G)|0,i=i+Math.imul(y,Z)|0,n=(n=n+Math.imul(y,J)|0)+Math.imul(m,Z)|0,s=s+Math.imul(m,J)|0,i=i+Math.imul(p,Q)|0,n=(n=n+Math.imul(p,ee)|0)+Math.imul(g,Q)|0,s=s+Math.imul(g,ee)|0,i=i+Math.imul(c,er)|0;var eD=(u+i|0)+((8191&(n=(n=n+Math.imul(c,ei)|0)+Math.imul(l,er)|0))<<13)|0;u=((s=s+Math.imul(l,ei)|0)+(n>>>13)|0)+(eD>>>26)|0,eD&=0x3ffffff,i=Math.imul(C,q),n=(n=Math.imul(C,F))+Math.imul(O,q)|0,s=Math.imul(O,F),i=i+Math.imul(I,K)|0,n=(n=n+Math.imul(I,$)|0)+Math.imul(A,K)|0,s=s+Math.imul(A,$)|0,i=i+Math.imul(E,W)|0,n=(n=n+Math.imul(E,G)|0)+Math.imul(_,W)|0,s=s+Math.imul(_,G)|0,i=i+Math.imul(w,Z)|0,n=(n=n+Math.imul(w,J)|0)+Math.imul(D,Z)|0,s=s+Math.imul(D,J)|0,i=i+Math.imul(y,Q)|0,n=(n=n+Math.imul(y,ee)|0)+Math.imul(m,Q)|0,s=s+Math.imul(m,ee)|0,i=i+Math.imul(p,er)|0,n=(n=n+Math.imul(p,ei)|0)+Math.imul(g,er)|0,s=s+Math.imul(g,ei)|0,i=i+Math.imul(c,es)|0;var ex=(u+i|0)+((8191&(n=(n=n+Math.imul(c,eo)|0)+Math.imul(l,es)|0))<<13)|0;u=((s=s+Math.imul(l,eo)|0)+(n>>>13)|0)+(ex>>>26)|0,ex&=0x3ffffff,i=Math.imul(R,q),n=(n=Math.imul(R,F))+Math.imul(T,q)|0,s=Math.imul(T,F),i=i+Math.imul(C,K)|0,n=(n=n+Math.imul(C,$)|0)+Math.imul(O,K)|0,s=s+Math.imul(O,$)|0,i=i+Math.imul(I,W)|0,n=(n=n+Math.imul(I,G)|0)+Math.imul(A,W)|0,s=s+Math.imul(A,G)|0,i=i+Math.imul(E,Z)|0,n=(n=n+Math.imul(E,J)|0)+Math.imul(_,Z)|0,s=s+Math.imul(_,J)|0,i=i+Math.imul(w,Q)|0,n=(n=n+Math.imul(w,ee)|0)+Math.imul(D,Q)|0,s=s+Math.imul(D,ee)|0,i=i+Math.imul(y,er)|0,n=(n=n+Math.imul(y,ei)|0)+Math.imul(m,er)|0,s=s+Math.imul(m,ei)|0,i=i+Math.imul(p,es)|0,n=(n=n+Math.imul(p,eo)|0)+Math.imul(g,es)|0,s=s+Math.imul(g,eo)|0,i=i+Math.imul(c,eh)|0;var eE=(u+i|0)+((8191&(n=(n=n+Math.imul(c,eu)|0)+Math.imul(l,eh)|0))<<13)|0;u=((s=s+Math.imul(l,eu)|0)+(n>>>13)|0)+(eE>>>26)|0,eE&=0x3ffffff,i=Math.imul(B,q),n=(n=Math.imul(B,F))+Math.imul(L,q)|0,s=Math.imul(L,F),i=i+Math.imul(R,K)|0,n=(n=n+Math.imul(R,$)|0)+Math.imul(T,K)|0,s=s+Math.imul(T,$)|0,i=i+Math.imul(C,W)|0,n=(n=n+Math.imul(C,G)|0)+Math.imul(O,W)|0,s=s+Math.imul(O,G)|0,i=i+Math.imul(I,Z)|0,n=(n=n+Math.imul(I,J)|0)+Math.imul(A,Z)|0,s=s+Math.imul(A,J)|0,i=i+Math.imul(E,Q)|0,n=(n=n+Math.imul(E,ee)|0)+Math.imul(_,Q)|0,s=s+Math.imul(_,ee)|0,i=i+Math.imul(w,er)|0,n=(n=n+Math.imul(w,ei)|0)+Math.imul(D,er)|0,s=s+Math.imul(D,ei)|0,i=i+Math.imul(y,es)|0,n=(n=n+Math.imul(y,eo)|0)+Math.imul(m,es)|0,s=s+Math.imul(m,eo)|0,i=i+Math.imul(p,eh)|0,n=(n=n+Math.imul(p,eu)|0)+Math.imul(g,eh)|0,s=s+Math.imul(g,eu)|0,i=i+Math.imul(c,ec)|0;var e_=(u+i|0)+((8191&(n=(n=n+Math.imul(c,el)|0)+Math.imul(l,ec)|0))<<13)|0;u=((s=s+Math.imul(l,el)|0)+(n>>>13)|0)+(e_>>>26)|0,e_&=0x3ffffff,i=Math.imul(U,q),n=(n=Math.imul(U,F))+Math.imul(z,q)|0,s=Math.imul(z,F),i=i+Math.imul(B,K)|0,n=(n=n+Math.imul(B,$)|0)+Math.imul(L,K)|0,s=s+Math.imul(L,$)|0,i=i+Math.imul(R,W)|0,n=(n=n+Math.imul(R,G)|0)+Math.imul(T,W)|0,s=s+Math.imul(T,G)|0,i=i+Math.imul(C,Z)|0,n=(n=n+Math.imul(C,J)|0)+Math.imul(O,Z)|0,s=s+Math.imul(O,J)|0,i=i+Math.imul(I,Q)|0,n=(n=n+Math.imul(I,ee)|0)+Math.imul(A,Q)|0,s=s+Math.imul(A,ee)|0,i=i+Math.imul(E,er)|0,n=(n=n+Math.imul(E,ei)|0)+Math.imul(_,er)|0,s=s+Math.imul(_,ei)|0,i=i+Math.imul(w,es)|0,n=(n=n+Math.imul(w,eo)|0)+Math.imul(D,es)|0,s=s+Math.imul(D,eo)|0,i=i+Math.imul(y,eh)|0,n=(n=n+Math.imul(y,eu)|0)+Math.imul(m,eh)|0,s=s+Math.imul(m,eu)|0,i=i+Math.imul(p,ec)|0,n=(n=n+Math.imul(p,el)|0)+Math.imul(g,ec)|0,s=s+Math.imul(g,el)|0,i=i+Math.imul(c,ep)|0;var eS=(u+i|0)+((8191&(n=(n=n+Math.imul(c,eg)|0)+Math.imul(l,ep)|0))<<13)|0;u=((s=s+Math.imul(l,eg)|0)+(n>>>13)|0)+(eS>>>26)|0,eS&=0x3ffffff,i=Math.imul(U,K),n=(n=Math.imul(U,$))+Math.imul(z,K)|0,s=Math.imul(z,$),i=i+Math.imul(B,W)|0,n=(n=n+Math.imul(B,G)|0)+Math.imul(L,W)|0,s=s+Math.imul(L,G)|0,i=i+Math.imul(R,Z)|0,n=(n=n+Math.imul(R,J)|0)+Math.imul(T,Z)|0,s=s+Math.imul(T,J)|0,i=i+Math.imul(C,Q)|0,n=(n=n+Math.imul(C,ee)|0)+Math.imul(O,Q)|0,s=s+Math.imul(O,ee)|0,i=i+Math.imul(I,er)|0,n=(n=n+Math.imul(I,ei)|0)+Math.imul(A,er)|0,s=s+Math.imul(A,ei)|0,i=i+Math.imul(E,es)|0,n=(n=n+Math.imul(E,eo)|0)+Math.imul(_,es)|0,s=s+Math.imul(_,eo)|0,i=i+Math.imul(w,eh)|0,n=(n=n+Math.imul(w,eu)|0)+Math.imul(D,eh)|0,s=s+Math.imul(D,eu)|0,i=i+Math.imul(y,ec)|0,n=(n=n+Math.imul(y,el)|0)+Math.imul(m,ec)|0,s=s+Math.imul(m,el)|0,i=i+Math.imul(p,ep)|0;var eI=(u+i|0)+((8191&(n=(n=n+Math.imul(p,eg)|0)+Math.imul(g,ep)|0))<<13)|0;u=((s=s+Math.imul(g,eg)|0)+(n>>>13)|0)+(eI>>>26)|0,eI&=0x3ffffff,i=Math.imul(U,W),n=(n=Math.imul(U,G))+Math.imul(z,W)|0,s=Math.imul(z,G),i=i+Math.imul(B,Z)|0,n=(n=n+Math.imul(B,J)|0)+Math.imul(L,Z)|0,s=s+Math.imul(L,J)|0,i=i+Math.imul(R,Q)|0,n=(n=n+Math.imul(R,ee)|0)+Math.imul(T,Q)|0,s=s+Math.imul(T,ee)|0,i=i+Math.imul(C,er)|0,n=(n=n+Math.imul(C,ei)|0)+Math.imul(O,er)|0,s=s+Math.imul(O,ei)|0,i=i+Math.imul(I,es)|0,n=(n=n+Math.imul(I,eo)|0)+Math.imul(A,es)|0,s=s+Math.imul(A,eo)|0,i=i+Math.imul(E,eh)|0,n=(n=n+Math.imul(E,eu)|0)+Math.imul(_,eh)|0,s=s+Math.imul(_,eu)|0,i=i+Math.imul(w,ec)|0,n=(n=n+Math.imul(w,el)|0)+Math.imul(D,ec)|0,s=s+Math.imul(D,el)|0,i=i+Math.imul(y,ep)|0;var eA=(u+i|0)+((8191&(n=(n=n+Math.imul(y,eg)|0)+Math.imul(m,ep)|0))<<13)|0;u=((s=s+Math.imul(m,eg)|0)+(n>>>13)|0)+(eA>>>26)|0,eA&=0x3ffffff,i=Math.imul(U,Z),n=(n=Math.imul(U,J))+Math.imul(z,Z)|0,s=Math.imul(z,J),i=i+Math.imul(B,Q)|0,n=(n=n+Math.imul(B,ee)|0)+Math.imul(L,Q)|0,s=s+Math.imul(L,ee)|0,i=i+Math.imul(R,er)|0,n=(n=n+Math.imul(R,ei)|0)+Math.imul(T,er)|0,s=s+Math.imul(T,ei)|0,i=i+Math.imul(C,es)|0,n=(n=n+Math.imul(C,eo)|0)+Math.imul(O,es)|0,s=s+Math.imul(O,eo)|0,i=i+Math.imul(I,eh)|0,n=(n=n+Math.imul(I,eu)|0)+Math.imul(A,eh)|0,s=s+Math.imul(A,eu)|0,i=i+Math.imul(E,ec)|0,n=(n=n+Math.imul(E,el)|0)+Math.imul(_,ec)|0,s=s+Math.imul(_,el)|0,i=i+Math.imul(w,ep)|0;var eM=(u+i|0)+((8191&(n=(n=n+Math.imul(w,eg)|0)+Math.imul(D,ep)|0))<<13)|0;u=((s=s+Math.imul(D,eg)|0)+(n>>>13)|0)+(eM>>>26)|0,eM&=0x3ffffff,i=Math.imul(U,Q),n=(n=Math.imul(U,ee))+Math.imul(z,Q)|0,s=Math.imul(z,ee),i=i+Math.imul(B,er)|0,n=(n=n+Math.imul(B,ei)|0)+Math.imul(L,er)|0,s=s+Math.imul(L,ei)|0,i=i+Math.imul(R,es)|0,n=(n=n+Math.imul(R,eo)|0)+Math.imul(T,es)|0,s=s+Math.imul(T,eo)|0,i=i+Math.imul(C,eh)|0,n=(n=n+Math.imul(C,eu)|0)+Math.imul(O,eh)|0,s=s+Math.imul(O,eu)|0,i=i+Math.imul(I,ec)|0,n=(n=n+Math.imul(I,el)|0)+Math.imul(A,ec)|0,s=s+Math.imul(A,el)|0,i=i+Math.imul(E,ep)|0;var eC=(u+i|0)+((8191&(n=(n=n+Math.imul(E,eg)|0)+Math.imul(_,ep)|0))<<13)|0;u=((s=s+Math.imul(_,eg)|0)+(n>>>13)|0)+(eC>>>26)|0,eC&=0x3ffffff,i=Math.imul(U,er),n=(n=Math.imul(U,ei))+Math.imul(z,er)|0,s=Math.imul(z,ei),i=i+Math.imul(B,es)|0,n=(n=n+Math.imul(B,eo)|0)+Math.imul(L,es)|0,s=s+Math.imul(L,eo)|0,i=i+Math.imul(R,eh)|0,n=(n=n+Math.imul(R,eu)|0)+Math.imul(T,eh)|0,s=s+Math.imul(T,eu)|0,i=i+Math.imul(C,ec)|0,n=(n=n+Math.imul(C,el)|0)+Math.imul(O,ec)|0,s=s+Math.imul(O,el)|0,i=i+Math.imul(I,ep)|0;var eO=(u+i|0)+((8191&(n=(n=n+Math.imul(I,eg)|0)+Math.imul(A,ep)|0))<<13)|0;u=((s=s+Math.imul(A,eg)|0)+(n>>>13)|0)+(eO>>>26)|0,eO&=0x3ffffff,i=Math.imul(U,es),n=(n=Math.imul(U,eo))+Math.imul(z,es)|0,s=Math.imul(z,eo),i=i+Math.imul(B,eh)|0,n=(n=n+Math.imul(B,eu)|0)+Math.imul(L,eh)|0,s=s+Math.imul(L,eu)|0,i=i+Math.imul(R,ec)|0,n=(n=n+Math.imul(R,el)|0)+Math.imul(T,ec)|0,s=s+Math.imul(T,el)|0,i=i+Math.imul(C,ep)|0;var eP=(u+i|0)+((8191&(n=(n=n+Math.imul(C,eg)|0)+Math.imul(O,ep)|0))<<13)|0;u=((s=s+Math.imul(O,eg)|0)+(n>>>13)|0)+(eP>>>26)|0,eP&=0x3ffffff,i=Math.imul(U,eh),n=(n=Math.imul(U,eu))+Math.imul(z,eh)|0,s=Math.imul(z,eu),i=i+Math.imul(B,ec)|0,n=(n=n+Math.imul(B,el)|0)+Math.imul(L,ec)|0,s=s+Math.imul(L,el)|0,i=i+Math.imul(R,ep)|0;var eR=(u+i|0)+((8191&(n=(n=n+Math.imul(R,eg)|0)+Math.imul(T,ep)|0))<<13)|0;u=((s=s+Math.imul(T,eg)|0)+(n>>>13)|0)+(eR>>>26)|0,eR&=0x3ffffff,i=Math.imul(U,ec),n=(n=Math.imul(U,el))+Math.imul(z,ec)|0,s=Math.imul(z,el),i=i+Math.imul(B,ep)|0;var eT=(u+i|0)+((8191&(n=(n=n+Math.imul(B,eg)|0)+Math.imul(L,ep)|0))<<13)|0;u=((s=s+Math.imul(L,eg)|0)+(n>>>13)|0)+(eT>>>26)|0,eT&=0x3ffffff,i=Math.imul(U,ep);var eN=(u+i|0)+((8191&(n=(n=Math.imul(U,eg))+Math.imul(z,ep)|0))<<13)|0;return u=((s=Math.imul(z,eg))+(n>>>13)|0)+(eN>>>26)|0,eN&=0x3ffffff,h[0]=eb,h[1]=ey,h[2]=em,h[3]=ev,h[4]=ew,h[5]=eD,h[6]=ex,h[7]=eE,h[8]=e_,h[9]=eS,h[10]=eI,h[11]=eA,h[12]=eM,h[13]=eC,h[14]=eO,h[15]=eP,h[16]=eR,h[17]=eT,h[18]=eN,0!==u&&(h[19]=u,r.length++),r};function g(e,t,r){return new b().mulp(e,t,r)}function b(e,t){this.x=e,this.y=t}Math.imul||(p=d),n.prototype.mulTo=function(e,t){var r=this.length+e.length;return 10===this.length&&10===e.length?p(this,e,t):r<63?d(this,e,t):r<1024?function(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var i=0,n=0,s=0;s<r.length-1;s++){var o=n;n=0;for(var a=0x3ffffff&i,h=Math.min(s,t.length-1),u=Math.max(0,s-e.length+1);u<=h;u++){var f=s-u,c=(0|e.words[f])*(0|t.words[u]),l=0x3ffffff&c;o=o+(c/0x4000000|0)|0,a=0x3ffffff&(l=l+a|0),n+=(o=o+(l>>>26)|0)>>>26,o&=0x3ffffff}r.words[s]=a,i=o,o=n}return 0!==i?r.words[s]=i:r.length--,r.strip()}(this,e,t):g(this,e,t)},b.prototype.makeRBT=function(e){for(var t=Array(e),r=n.prototype._countBits(e)-1,i=0;i<e;i++)t[i]=this.revBin(i,r,e);return t},b.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var i=0,n=0;n<t;n++)i|=(1&e)<<t-n-1,e>>=1;return i},b.prototype.permute=function(e,t,r,i,n,s){for(var o=0;o<s;o++)i[o]=t[e[o]],n[o]=r[e[o]]},b.prototype.transform=function(e,t,r,i,n,s){this.permute(s,e,t,r,i,n);for(var o=1;o<n;o<<=1)for(var a=o<<1,h=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),f=0;f<n;f+=a)for(var c=h,l=u,d=0;d<o;d++){var p=r[f+d],g=i[f+d],b=r[f+d+o],y=i[f+d+o],m=c*b-l*y;y=c*y+l*b,b=m,r[f+d]=p+b,i[f+d]=g+y,r[f+d+o]=p-b,i[f+d+o]=g-y,d!==a&&(m=h*c-u*l,l=h*l+u*c,c=m)}},b.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),i=1&r,n=0;for(r=r/2|0;r;r>>>=1)n++;return 1<<n+1+i},b.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var i=0;i<r/2;i++){var n=e[i];e[i]=e[r-i-1],e[r-i-1]=n,n=t[i],t[i]=-t[r-i-1],t[r-i-1]=-n}},b.prototype.normalize13b=function(e,t){for(var r=0,i=0;i<t/2;i++){var n=8192*Math.round(e[2*i+1]/t)+Math.round(e[2*i]/t)+r;e[i]=0x3ffffff&n,r=n<0x4000000?0:n/0x4000000|0}return e},b.prototype.convert13b=function(e,t,i,n){for(var s=0,o=0;o<t;o++)s+=0|e[o],i[2*o]=8191&s,s>>>=13,i[2*o+1]=8191&s,s>>>=13;for(o=2*t;o<n;++o)i[o]=0;r(0===s),r((-8192&s)==0)},b.prototype.stub=function(e){for(var t=Array(e),r=0;r<e;r++)t[r]=0;return t},b.prototype.mulp=function(e,t,r){var i=2*this.guessLen13b(e.length,t.length),n=this.makeRBT(i),s=this.stub(i),o=Array(i),a=Array(i),h=Array(i),u=Array(i),f=Array(i),c=Array(i),l=r.words;l.length=i,this.convert13b(e.words,e.length,o,i),this.convert13b(t.words,t.length,u,i),this.transform(o,s,a,h,i,n),this.transform(u,s,f,c,i,n);for(var d=0;d<i;d++){var p=a[d]*f[d]-h[d]*c[d];h[d]=a[d]*c[d]+h[d]*f[d],a[d]=p}return this.conjugate(a,h,i),this.transform(a,h,l,s,i,n),this.conjugate(l,s,i),this.normalize13b(l,i),r.negative=e.negative^t.negative,r.length=e.length+t.length,r.strip()},n.prototype.mul=function(e){var t=new n(null);return t.words=Array(this.length+e.length),this.mulTo(e,t)},n.prototype.mulf=function(e){var t=new n(null);return t.words=Array(this.length+e.length),g(this,e,t)},n.prototype.imul=function(e){return this.clone().mulTo(e,this)},n.prototype.imuln=function(e){r("number"==typeof e),r(e<0x4000000);for(var t=0,i=0;i<this.length;i++){var n=(0|this.words[i])*e,s=(0x3ffffff&n)+(0x3ffffff&t);t>>=26,t+=(n/0x4000000|0)+(s>>>26),this.words[i]=0x3ffffff&s}return 0!==t&&(this.words[i]=t,this.length++),this.length=0===e?1:this.length,this},n.prototype.muln=function(e){return this.clone().imuln(e)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(e){var t=function(e){for(var t=Array(e.bitLength()),r=0;r<t.length;r++){var i=r/26|0,n=r%26;t[r]=(e.words[i]&1<<n)>>>n}return t}(e);if(0===t.length)return new n(1);for(var r=this,i=0;i<t.length&&0===t[i];i++,r=r.sqr());if(++i<t.length)for(var s=r.sqr();i<t.length;i++,s=s.sqr())0!==t[i]&&(r=r.mul(s));return r},n.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,i=e%26,n=(e-i)/26,s=0x3ffffff>>>26-i<<26-i;if(0!==i){var o=0;for(t=0;t<this.length;t++){var a=this.words[t]&s,h=(0|this.words[t])-a<<i;this.words[t]=h|o,o=a>>>26-i}o&&(this.words[t]=o,this.length++)}if(0!==n){for(t=this.length-1;t>=0;t--)this.words[t+n]=this.words[t];for(t=0;t<n;t++)this.words[t]=0;this.length+=n}return this.strip()},n.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},n.prototype.iushrn=function(e,t,i){r("number"==typeof e&&e>=0);var n=t?(t-t%26)/26:0,s=e%26,o=Math.min((e-s)/26,this.length),a=0x3ffffff^0x3ffffff>>>s<<s;if(n-=o,n=Math.max(0,n),i){for(var h=0;h<o;h++)i.words[h]=this.words[h];i.length=o}if(0===o);else if(this.length>o)for(this.length-=o,h=0;h<this.length;h++)this.words[h]=this.words[h+o];else this.words[0]=0,this.length=1;var u=0;for(h=this.length-1;h>=0&&(0!==u||h>=n);h--){var f=0|this.words[h];this.words[h]=u<<26-s|f>>>s,u=f&a}return i&&0!==u&&(i.words[i.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},n.prototype.ishrn=function(e,t,i){return r(0===this.negative),this.iushrn(e,t,i)},n.prototype.shln=function(e){return this.clone().ishln(e)},n.prototype.ushln=function(e){return this.clone().iushln(e)},n.prototype.shrn=function(e){return this.clone().ishrn(e)},n.prototype.ushrn=function(e){return this.clone().iushrn(e)},n.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26;return!(this.length<=i)&&!!(this.words[i]&1<<t)},n.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26;return(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=i)?this:(0!==t&&i++,this.length=Math.min(i,this.length),0!==t&&(this.words[this.length-1]&=0x3ffffff^0x3ffffff>>>t<<t),this.strip())},n.prototype.maskn=function(e){return this.clone().imaskn(e)},n.prototype.iaddn=function(e){return(r("number"==typeof e),r(e<0x4000000),e<0)?this.isubn(-e):0!==this.negative?(1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0):(this.negative=0,this.isubn(e),this.negative=1),this):this._iaddn(e)},n.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=0x4000000;t++)this.words[t]-=0x4000000,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},n.prototype.isubn=function(e){if(r("number"==typeof e),r(e<0x4000000),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=0x4000000,this.words[t+1]-=1;return this.strip()},n.prototype.addn=function(e){return this.clone().iaddn(e)},n.prototype.subn=function(e){return this.clone().isubn(e)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(e,t,i){var n,s,o=e.length+i;this._expand(o);var a=0;for(n=0;n<e.length;n++){s=(0|this.words[n+i])+a;var h=(0|e.words[n])*t;s-=0x3ffffff&h,a=(s>>26)-(h/0x4000000|0),this.words[n+i]=0x3ffffff&s}for(;n<this.length-i;n++)a=(s=(0|this.words[n+i])+a)>>26,this.words[n+i]=0x3ffffff&s;if(0===a)return this.strip();for(r(-1===a),a=0,n=0;n<this.length;n++)a=(s=-(0|this.words[n])+a)>>26,this.words[n]=0x3ffffff&s;return this.negative=1,this.strip()},n.prototype._wordDiv=function(e,t){var r,i=this.length-e.length,s=this.clone(),o=e,a=0|o.words[o.length-1];0!=(i=26-this._countBits(a))&&(o=o.ushln(i),s.iushln(i),a=0|o.words[o.length-1]);var h=s.length-o.length;if("mod"!==t){(r=new n(null)).length=h+1,r.words=Array(r.length);for(var u=0;u<r.length;u++)r.words[u]=0}var f=s.clone()._ishlnsubmul(o,1,h);0===f.negative&&(s=f,r&&(r.words[h]=1));for(var c=h-1;c>=0;c--){var l=(0|s.words[o.length+c])*0x4000000+(0|s.words[o.length+c-1]);for(l=Math.min(l/a|0,0x3ffffff),s._ishlnsubmul(o,l,c);0!==s.negative;)l--,s.negative=0,s._ishlnsubmul(o,1,c),s.isZero()||(s.negative^=1);r&&(r.words[c]=l)}return r&&r.strip(),s.strip(),"div"!==t&&0!==i&&s.iushrn(i),{div:r||null,mod:s}},n.prototype.divmod=function(e,t,i){var s,o,a;return(r(!e.isZero()),this.isZero())?{div:new n(0),mod:new n(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(s=a.div.neg()),"div"!==t&&(o=a.mod.neg(),i&&0!==o.negative&&o.iadd(e)),{div:s,mod:o}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(s=a.div.neg()),{div:s,mod:a.mod}):(this.negative&e.negative)!=0?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(o=a.mod.neg(),i&&0!==o.negative&&o.isub(e)),{div:a.div,mod:o}):e.length>this.length||0>this.cmp(e)?{div:new n(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new n(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new n(this.modn(e.words[0]))}:this._wordDiv(e,t)},n.prototype.div=function(e){return this.divmod(e,"div",!1).div},n.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},n.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},n.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,i=e.ushrn(1),n=e.andln(1),s=r.cmp(i);return s<0||1===n&&0===s?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},n.prototype.modn=function(e){r(e<=0x3ffffff);for(var t=0x4000000%e,i=0,n=this.length-1;n>=0;n--)i=(t*i+(0|this.words[n]))%e;return i},n.prototype.idivn=function(e){r(e<=0x3ffffff);for(var t=0,i=this.length-1;i>=0;i--){var n=(0|this.words[i])+0x4000000*t;this.words[i]=n/e|0,t=n%e}return this.strip()},n.prototype.divn=function(e){return this.clone().idivn(e)},n.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,i=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var s=new n(1),o=new n(0),a=new n(0),h=new n(1),u=0;t.isEven()&&i.isEven();)t.iushrn(1),i.iushrn(1),++u;for(var f=i.clone(),c=t.clone();!t.isZero();){for(var l=0,d=1;(t.words[0]&d)==0&&l<26;++l,d<<=1);if(l>0)for(t.iushrn(l);l-- >0;)(s.isOdd()||o.isOdd())&&(s.iadd(f),o.isub(c)),s.iushrn(1),o.iushrn(1);for(var p=0,g=1;(i.words[0]&g)==0&&p<26;++p,g<<=1);if(p>0)for(i.iushrn(p);p-- >0;)(a.isOdd()||h.isOdd())&&(a.iadd(f),h.isub(c)),a.iushrn(1),h.iushrn(1);t.cmp(i)>=0?(t.isub(i),s.isub(a),o.isub(h)):(i.isub(t),a.isub(s),h.isub(o))}return{a:a,b:h,gcd:i.iushln(u)}},n.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t,i=this,s=e.clone();i=0!==i.negative?i.umod(e):i.clone();for(var o=new n(1),a=new n(0),h=s.clone();i.cmpn(1)>0&&s.cmpn(1)>0;){for(var u=0,f=1;(i.words[0]&f)==0&&u<26;++u,f<<=1);if(u>0)for(i.iushrn(u);u-- >0;)o.isOdd()&&o.iadd(h),o.iushrn(1);for(var c=0,l=1;(s.words[0]&l)==0&&c<26;++c,l<<=1);if(c>0)for(s.iushrn(c);c-- >0;)a.isOdd()&&a.iadd(h),a.iushrn(1);i.cmp(s)>=0?(i.isub(s),o.isub(a)):(s.isub(i),a.isub(o))}return 0>(t=0===i.cmpn(1)?o:a).cmpn(0)&&t.iadd(e),t},n.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var i=0;t.isEven()&&r.isEven();i++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var n=t.cmp(r);if(n<0){var s=t;t=r,r=s}else if(0===n||0===r.cmpn(1))break;t.isub(r)}return r.iushln(i)},n.prototype.invm=function(e){return this.egcd(e).a.umod(e)},n.prototype.isEven=function(){return(1&this.words[0])==0},n.prototype.isOdd=function(){return(1&this.words[0])==1},n.prototype.andln=function(e){return this.words[0]&e},n.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,i=(e-t)/26,n=1<<t;if(this.length<=i)return this._expand(i+1),this.words[i]|=n,this;for(var s=n,o=i;0!==s&&o<this.length;o++){var a=0|this.words[o];a+=s,s=a>>>26,a&=0x3ffffff,this.words[o]=a}return 0!==s&&(this.words[o]=s,this.length++),this},n.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},n.prototype.cmpn=function(e){var t,i=e<0;if(0!==this.negative&&!i)return -1;if(0===this.negative&&i)return 1;if(this.strip(),this.length>1)t=1;else{i&&(e=-e),r(e<=0x3ffffff,"Number is too big");var n=0|this.words[0];t=n===e?0:n<e?-1:1}return 0!==this.negative?0|-t:t},n.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return -1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},n.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return -1;for(var t=0,r=this.length-1;r>=0;r--){var i=0|this.words[r],n=0|e.words[r];if(i!==n){i<n?t=-1:i>n&&(t=1);break}}return t},n.prototype.gtn=function(e){return 1===this.cmpn(e)},n.prototype.gt=function(e){return 1===this.cmp(e)},n.prototype.gten=function(e){return this.cmpn(e)>=0},n.prototype.gte=function(e){return this.cmp(e)>=0},n.prototype.ltn=function(e){return -1===this.cmpn(e)},n.prototype.lt=function(e){return -1===this.cmp(e)},n.prototype.lten=function(e){return 0>=this.cmpn(e)},n.prototype.lte=function(e){return 0>=this.cmp(e)},n.prototype.eqn=function(e){return 0===this.cmpn(e)},n.prototype.eq=function(e){return 0===this.cmp(e)},n.red=function(e){return new E(e)},n.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},n.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(e){return this.red=e,this},n.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},n.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},n.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},n.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},n.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},n.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},n.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},n.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},n.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var y={k256:null,p224:null,p192:null,p25519:null};function m(e,t){this.name=e,this.p=new n(t,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){m.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){m.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function D(){m.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function x(){m.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function E(e){if("string"==typeof e){var t=n._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function _(e){E.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}m.prototype._tmp=function(){var e=new n(null);return e.words=Array(Math.ceil(this.n/13)),e},m.prototype.ireduce=function(e){var t,r=e;do this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength();while(t>this.n)var i=t<this.n?-1:r.ucmp(this.p);return 0===i?(r.words[0]=0,r.length=1):i>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},m.prototype.split=function(e,t){e.iushrn(this.n,0,t)},m.prototype.imulK=function(e){return e.imul(this.k)},i(v,m),v.prototype.split=function(e,t){for(var r=Math.min(e.length,9),i=0;i<r;i++)t.words[i]=e.words[i];if(t.length=r,e.length<=9){e.words[0]=0,e.length=1;return}var n=e.words[9];for(i=10,t.words[t.length++]=4194303&n;i<e.length;i++){var s=0|e.words[i];e.words[i-10]=(4194303&s)<<4|n>>>22,n=s}n>>>=22,e.words[i-10]=n,0===n&&e.length>10?e.length-=10:e.length-=9},v.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var i=0|e.words[r];t+=977*i,e.words[r]=0x3ffffff&t,t=64*i+(t/0x4000000|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(w,m),i(D,m),i(x,m),x.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var i=(0|e.words[r])*19+t,n=0x3ffffff&i;i>>>=26,e.words[r]=n,t=i}return 0!==t&&(e.words[e.length++]=t),e},n._prime=function(e){var t;if(y[e])return y[e];if("k256"===e)t=new v;else if("p224"===e)t=new w;else if("p192"===e)t=new D;else if("p25519"===e)t=new x;else throw Error("Unknown prime "+e);return y[e]=t,t},E.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},E.prototype._verify2=function(e,t){r((e.negative|t.negative)==0,"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},E.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},E.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},E.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},E.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},E.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return 0>r.cmpn(0)&&r.iadd(this.m),r._forceRed(this)},E.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return 0>r.cmpn(0)&&r.iadd(this.m),r},E.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},E.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},E.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},E.prototype.isqr=function(e){return this.imul(e,e.clone())},E.prototype.sqr=function(e){return this.mul(e,e)},E.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var i=this.m.add(new n(1)).iushrn(2);return this.pow(e,i)}for(var s=this.m.subn(1),o=0;!s.isZero()&&0===s.andln(1);)o++,s.iushrn(1);r(!s.isZero());var a=new n(1).toRed(this),h=a.redNeg(),u=this.m.subn(1).iushrn(1),f=this.m.bitLength();for(f=new n(2*f*f).toRed(this);0!==this.pow(f,u).cmp(h);)f.redIAdd(h);for(var c=this.pow(f,s),l=this.pow(e,s.addn(1).iushrn(1)),d=this.pow(e,s),p=o;0!==d.cmp(a);){for(var g=d,b=0;0!==g.cmp(a);b++)g=g.redSqr();r(b<p);var y=this.pow(c,new n(1).iushln(p-b-1));l=l.redMul(y),c=y.redSqr(),d=d.redMul(c),p=b}return l},E.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},E.prototype.pow=function(e,t){if(t.isZero())return new n(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=Array(16);r[0]=new n(1).toRed(this),r[1]=e;for(var i=2;i<r.length;i++)r[i]=this.mul(r[i-1],e);var s=r[0],o=0,a=0,h=t.bitLength()%26;for(0===h&&(h=26),i=t.length-1;i>=0;i--){for(var u=t.words[i],f=h-1;f>=0;f--){var c=u>>f&1;if(s!==r[0]&&(s=this.sqr(s)),0===c&&0===o){a=0;continue}o<<=1,o|=c,(4==++a||0===i&&0===f)&&(s=this.mul(s,r[o]),a=0,o=0)}h=26}return s},E.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},E.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},n.mont=function(e){return new _(e)},i(_,E),_.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},_.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},_.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),s=n;return n.cmp(this.m)>=0?s=n.isub(this.m):0>n.cmpn(0)&&(s=n.iadd(this.m)),s._forceRed(this)},_.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new n(0)._forceRed(this);var r=e.mul(t),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=r.isub(i).iushrn(this.shift),o=s;return s.cmp(this.m)>=0?o=s.isub(this.m):0>s.cmpn(0)&&(o=s.iadd(this.m)),o._forceRed(this)},_.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,this)}),o("lC4vN",function(e,t){var r=e.exports;function i(e){return 1===e.length?"0"+e:e}function n(e){for(var t="",r=0;r<e.length;r++)t+=i(e[r].toString(16));return t}r.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"!=typeof e){for(var i=0;i<e.length;i++)r[i]=0|e[i];return r}if("hex"===t){(e=e.replace(/[^a-z0-9]+/ig,"")).length%2!=0&&(e="0"+e);for(var i=0;i<e.length;i+=2)r.push(parseInt(e[i]+e[i+1],16))}else for(var i=0;i<e.length;i++){var n=e.charCodeAt(i),s=n>>8,o=255&n;s?r.push(s,o):r.push(o)}return r},r.zero2=i,r.toHex=n,r.encode=function(e,t){return"hex"===t?n(e):e}}),o("7JHF0",function(e,t){var r;function i(e){this.rand=e}if(e.exports=function(e){return r||(r=new i(null)),r.generate(e)},e.exports.Rand=i,i.prototype.generate=function(e){return this._rand(e)},i.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),r=0;r<t.length;r++)t[r]=this.rand.getByte();return t},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?i.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?i.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:"object"==typeof window&&(i.prototype._rand=function(){throw Error("Not implemented yet")});else try{var n=s("kjyEk");if("function"!=typeof n.randomBytes)throw Error("Not supported");i.prototype._rand=function(e){return n.randomBytes(e)}}catch(e){}}),o("eOn6d",function(e,t){var r=e.exports;r.base=s("ci9lD"),r.short=s("2L80b"),r.mont=s("iBzjI"),r.edwards=s("dM3w2")}),o("ci9lD",function(e,t){var r=s("eSnEe"),i=s("85hQD"),n=i.getNAF,o=i.getJSF,a=i.assert;function h(e,t){this.type=e,this.p=new r(t.p,16),this.red=t.prime?r.red(t.prime):r.mont(this.p),this.zero=new r(0).toRed(this.red),this.one=new r(1).toRed(this.red),this.two=new r(2).toRed(this.red),this.n=t.n&&new r(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=[,,,,],this._wnafT2=[,,,,],this._wnafT3=[,,,,],this._wnafT4=[,,,,],this._bitLength=this.n?this.n.bitLength():0;var i=this.n&&this.p.div(this.n);!i||i.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function u(e,t){this.curve=e,this.type=t,this.precomputed=null}e.exports=h,h.prototype.point=function(){throw Error("Not implemented")},h.prototype.validate=function(){throw Error("Not implemented")},h.prototype._fixedNafMul=function(e,t){a(e.precomputed);var r,i,s=e._getDoubles(),o=n(t,1,this._bitLength),h=(1<<s.step+1)-(s.step%2==0?2:1);h/=3;var u=[];for(r=0;r<o.length;r+=s.step){i=0;for(var f=r+s.step-1;f>=r;f--)i=(i<<1)+o[f];u.push(i)}for(var c=this.jpoint(null,null,null),l=this.jpoint(null,null,null),d=h;d>0;d--){for(r=0;r<u.length;r++)(i=u[r])===d?l=l.mixedAdd(s.points[r]):i===-d&&(l=l.mixedAdd(s.points[r].neg()));c=c.add(l)}return c.toP()},h.prototype._wnafMul=function(e,t){var r=4,i=e._getNAFPoints(r);r=i.wnd;for(var s=i.points,o=n(t,r,this._bitLength),h=this.jpoint(null,null,null),u=o.length-1;u>=0;u--){for(var f=0;u>=0&&0===o[u];u--)f++;if(u>=0&&f++,h=h.dblp(f),u<0)break;var c=o[u];a(0!==c),h="affine"===e.type?c>0?h.mixedAdd(s[c-1>>1]):h.mixedAdd(s[-c-1>>1].neg()):c>0?h.add(s[c-1>>1]):h.add(s[-c-1>>1].neg())}return"affine"===e.type?h.toP():h},h.prototype._wnafMulAdd=function(e,t,r,i,s){var a,h,u,f=this._wnafT1,c=this._wnafT2,l=this._wnafT3,d=0;for(a=0;a<i;a++){var p=(u=t[a])._getNAFPoints(e);f[a]=p.wnd,c[a]=p.points}for(a=i-1;a>=1;a-=2){var g=a-1,b=a;if(1!==f[g]||1!==f[b]){l[g]=n(r[g],f[g],this._bitLength),l[b]=n(r[b],f[b],this._bitLength),d=Math.max(l[g].length,d),d=Math.max(l[b].length,d);continue}var y=[t[g],null,null,t[b]];0===t[g].y.cmp(t[b].y)?(y[1]=t[g].add(t[b]),y[2]=t[g].toJ().mixedAdd(t[b].neg())):0===t[g].y.cmp(t[b].y.redNeg())?(y[1]=t[g].toJ().mixedAdd(t[b]),y[2]=t[g].add(t[b].neg())):(y[1]=t[g].toJ().mixedAdd(t[b]),y[2]=t[g].toJ().mixedAdd(t[b].neg()));var m=[-3,-1,-5,-7,0,7,5,1,3],v=o(r[g],r[b]);for(h=0,d=Math.max(v[0].length,d),l[g]=Array(d),l[b]=Array(d);h<d;h++){var w=0|v[0][h],D=0|v[1][h];l[g][h]=m[(w+1)*3+(D+1)],l[b][h]=0,c[g]=y}}var x=this.jpoint(null,null,null),E=this._wnafT4;for(a=d;a>=0;a--){for(var _=0;a>=0;){var S=!0;for(h=0;h<i;h++)E[h]=0|l[h][a],0!==E[h]&&(S=!1);if(!S)break;_++,a--}if(a>=0&&_++,x=x.dblp(_),a<0)break;for(h=0;h<i;h++){var I=E[h];0!==I&&(I>0?u=c[h][I-1>>1]:I<0&&(u=c[h][-I-1>>1].neg()),x="affine"===u.type?x.mixedAdd(u):x.add(u))}}for(a=0;a<i;a++)c[a]=null;return s?x:x.toP()},h.BasePoint=u,u.prototype.eq=function(){throw Error("Not implemented")},u.prototype.validate=function(){return this.curve.validate(this)},h.prototype.decodePoint=function(e,t){e=i.toArray(e,t);var r=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*r)return 6===e[0]?a(e[e.length-1]%2==0):7===e[0]&&a(e[e.length-1]%2==1),this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));if((2===e[0]||3===e[0])&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),3===e[0]);throw Error("Unknown point format")},u.prototype.encodeCompressed=function(e){return this.encode(e,!0)},u.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))},u.prototype.encode=function(e,t){return i.encode(this._encode(t),e)},u.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},u.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},u.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],i=this,n=0;n<t;n+=e){for(var s=0;s<e;s++)i=i.dbl();r.push(i)}return{step:e,points:r}},u.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,i=1===r?null:this.dbl(),n=1;n<r;n++)t[n]=t[n-1].add(i);return{wnd:e,points:t}},u.prototype._getBeta=function(){return null},u.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t}}),o("2L80b",function(e,t){var r=s("85hQD"),i=s("eSnEe"),n=s("dlqwk"),o=s("ci9lD"),a=r.assert;function h(e){o.call(this,"short",e),this.a=new i(e.a,16).toRed(this.red),this.b=new i(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=[,,,,],this._endoWnafT2=[,,,,]}function u(e,t,r,n){o.BasePoint.call(this,e,"affine"),null===t&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new i(t,16),this.y=new i(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function f(e,t,r,n){o.BasePoint.call(this,e,"jacobian"),null===t&&null===r&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new i(0)):(this.x=new i(t,16),this.y=new i(r,16),this.z=new i(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}n(h,o),e.exports=h,h.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){if(e.beta)t=new i(e.beta,16).toRed(this.red);else{var t,r,n,s=this._getEndoRoots(this.p);t=(t=0>s[0].cmp(s[1])?s[0]:s[1]).toRed(this.red)}if(e.lambda)r=new i(e.lambda,16);else{var o=this._getEndoRoots(this.n);0===this.g.mul(o[0]).x.cmp(this.g.x.redMul(t))?r=o[0]:(r=o[1],a(0===this.g.mul(r).x.cmp(this.g.x.redMul(t))))}return n=e.basis?e.basis.map(function(e){return{a:new i(e.a,16),b:new i(e.b,16)}}):this._getEndoBasis(r),{beta:t,lambda:r,basis:n}}},h.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:i.mont(e),r=new i(2).toRed(t).redInvm(),n=r.redNeg(),s=new i(3).toRed(t).redNeg().redSqrt().redMul(r);return[n.redAdd(s).fromRed(),n.redSub(s).fromRed()]},h.prototype._getEndoBasis=function(e){for(var t,r,n,s,o,a,h,u,f,c=this.n.ushrn(Math.floor(this.n.bitLength()/2)),l=e,d=this.n.clone(),p=new i(1),g=new i(0),b=new i(0),y=new i(1),m=0;0!==l.cmpn(0);){var v=d.div(l);u=d.sub(v.mul(l)),f=b.sub(v.mul(p));var w=y.sub(v.mul(g));if(!n&&0>u.cmp(c))t=h.neg(),r=p,n=u.neg(),s=f;else if(n&&2==++m)break;h=u,d=l,l=u,b=p,p=f,y=g,g=w}o=u.neg(),a=f;var D=n.sqr().add(s.sqr());return o.sqr().add(a.sqr()).cmp(D)>=0&&(o=t,a=r),n.negative&&(n=n.neg(),s=s.neg()),o.negative&&(o=o.neg(),a=a.neg()),[{a:n,b:s},{a:o,b:a}]},h.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],i=t[1],n=i.b.mul(e).divRound(this.n),s=r.b.neg().mul(e).divRound(this.n),o=n.mul(r.a),a=s.mul(i.a),h=n.mul(r.b),u=s.mul(i.b);return{k1:e.sub(o).sub(a),k2:h.add(u).neg()}},h.prototype.pointFromX=function(e,t){(e=new i(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=r.redSqrt();if(0!==n.redSqr().redSub(r).cmp(this.zero))throw Error("invalid point");var s=n.fromRed().isOdd();return(t&&!s||!t&&s)&&(n=n.redNeg()),this.point(e,n)},h.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,i=this.a.redMul(t),n=t.redSqr().redMul(t).redIAdd(i).redIAdd(this.b);return 0===r.redSqr().redISub(n).cmpn(0)},h.prototype._endoWnafMulAdd=function(e,t,r){for(var i=this._endoWnafT1,n=this._endoWnafT2,s=0;s<e.length;s++){var o=this._endoSplit(t[s]),a=e[s],h=a._getBeta();o.k1.negative&&(o.k1.ineg(),a=a.neg(!0)),o.k2.negative&&(o.k2.ineg(),h=h.neg(!0)),i[2*s]=a,i[2*s+1]=h,n[2*s]=o.k1,n[2*s+1]=o.k2}for(var u=this._wnafMulAdd(1,i,n,2*s,r),f=0;f<2*s;f++)i[f]=null,n[f]=null;return u},n(u,o.BasePoint),h.prototype.point=function(e,t,r){return new u(this,e,t,r)},h.prototype.pointFromJSON=function(e,t){return u.fromJSON(this,e,t)},u.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,i=function(e){return r.point(e.x.redMul(r.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return t}},u.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},u.fromJSON=function(e,t,r){"string"==typeof t&&(t=JSON.parse(t));var i=e.point(t[0],t[1],r);if(!t[2])return i;function n(t){return e.point(t[0],t[1],r)}var s=t[2];return i.precomputed={beta:null,doubles:s.doubles&&{step:s.doubles.step,points:[i].concat(s.doubles.points.map(n))},naf:s.naf&&{wnd:s.naf.wnd,points:[i].concat(s.naf.points.map(n))}},i},u.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},u.prototype.isInfinity=function(){return this.inf},u.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e)||0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),i=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,i)},u.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),i=e.redInvm(),n=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(i),s=n.redSqr().redISub(this.x.redAdd(this.x)),o=n.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,o)},u.prototype.getX=function(){return this.x.fromRed()},u.prototype.getY=function(){return this.y.fromRed()},u.prototype.mul=function(e){return(e=new i(e,16),this.isInfinity())?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},u.prototype.mulAdd=function(e,t,r){var i=[this,t],n=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(i,n):this.curve._wnafMulAdd(1,i,n,2)},u.prototype.jmulAdd=function(e,t,r){var i=[this,t],n=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(i,n,!0):this.curve._wnafMulAdd(1,i,n,2,!0)},u.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},u.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,i=function(e){return e.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(i)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(i)}}}return t},u.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},n(f,o.BasePoint),h.prototype.jpoint=function(e,t,r){return new f(this,e,t,r)},f.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),i=this.y.redMul(t).redMul(e);return this.curve.point(r,i)},f.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},f.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),i=this.x.redMul(t),n=e.x.redMul(r),s=this.y.redMul(t.redMul(e.z)),o=e.y.redMul(r.redMul(this.z)),a=i.redSub(n),h=s.redSub(o);if(0===a.cmpn(0))if(0!==h.cmpn(0))return this.curve.jpoint(null,null,null);else return this.dbl();var u=a.redSqr(),f=u.redMul(a),c=i.redMul(u),l=h.redSqr().redIAdd(f).redISub(c).redISub(c),d=h.redMul(c.redISub(l)).redISub(s.redMul(f)),p=this.z.redMul(e.z).redMul(a);return this.curve.jpoint(l,d,p)},f.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,i=e.x.redMul(t),n=this.y,s=e.y.redMul(t).redMul(this.z),o=r.redSub(i),a=n.redSub(s);if(0===o.cmpn(0))if(0!==a.cmpn(0))return this.curve.jpoint(null,null,null);else return this.dbl();var h=o.redSqr(),u=h.redMul(o),f=r.redMul(h),c=a.redSqr().redIAdd(u).redISub(f).redISub(f),l=a.redMul(f.redISub(c)).redISub(n.redMul(u)),d=this.z.redMul(o);return this.curve.jpoint(c,l,d)},f.prototype.dblp=function(e){if(0===e||this.isInfinity())return this;if(!e)return this.dbl();if(this.curve.zeroA||this.curve.threeA){var t,r=this;for(t=0;t<e;t++)r=r.dbl();return r}var i=this.curve.a,n=this.curve.tinv,s=this.x,o=this.y,a=this.z,h=a.redSqr().redSqr(),u=o.redAdd(o);for(t=0;t<e;t++){var f=s.redSqr(),c=u.redSqr(),l=c.redSqr(),d=f.redAdd(f).redIAdd(f).redIAdd(i.redMul(h)),p=s.redMul(c),g=d.redSqr().redISub(p.redAdd(p)),b=p.redISub(g),y=d.redMul(b);y=y.redIAdd(y).redISub(l);var m=u.redMul(a);t+1<e&&(h=h.redMul(l)),s=g,a=m,u=y}return this.curve.jpoint(s,u.redMul(n),a)},f.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},f.prototype._zeroDbl=function(){if(this.zOne){var e,t,r,i=this.x.redSqr(),n=this.y.redSqr(),s=n.redSqr(),o=this.x.redAdd(n).redSqr().redISub(i).redISub(s);o=o.redIAdd(o);var a=i.redAdd(i).redIAdd(i),h=a.redSqr().redISub(o).redISub(o),u=s.redIAdd(s);u=(u=u.redIAdd(u)).redIAdd(u),e=h,t=a.redMul(o.redISub(h)).redISub(u),r=this.y.redAdd(this.y)}else{var f=this.x.redSqr(),c=this.y.redSqr(),l=c.redSqr(),d=this.x.redAdd(c).redSqr().redISub(f).redISub(l);d=d.redIAdd(d);var p=f.redAdd(f).redIAdd(f),g=p.redSqr(),b=l.redIAdd(l);b=(b=b.redIAdd(b)).redIAdd(b),e=g.redISub(d).redISub(d),t=p.redMul(d.redISub(e)).redISub(b),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(e,t,r)},f.prototype._threeDbl=function(){if(this.zOne){var e,t,r,i=this.x.redSqr(),n=this.y.redSqr(),s=n.redSqr(),o=this.x.redAdd(n).redSqr().redISub(i).redISub(s);o=o.redIAdd(o);var a=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),h=a.redSqr().redISub(o).redISub(o);e=h;var u=s.redIAdd(s);u=(u=u.redIAdd(u)).redIAdd(u),t=a.redMul(o.redISub(h)).redISub(u),r=this.y.redAdd(this.y)}else{var f=this.z.redSqr(),c=this.y.redSqr(),l=this.x.redMul(c),d=this.x.redSub(f).redMul(this.x.redAdd(f));d=d.redAdd(d).redIAdd(d);var p=l.redIAdd(l),g=(p=p.redIAdd(p)).redAdd(p);e=d.redSqr().redISub(g),r=this.y.redAdd(this.z).redSqr().redISub(c).redISub(f);var b=c.redSqr();b=(b=(b=b.redIAdd(b)).redIAdd(b)).redIAdd(b),t=d.redMul(p.redISub(e)).redISub(b)}return this.curve.jpoint(e,t,r)},f.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,i=this.z,n=i.redSqr().redSqr(),s=t.redSqr(),o=r.redSqr(),a=s.redAdd(s).redIAdd(s).redIAdd(e.redMul(n)),h=t.redAdd(t),u=(h=h.redIAdd(h)).redMul(o),f=a.redSqr().redISub(u.redAdd(u)),c=u.redISub(f),l=o.redSqr();l=(l=(l=l.redIAdd(l)).redIAdd(l)).redIAdd(l);var d=a.redMul(c).redISub(l),p=r.redAdd(r).redMul(i);return this.curve.jpoint(f,d,p)},f.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),i=t.redSqr(),n=e.redAdd(e).redIAdd(e),s=n.redSqr(),o=this.x.redAdd(t).redSqr().redISub(e).redISub(i),a=(o=(o=(o=o.redIAdd(o)).redAdd(o).redIAdd(o)).redISub(s)).redSqr(),h=i.redIAdd(i);h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var u=n.redIAdd(o).redSqr().redISub(s).redISub(a).redISub(h),f=t.redMul(u);f=(f=f.redIAdd(f)).redIAdd(f);var c=this.x.redMul(a).redISub(f);c=(c=c.redIAdd(c)).redIAdd(c);var l=this.y.redMul(u.redMul(h.redISub(u)).redISub(o.redMul(a)));l=(l=(l=l.redIAdd(l)).redIAdd(l)).redIAdd(l);var d=this.z.redAdd(o).redSqr().redISub(r).redISub(a);return this.curve.jpoint(c,l,d)},f.prototype.mul=function(e,t){return e=new i(e,t),this.curve._wnafMul(this,e)},f.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(0!==this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0))return!1;var i=t.redMul(this.z),n=r.redMul(e.z);return 0===this.y.redMul(n).redISub(e.y.redMul(i)).cmpn(0)},f.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(r))return!0;for(var i=e.clone(),n=this.curve.redN.redMul(t);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(n),0===this.x.cmp(r))return!0}},f.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},f.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}}),o("iBzjI",function(e,t){var r=s("eSnEe"),i=s("dlqwk"),n=s("ci9lD"),o=s("85hQD");function a(e){n.call(this,"mont",e),this.a=new r(e.a,16).toRed(this.red),this.b=new r(e.b,16).toRed(this.red),this.i4=new r(4).toRed(this.red).redInvm(),this.two=new r(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function h(e,t,i){n.BasePoint.call(this,e,"projective"),null===t&&null===i?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new r(t,16),this.z=new r(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}i(a,n),e.exports=a,a.prototype.validate=function(e){var t=e.normalize().x,r=t.redSqr(),i=r.redMul(t).redAdd(r.redMul(this.a)).redAdd(t);return 0===i.redSqrt().redSqr().cmp(i)},i(h,n.BasePoint),a.prototype.decodePoint=function(e,t){return this.point(o.toArray(e,t),1)},a.prototype.point=function(e,t){return new h(this,e,t)},a.prototype.pointFromJSON=function(e){return h.fromJSON(this,e)},h.prototype.precompute=function(){},h.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},h.fromJSON=function(e,t){return new h(e,t[0],t[1]||e.one)},h.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},h.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},h.prototype.dbl=function(){var e=this.x.redAdd(this.z).redSqr(),t=this.x.redSub(this.z).redSqr(),r=e.redSub(t),i=e.redMul(t),n=r.redMul(t.redAdd(this.curve.a24.redMul(r)));return this.curve.point(i,n)},h.prototype.add=function(){throw Error("Not supported on Montgomery curve")},h.prototype.diffAdd=function(e,t){var r=this.x.redAdd(this.z),i=this.x.redSub(this.z),n=e.x.redAdd(e.z),s=e.x.redSub(e.z).redMul(r),o=n.redMul(i),a=t.z.redMul(s.redAdd(o).redSqr()),h=t.x.redMul(s.redISub(o).redSqr());return this.curve.point(a,h)},h.prototype.mul=function(e){for(var t=e.clone(),r=this,i=this.curve.point(null,null),n=[];0!==t.cmpn(0);t.iushrn(1))n.push(t.andln(1));for(var s=n.length-1;s>=0;s--)0===n[s]?(r=r.diffAdd(i,this),i=i.dbl()):(i=r.diffAdd(i,this),r=r.dbl());return i},h.prototype.mulAdd=function(){throw Error("Not supported on Montgomery curve")},h.prototype.jumlAdd=function(){throw Error("Not supported on Montgomery curve")},h.prototype.eq=function(e){return 0===this.getX().cmp(e.getX())},h.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},h.prototype.getX=function(){return this.normalize(),this.x.fromRed()}}),o("dM3w2",function(e,t){var r=s("85hQD"),i=s("eSnEe"),n=s("dlqwk"),o=s("ci9lD"),a=r.assert;function h(e){this.twisted=(0|e.a)!=1,this.mOneA=this.twisted&&(0|e.a)==-1,this.extended=this.mOneA,o.call(this,"edwards",e),this.a=new i(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new i(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new i(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),a(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=(0|e.c)==1}function u(e,t,r,n,s){o.BasePoint.call(this,e,"projective"),null===t&&null===r&&null===n?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new i(t,16),this.y=new i(r,16),this.z=n?new i(n,16):this.curve.one,this.t=s&&new i(s,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}n(h,o),e.exports=h,h.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},h.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},h.prototype.jpoint=function(e,t,r,i){return this.point(e,t,r,i)},h.prototype.pointFromX=function(e,t){(e=new i(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr(),n=this.c2.redSub(this.a.redMul(r)),s=this.one.redSub(this.c2.redMul(this.d).redMul(r)),o=n.redMul(s.redInvm()),a=o.redSqrt();if(0!==a.redSqr().redSub(o).cmp(this.zero))throw Error("invalid point");var h=a.fromRed().isOdd();return(t&&!h||!t&&h)&&(a=a.redNeg()),this.point(e,a)},h.prototype.pointFromY=function(e,t){(e=new i(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr(),n=r.redSub(this.c2),s=r.redMul(this.d).redMul(this.c2).redSub(this.a),o=n.redMul(s.redInvm());if(0===o.cmp(this.zero))if(!t)return this.point(this.zero,e);else throw Error("invalid point");var a=o.redSqrt();if(0!==a.redSqr().redSub(o).cmp(this.zero))throw Error("invalid point");return a.fromRed().isOdd()!==t&&(a=a.redNeg()),this.point(a,e)},h.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),r=e.y.redSqr(),i=t.redMul(this.a).redAdd(r),n=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(r)));return 0===i.cmp(n)},n(u,o.BasePoint),h.prototype.pointFromJSON=function(e){return u.fromJSON(this,e)},h.prototype.point=function(e,t,r,i){return new u(this,e,t,r,i)},u.fromJSON=function(e,t){return new u(e,t[0],t[1],t[2])},u.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},u.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},u.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr();r=r.redIAdd(r);var i=this.curve._mulA(e),n=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),s=i.redAdd(t),o=s.redSub(r),a=i.redSub(t),h=n.redMul(o),u=s.redMul(a),f=n.redMul(a),c=o.redMul(s);return this.curve.point(h,u,c,f)},u.prototype._projDbl=function(){var e,t,r,i,n,s,o=this.x.redAdd(this.y).redSqr(),a=this.x.redSqr(),h=this.y.redSqr();if(this.curve.twisted){var u=(i=this.curve._mulA(a)).redAdd(h);this.zOne?(e=o.redSub(a).redSub(h).redMul(u.redSub(this.curve.two)),t=u.redMul(i.redSub(h)),r=u.redSqr().redSub(u).redSub(u)):(n=this.z.redSqr(),s=u.redSub(n).redISub(n),e=o.redSub(a).redISub(h).redMul(s),t=u.redMul(i.redSub(h)),r=u.redMul(s))}else i=a.redAdd(h),n=this.curve._mulC(this.z).redSqr(),s=i.redSub(n).redSub(n),e=this.curve._mulC(o.redISub(i)).redMul(s),t=this.curve._mulC(i).redMul(a.redISub(h)),r=i.redMul(s);return this.curve.point(e,t,r)},u.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},u.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),r=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),i=this.t.redMul(this.curve.dd).redMul(e.t),n=this.z.redMul(e.z.redAdd(e.z)),s=r.redSub(t),o=n.redSub(i),a=n.redAdd(i),h=r.redAdd(t),u=s.redMul(o),f=a.redMul(h),c=s.redMul(h),l=o.redMul(a);return this.curve.point(u,f,l,c)},u.prototype._projAdd=function(e){var t,r,i=this.z.redMul(e.z),n=i.redSqr(),s=this.x.redMul(e.x),o=this.y.redMul(e.y),a=this.curve.d.redMul(s).redMul(o),h=n.redSub(a),u=n.redAdd(a),f=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(s).redISub(o),c=i.redMul(h).redMul(f);return this.curve.twisted?(t=i.redMul(u).redMul(o.redSub(this.curve._mulA(s))),r=h.redMul(u)):(t=i.redMul(u).redMul(o.redSub(s)),r=this.curve._mulC(h).redMul(u)),this.curve.point(c,t,r)},u.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},u.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},u.prototype.mulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!1)},u.prototype.jmulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!0)},u.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},u.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},u.prototype.getX=function(){return this.normalize(),this.x.fromRed()},u.prototype.getY=function(){return this.normalize(),this.y.fromRed()},u.prototype.eq=function(e){return this===e||0===this.getX().cmp(e.getX())&&0===this.getY().cmp(e.getY())},u.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(t))return!0;for(var r=e.clone(),i=this.curve.redN.redMul(this.z);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(i),0===this.x.cmp(t))return!0}},u.prototype.toP=u.prototype.normalize,u.prototype.mixedAdd=u.prototype.add}),o("3HkkL",function(e,t){var r,i=e.exports,n=s("kiSKt"),o=s("eOn6d"),a=s("85hQD").assert;function h(e){"short"===e.type?this.curve=new o.short(e):"edwards"===e.type?this.curve=new o.edwards(e):this.curve=new o.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,a(this.g.validate(),"Invalid curve"),a(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function u(e,t){Object.defineProperty(i,e,{configurable:!0,enumerable:!0,get:function(){var r=new h(t);return Object.defineProperty(i,e,{configurable:!0,enumerable:!0,value:r}),r}})}i.PresetCurve=h,u("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:n.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),u("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:n.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),u("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:n.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),u("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:n.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),u("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:n.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),u("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:n.sha256,gRed:!1,g:["9"]}),u("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:n.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=s("c8OrP")}catch(e){r=void 0}u("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:n.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})}),o("kiSKt",function(e,t){var r=e.exports;r.utils=s("btcbI"),r.common=s("aAb7n"),r.sha=s("2wnQk"),r.ripemd=s("05eZB"),r.hmac=s("ap2lu"),r.sha1=r.sha.sha1,r.sha256=r.sha.sha256,r.sha224=r.sha.sha224,r.sha384=r.sha.sha384,r.sha512=r.sha.sha512,r.ripemd160=r.ripemd.ripemd160}),o("c8OrP",function(e,t){e.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}}),o("hkMcO",function(e,t){var r=s("eSnEe"),i=s("kKonu"),n=s("85hQD"),o=s("3HkkL"),a=s("7JHF0"),h=n.assert,u=s("8luVW"),f=s("5Orvh");function c(e){if(!(this instanceof c))return new c(e);"string"==typeof e&&(h(Object.prototype.hasOwnProperty.call(o,e),"Unknown curve "+e),e=o[e]),e instanceof o.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}e.exports=c,c.prototype.keyPair=function(e){return new u(this,e)},c.prototype.keyFromPrivate=function(e,t){return u.fromPrivate(this,e,t)},c.prototype.keyFromPublic=function(e,t){return u.fromPublic(this,e,t)},c.prototype.genKeyPair=function(e){e||(e={});for(var t=new i({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||a(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),s=this.n.sub(new r(2));;){var o=new r(t.generate(n));if(!(o.cmp(s)>0))return o.iaddn(1),this.keyFromPrivate(o)}},c.prototype._truncateToN=function(e,t){var r=8*e.byteLength()-this.n.bitLength();return(r>0&&(e=e.ushrn(r)),!t&&e.cmp(this.n)>=0)?e.sub(this.n):e},c.prototype.sign=function(e,t,n,s){"object"==typeof n&&(s=n,n=null),s||(s={}),t=this.keyFromPrivate(t,n),e=this._truncateToN(new r(e,16));for(var o=this.n.byteLength(),a=t.getPrivate().toArray("be",o),h=e.toArray("be",o),u=new i({hash:this.hash,entropy:a,nonce:h,pers:s.pers,persEnc:s.persEnc||"utf8"}),c=this.n.sub(new r(1)),l=0;;l++){var d=s.k?s.k(l):new r(u.generate(this.n.byteLength()));if(0>=(d=this._truncateToN(d,!0)).cmpn(1)||d.cmp(c)>=0)continue;var p=this.g.mul(d);if(!p.isInfinity()){var g=p.getX(),b=g.umod(this.n);if(0!==b.cmpn(0)){var y=d.invm(this.n).mul(b.mul(t.getPrivate()).iadd(e));if(0!==(y=y.umod(this.n)).cmpn(0)){var m=!!p.getY().isOdd()|2*(0!==g.cmp(b));return s.canonical&&y.cmp(this.nh)>0&&(y=this.n.sub(y),m^=1),new f({r:b,s:y,recoveryParam:m})}}}}},c.prototype.verify=function(e,t,i,n){e=this._truncateToN(new r(e,16)),i=this.keyFromPublic(i,n);var s,o=(t=new f(t,"hex")).r,a=t.s;if(0>o.cmpn(1)||o.cmp(this.n)>=0||0>a.cmpn(1)||a.cmp(this.n)>=0)return!1;var h=a.invm(this.n),u=h.mul(e).umod(this.n),c=h.mul(o).umod(this.n);return this.curve._maxwellTrick?!(s=this.g.jmulAdd(u,i.getPublic(),c)).isInfinity()&&s.eqXToP(o):!(s=this.g.mulAdd(u,i.getPublic(),c)).isInfinity()&&0===s.getX().umod(this.n).cmp(o)},c.prototype.recoverPubKey=function(e,t,i,n){h((3&i)===i,"The recovery param is more than two bits"),t=new f(t,n);var s=this.n,o=new r(e),a=t.r,u=t.s,c=1&i,l=i>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&l)throw Error("Unable to find sencond key candinate");a=l?this.curve.pointFromX(a.add(this.curve.n),c):this.curve.pointFromX(a,c);var d=t.r.invm(s),p=s.sub(o).mul(d).umod(s),g=u.mul(d).umod(s);return this.g.mulAdd(p,a,g)},c.prototype.getKeyRecoveryParam=function(e,t,r,i){if(null!==(t=new f(t,i)).recoveryParam)return t.recoveryParam;for(var n,s=0;s<4;s++){try{n=this.recoverPubKey(e,t,s)}catch(e){continue}if(n.eq(r))return s}throw Error("Unable to find valid recovery factor")}}),o("kKonu",function(e,t){var r=s("kiSKt"),i=s("lC4vN"),n=s("koC21");function o(e){if(!(this instanceof o))return new o(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=i.toArray(e.entropy,e.entropyEnc||"hex"),r=i.toArray(e.nonce,e.nonceEnc||"hex"),s=i.toArray(e.pers,e.persEnc||"hex");n(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,s)}e.exports=o,o.prototype._init=function(e,t,r){var i=e.concat(t).concat(r);this.K=Array(this.outLen/8),this.V=Array(this.outLen/8);for(var n=0;n<this.V.length;n++)this.K[n]=0,this.V[n]=1;this._update(i),this._reseed=1,this.reseedInterval=0x1000000000000},o.prototype._hmac=function(){return new r.hmac(this.hash,this.K)},o.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},o.prototype.reseed=function(e,t,r,s){"string"!=typeof t&&(s=r,r=t,t=null),e=i.toArray(e,t),r=i.toArray(r,s),n(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1},o.prototype.generate=function(e,t,r,n){if(this._reseed>this.reseedInterval)throw Error("Reseed is required");"string"!=typeof t&&(n=r,r=t,t=null),r&&(r=i.toArray(r,n||"hex"),this._update(r));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,e);return this._update(r),this._reseed++,i.encode(o,t)}}),o("8luVW",function(e,t){var r=s("eSnEe"),i=s("85hQD").assert;function n(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}e.exports=n,n.fromPublic=function(e,t,r){return t instanceof n?t:new n(e,{pub:t,pubEnc:r})},n.fromPrivate=function(e,t,r){return t instanceof n?t:new n(e,{priv:t,privEnc:r})},n.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},n.prototype.getPublic=function(e,t){return("string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t)?this.pub.encode(t,e):this.pub},n.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},n.prototype._importPrivate=function(e,t){this.priv=new r(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},n.prototype._importPublic=function(e,t){if(e.x||e.y){"mont"===this.ec.curve.type?i(e.x,"Need x coordinate"):("short"===this.ec.curve.type||"edwards"===this.ec.curve.type)&&i(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,t)},n.prototype.derive=function(e){return e.validate()||i(e.validate(),"public point not validated"),e.mul(this.priv).getX()},n.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)},n.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},n.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}}),o("5Orvh",function(e,t){var r=s("eSnEe"),i=s("85hQD"),n=i.assert;function o(e,t){if(e instanceof o)return e;this._importDER(e,t)||(n(e.r&&e.s,"Signature without r or s"),this.r=new r(e.r,16),this.s=new r(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}function a(){this.place=0}function h(e,t){var r=e[t.place++];if(!(128&r))return r;var i=15&r;if(0===i||i>4||0===e[t.place])return!1;for(var n=0,s=0,o=t.place;s<i;s++,o++)n<<=8,n|=e[o],n>>>=0;return!(n<=127)&&(t.place=o,n)}function u(e){for(var t=0,r=e.length-1;!e[t]&&!(128&e[t+1])&&t<r;)t++;return 0===t?e:e.slice(t)}function f(e,t){if(t<128)return void e.push(t);var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|r);--r;)e.push(t>>>(r<<3)&255);e.push(t)}e.exports=o,o.prototype._importDER=function(e,t){e=i.toArray(e,t);var n=new a;if(48!==e[n.place++])return!1;var s=h(e,n);if(!1===s||s+n.place!==e.length||2!==e[n.place++])return!1;var o=h(e,n);if(!1===o||(128&e[n.place])!=0)return!1;var u=e.slice(n.place,o+n.place);if(n.place+=o,2!==e[n.place++])return!1;var f=h(e,n);if(!1===f||e.length!==f+n.place||(128&e[n.place])!=0)return!1;var c=e.slice(n.place,f+n.place);if(0===u[0])if(!(128&u[1]))return!1;else u=u.slice(1);if(0===c[0])if(!(128&c[1]))return!1;else c=c.slice(1);return this.r=new r(u),this.s=new r(c),this.recoveryParam=null,!0},o.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&r[0]&&(r=[0].concat(r)),t=u(t),r=u(r);!r[0]&&!(128&r[1]);)r=r.slice(1);var n=[2];f(n,t.length),(n=n.concat(t)).push(2),f(n,r.length);var s=n.concat(r),o=[48];return f(o,s.length),o=o.concat(s),i.encode(o,e)}}),o("4kGlE",function(e,t){var r=s("kiSKt"),i=s("3HkkL"),n=s("85hQD"),o=n.assert,a=n.parseBytes,h=s("hJAxD"),u=s("8TPbV");function f(e){if(o("ed25519"===e,"only tested with ed25519 so far"),!(this instanceof f))return new f(e);e=i[e].curve,this.curve=e,this.g=e.g,this.g.precompute(e.n.bitLength()+1),this.pointClass=e.point().constructor,this.encodingLength=Math.ceil(e.n.bitLength()/8),this.hash=r.sha512}e.exports=f,f.prototype.sign=function(e,t){e=a(e);var r=this.keyFromSecret(t),i=this.hashInt(r.messagePrefix(),e),n=this.g.mul(i),s=this.encodePoint(n),o=this.hashInt(s,r.pubBytes(),e).mul(r.priv()),h=i.add(o).umod(this.curve.n);return this.makeSignature({R:n,S:h,Rencoded:s})},f.prototype.verify=function(e,t,r){if(e=a(e),(t=this.makeSignature(t)).S().gte(t.eddsa.curve.n)||t.S().isNeg())return!1;var i=this.keyFromPublic(r),n=this.hashInt(t.Rencoded(),i.pubBytes(),e),s=this.g.mul(t.S());return t.R().add(i.pub().mul(n)).eq(s)},f.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return n.intFromLE(e.digest()).umod(this.curve.n)},f.prototype.keyFromPublic=function(e){return h.fromPublic(this,e)},f.prototype.keyFromSecret=function(e){return h.fromSecret(this,e)},f.prototype.makeSignature=function(e){return e instanceof u?e:new u(this,e)},f.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=128*!!e.getX().isOdd(),t},f.prototype.decodePoint=function(e){var t=(e=n.parseBytes(e)).length-1,r=e.slice(0,t).concat(-129&e[t]),i=(128&e[t])!=0,s=n.intFromLE(r);return this.curve.pointFromY(s,i)},f.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},f.prototype.decodeInt=function(e){return n.intFromLE(e)},f.prototype.isPoint=function(e){return e instanceof this.pointClass}}),o("hJAxD",function(e,t){var r=s("85hQD"),i=r.assert,n=r.parseBytes,o=r.cachedProperty;function a(e,t){this.eddsa=e,this._secret=n(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=n(t.pub)}a.fromPublic=function(e,t){return t instanceof a?t:new a(e,{pub:t})},a.fromSecret=function(e,t){return t instanceof a?t:new a(e,{secret:t})},a.prototype.secret=function(){return this._secret},o(a,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),o(a,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),o(a,"privBytes",function(){var e=this.eddsa,t=this.hash(),r=e.encodingLength-1,i=t.slice(0,e.encodingLength);return i[0]&=248,i[r]&=127,i[r]|=64,i}),o(a,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),o(a,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),o(a,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),a.prototype.sign=function(e){return i(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},a.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)},a.prototype.getSecret=function(e){return i(this._secret,"KeyPair is public only"),r.encode(this.secret(),e)},a.prototype.getPublic=function(e){return r.encode(this.pubBytes(),e)},e.exports=a}),o("8TPbV",function(e,t){var r=s("eSnEe"),i=s("85hQD"),n=i.assert,o=i.cachedProperty,a=i.parseBytes;function h(e,t){this.eddsa=e,"object"!=typeof t&&(t=a(t)),Array.isArray(t)&&(n(t.length===2*e.encodingLength,"Signature has invalid size"),t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}),n(t.R&&t.S,"Signature without R or S"),e.isPoint(t.R)&&(this._R=t.R),t.S instanceof r&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}o(h,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),o(h,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),o(h,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),o(h,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),h.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},h.prototype.toHex=function(){return i.encode(this.toBytes(),"hex").toUpperCase()},e.exports=h}),o("6cqMT",function(e,r){var i,n,s,o="__lodash_hash_undefined__",a="[object Arguments]",h="[object Array]",u="[object Boolean]",f="[object Date]",c="[object Error]",l="[object Function]",d="[object Map]",p="[object Number]",g="[object Object]",b="[object Promise]",y="[object RegExp]",m="[object Set]",v="[object String]",w="[object WeakMap]",D="[object ArrayBuffer]",x="[object DataView]",E=/^\[object .+?Constructor\]$/,_=/^(?:0|[1-9]\d*)$/,S={};S["[object Float32Array]"]=S["[object Float64Array]"]=S["[object Int8Array]"]=S["[object Int16Array]"]=S["[object Int32Array]"]=S["[object Uint8Array]"]=S["[object Uint8ClampedArray]"]=S["[object Uint16Array]"]=S["[object Uint32Array]"]=!0,S[a]=S[h]=S[D]=S[u]=S[x]=S[f]=S[c]=S[l]=S[d]=S[p]=S[g]=S[y]=S[m]=S[v]=S[w]=!1;var I="object"==typeof t&&t&&t.Object===Object&&t,A="object"==typeof self&&self&&self.Object===Object&&self,M=I||A||Function("return this")(),C=r&&!r.nodeType&&r,O=C&&e&&!e.nodeType&&e,P=O&&O.exports===C,R=P&&I.process,T=function(){try{return R&&R.binding&&R.binding("util")}catch(e){}}(),N=T&&T.isTypedArray;function B(e){var t=-1,r=Array(e.size);return e.forEach(function(e,i){r[++t]=[i,e]}),r}function L(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}var k=Array.prototype,U=Function.prototype,z=Object.prototype,j=M["__core-js_shared__"],q=U.toString,F=z.hasOwnProperty,H=(i=/[^.]+$/.exec(j&&j.keys&&j.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"",K=z.toString,$=RegExp("^"+q.call(F).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),V=P?M.Buffer:void 0,W=M.Symbol,G=M.Uint8Array,Y=z.propertyIsEnumerable,Z=k.splice,J=W?W.toStringTag:void 0,X=Object.getOwnPropertySymbols,Q=V?V.isBuffer:void 0,ee=(n=Object.keys,s=Object,function(e){return n(s(e))}),et=eS(M,"DataView"),er=eS(M,"Map"),ei=eS(M,"Promise"),en=eS(M,"Set"),es=eS(M,"WeakMap"),eo=eS(Object,"create"),ea=eM(et),eh=eM(er),eu=eM(ei),ef=eM(en),ec=eM(es),el=W?W.prototype:void 0,ed=el?el.valueOf:void 0;function ep(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}function eg(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}function eb(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}function ey(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new eb;++t<r;)this.add(e[t])}function em(e){var t=this.__data__=new eg(e);this.size=t.size}function ev(e,t){for(var r=e.length;r--;)if(eC(e[r][0],t))return r;return -1}function ew(e){var t;return null==e?void 0===e?"[object Undefined]":"[object Null]":J&&J in Object(e)?function(e){var t=F.call(e,J),r=e[J];try{e[J]=void 0;var i=!0}catch(e){}var n=K.call(e);return i&&(t?e[J]=r:delete e[J]),n}(e):(t=e,K.call(t))}function eD(e){return eL(e)&&ew(e)==a}function ex(e,t,r,i,n,s){var o=1&r,a=e.length,h=t.length;if(a!=h&&!(o&&h>a))return!1;var u=s.get(e);if(u&&s.get(t))return u==t;var f=-1,c=!0,l=2&r?new ey:void 0;for(s.set(e,t),s.set(t,e);++f<a;){var d=e[f],p=t[f];if(i)var g=o?i(p,d,f,t,e,s):i(d,p,f,e,t,s);if(void 0!==g){if(g)continue;c=!1;break}if(l){if(!function(e,t){for(var r=-1,i=null==e?0:e.length;++r<i;)if(t(e[r],r,e))return!0;return!1}(t,function(e,t){if(!l.has(t)&&(d===e||n(d,e,r,i,s)))return l.push(t)})){c=!1;break}}else if(!(d===p||n(d,p,r,i,s))){c=!1;break}}return s.delete(e),s.delete(t),c}function eE(e){var t;return t=eU(e),eP(e)?t:function(e,t){for(var r=-1,i=t.length,n=e.length;++r<i;)e[n+r]=t[r];return e}(t,eI(e))}function e_(e,t){var r,i,n=e.__data__;return("string"==(i=typeof(r=t))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==r:null===r)?n["string"==typeof t?"string":"hash"]:n.map}function eS(e,t){var r,i=null==e?void 0:e[t];return!(!eB(i)||(r=i,H&&H in r))&&(eT(i)?$:E).test(eM(i))?i:void 0}ep.prototype.clear=function(){this.__data__=eo?eo(null):{},this.size=0},ep.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=!!t,t},ep.prototype.get=function(e){var t=this.__data__;if(eo){var r=t[e];return r===o?void 0:r}return F.call(t,e)?t[e]:void 0},ep.prototype.has=function(e){var t=this.__data__;return eo?void 0!==t[e]:F.call(t,e)},ep.prototype.set=function(e,t){var r=this.__data__;return this.size+=+!this.has(e),r[e]=eo&&void 0===t?o:t,this},eg.prototype.clear=function(){this.__data__=[],this.size=0},eg.prototype.delete=function(e){var t=this.__data__,r=ev(t,e);return!(r<0)&&(r==t.length-1?t.pop():Z.call(t,r,1),--this.size,!0)},eg.prototype.get=function(e){var t=this.__data__,r=ev(t,e);return r<0?void 0:t[r][1]},eg.prototype.has=function(e){return ev(this.__data__,e)>-1},eg.prototype.set=function(e,t){var r=this.__data__,i=ev(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this},eb.prototype.clear=function(){this.size=0,this.__data__={hash:new ep,map:new(er||eg),string:new ep}},eb.prototype.delete=function(e){var t=e_(this,e).delete(e);return this.size-=!!t,t},eb.prototype.get=function(e){return e_(this,e).get(e)},eb.prototype.has=function(e){return e_(this,e).has(e)},eb.prototype.set=function(e,t){var r=e_(this,e),i=r.size;return r.set(e,t),this.size+=+(r.size!=i),this},ey.prototype.add=ey.prototype.push=function(e){return this.__data__.set(e,o),this},ey.prototype.has=function(e){return this.__data__.has(e)},em.prototype.clear=function(){this.__data__=new eg,this.size=0},em.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},em.prototype.get=function(e){return this.__data__.get(e)},em.prototype.has=function(e){return this.__data__.has(e)},em.prototype.set=function(e,t){var r=this.__data__;if(r instanceof eg){var i=r.__data__;if(!er||i.length<199)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new eb(i)}return r.set(e,t),this.size=r.size,this};var eI=X?function(e){return null==e?[]:function(e,t){for(var r=-1,i=null==e?0:e.length,n=0,s=[];++r<i;){var o=e[r];t(o,r,e)&&(s[n++]=o)}return s}(X(e=Object(e)),function(t){return Y.call(e,t)})}:function(){return[]},eA=ew;function eM(e){if(null!=e){try{return q.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function eC(e,t){return e===t||e!=e&&t!=t}(et&&eA(new et(new ArrayBuffer(1)))!=x||er&&eA(new er)!=d||ei&&eA(ei.resolve())!=b||en&&eA(new en)!=m||es&&eA(new es)!=w)&&(eA=function(e){var t=ew(e),r=t==g?e.constructor:void 0,i=r?eM(r):"";if(i)switch(i){case ea:return x;case eh:return d;case eu:return b;case ef:return m;case ec:return w}return t});var eO=eD(function(){return arguments}())?eD:function(e){return eL(e)&&F.call(e,"callee")&&!Y.call(e,"callee")},eP=Array.isArray,eR=Q||function(){return!1};function eT(e){if(!eB(e))return!1;var t=ew(e);return t==l||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function eN(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=0x1fffffffffffff}function eB(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function eL(e){return null!=e&&"object"==typeof e}var ek=N?function(e){return N(e)}:function(e){return eL(e)&&eN(e.length)&&!!S[ew(e)]};function eU(e){return null!=e&&eN(e.length)&&!eT(e)?function(e,t){var r,i,n=eP(e),s=!n&&eO(e),o=!n&&!s&&eR(e),a=!n&&!s&&!o&&ek(e),h=n||s||o||a,u=h?function(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}(e.length,String):[],f=u.length;for(var c in e){F.call(e,c)&&!(h&&("length"==c||o&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||(r=c,(i=null==(i=f)?0x1fffffffffffff:i)&&("number"==typeof r||_.test(r))&&r>-1&&r%1==0&&r<i)))&&u.push(c)}return u}(e):function(e){if(r=(t=e)&&t.constructor,t!==("function"==typeof r&&r.prototype||z))return ee(e);var t,r,i=[];for(var n in Object(e))F.call(e,n)&&"constructor"!=n&&i.push(n);return i}(e)}e.exports=function(e,t){return function e(t,r,i,n,s){return t===r||(null!=t&&null!=r&&(eL(t)||eL(r))?function(e,t,r,i,n,s){var o=eP(e),l=eP(t),b=o?h:eA(e),w=l?h:eA(t);b=b==a?g:b,w=w==a?g:w;var E=b==g,_=w==g,S=b==w;if(S&&eR(e)){if(!eR(t))return!1;o=!0,E=!1}if(S&&!E)return s||(s=new em),o||ek(e)?ex(e,t,r,i,n,s):function(e,t,r,i,n,s,o){switch(r){case x:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case D:if(e.byteLength!=t.byteLength||!s(new G(e),new G(t)))break;return!0;case u:case f:case p:return eC(+e,+t);case c:return e.name==t.name&&e.message==t.message;case y:case v:return e==t+"";case d:var a=B;case m:var h=1&i;if(a||(a=L),e.size!=t.size&&!h)break;var l=o.get(e);if(l)return l==t;i|=2,o.set(e,t);var g=ex(a(e),a(t),i,n,s,o);return o.delete(e),g;case"[object Symbol]":if(ed)return ed.call(e)==ed.call(t)}return!1}(e,t,b,r,i,n,s);if(!(1&r)){var I=E&&F.call(e,"__wrapped__"),A=_&&F.call(t,"__wrapped__");if(I||A){var M=I?e.value():e,C=A?t.value():t;return s||(s=new em),n(M,C,r,i,s)}}return!!S&&(s||(s=new em),function(e,t,r,i,n,s){var o=1&r,a=eE(e),h=a.length;if(h!=eE(t).length&&!o)return!1;for(var u=h;u--;){var f=a[u];if(!(o?f in t:F.call(t,f)))return!1}var c=s.get(e);if(c&&s.get(t))return c==t;var l=!0;s.set(e,t),s.set(t,e);for(var d=o;++u<h;){var p=e[f=a[u]],g=t[f];if(i)var b=o?i(g,p,f,t,e,s):i(p,g,f,e,t,s);if(!(void 0===b?p===g||n(p,g,r,i,s):b)){l=!1;break}d||(d="constructor"==f)}if(l&&!d){var y=e.constructor,m=t.constructor;y!=m&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof m&&m instanceof m)&&(l=!1)}return s.delete(e),s.delete(t),l}(e,t,r,i,n,s))}(t,r,i,n,e,s):t!=t&&r!=r)}(e,t)}});var a={},h="object"==typeof Reflect?Reflect:null,u=h&&"function"==typeof h.apply?h.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};Iv=h&&"function"==typeof h.ownKeys?h.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var f=Number.isNaN||function(e){return e!=e};function c(){c.init.call(this)}(a=c).once=function(e,t){return new Promise(function(r,i){var n,s,o;function a(r){e.removeListener(t,h),i(r)}function h(){"function"==typeof e.removeListener&&e.removeListener("error",a),r([].slice.call(arguments))}D(e,t,h,{once:!0}),"error"!==t&&(n=e,s=a,o={once:!0},"function"==typeof n.on&&D(n,"error",s,o))})},c.EventEmitter=c,c.prototype._events=void 0,c.prototype._eventsCount=0,c.prototype._maxListeners=void 0;var l=10;function d(e){if("function"!=typeof e)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function p(e){return void 0===e._maxListeners?c.defaultMaxListeners:e._maxListeners}function g(e,t,r,i){if(d(r),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),s=e._events),o=s[t]),void 0===o)o=s[t]=r,++e._eventsCount;else if("function"==typeof o?o=s[t]=i?[r,o]:[o,r]:i?o.unshift(r):o.push(r),(n=p(e))>0&&o.length>n&&!o.warned){o.warned=!0;var n,s,o,a=Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=o.length,console&&console.warn&&console.warn(a)}return e}function b(){if(!this.fired)return(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length)?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function y(e,t,r){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},n=b.bind(i);return n.listener=r,i.wrapFn=n,n}function m(e,t,r){var i=e._events;if(void 0===i)return[];var n=i[t];return void 0===n?[]:"function"==typeof n?r?[n.listener||n]:[n]:r?function(e){for(var t=Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(n):w(n,n.length)}function v(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function w(e,t){for(var r=Array(t),i=0;i<t;++i)r[i]=e[i];return r}function D(e,t,r,i){if("function"==typeof e.on)i.once?e.once(t,r):e.on(t,r);else if("function"==typeof e.addEventListener)e.addEventListener(t,function n(s){i.once&&e.removeEventListener(t,n),r(s)});else throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}Object.defineProperty(c,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||f(e))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),c.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},c.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||f(e))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},c.prototype.getMaxListeners=function(){return p(this)},c.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,n=this._events;if(void 0!==n)i=i&&void 0===n.error;else if(!i)return!1;if(i){if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var s,o=Error("Unhandled error."+(s?" ("+s.message+")":""));throw o.context=s,o}var a=n[e];if(void 0===a)return!1;if("function"==typeof a)u(a,this,t);else for(var h=a.length,f=w(a,h),r=0;r<h;++r)u(f[r],this,t);return!0},c.prototype.addListener=function(e,t){return g(this,e,t,!1)},c.prototype.on=c.prototype.addListener,c.prototype.prependListener=function(e,t){return g(this,e,t,!0)},c.prototype.once=function(e,t){return d(t),this.on(e,y(this,e,t)),this},c.prototype.prependOnceListener=function(e,t){return d(t),this.prependListener(e,y(this,e,t)),this},c.prototype.removeListener=function(e,t){var r,i,n,s,o;if(d(t),void 0===(i=this._events)||void 0===(r=i[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(n=-1,s=r.length-1;s>=0;s--)if(r[s]===t||r[s].listener===t){o=r[s].listener,n=s;break}if(n<0)return this;0===n?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,n),1===r.length&&(i[e]=r[0]),void 0!==i.removeListener&&this.emit("removeListener",e,o||t)}return this},c.prototype.off=c.prototype.removeListener,c.prototype.removeAllListeners=function(e){var t,r,i;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0==arguments.length){var n,s=Object.keys(r);for(i=0;i<s.length;++i)"removeListener"!==(n=s[i])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},c.prototype.listeners=function(e){return m(this,e,!0)},c.prototype.rawListeners=function(e){return m(this,e,!1)},c.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):v.call(e,t)},c.prototype.listenerCount=v,c.prototype.eventNames=function(){return this._eventsCount>0?Iv(this._events):[]};var x={};Object.defineProperty(x,"__esModule",{value:!0});var E=s("3kKyL");E.__exportStar(s("9EePZ"),x),E.__exportStar(s("iD73S"),x),E.__exportStar(s("dTXLC"),x),E.__exportStar(s("2MWZl"),x);class _{}class S extends _{constructor(e){super()}}const I=x.FIVE_SECONDS,A="heartbeat_pulse";class M extends S{constructor(e){super(e),this.events=new(0,a.EventEmitter),this.interval=I,this.interval=e?.interval||I}static async init(e){let t=new M(e);return await t.init(),t}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),(0,x.toMiliseconds)(this.interval))}pulse(){this.events.emit(A)}}const C=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,O=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,P=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function R(e,t){var r;return"__proto__"===e||"constructor"===e&&t&&"object"==typeof t&&"prototype"in t?void(r=e,console.warn(`[destr] Dropping "${r}" key to prevent prototype pollution.`)):t}function T(e,t={}){if("string"!=typeof e)return e;if('"'===e[0]&&'"'===e[e.length-1]&&-1===e.indexOf("\\"))return e.slice(1,-1);let r=e.trim();if(r.length<=9)switch(r.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return NaN;case"infinity":return 1/0;case"-infinity":return-1/0}if(!P.test(e)){if(t.strict)throw SyntaxError("[destr] Invalid JSON");return e}try{if(C.test(e)||O.test(e)){if(t.strict)throw Error("[destr] Possible prototype pollution");return JSON.parse(e,R)}return JSON.parse(e)}catch(r){if(t.strict)throw r;return e}}Iw=function(e){for(var t,r=e.length,i=r%3,n=[],s=0,o=r-i;s<o;s+=16383)n.push(function(e,t,r){for(var i,n=[],s=t;s<r;s+=3)i=(e[s]<<16&0xff0000)+(e[s+1]<<8&65280)+(255&e[s+2]),n.push(N[i>>18&63]+N[i>>12&63]+N[i>>6&63]+N[63&i]);return n.join("")}(e,s,s+16383>o?o:s+16383));return 1===i?n.push(N[(t=e[r-1])>>2]+N[t<<4&63]+"=="):2===i&&n.push(N[(t=(e[r-2]<<8)+e[r-1])>>10]+N[t>>4&63]+N[t<<2&63]+"="),n.join("")};for(var N=[],B=[],L="undefined"!=typeof Uint8Array?Uint8Array:Array,k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",U=0,z=k.length;U<z;++U)N[U]=k[U],B[k.charCodeAt(U)]=U;B[45]=62,B[95]=63,ID=function(e,t,r,i,n){var s,o,a=8*n-i-1,h=(1<<a)-1,u=h>>1,f=-7,c=r?n-1:0,l=r?-1:1,d=e[t+c];for(c+=l,s=d&(1<<-f)-1,d>>=-f,f+=a;f>0;s=256*s+e[t+c],c+=l,f-=8);for(o=s&(1<<-f)-1,s>>=-f,f+=i;f>0;o=256*o+e[t+c],c+=l,f-=8);if(0===s)s=1-u;else{if(s===h)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,i),s-=u}return(d?-1:1)*o*Math.pow(2,s-i)},Ix=function(e,t,r,i,n,s){var o,a,h,u=8*s-n-1,f=(1<<u)-1,c=f>>1,l=5960464477539062e-23*(23===n),d=i?0:s-1,p=i?1:-1,g=+(t<0||0===t&&1/t<0);for(isNaN(t=Math.abs(t))||t===1/0?(a=+!!isNaN(t),o=f):(o=Math.floor(Math.log(t)/Math.LN2),t*(h=Math.pow(2,-o))<1&&(o--,h*=2),o+c>=1?t+=l/h:t+=l*Math.pow(2,1-c),t*h>=2&&(o++,h/=2),o+c>=f?(a=0,o=f):o+c>=1?(a=(t*h-1)*Math.pow(2,n),o+=c):(a=t*Math.pow(2,c-1)*Math.pow(2,n),o=0));n>=8;e[r+d]=255&a,d+=p,a/=256,n-=8);for(o=o<<n|a,u+=n;u>0;e[r+d]=255&o,d+=p,o/=256,u-=8);e[r+d-p]|=128*g};var j="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function q(e){if(e>0x7fffffff)throw RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,F.prototype),t}function F(e,t,r){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return $(e)}return H(e,t,r)}function H(e,t,r){if("string"==typeof e){var i=e,n=t;if(("string"!=typeof n||""===n)&&(n="utf8"),!F.isEncoding(n))throw TypeError("Unknown encoding: "+n);var s=0|Y(i,n),o=q(s),a=o.write(i,n);return a!==s&&(o=o.slice(0,a)),o}if(ArrayBuffer.isView(e)){var h=e;if(ef(h,Uint8Array)){var u=new Uint8Array(h);return W(u.buffer,u.byteOffset,u.byteLength)}return V(h)}if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(ef(e,ArrayBuffer)||e&&ef(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(ef(e,SharedArrayBuffer)||e&&ef(e.buffer,SharedArrayBuffer)))return W(e,t,r);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');var f=e.valueOf&&e.valueOf();if(null!=f&&f!==e)return F.from(f,t,r);var c=function(e){if(F.isBuffer(e)){var t=0|G(e.length),r=q(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||function(e){return e!=e}(e.length)?q(0):V(e):"Buffer"===e.type&&Array.isArray(e.data)?V(e.data):void 0}(e);if(c)return c;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return F.from(e[Symbol.toPrimitive]("string"),t,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function K(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function $(e){return K(e),q(e<0?0:0|G(e))}function V(e){for(var t=e.length<0?0:0|G(e.length),r=q(t),i=0;i<t;i+=1)r[i]=255&e[i];return r}function W(e,t,r){var i;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(i=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),F.prototype),i}function G(e){if(e>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function Y(e,t){if(F.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||ef(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return ea(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return eh(e).length;default:if(n)return i?-1:ea(e).length;t=(""+t).toLowerCase(),n=!0}}function Z(e,t,r){var i,n,s,o=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0||(r>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,r){var i=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>i)&&(r=i);for(var n="",s=t;s<r;++s)n+=ec[e[s]];return n}(this,t,r);case"utf8":case"utf-8":return ee(this,t,r);case"ascii":return function(e,t,r){var i="";r=Math.min(e.length,r);for(var n=t;n<r;++n)i+=String.fromCharCode(127&e[n]);return i}(this,t,r);case"latin1":case"binary":return function(e,t,r){var i="";r=Math.min(e.length,r);for(var n=t;n<r;++n)i+=String.fromCharCode(e[n]);return i}(this,t,r);case"base64":return i=this,n=t,s=r,0===n&&s===i.length?Iw(i):Iw(i.slice(n,s));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){for(var i=e.slice(t,r),n="",s=0;s<i.length-1;s+=2)n+=String.fromCharCode(i[s]+256*i[s+1]);return n}(this,t,r);default:if(o)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}function J(e,t,r){var i=e[t];e[t]=e[r],e[r]=i}function X(e,t,r,i,n){var s;if(0===e.length)return -1;if("string"==typeof r?(i=r,r=0):r>0x7fffffff?r=0x7fffffff:r<-0x80000000&&(r=-0x80000000),(s=r*=1)!=s&&(r=n?0:e.length-1),r<0&&(r=e.length+r),r>=e.length)if(n)return -1;else r=e.length-1;else if(r<0)if(!n)return -1;else r=0;if("string"==typeof t&&(t=F.from(t,i)),F.isBuffer(t))return 0===t.length?-1:Q(e,t,r,i,n);if("number"==typeof t){if(t&=255,"function"==typeof Uint8Array.prototype.indexOf)if(n)return Uint8Array.prototype.indexOf.call(e,t,r);else return Uint8Array.prototype.lastIndexOf.call(e,t,r);return Q(e,[t],r,i,n)}throw TypeError("val must be string, number or Buffer")}function Q(e,t,r,i,n){var s,o=1,a=e.length,h=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return -1;o=2,a/=2,h/=2,r/=2}function u(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(n){var f=-1;for(s=r;s<a;s++)if(u(e,s)===u(t,-1===f?0:s-f)){if(-1===f&&(f=s),s-f+1===h)return f*o}else -1!==f&&(s-=s-f),f=-1}else for(r+h>a&&(r=a-h),s=r;s>=0;s--){for(var c=!0,l=0;l<h;l++)if(u(e,s+l)!==u(t,l)){c=!1;break}if(c)return s}return -1}function ee(e,t,r){r=Math.min(e.length,r);for(var i=[],n=t;n<r;){var s,o,a,h,u=e[n],f=null,c=u>239?4:u>223?3:u>191?2:1;if(n+c<=r)switch(c){case 1:u<128&&(f=u);break;case 2:(192&(s=e[n+1]))==128&&(h=(31&u)<<6|63&s)>127&&(f=h);break;case 3:s=e[n+1],o=e[n+2],(192&s)==128&&(192&o)==128&&(h=(15&u)<<12|(63&s)<<6|63&o)>2047&&(h<55296||h>57343)&&(f=h);break;case 4:s=e[n+1],o=e[n+2],a=e[n+3],(192&s)==128&&(192&o)==128&&(192&a)==128&&(h=(15&u)<<18|(63&s)<<12|(63&o)<<6|63&a)>65535&&h<1114112&&(f=h)}null===f?(f=65533,c=1):f>65535&&(f-=65536,i.push(f>>>10&1023|55296),f=56320|1023&f),i.push(f),n+=c}var l=i,d=l.length;if(d<=4096)return String.fromCharCode.apply(String,l);for(var p="",g=0;g<d;)p+=String.fromCharCode.apply(String,l.slice(g,g+=4096));return p}function et(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function er(e,t,r,i,n,s){if(!F.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<s)throw RangeError('"value" argument is out of bounds');if(r+i>e.length)throw RangeError("Index out of range")}function ei(e,t,r,i,n,s){if(r+i>e.length||r<0)throw RangeError("Index out of range")}function en(e,t,r,i,n){return t*=1,r>>>=0,n||ei(e,t,r,4,34028234663852886e22,-34028234663852886e22),Ix(e,t,r,i,23,4),r+4}function es(e,t,r,i,n){return t*=1,r>>>=0,n||ei(e,t,r,8,17976931348623157e292,-17976931348623157e292),Ix(e,t,r,i,52,8),r+8}F.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),F.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(F.prototype,"parent",{enumerable:!0,get:function(){if(F.isBuffer(this))return this.buffer}}),Object.defineProperty(F.prototype,"offset",{enumerable:!0,get:function(){if(F.isBuffer(this))return this.byteOffset}}),F.poolSize=8192,F.from=function(e,t,r){return H(e,t,r)},Object.setPrototypeOf(F.prototype,Uint8Array.prototype),Object.setPrototypeOf(F,Uint8Array),F.alloc=function(e,t,r){return(K(e),e<=0)?q(e):void 0!==t?"string"==typeof r?q(e).fill(t,r):q(e).fill(t):q(e)},F.allocUnsafe=function(e){return $(e)},F.allocUnsafeSlow=function(e){return $(e)},F.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==F.prototype},F.compare=function(e,t){if(ef(e,Uint8Array)&&(e=F.from(e,e.offset,e.byteLength)),ef(t,Uint8Array)&&(t=F.from(t,t.offset,t.byteLength)),!F.isBuffer(e)||!F.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,i=t.length,n=0,s=Math.min(r,i);n<s;++n)if(e[n]!==t[n]){r=e[n],i=t[n];break}return r<i?-1:+(i<r)},F.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},F.concat=function(e,t){if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return F.alloc(0);if(void 0===t)for(r=0,t=0;r<e.length;++r)t+=e[r].length;var r,i=F.allocUnsafe(t),n=0;for(r=0;r<e.length;++r){var s=e[r];if(ef(s,Uint8Array))n+s.length>i.length?F.from(s).copy(i,n):Uint8Array.prototype.set.call(i,s,n);else if(F.isBuffer(s))s.copy(i,n);else throw TypeError('"list" argument must be an Array of Buffers');n+=s.length}return i},F.byteLength=Y,F.prototype._isBuffer=!0,F.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)J(this,t,t+1);return this},F.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)J(this,t,t+3),J(this,t+1,t+2);return this},F.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)J(this,t,t+7),J(this,t+1,t+6),J(this,t+2,t+5),J(this,t+3,t+4);return this},F.prototype.toString=function(){var e=this.length;return 0===e?"":0==arguments.length?ee(this,0,e):Z.apply(this,arguments)},F.prototype.toLocaleString=F.prototype.toString,F.prototype.equals=function(e){if(!F.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===F.compare(this,e)},F.prototype.inspect=function(){var e="";return e=this.toString("hex",0,50).replace(/(.{2})/g,"$1 ").trim(),this.length>50&&(e+=" ... "),"<Buffer "+e+">"},j&&(F.prototype[j]=F.prototype.inspect),F.prototype.compare=function(e,t,r,i,n){if(ef(e,Uint8Array)&&(e=F.from(e,e.offset,e.byteLength)),!F.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===n&&(n=this.length),t<0||r>e.length||i<0||n>this.length)throw RangeError("out of range index");if(i>=n&&t>=r)return 0;if(i>=n)return -1;if(t>=r)return 1;if(t>>>=0,r>>>=0,i>>>=0,n>>>=0,this===e)return 0;for(var s=n-i,o=r-t,a=Math.min(s,o),h=this.slice(i,n),u=e.slice(t,r),f=0;f<a;++f)if(h[f]!==u[f]){s=h[f],o=u[f];break}return s<o?-1:+(o<s)},F.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},F.prototype.indexOf=function(e,t,r){return X(this,e,t,r,!0)},F.prototype.lastIndexOf=function(e,t,r){return X(this,e,t,r,!1)},F.prototype.write=function(e,t,r,i){if(void 0===t)i="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)i=t,r=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(r)?(r>>>=0,void 0===i&&(i="utf8")):(i=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var n,s,o,a,h,u,f,c,l=this.length-t;if((void 0===r||r>l)&&(r=l),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var d=!1;;)switch(i){case"hex":return function(e,t,r,i){r=Number(r)||0;var n=e.length-r;i?(i=Number(i))>n&&(i=n):i=n;var s=t.length;i>s/2&&(i=s/2);for(var o=0;o<i;++o){var a,h=parseInt(t.substr(2*o,2),16);if((a=h)!=a)break;e[r+o]=h}return o}(this,e,t,r);case"utf8":case"utf-8":return n=t,s=r,eu(ea(e,this.length-n),this,n,s);case"ascii":case"latin1":case"binary":return o=t,a=r,eu(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(e),this,o,a);case"base64":return h=t,u=r,eu(eh(e),this,h,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return f=t,c=r,eu(function(e,t){for(var r,i,n=[],s=0;s<e.length&&!((t-=2)<0);++s)i=(r=e.charCodeAt(s))>>8,n.push(r%256),n.push(i);return n}(e,this.length-f),this,f,c);default:if(d)throw TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),d=!0}},F.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},F.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var i=this.subarray(e,t);return Object.setPrototypeOf(i,F.prototype),i},F.prototype.readUintLE=F.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||et(e,t,this.length);for(var i=this[e],n=1,s=0;++s<t&&(n*=256);)i+=this[e+s]*n;return i},F.prototype.readUintBE=F.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||et(e,t,this.length);for(var i=this[e+--t],n=1;t>0&&(n*=256);)i+=this[e+--t]*n;return i},F.prototype.readUint8=F.prototype.readUInt8=function(e,t){return e>>>=0,t||et(e,1,this.length),this[e]},F.prototype.readUint16LE=F.prototype.readUInt16LE=function(e,t){return e>>>=0,t||et(e,2,this.length),this[e]|this[e+1]<<8},F.prototype.readUint16BE=F.prototype.readUInt16BE=function(e,t){return e>>>=0,t||et(e,2,this.length),this[e]<<8|this[e+1]},F.prototype.readUint32LE=F.prototype.readUInt32LE=function(e,t){return e>>>=0,t||et(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+0x1000000*this[e+3]},F.prototype.readUint32BE=F.prototype.readUInt32BE=function(e,t){return e>>>=0,t||et(e,4,this.length),0x1000000*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},F.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||et(e,t,this.length);for(var i=this[e],n=1,s=0;++s<t&&(n*=256);)i+=this[e+s]*n;return i>=(n*=128)&&(i-=Math.pow(2,8*t)),i},F.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||et(e,t,this.length);for(var i=t,n=1,s=this[e+--i];i>0&&(n*=256);)s+=this[e+--i]*n;return s>=(n*=128)&&(s-=Math.pow(2,8*t)),s},F.prototype.readInt8=function(e,t){return(e>>>=0,t||et(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},F.prototype.readInt16LE=function(e,t){e>>>=0,t||et(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?0xffff0000|r:r},F.prototype.readInt16BE=function(e,t){e>>>=0,t||et(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?0xffff0000|r:r},F.prototype.readInt32LE=function(e,t){return e>>>=0,t||et(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},F.prototype.readInt32BE=function(e,t){return e>>>=0,t||et(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},F.prototype.readFloatLE=function(e,t){return e>>>=0,t||et(e,4,this.length),ID(this,e,!0,23,4)},F.prototype.readFloatBE=function(e,t){return e>>>=0,t||et(e,4,this.length),ID(this,e,!1,23,4)},F.prototype.readDoubleLE=function(e,t){return e>>>=0,t||et(e,8,this.length),ID(this,e,!0,52,8)},F.prototype.readDoubleBE=function(e,t){return e>>>=0,t||et(e,8,this.length),ID(this,e,!1,52,8)},F.prototype.writeUintLE=F.prototype.writeUIntLE=function(e,t,r,i){if(e*=1,t>>>=0,r>>>=0,!i){var n=Math.pow(2,8*r)-1;er(this,e,t,r,n,0)}var s=1,o=0;for(this[t]=255&e;++o<r&&(s*=256);)this[t+o]=e/s&255;return t+r},F.prototype.writeUintBE=F.prototype.writeUIntBE=function(e,t,r,i){if(e*=1,t>>>=0,r>>>=0,!i){var n=Math.pow(2,8*r)-1;er(this,e,t,r,n,0)}var s=r-1,o=1;for(this[t+s]=255&e;--s>=0&&(o*=256);)this[t+s]=e/o&255;return t+r},F.prototype.writeUint8=F.prototype.writeUInt8=function(e,t,r){return e*=1,t>>>=0,r||er(this,e,t,1,255,0),this[t]=255&e,t+1},F.prototype.writeUint16LE=F.prototype.writeUInt16LE=function(e,t,r){return e*=1,t>>>=0,r||er(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},F.prototype.writeUint16BE=F.prototype.writeUInt16BE=function(e,t,r){return e*=1,t>>>=0,r||er(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},F.prototype.writeUint32LE=F.prototype.writeUInt32LE=function(e,t,r){return e*=1,t>>>=0,r||er(this,e,t,4,0xffffffff,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},F.prototype.writeUint32BE=F.prototype.writeUInt32BE=function(e,t,r){return e*=1,t>>>=0,r||er(this,e,t,4,0xffffffff,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},F.prototype.writeIntLE=function(e,t,r,i){if(e*=1,t>>>=0,!i){var n=Math.pow(2,8*r-1);er(this,e,t,r,n-1,-n)}var s=0,o=1,a=0;for(this[t]=255&e;++s<r&&(o*=256);)e<0&&0===a&&0!==this[t+s-1]&&(a=1),this[t+s]=(e/o|0)-a&255;return t+r},F.prototype.writeIntBE=function(e,t,r,i){if(e*=1,t>>>=0,!i){var n=Math.pow(2,8*r-1);er(this,e,t,r,n-1,-n)}var s=r-1,o=1,a=0;for(this[t+s]=255&e;--s>=0&&(o*=256);)e<0&&0===a&&0!==this[t+s+1]&&(a=1),this[t+s]=(e/o|0)-a&255;return t+r},F.prototype.writeInt8=function(e,t,r){return e*=1,t>>>=0,r||er(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},F.prototype.writeInt16LE=function(e,t,r){return e*=1,t>>>=0,r||er(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},F.prototype.writeInt16BE=function(e,t,r){return e*=1,t>>>=0,r||er(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},F.prototype.writeInt32LE=function(e,t,r){return e*=1,t>>>=0,r||er(this,e,t,4,0x7fffffff,-0x80000000),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},F.prototype.writeInt32BE=function(e,t,r){return e*=1,t>>>=0,r||er(this,e,t,4,0x7fffffff,-0x80000000),e<0&&(e=0xffffffff+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},F.prototype.writeFloatLE=function(e,t,r){return en(this,e,t,!0,r)},F.prototype.writeFloatBE=function(e,t,r){return en(this,e,t,!1,r)},F.prototype.writeDoubleLE=function(e,t,r){return es(this,e,t,!0,r)},F.prototype.writeDoubleBE=function(e,t,r){return es(this,e,t,!1,r)},F.prototype.copy=function(e,t,r,i){if(!F.isBuffer(e))throw TypeError("argument should be a Buffer");if(r||(r=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<r&&(i=r),i===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(i<0)throw RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);var n=i-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,i):Uint8Array.prototype.set.call(e,this.subarray(r,i),t),n},F.prototype.fill=function(e,t,r,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),void 0!==i&&"string"!=typeof i)throw TypeError("encoding must be a string");if("string"==typeof i&&!F.isEncoding(i))throw TypeError("Unknown encoding: "+i);if(1===e.length){var n,s=e.charCodeAt(0);("utf8"===i&&s<128||"latin1"===i)&&(e=s)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(n=t;n<r;++n)this[n]=e;else{var o=F.isBuffer(e)?e:F.from(e,i),a=o.length;if(0===a)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(n=0;n<r-t;++n)this[n+t]=o[n%a]}return this};var eo=/[^+/0-9A-Za-z-_]/g;function ea(e,t){t=t||1/0;for(var r,i=e.length,n=null,s=[],o=0;o<i;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!n){if(r>56319||o+1===i){(t-=3)>-1&&s.push(239,191,189);continue}n=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),n=r;continue}r=(n-55296<<10|r-56320)+65536}else n&&(t-=3)>-1&&s.push(239,191,189);if(n=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return s}function eh(e){return function(e){var t,r,i=function(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var i=r===t?0:4-r%4;return[r,i]}(e),n=i[0],s=i[1],o=new L((n+s)*3/4-s),a=0,h=s>0?n-4:n;for(r=0;r<h;r+=4)t=B[e.charCodeAt(r)]<<18|B[e.charCodeAt(r+1)]<<12|B[e.charCodeAt(r+2)]<<6|B[e.charCodeAt(r+3)],o[a++]=t>>16&255,o[a++]=t>>8&255,o[a++]=255&t;return 2===s&&(t=B[e.charCodeAt(r)]<<2|B[e.charCodeAt(r+1)]>>4,o[a++]=255&t),1===s&&(t=B[e.charCodeAt(r)]<<10|B[e.charCodeAt(r+1)]<<4|B[e.charCodeAt(r+2)]>>2,o[a++]=t>>8&255,o[a++]=255&t),o}(function(e){if((e=(e=e.split("=")[0]).trim().replace(eo,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function eu(e,t,r,i){for(var n=0;n<i&&!(n+r>=t.length)&&!(n>=e.length);++n)t[n+r]=e[n];return n}function ef(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}var ec=function(){for(var e="0123456789abcdef",t=Array(256),r=0;r<16;++r)for(var i=16*r,n=0;n<16;++n)t[i+n]=e[r]+e[n];return t}();function el(e,...t){try{var r;return(r=e(...t))&&"function"==typeof r.then?r:Promise.resolve(r)}catch(e){return Promise.reject(e)}}function ed(e){if(function(e){let t=typeof e;return null===e||"object"!==t&&"function"!==t}(e))return String(e);if(function(e){let t=Object.getPrototypeOf(e);return!t||t.isPrototypeOf(Object)}(e)||Array.isArray(e))return JSON.stringify(e);if("function"==typeof e.toJSON)return ed(e.toJSON());throw Error("[unstorage] Cannot stringify value!")}const ep="base64:";function eg(e){return e&&e.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function eb(e){return(e=eg(e))?e+":":""}function ey(e,t,r){return e.watch?e.watch((e,i)=>t(e,r+i)):()=>{}}async function em(e){"function"==typeof e.dispose&&await el(e.dispose)}function ev(e){return new Promise(function(t,r){e.oncomplete=e.onsuccess=function(){return t(e.result)},e.onabort=e.onerror=function(){return r(e.error)}})}function ew(e,t){var r,i=function(){if(r)return r;var i=indexedDB.open(e);return i.onupgradeneeded=function(){return i.result.createObjectStore(t)},(r=ev(i)).then(function(e){e.onclose=function(){return r=void 0}},function(){}),r};return function(e,r){return i().then(function(i){return r(i.transaction(t,e).objectStore(t))})}}function eD(){return IE||(IE=ew("keyval-store","keyval")),IE}function ex(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:eD();return t("readonly",function(t){return ev(t.get(e))})}function eE(e){if("string"!=typeof e)throw Error(`Cannot safe json parse value of type ${typeof e}`);try{return JSON.parse(e.replace(/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,'$1"$2n"$3'),(e,t)=>"string"==typeof t&&t.match(/^\d+n$/)?BigInt(t.substring(0,t.length-1)):t)}catch(t){return e}}function e_(e){return"string"==typeof e?e:JSON.stringify(e,(e,t)=>"bigint"==typeof t?t.toString()+"n":t)||""}class eS{constructor(){this.indexedDb=function(e={}){let t={mounts:{"":e.driver||(()=>{let e=new Map;return{name:"memory",getInstance:()=>e,hasItem:t=>e.has(t),getItem:t=>e.get(t)??null,getItemRaw:t=>e.get(t)??null,setItem(t,r){e.set(t,r)},setItemRaw(t,r){e.set(t,r)},removeItem(t){e.delete(t)},getKeys:()=>[...e.keys()],clear(){e.clear()},dispose(){e.clear()}}})()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=e=>{for(let r of t.mountpoints)if(e.startsWith(r))return{base:r,relativeKey:e.slice(r.length),driver:t.mounts[r]};return{base:"",relativeKey:e,driver:t.mounts[""]}},i=(e,r)=>t.mountpoints.filter(t=>t.startsWith(e)||r&&e.startsWith(t)).map(r=>({relativeBase:e.length>r.length?e.slice(r.length):void 0,mountpoint:r,driver:t.mounts[r]})),n=(e,r)=>{if(t.watching)for(let i of(r=eg(r),t.watchListeners))i(e,r)},s=async()=>{if(!t.watching)for(let e in t.watching=!0,t.mounts)t.unwatch[e]=await ey(t.mounts[e],n,e)},o=async()=>{if(t.watching){for(let e in t.unwatch)await t.unwatch[e]();t.unwatch={},t.watching=!1}},a=(e,t,i)=>{let n=new Map,s=e=>{let t=n.get(e.base);return t||(t={driver:e.driver,base:e.base,items:[]},n.set(e.base,t)),t};for(let i of e){let e="string"==typeof i,n=eg(e?i:i.key),o=e?void 0:i.value,a=e||!i.options?t:{...t,...i.options},h=r(n);s(h).items.push({key:n,value:o,relativeKey:h.relativeKey,options:a})}return Promise.all([...n.values()].map(e=>i(e))).then(e=>e.flat())},h={hasItem(e,t={}){let{relativeKey:i,driver:n}=r(e=eg(e));return el(n.hasItem,i,t)},getItem(e,t={}){let{relativeKey:i,driver:n}=r(e=eg(e));return el(n.getItem,i,t).then(e=>T(e))},getItems:(e,t={})=>a(e,t,e=>e.driver.getItems?el(e.driver.getItems,e.items.map(e=>({key:e.relativeKey,options:e.options})),t).then(t=>t.map(t=>({key:function(...e){return eg(e.join(":"))}(e.base,t.key),value:T(t.value)}))):Promise.all(e.items.map(t=>el(e.driver.getItem,t.relativeKey,t.options).then(e=>({key:t.key,value:T(e)}))))),getItemRaw(e,t={}){let{relativeKey:i,driver:n}=r(e=eg(e));return n.getItemRaw?el(n.getItemRaw,i,t):el(n.getItem,i,t).then(e=>{var t;return"string"==typeof e&&e.startsWith(ep)?(t=e.slice(ep.length),globalThis.Buffer?F.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))):e})},async setItem(e,t,i={}){if(void 0===t)return h.removeItem(e);let{relativeKey:s,driver:o}=r(e=eg(e));o.setItem&&(await el(o.setItem,s,ed(t),i),o.watch||n("update",e))},async setItems(e,t){await a(e,t,async e=>{if(e.driver.setItems)return el(e.driver.setItems,e.items.map(e=>({key:e.relativeKey,value:ed(e.value),options:e.options})),t);e.driver.setItem&&await Promise.all(e.items.map(t=>el(e.driver.setItem,t.relativeKey,ed(t.value),t.options)))})},async setItemRaw(e,t,i={}){if(void 0===t)return h.removeItem(e,i);let{relativeKey:s,driver:o}=r(e=eg(e));if(o.setItemRaw)await el(o.setItemRaw,s,t,i);else{var a;if(!o.setItem)return;await el(o.setItem,s,"string"==typeof t?t:ep+(a=t,globalThis.Buffer?F.from(a).toString("base64"):globalThis.btoa(String.fromCodePoint(...a))),i)}o.watch||n("update",e)},async removeItem(e,t={}){"boolean"==typeof t&&(t={removeMeta:t});let{relativeKey:i,driver:s}=r(e=eg(e));s.removeItem&&(await el(s.removeItem,i,t),(t.removeMeta||t.removeMata)&&await el(s.removeItem,i+"$",t),s.watch||n("remove",e))},async getMeta(e,t={}){"boolean"==typeof t&&(t={nativeOnly:t});let{relativeKey:i,driver:n}=r(e=eg(e)),s=Object.create(null);if(n.getMeta&&Object.assign(s,await el(n.getMeta,i,t)),!t.nativeOnly){let e=await el(n.getItem,i+"$",t).then(e=>T(e));e&&"object"==typeof e&&("string"==typeof e.atime&&(e.atime=new Date(e.atime)),"string"==typeof e.mtime&&(e.mtime=new Date(e.mtime)),Object.assign(s,e))}return s},setMeta(e,t,r={}){return this.setItem(e+"$",t,r)},removeMeta(e,t={}){return this.removeItem(e+"$",t)},async getKeys(e,t={}){let r=i(e=eb(e),!0),n=[],s=[],o=!0;for(let e of r){for(let r of(e.driver.flags?.maxDepth||(o=!1),await el(e.driver.getKeys,e.relativeBase,t))){let t=e.mountpoint+eg(r);n.some(e=>t.startsWith(e))||s.push(t)}n=[e.mountpoint,...n.filter(t=>!t.startsWith(e.mountpoint))]}let a=void 0!==t.maxDepth&&!o;return s.filter(r=>{var i;return(!a||function(e,t){if(void 0===t)return!0;let r=0,i=e.indexOf(":");for(;i>-1;)r++,i=e.indexOf(":",i+1);return r<=t}(r,t.maxDepth))&&((i=e)?r.startsWith(i)&&"$"!==r[r.length-1]:"$"!==r[r.length-1])})},async clear(e,t={}){e=eb(e),await Promise.all(i(e,!1).map(async e=>e.driver.clear?el(e.driver.clear,e.relativeBase,t):e.driver.removeItem?Promise.all((await e.driver.getKeys(e.relativeBase||"",t)).map(r=>e.driver.removeItem(r,t))):void 0))},async dispose(){await Promise.all(Object.values(t.mounts).map(e=>em(e)))},watch:async e=>(await s(),t.watchListeners.push(e),async()=>{t.watchListeners=t.watchListeners.filter(t=>t!==e),0===t.watchListeners.length&&await o()}),async unwatch(){t.watchListeners=[],await o()},mount(e,r){if((e=eb(e))&&t.mounts[e])throw Error(`already mounted at ${e}`);return e&&(t.mountpoints.push(e),t.mountpoints.sort((e,t)=>t.length-e.length)),t.mounts[e]=r,t.watching&&Promise.resolve(ey(r,n,e)).then(r=>{t.unwatch[e]=r}).catch(console.error),h},async unmount(e,r=!0){(e=eb(e))&&t.mounts[e]&&(t.watching&&e in t.unwatch&&(t.unwatch[e]?.(),delete t.unwatch[e]),r&&await em(t.mounts[e]),t.mountpoints=t.mountpoints.filter(t=>t!==e),delete t.mounts[e])},getMount(e=""){let t=r(e=eg(e)+":");return{driver:t.driver,base:t.base}},getMounts:(e="",t={})=>i(e=eg(e),t.parents).map(e=>({driver:e.driver,base:e.mountpoint})),keys:(e,t={})=>h.getKeys(e,t),get:(e,t={})=>h.getItem(e,t),set:(e,t,r={})=>h.setItem(e,t,r),has:(e,t={})=>h.hasItem(e,t),del:(e,t={})=>h.removeItem(e,t),remove:(e,t={})=>h.removeItem(e,t)};return h}({driver:((e={})=>{let t,r=e.base&&e.base.length>0?`${e.base}:`:"";return e.dbName&&e.storeName&&(t=ew(e.dbName,e.storeName)),{name:"idb-keyval",options:e,hasItem:async e=>!(typeof await ex(r+e,t)>"u"),getItem:async e=>await ex(r+e,t)??null,setItem:(e,i)=>(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:eD();return r("readwrite",function(r){return r.put(t,e),ev(r.transaction)})})(r+e,i,t),removeItem:e=>(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:eD();return t("readwrite",function(t){return t.delete(e),ev(t.transaction)})})(r+e,t),getKeys:()=>(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:eD();return e("readonly",function(e){if(e.getAllKeys)return ev(e.getAllKeys());var t,r=[];return(t=function(e){return r.push(e.key)},e.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},ev(e.transaction)).then(function(){return r})})})(t),clear:()=>(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:eD();return e("readwrite",function(e){return e.clear(),ev(e.transaction)})})(t)}})({dbName:"WALLET_CONNECT_V2_INDEXED_DB",storeName:"keyvaluestorage"})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){let t=await this.indexedDb.getItem(e);if(null!==t)return t}async setItem(e,t){await this.indexedDb.setItem(e,e_(t))}async removeItem(e){await this.indexedDb.removeItem(e)}}var eI="u">typeof globalThis?globalThis:"u">typeof window?window:"u">typeof t?t:"u">typeof self?self:{},eA={exports:{}};function eM(e){var t;return[e[0],eE(null!=(t=e[1])?t:"")]}function eC(){}eC.prototype.getItem=function(e){return this.hasOwnProperty(e)?String(this[e]):null},eC.prototype.setItem=function(e,t){this[e]=String(t)},eC.prototype.removeItem=function(e){delete this[e]},eC.prototype.clear=function(){let e=this;Object.keys(e).forEach(function(t){e[t]=void 0,delete e[t]})},eC.prototype.key=function(e){return e=e||0,Object.keys(this)[e]},eC.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),"u">typeof eI&&eI.localStorage?eA.exports=eI.localStorage:"u">typeof window&&window.localStorage?eA.exports=window.localStorage:eA.exports=new eC;class eO{constructor(){this.localStorage=eA.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(eM)}async getItem(e){let t=this.localStorage.getItem(e);if(null!==t)return eE(t)}async setItem(e,t){this.localStorage.setItem(e,e_(t))}async removeItem(e){this.localStorage.removeItem(e)}}const eP=async(e,t,r)=>{let i="wc_storage_version",n=await t.getItem(i);if(n&&n>=1)return void r(t);let s=await e.getKeys();if(!s.length)return void r(t);let o=[];for(;s.length;){let r=s.shift();if(!r)continue;let i=r.toLowerCase();if(i.includes("wc@")||i.includes("walletconnect")||i.includes("wc_")||i.includes("wallet_connect")){let i=await e.getItem(r);await t.setItem(r,i),o.push(r)}}await t.setItem(i,1),r(t),eR(e,o)},eR=async(e,t)=>{t.length&&t.forEach(async t=>{await e.removeItem(t)})};class eT{constructor(){this.initialized=!1,this.setInitialized=e=>{this.storage=e,this.initialized=!0};let e=new eO;this.storage=e;try{let t=new eS;eP(e,t,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,t){return await this.initialize(),this.storage.setItem(e,t)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{let t=setInterval(()=>{this.initialized&&(clearInterval(t),e())},20)})}}var eN={},eB={};function eL(e){try{return JSON.stringify(e)}catch(e){return'"[Circular]"'}}eB=function(e,t,r){var i=r&&r.stringify||eL;if("object"==typeof e&&null!==e){var n=t.length+1;if(1===n)return e;var s=Array(n);s[0]=i(e);for(var o=1;o<n;o++)s[o]=i(t[o]);return s.join(" ")}if("string"!=typeof e)return e;var a=t.length;if(0===a)return e;for(var h="",u=0,f=-1,c=e&&e.length||0,l=0;l<c;){if(37===e.charCodeAt(l)&&l+1<c){switch(f=f>-1?f:0,e.charCodeAt(l+1)){case 100:case 102:if(u>=a||null==t[u])break;f<l&&(h+=e.slice(f,l)),h+=Number(t[u]),f=l+2,l++;break;case 105:if(u>=a||null==t[u])break;f<l&&(h+=e.slice(f,l)),h+=Math.floor(Number(t[u])),f=l+2,l++;break;case 79:case 111:case 106:if(u>=a||void 0===t[u])break;f<l&&(h+=e.slice(f,l));var d=typeof t[u];if("string"===d){h+="'"+t[u]+"'",f=l+2,l++;break}if("function"===d){h+=t[u].name||"<anonymous>",f=l+2,l++;break}h+=i(t[u]),f=l+2,l++;break;case 115:if(u>=a)break;f<l&&(h+=e.slice(f,l)),h+=String(t[u]),f=l+2,l++;break;case 37:f<l&&(h+=e.slice(f,l)),h+="%",f=l+2,l++,u--}++u}++l}return -1===f?e:(f<c&&(h+=e.slice(f)),h)},eN=eH;const ek=function(){function e(e){return void 0!==e&&e}try{if("undefined"!=typeof globalThis)return globalThis;return Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch(t){return e(self)||e(window)||e(this)||{}}}().console||{};function eU(e,t){return"silent"===e?1/0:t.levels.values[e]}const ez=Symbol("pino.logFuncs"),ej=Symbol("pino.hierarchy"),eq={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function eF(e,t){let r={logger:t,parent:e[ej]};t[ej]=r}function eH(e){var t,r;(e=e||{}).browser=e.browser||{};let i=e.browser.transmit;if(i&&"function"!=typeof i.send)throw Error("pino: transmit option must have a send function");let n=e.browser.write||ek;e.browser.write&&(e.browser.asObject=!0);let s=e.serializers||{},o=(t=e.browser.serialize,Array.isArray(t)?t.filter(function(e){return"!stdSerializers.err"!==e}):!0===t&&Object.keys(s)),a=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(a=!1);let h=Object.keys(e.customLevels||{}),u=["error","fatal","warn","info","debug","trace"].concat(h);"function"==typeof n&&u.forEach(function(e){n[e]=n}),(!1===e.enabled||e.browser.disabled)&&(e.level="silent");let f=e.level||"info",c=Object.create(n);c.log||(c.log=eZ);let l={};u.forEach(e=>{l[e]=n[e]?n[e]:ek[e]||ek[eq[e]||"log"]||eZ}),c[ez]=l,eF({},c),Object.defineProperty(c,"levelVal",{get:function(){return eU(this.level,this)}}),Object.defineProperty(c,"level",{get:function(){return this._level},set:function(e){if("silent"!==e&&!this.levels.values[e])throw Error("unknown level "+e);this._level=e,eK(this,d,c,"error"),eK(this,d,c,"fatal"),eK(this,d,c,"warn"),eK(this,d,c,"info"),eK(this,d,c,"debug"),eK(this,d,c,"trace"),h.forEach(e=>{eK(this,d,c,e)})}});let d={transmit:i,serialize:o,asObject:e.browser.asObject,asObjectBindingsOnly:e.browser.asObjectBindingsOnly,formatters:e.browser.formatters,levels:u,timestamp:"function"==typeof(r=e).timestamp?r.timestamp:!1===r.timestamp?eJ:eX,messageKey:e.messageKey||"msg",onChild:e.onChild||eZ};function p(t,r,n){if(!r)throw Error("missing bindings for child Pino");n=n||{},o&&r.serializers&&(n.serializers=r.serializers);let a=n.serializers;if(o&&a){var h=Object.assign({},s,a),u=!0===e.browser.serialize?Object.keys(h):o;delete r.serializers,e$([r],u,h,this._stdErrSerialize)}function f(e){this._childLevel=(0|e._childLevel)+1,this.bindings=r,h&&(this.serializers=h,this._serialize=u),i&&(this._logEvent=eV([].concat(e._logEvent.bindings,r)))}f.prototype=this;let c=new f(this);return eF(this,c),c.child=function(...e){return p.call(this,t,...e)},c.level=n.level||this.level,t.onChild(c),c}return c.levels=function(e){let t=e.customLevels||{};return{values:Object.assign({},eH.levels.values,t),labels:Object.assign({},eH.levels.labels,function(e){let t={};return Object.keys(e).forEach(function(r){t[e[r]]=r}),t}(t))}}(e),c.level=f,c.isLevelEnabled=function(e){return!!this.levels.values[e]&&this.levels.values[e]>=this.levels.values[this.level]},c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=eZ,c.serializers=s,c._serialize=o,c._stdErrSerialize=a,c.child=function(...e){return p.call(this,d,...e)},i&&(c._logEvent=eV()),c}function eK(e,t,r,i){var n,s,o,a,h,u,f;if(Object.defineProperty(e,i,{value:eU(e.level,r)>eU(i,r)?eZ:r[ez][i],writable:!0,enumerable:!0,configurable:!0}),e[i]===eZ){if(!t.transmit)return;let n=eU(t.transmit.level||e.level,r);if(eU(i,r)<n)return}e[i]=(n=e,s=t,o=r,a=i,h=n[ez][a],function(){let e=s.timestamp(),t=Array(arguments.length),r=Object.getPrototypeOf&&Object.getPrototypeOf(this)===ek?ek:this;for(var i=0;i<t.length;i++)t[i]=arguments[i];var u=!1;if(s.serialize&&(e$(t,this._serialize,this.serializers,this._stdErrSerialize),u=!0),s.asObject||s.formatters?h.call(r,...function(e,t,r,i,n){let{level:s,log:o=e=>e}=n.formatters||{},a=r.slice(),h=a[0],u={},f=(0|e._childLevel)+1;if(f<1&&(f=1),i&&(u.time=i),s?Object.assign(u,s(t,e.levels.values[t])):u.level=e.levels.values[t],n.asObjectBindingsOnly){if(null!==h&&"object"==typeof h)for(;f--&&"object"==typeof a[0];)Object.assign(u,a.shift());return[o(u),...a]}if(null!==h&&"object"==typeof h){for(;f--&&"object"==typeof a[0];)Object.assign(u,a.shift());h=a.length?eB(a.shift(),a):void 0}else"string"==typeof h&&(h=eB(a.shift(),a));return void 0!==h&&(u[n.messageKey]=h),[o(u)]}(this,a,t,e,s)):h.apply(r,t),s.transmit){let r=s.transmit.level||n._level,i=eU(r,o),h=eU(a,o);if(h<i)return;!function(e,t,r,i=!1){let n=t.send,s=t.ts,o=t.methodLevel,a=t.methodValue,h=t.val,u=e._logEvent.bindings;i||e$(r,e._serialize||Object.keys(e.serializers),e.serializers,void 0===e._stdErrSerialize||e._stdErrSerialize),e._logEvent.ts=s,e._logEvent.messages=r.filter(function(e){return -1===u.indexOf(e)}),e._logEvent.level.label=o,e._logEvent.level.value=a,n(o,e._logEvent,h),e._logEvent=eV(u)}(this,{ts:e,methodLevel:a,methodValue:h,transmitLevel:r,transmitValue:o.levels.values[s.transmit.level||n._level],send:s.transmit.send,val:eU(n._level,o)},t,u)}});let c=function(e){let t=[];e.bindings&&t.push(e.bindings);let r=e[ej];for(;r.parent;)(r=r.parent).logger.bindings&&t.push(r.logger.bindings);return t.reverse()}(e);0!==c.length&&(e[i]=(u=c,f=e[i],function(){return f.apply(this,[...u,...arguments])}))}function e$(e,t,r,i){for(let n in e)if(i&&e[n]instanceof Error)e[n]=eH.stdSerializers.err(e[n]);else if("object"==typeof e[n]&&!Array.isArray(e[n])&&t)for(let i in e[n])t.indexOf(i)>-1&&i in r&&(e[n][i]=r[i](e[n][i]))}function eV(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function eW(e){let t={type:e.constructor.name,msg:e.message,stack:e.stack};for(let r in e)void 0===t[r]&&(t[r]=e[r]);return t}function eG(){return{}}function eY(e){return e}function eZ(){}function eJ(){return!1}function eX(){return Date.now()}eH.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},eH.stdSerializers={mapHttpRequest:eG,mapHttpResponse:eG,wrapRequestSerializer:eY,wrapResponseSerializer:eY,wrapErrorSerializer:eY,req:eG,res:eG,err:eW,errWithCause:eW},eH.stdTimeFunctions=Object.assign({},{nullTime:eJ,epochTime:eX,unixTime:function(){return Math.round(Date.now()/1e3)},isoTime:function(){return new Date(Date.now()).toISOString()}}),eN.default=eH,eN.pino=eH;const eQ="custom_context";var e0=Object.defineProperty,e1=(e,t,r)=>{let i;return(i="symbol"!=typeof t?t+"":t)in e?e0(e,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[i]=r};class e3{constructor(e){e1(this,"nodeValue"),e1(this,"sizeInBytes"),e1(this,"next"),this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}}class e2{constructor(e){e1(this,"lengthInNodes"),e1(this,"sizeInBytes"),e1(this,"head"),e1(this,"tail"),e1(this,"maxSizeInBytes"),this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){let t=new e3(e);if(t.size>this.maxSizeInBytes)throw Error(`[LinkedList] Value too big to insert into list: ${e} with size ${t.size}`);for(;this.size+t.size>this.maxSizeInBytes;)this.shift();this.head?this.tail&&(this.tail.next=t):this.head=t,this.tail=t,this.lengthInNodes++,this.sizeInBytes+=t.size}shift(){if(!this.head)return;let e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){let e=[],t=this.head;for(;null!==t;)e.push(t.value),t=t.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};let t=e.value;return e=e.next,{done:!1,value:t}}}}}var e8=Object.defineProperty,e6=(e,t,r)=>{let i;return(i="symbol"!=typeof t?t+"":t)in e?e8(e,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[i]=r};class e5{constructor(e,t=1024e3){e6(this,"logs"),e6(this,"level"),e6(this,"levelValue"),e6(this,"MAX_LOG_SIZE_IN_BYTES"),this.level=e??"error",this.levelValue=eN.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=t,this.logs=new e2(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,t){t===eN.levels.values.error?console.error(e):t===eN.levels.values.warn?console.warn(e):t===eN.levels.values.debug?console.debug(e):t===eN.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(e_({timestamp:new Date().toISOString(),log:e}));let t="string"==typeof e?JSON.parse(e).level:e.level;t>=this.levelValue&&this.forwardToConsole(e,t)}getLogs(){return this.logs}clearLogs(){this.logs=new e2(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){let t=this.getLogArray();return t.push(e_({extraMetadata:e})),new Blob(t,{type:"application/json"})}}var e4=Object.defineProperty;class e9{constructor(e,t=1024e3){var r,i;let n;(n="symbol"!=typeof(r="baseChunkLogger")?r+"":r)in this?e4(this,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):this[n]=i,this.baseChunkLogger=new e5(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){let t=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=t,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t)}}var e7=Object.defineProperty;class te{constructor(e,t=1024e3){var r,i;let n;(n="symbol"!=typeof(r="baseChunkLogger")?r+"":r)in this?e7(this,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):this[n]=i,this.baseChunkLogger=new e5(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}}var tt=Object.defineProperty,tr=Object.defineProperties,ti=Object.getOwnPropertyDescriptors,tn=Object.getOwnPropertySymbols,ts=Object.prototype.hasOwnProperty,to=Object.prototype.propertyIsEnumerable,ta=(e,t,r)=>t in e?tt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,th=(e,t)=>{for(var r in t||(t={}))ts.call(t,r)&&ta(e,r,t[r]);if(tn)for(var r of tn(t))to.call(t,r)&&ta(e,r,t[r]);return e},tu=(e,t)=>tr(e,ti(t));function tf(e,t=eQ){return e[t]||""}function tc(e,t,r=eQ){let i=function(e,t,r=eQ){let i=tf(e,r);return i.trim()?`${i}/${t}`:t}(e,t,r);return function(e,t,r=eQ){return e[r]=t,e}(e.child({context:i}),i,r)}function tl(e){return"u">typeof e.loggerOverride&&"string"!=typeof e.loggerOverride?{logger:e.loggerOverride,chunkLoggerController:null}:"u">typeof window?function(e){var t,i;let n=new e9(null==(t=e.opts)?void 0:t.level,e.maxSizeInBytes);return{logger:r(eN)(tu(th({},e.opts),{level:"trace",browser:tu(th({},null==(i=e.opts)?void 0:i.browser),{write:e=>n.write(e)})})),chunkLoggerController:n}}(e):function(e){var t;let i=new te(null==(t=e.opts)?void 0:t.level,e.maxSizeInBytes);return{logger:r(eN)(tu(th({},e.opts),{level:"trace"}),i),chunkLoggerController:i}}(e)}var td=Object.defineProperty,tp=(e,t,r)=>{let i;return(i="symbol"!=typeof t?t+"":t)in e?td(e,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[i]=r};class tg extends _{constructor(e){super(),this.opts=e,tp(this,"protocol","wc"),tp(this,"version",2)}}var tb=Object.defineProperty;class ty extends _{constructor(e,t){var r,i;let n;super(),this.core=e,this.logger=t,r="records",i=new Map,(n="symbol"!=typeof r?r+"":r)in this?tb(this,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):this[n]=i}}class tm{constructor(e,t){this.logger=e,this.core=t}}class tv extends _{constructor(e,t){super(),this.relayer=e,this.logger=t}}class tw extends _{constructor(e){super()}}class tD{constructor(e,t,r,i){this.core=e,this.logger=t,this.name=r}}class tx extends _{constructor(e,t){super(),this.relayer=e,this.logger=t}}class tE extends _{constructor(e,t){super(),this.core=e,this.logger=t}}class t_{constructor(e,t,r){this.core=e,this.logger=t,this.store=r}}class tS{constructor(e,t){this.projectId=e,this.logger=t}}class tI{constructor(e,t,r){this.core=e,this.logger=t,this.telemetryEnabled=r}}function tA(e,...t){if(!(e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function tM(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}a.EventEmitter;const tC="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,tO=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);function tP(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}(e)),tA(e),e}class tR{clone(){return this._cloneInto()}}function tT(e=32){if(tC&&"function"==typeof tC.getRandomValues)return tC.getRandomValues(new Uint8Array(e));if(tC&&"function"==typeof tC.randomBytes)return tC.randomBytes(e);throw Error("crypto.getRandomValues must be defined")}class tN extends tR{constructor(e,t,r,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=tO(this.buffer)}update(e){tM(this);let{view:t,buffer:r,blockLen:i}=this,n=(e=tP(e)).length;for(let s=0;s<n;){let o=Math.min(i-this.pos,n-s);if(o===i){let t=tO(e);for(;i<=n-s;s+=i)this.process(t,s);continue}r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){tM(this),function(e,t){tA(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:i,isLE:n}=this,{pos:s}=this;t[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(r,0),s=0);for(let e=s;e<i;e++)t[e]=0;(function(e,t,r,i){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,i);let n=BigInt(32),s=BigInt(0xffffffff),o=Number(r>>n&s),a=Number(r&s),h=4*!!i,u=4*!i;e.setUint32(t+h,o,i),e.setUint32(t+u,a,i)})(r,i-8,BigInt(8*this.length),n),this.process(r,0);let o=tO(e),a=this.outputLen;if(a%4)throw Error("_sha2: outputLen should be aligned to 32bit");let h=a/4,u=this.get();if(h>u.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<h;e++)o.setUint32(4*e,u[e],n)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:i,finished:n,destroyed:s,pos:o}=this;return e.length=i,e.pos=o,e.finished=n,e.destroyed=s,i%t&&e.buffer.set(r),e}}const tB=BigInt(0x100000000-1),tL=BigInt(32),tk=(e,t,r)=>e>>>r,tU=(e,t,r)=>e<<32-r|t>>>r,tz=(e,t,r)=>e>>>r|t<<32-r,tj=(e,t,r)=>e<<32-r|t>>>r,tq=(e,t,r)=>e<<64-r|t>>>r-32,tF=(e,t,r)=>e>>>r-32|t<<64-r,tH=function(e,t,r,i){let n=(t>>>0)+(i>>>0);return{h:e+r+(n/0x100000000|0)|0,l:0|n}},tK=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),t$=(e,t,r,i)=>t+r+i+(e/0x100000000|0)|0,tV=(e,t,r,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0),tW=(e,t,r,i,n)=>t+r+i+n+(e/0x100000000|0)|0,tG=(e,t,r,i,n,s)=>t+r+i+n+s+(e/0x100000000|0)|0,tY=(e,t,r,i,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0)+(n>>>0),[tZ,tJ]=function(e,t=!1){let r=new Uint32Array(e.length),i=new Uint32Array(e.length);for(let n=0;n<e.length;n++){let{h:s,l:o}=function(e,t=!1){return t?{h:Number(e&tB),l:Number(e>>tL&tB)}:{h:0|Number(e>>tL&tB),l:0|Number(e&tB)}}(e[n],t);[r[n],i[n]]=[s,o]}return[r,i]}(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),tX=new Uint32Array(80),tQ=new Uint32Array(80);class t0 extends tN{constructor(){super(128,64,16,!1),this.Ah=0x6a09e667,this.Al=-0xc4336f8,this.Bh=-0x4498517b,this.Bl=-0x7b3558c5,this.Ch=0x3c6ef372,this.Cl=-0x16b07d5,this.Dh=-0x5ab00ac6,this.Dl=0x5f1d36f1,this.Eh=0x510e527f,this.El=-0x52197d2f,this.Fh=-0x64fa9774,this.Fl=0x2b3e6c1f,this.Gh=0x1f83d9ab,this.Gl=-0x4be4295,this.Hh=0x5be0cd19,this.Hl=0x137e2179}get(){let{Ah:e,Al:t,Bh:r,Bl:i,Ch:n,Cl:s,Dh:o,Dl:a,Eh:h,El:u,Fh:f,Fl:c,Gh:l,Gl:d,Hh:p,Hl:g}=this;return[e,t,r,i,n,s,o,a,h,u,f,c,l,d,p,g]}set(e,t,r,i,n,s,o,a,h,u,f,c,l,d,p,g){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|i,this.Ch=0|n,this.Cl=0|s,this.Dh=0|o,this.Dl=0|a,this.Eh=0|h,this.El=0|u,this.Fh=0|f,this.Fl=0|c,this.Gh=0|l,this.Gl=0|d,this.Hh=0|p,this.Hl=0|g}process(e,t){for(let r=0;r<16;r++,t+=4)tX[r]=e.getUint32(t),tQ[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){let t=0|tX[e-15],r=0|tQ[e-15],i=tz(t,r,1)^tz(t,r,8)^tk(t,r,7),n=tj(t,r,1)^tj(t,r,8)^tU(t,r,7),s=0|tX[e-2],o=0|tQ[e-2],a=tz(s,o,19)^tq(s,o,61)^tk(s,o,6),h=tV(n,tj(s,o,19)^tF(s,o,61)^tU(s,o,6),tQ[e-7],tQ[e-16]),u=tW(h,i,a,tX[e-7],tX[e-16]);tX[e]=0|u,tQ[e]=0|h}let{Ah:r,Al:i,Bh:n,Bl:s,Ch:o,Cl:a,Dh:h,Dl:u,Eh:f,El:c,Fh:l,Fl:d,Gh:p,Gl:g,Hh:b,Hl:y}=this;for(let e=0;e<80;e++){let t=tz(f,c,14)^tz(f,c,18)^tq(f,c,41),m=tj(f,c,14)^tj(f,c,18)^tF(f,c,41),v=f&l^~f&p,w=tY(y,m,c&d^~c&g,tJ[e],tQ[e]),D=tG(w,b,t,v,tZ[e],tX[e]),x=0|w,E=tz(r,i,28)^tq(r,i,34)^tq(r,i,39),_=tj(r,i,28)^tF(r,i,34)^tF(r,i,39),S=r&n^r&o^n&o,I=i&s^i&a^s&a;b=0|p,y=0|g,p=0|l,g=0|d,l=0|f,d=0|c,({h:f,l:c}=tH(0|h,0|u,0|D,0|x)),h=0|o,u=0|a,o=0|n,a=0|s,n=0|r,s=0|i;let A=tK(x,_,I);r=t$(A,D,E,S),i=0|A}({h:r,l:i}=tH(0|this.Ah,0|this.Al,0|r,0|i)),({h:n,l:s}=tH(0|this.Bh,0|this.Bl,0|n,0|s)),({h:o,l:a}=tH(0|this.Ch,0|this.Cl,0|o,0|a)),({h:h,l:u}=tH(0|this.Dh,0|this.Dl,0|h,0|u)),({h:f,l:c}=tH(0|this.Eh,0|this.El,0|f,0|c)),({h:l,l:d}=tH(0|this.Fh,0|this.Fl,0|l,0|d)),({h:p,l:g}=tH(0|this.Gh,0|this.Gl,0|p,0|g)),({h:b,l:y}=tH(0|this.Hh,0|this.Hl,0|b,0|y)),this.set(r,i,n,s,o,a,h,u,f,c,l,d,p,g,b,y)}roundClean(){tX.fill(0),tQ.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const t1=function(e){let t=t=>e().update(tP(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}(()=>new t0),t3=BigInt(0),t2=BigInt(1),t8=BigInt(2);function t6(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function t5(e){if(!t6(e))throw Error("Uint8Array expected")}function t4(e,t){if("boolean"!=typeof t)throw Error(e+" boolean expected, got "+t)}const t9=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function t7(e){t5(e);let t="";for(let r=0;r<e.length;r++)t+=t9[e[r]];return t}function re(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return""===e?t3:BigInt("0x"+e)}function rt(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:void 0}function rr(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let i=new Uint8Array(r);for(let t=0,n=0;t<r;t++,n+=2){let r=rt(e.charCodeAt(n)),s=rt(e.charCodeAt(n+1));if(void 0===r||void 0===s)throw Error('hex string expected, got non-hex character "'+(e[n]+e[n+1])+'" at index '+n);i[t]=16*r+s}return i}function ri(e){return t5(e),re(t7(Uint8Array.from(e).reverse()))}function rn(e,t){return rr(e.toString(16).padStart(2*t,"0"))}function rs(e,t){return rn(e,t).reverse()}function ro(e,t,r){let i;if("string"==typeof t)try{i=rr(t)}catch(t){throw Error(e+" must be hex string or Uint8Array, cause: "+t)}else if(t6(t))i=Uint8Array.from(t);else throw Error(e+" must be hex string or Uint8Array");let n=i.length;if("number"==typeof r&&n!==r)throw Error(e+" of length "+r+" expected, got "+n);return i}function ra(...e){let t=0;for(let r=0;r<e.length;r++){let i=e[r];t5(i),t+=i.length}let r=new Uint8Array(t);for(let t=0,i=0;t<e.length;t++){let n=e[t];r.set(n,i),i+=n.length}return r}const rh=e=>"bigint"==typeof e&&t3<=e;function ru(e,t,r,i){if(!(rh(t)&&rh(r)&&rh(i))||!(r<=t)||!(t<i))throw Error("expected valid "+e+": "+r+" <= n < "+i+", got "+t)}const rf={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||t6(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function rc(e,t,r={}){let i=(t,r,i)=>{let n=rf[r];if("function"!=typeof n)throw Error("invalid validator function");let s=e[t];if(!(i&&void 0===s)&&!n(s,e))throw Error("param "+String(t)+" is invalid. Expected "+r+", got "+s)};for(let[e,r]of Object.entries(t))i(e,r,!1);for(let[e,t]of Object.entries(r))i(e,t,!0);return e}function rl(e){let t=new WeakMap;return(r,...i)=>{let n=t.get(r);if(void 0!==n)return n;let s=e(r,...i);return t.set(r,s),s}}const rd=BigInt(0),rp=BigInt(1),rg=BigInt(2),rb=BigInt(3),ry=BigInt(4),rm=BigInt(5),rv=BigInt(8);function rw(e,t){let r=e%t;return r>=rd?r:t+r}function rD(e,t,r){let i=e;for(;t-- >rd;)i*=i,i%=r;return i}function rx(e,t){if(e===rd)throw Error("invert: expected non-zero number");if(t<=rd)throw Error("invert: expected positive modulus, got "+t);let r=rw(e,t),i=t,n=rd,s=rp;for(;r!==rd;){let e=i/r,t=i%r,o=n-s*e;i=r,r=t,n=s,s=o}if(i!==rp)throw Error("invert: does not exist");return rw(n,t)}const rE=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function r_(e,t){let r=void 0!==t?t:e.toString(2).length,i=Math.ceil(r/8);return{nBitLength:r,nByteLength:i}}function rS(e,t,r=!1,i={}){let n;if(e<=rd)throw Error("invalid field: expected ORDER > 0, got "+e);let{nBitLength:s,nByteLength:o}=r_(e,t);if(o>2048)throw Error("invalid field: expected ORDER of <= 2048 bytes");let a=Object.freeze({ORDER:e,isLE:r,BITS:s,BYTES:o,MASK:(t8<<BigInt(s-1))-t2,ZERO:rd,ONE:rp,create:t=>rw(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error("invalid field element: expected bigint, got "+typeof t);return rd<=t&&t<e},is0:e=>e===rd,isOdd:e=>(e&rp)===rp,neg:t=>rw(-t,e),eql:(e,t)=>e===t,sqr:t=>rw(t*t,e),add:(t,r)=>rw(t+r,e),sub:(t,r)=>rw(t-r,e),mul:(t,r)=>rw(t*r,e),pow:(e,t)=>(function(e,t,r){if(r<rd)throw Error("invalid exponent, negatives unsupported");if(r===rd)return e.ONE;if(r===rp)return t;let i=e.ONE,n=t;for(;r>rd;)r&rp&&(i=e.mul(i,n)),n=e.sqr(n),r>>=rp;return i})(a,e,t),div:(t,r)=>rw(t*rx(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>rx(t,e),sqrt:i.sqrt||(t=>(n||(n=function(e){if(e%ry===rb){let t=(e+rp)/ry;return function(e,r){let i=e.pow(r,t);if(!e.eql(e.sqr(i),r))throw Error("Cannot find square root");return i}}if(e%rv===rm){let t=(e-rm)/rv;return function(e,r){let i=e.mul(r,rg),n=e.pow(i,t),s=e.mul(r,n),o=e.mul(e.mul(s,rg),n),a=e.mul(s,e.sub(o,e.ONE));if(!e.eql(e.sqr(a),r))throw Error("Cannot find square root");return a}}return function(e){let t,r,i,n=(e-rp)/rg;for(t=e-rp,r=0;t%rg===rd;t/=rg,r++);for(i=rg;i<e&&function(e,t,r){if(t<rd)throw Error("invalid exponent, negatives unsupported");if(r<=rd)throw Error("invalid modulus");if(r===rp)return rd;let i=rp;for(;t>rd;)t&rp&&(i=i*e%r),e=e*e%r,t>>=rp;return i}(i,n,e)!==e-rp;i++)if(i>1e3)throw Error("Cannot find square root: likely non-prime P");if(1===r){let t=(e+rp)/ry;return function(e,r){let i=e.pow(r,t);if(!e.eql(e.sqr(i),r))throw Error("Cannot find square root");return i}}let s=(t+rp)/rg;return function(e,o){if(e.pow(o,n)===e.neg(e.ONE))throw Error("Cannot find square root");let a=r,h=e.pow(e.mul(e.ONE,i),t),u=e.pow(o,s),f=e.pow(o,t);for(;!e.eql(f,e.ONE);){if(e.eql(f,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(f);t<a&&!e.eql(r,e.ONE);t++)r=e.sqr(r);let r=e.pow(h,rp<<BigInt(a-t-1));h=e.sqr(r),u=e.mul(u,r),f=e.mul(f,h),a=t}return u}}(e)}(e)),n(a,t))),invertBatch:e=>(function(e,t){let r=Array(t.length),i=t.reduce((t,i,n)=>e.is0(i)?t:(r[n]=t,e.mul(t,i)),e.ONE),n=e.inv(i);return t.reduceRight((t,i,n)=>e.is0(i)?t:(r[n]=e.mul(t,r[n]),e.mul(t,i)),n),r})(a,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?rs(e,o):rn(e,o),fromBytes:e=>{if(e.length!==o)throw Error("Field.fromBytes: expected "+o+" bytes, got "+e.length);return r?ri(e):re(t7(e))}});return Object.freeze(a)}const rI=BigInt(0),rA=BigInt(1);function rM(e,t){let r=t.negate();return e?r:t}function rC(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw Error("invalid window size, expected [1.."+t+"], got W="+e)}function rO(e,t){return rC(e,t),{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)}}const rP=new WeakMap,rR=new WeakMap;function rT(e){return rR.get(e)||1}const rN=BigInt(0),rB=BigInt(1),rL=BigInt(2),rk=BigInt(8),rU={zip215:!0};BigInt(0),BigInt(1);const rz=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),rj=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const rq=BigInt(1),rF=BigInt(2);BigInt(3);const rH=BigInt(5),rK=BigInt(8),r$=rS(rz,void 0,!0),rV=function(e){var t;let r=function(e){let t=(rc(e.Fp,rE.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),rc(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...r_(e.n,e.nBitLength),...e,p:e.Fp.ORDER}));return rc(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}(e),{Fp:i,n:n,prehash:s,hash:o,randomBytes:a,nByteLength:h,h:u}=r,f=rL<<BigInt(8*h)-rB,c=i.create,l=rS(r.n,r.nBitLength),d=r.uvRatio||((e,t)=>{try{return{isValid:!0,value:i.sqrt(e*i.inv(t))}}catch{return{isValid:!1,value:rN}}}),p=r.adjustScalarBytes||(e=>e),g=r.domain||((e,t,r)=>{if(t4("phflag",r),t.length||r)throw Error("Contexts/pre-hash are not supported");return e});function b(e,t){ru("coordinate "+e,t,rN,f)}function y(e){if(!(e instanceof w))throw Error("ExtendedPoint expected")}let m=rl((e,t)=>{let{ex:r,ey:n,ez:s}=e,o=e.is0();null==t&&(t=o?rk:i.inv(s));let a=c(r*t),h=c(n*t),u=c(s*t);if(o)return{x:rN,y:rB};if(u!==rB)throw Error("invZ was invalid");return{x:a,y:h}}),v=rl(e=>{let{a:t,d:i}=r;if(e.is0())throw Error("bad point: ZERO");let{ex:n,ey:s,ez:o,et:a}=e,h=c(n*n),u=c(s*s),f=c(o*o),l=c(f*f),d=c(h*t);if(c(f*c(d+u))!==c(l+c(i*c(h*u))))throw Error("bad point: equation left != right (1)");if(c(n*s)!==c(o*a))throw Error("bad point: equation left != right (2)");return!0});class w{constructor(e,t,r,i){this.ex=e,this.ey=t,this.ez=r,this.et=i,b("x",e),b("y",t),b("z",r),b("t",i),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(e){if(e instanceof w)throw Error("extended point not allowed");let{x:t,y:r}=e||{};return b("x",t),b("y",r),new w(t,r,rB,c(t*r))}static normalizeZ(e){let t=i.invertBatch(e.map(e=>e.ez));return e.map((e,r)=>e.toAffine(t[r])).map(w.fromAffine)}static msm(e,t){return function(e,t,r,i){if(function(e,t){if(!Array.isArray(e))throw Error("array expected");e.forEach((e,r)=>{if(!(e instanceof t))throw Error("invalid point at index "+r)})}(r,e),function(e,t){if(!Array.isArray(e))throw Error("array of scalars expected");e.forEach((e,r)=>{if(!t.isValid(e))throw Error("invalid scalar at index "+r)})}(i,t),r.length!==i.length)throw Error("arrays of points and scalars must have equal length");let n=e.ZERO,s=function(e){let t;for(t=0;e>t3;e>>=t2,t+=1);return t}(BigInt(r.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,h=Array(a+1).fill(n),u=Math.floor((t.BITS-1)/o)*o,f=n;for(let e=u;e>=0;e-=o){h.fill(n);for(let t=0;t<i.length;t++){let n=Number(i[t]>>BigInt(e)&BigInt(a));h[n]=h[n].add(r[t])}let t=n;for(let e=h.length-1,r=n;e>0;e--)r=r.add(h[e]),t=t.add(r);if(f=f.add(t),0!==e)for(let e=0;e<o;e++)f=f.double()}return f}(w,l,e,t)}_setWindowSize(e){E.setWindowSize(this,e)}assertValidity(){v(this)}equals(e){y(e);let{ex:t,ey:r,ez:i}=this,{ex:n,ey:s,ez:o}=e,a=c(t*o),h=c(n*i),u=c(r*o),f=c(s*i);return a===h&&u===f}is0(){return this.equals(w.ZERO)}negate(){return new w(c(-this.ex),this.ey,this.ez,c(-this.et))}double(){let{a:e}=r,{ex:t,ey:i,ez:n}=this,s=c(t*t),o=c(i*i),a=c(rL*c(n*n)),h=c(e*s),u=t+i,f=c(c(u*u)-s-o),l=h+o,d=l-a,p=h-o,g=c(f*d),b=c(l*p),y=c(f*p);return new w(g,b,c(d*l),y)}add(e){y(e);let{a:t,d:i}=r,{ex:n,ey:s,ez:o,et:a}=this,{ex:h,ey:u,ez:f,et:l}=e;if(t===BigInt(-1)){let e=c((s-n)*(u+h)),t=c((s+n)*(u-h)),r=c(t-e);if(r===rN)return this.double();let i=c(o*rL*l),d=c(a*rL*f),p=d+i,g=t+e,b=d-i,y=c(p*r),m=c(g*b),v=c(p*b);return new w(y,m,c(r*g),v)}let d=c(n*h),p=c(s*u),g=c(a*i*l),b=c(o*f),m=c((n+s)*(h+u)-d-p),v=b-g,D=b+g,x=c(p-t*d),E=c(m*v),_=c(D*x),S=c(m*x);return new w(E,_,c(v*D),S)}subtract(e){return this.add(e.negate())}wNAF(e){return E.wNAFCached(this,e,w.normalizeZ)}multiply(e){ru("scalar",e,rB,n);let{p:t,f:r}=this.wNAF(e);return w.normalizeZ([t,r])[0]}multiplyUnsafe(e,t=w.ZERO){return ru("scalar",e,rN,n),e===rN?x:this.is0()||e===rB?this:E.wNAFCachedUnsafe(this,e,w.normalizeZ,t)}isSmallOrder(){return this.multiplyUnsafe(u).is0()}isTorsionFree(){return E.unsafeLadder(this,n).is0()}toAffine(e){return m(this,e)}clearCofactor(){let{h:e}=r;return e===rB?this:this.multiplyUnsafe(e)}static fromHex(e,t=!1){let{d:n,a:s}=r,o=i.BYTES;e=ro("pointHex",e,o),t4("zip215",t);let a=e.slice(),h=e[o-1];a[o-1]=-129&h;let u=ri(a);ru("pointHex.y",u,rN,t?f:i.ORDER);let l=c(u*u),{isValid:p,value:g}=d(c(l-rB),c(n*l-s));if(!p)throw Error("Point.fromHex: invalid y coordinate");let b=(g&rB)===rB,y=(128&h)!=0;if(!t&&g===rN&&y)throw Error("Point.fromHex: x=0 and x_0=1");return y!==b&&(g=c(-g)),w.fromAffine({x:g,y:u})}static fromPrivateKey(e){return _(e).point}toRawBytes(){let{x:e,y:t}=this.toAffine(),r=rs(t,i.BYTES);return r[r.length-1]|=e&rB?128:0,r}toHex(){return t7(this.toRawBytes())}}w.BASE=new w(r.Gx,r.Gy,rB,c(r.Gx*r.Gy)),w.ZERO=new w(rN,rB,rB,rN);let{BASE:D,ZERO:x}=w,E=(t=8*h,{constTimeNegate:rM,hasPrecomputes:e=>1!==rT(e),unsafeLadder(e,t,r=w.ZERO){let i=e;for(;t>rI;)t&rA&&(r=r.add(i)),i=i.double(),t>>=rA;return r},precomputeWindow(e,r){let{windows:i,windowSize:n}=rO(r,t),s=[],o=e,a=o;for(let e=0;e<i;e++){a=o,s.push(a);for(let e=1;e<n;e++)a=a.add(o),s.push(a);o=a.double()}return s},wNAF(e,r,i){let{windows:n,windowSize:s}=rO(e,t),o=w.ZERO,a=w.BASE,h=BigInt(2**e-1),u=2**e,f=BigInt(e);for(let e=0;e<n;e++){let t=e*s,n=Number(i&h);i>>=f,n>s&&(n-=u,i+=rA);let c=t+Math.abs(n)-1,l=e%2!=0,d=n<0;0===n?a=a.add(rM(l,r[t])):o=o.add(rM(d,r[c]))}return{p:o,f:a}},wNAFUnsafe(e,r,i,n=w.ZERO){let{windows:s,windowSize:o}=rO(e,t),a=BigInt(2**e-1),h=2**e,u=BigInt(e);for(let e=0;e<s;e++){let t=e*o;if(i===rI)break;let s=Number(i&a);if(i>>=u,s>o&&(s-=h,i+=rA),0===s)continue;let f=r[t+Math.abs(s)-1];s<0&&(f=f.negate()),n=n.add(f)}return n},getPrecomputes(e,t,r){let i=rP.get(t);return i||(i=this.precomputeWindow(t,e),1!==e&&rP.set(t,r(i))),i},wNAFCached(e,t,r){let i=rT(e);return this.wNAF(i,this.getPrecomputes(i,e,r),t)},wNAFCachedUnsafe(e,t,r,i){let n=rT(e);return 1===n?this.unsafeLadder(e,t,i):this.wNAFUnsafe(n,this.getPrecomputes(n,e,r),t,i)},setWindowSize(e,r){rC(r,t),rR.set(e,r),rP.delete(e)}});function _(e){let t=i.BYTES;e=ro("private key",e,t);let r=ro("hashed private key",o(e),2*t),s=p(r.slice(0,t)),a=r.slice(t,2*t),h=rw(ri(s),n),u=D.multiply(h),f=u.toRawBytes();return{head:s,prefix:a,scalar:h,point:u,pointBytes:f}}function S(e=new Uint8Array,...t){return rw(ri(o(g(ra(...t),ro("context",e),!!s))),n)}return D._setWindowSize(8),{CURVE:r,getPublicKey:function(e){return _(e).pointBytes},sign:function(e,t,r={}){e=ro("message",e),s&&(e=s(e));let{prefix:o,scalar:a,pointBytes:h}=_(t),u=S(r.context,o,e),f=D.multiply(u).toRawBytes(),c=rw(u+S(r.context,f,h,e)*a,n);return ru("signature.s",c,rN,n),ro("result",ra(f,rs(c,i.BYTES)),2*i.BYTES)},verify:function(e,t,r,n=rU){let o,a,h,{context:u,zip215:f}=n,c=i.BYTES;e=ro("signature",e,2*c),t=ro("message",t),r=ro("publicKey",r,c),void 0!==f&&t4("zip215",f),s&&(t=s(t));let l=ri(e.slice(c,2*c));try{o=w.fromHex(r,f),a=w.fromHex(e.slice(0,c),f),h=D.multiplyUnsafe(l)}catch{return!1}if(!f&&o.isSmallOrder())return!1;let d=S(u,a.toRawBytes(),o.toRawBytes(),t);return a.add(o.multiplyUnsafe(d)).subtract(h).clearCofactor().equals(w.ZERO)},ExtendedPoint:w,utils:{getExtendedPublicKey:_,randomPrivateKey:()=>a(i.BYTES),precompute:(e=8,t=w.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}}({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:r$,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:rK,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:t1,randomBytes:tT,adjustScalarBytes:function(e){return e[0]&=248,e[31]&=127,e[31]|=64,e},uvRatio:function(e,t){let r=rw(t*t*t,rz),i=function(e){let t=BigInt(10),r=BigInt(20),i=BigInt(40),n=BigInt(80),s=e*e%rz*e%rz,o=rD(s,rF,rz)*s%rz,a=rD(o,rq,rz)*e%rz,h=rD(a,rH,rz)*a%rz,u=rD(h,t,rz)*h%rz,f=rD(u,r,rz)*u%rz,c=rD(f,i,rz)*f%rz,l=rD(c,n,rz)*c%rz,d=rD(l,n,rz)*c%rz,p=rD(d,t,rz)*h%rz;return{pow_p_5_8:rD(p,rF,rz)*e%rz,b2:s}}(e*rw(r*r*t,rz)).pow_p_5_8,n=rw(e*r*i,rz),s=rw(t*n*n,rz),o=n,a=rw(n*rj,rz),h=s===e,u=s===rw(-e,rz),f=s===rw(-e*rj,rz);return h&&(n=o),(u||f)&&(n=a),(rw(n,rz)&rp)===rp&&(n=rw(-n,rz)),{isValid:h||u,value:n}}}),rW="base64url",rG="utf8",rY="utf8",rZ="base58btc";function rJ(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function rX(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?rJ(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function rQ(e,t){t||(t=e.reduce((e,t)=>e+t.length,0));let r=rX(t),i=0;for(let t of e)r.set(t,i),i+=t.length;return rJ(r)}var r0=function(e,t){if(e.length>=255)throw TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<e.length;n++){var s=e.charAt(n),o=s.charCodeAt(0);if(255!==r[o])throw TypeError(s+" is ambiguous");r[o]=n}var a=e.length,h=e.charAt(0),u=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function c(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[0]){for(var i=0,n=0;e[t]===h;)i++,t++;for(var s=(e.length-t)*u+1>>>0,o=new Uint8Array(s);e[t];){var f=r[e.charCodeAt(t)];if(255===f)return;for(var c=0,l=s-1;(0!==f||c<n)&&-1!==l;l--,c++)f+=a*o[l]>>>0,o[l]=f%256>>>0,f=f/256>>>0;if(0!==f)throw Error("Non-zero carry");n=c,t++}if(" "!==e[t]){for(var d=s-n;d!==s&&0===o[d];)d++;for(var p=new Uint8Array(i+(s-d)),g=i;d!==s;)p[g++]=o[d++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,i=0,n=0,s=t.length;n!==s&&0===t[n];)n++,r++;for(var o=(s-n)*f+1>>>0,u=new Uint8Array(o);n!==s;){for(var c=t[n],l=0,d=o-1;(0!==c||l<i)&&-1!==d;d--,l++)c+=256*u[d]>>>0,u[d]=c%a>>>0,c=c/a>>>0;if(0!==c)throw Error("Non-zero carry");i=l,n++}for(var p=o-i;p!==o&&0===u[p];)p++;for(var g=h.repeat(r);p<o;++p)g+=e.charAt(u[p]);return g},decodeUnsafe:c,decode:function(e){var r=c(e);if(r)return r;throw Error(`Non-${t} character`)}}};const r1=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw Error("Unknown type, must be binary type")};class r3{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class r2{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return r6(this,e)}}class r8{constructor(e){this.decoders=e}or(e){return r6(this,e)}decode(e){let t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const r6=(e,t)=>new r8({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class r5{constructor(e,t,r,i){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=i,this.encoder=new r3(e,t,r),this.decoder=new r2(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const r4=({name:e,prefix:t,encode:r,decode:i})=>new r5(e,t,r,i),r9=({prefix:e,name:t,alphabet:r})=>{let{encode:i,decode:n}=r0(r,t);return r4({prefix:e,name:t,encode:i,decode:e=>r1(n(e))})},r7=({name:e,prefix:t,bitsPerChar:r,alphabet:i})=>r4({prefix:t,name:e,encode:e=>((e,t,r)=>{let i="="===t[t.length-1],n=(1<<r)-1,s="",o=0,a=0;for(let i=0;i<e.length;++i)for(a=a<<8|e[i],o+=8;o>r;)o-=r,s+=t[n&a>>o];if(o&&(s+=t[n&a<<r-o]),i)for(;s.length*r&7;)s+="=";return s})(e,i,r),decode:t=>((e,t,r,i)=>{let n={};for(let e=0;e<t.length;++e)n[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;let o=new Uint8Array(s*r/8|0),a=0,h=0,u=0;for(let t=0;t<s;++t){let s=n[e[t]];if(void 0===s)throw SyntaxError(`Non-${i} character`);h=h<<r|s,(a+=r)>=8&&(a-=8,o[u++]=255&h>>a)}if(a>=r||255&h<<8-a)throw SyntaxError("Unexpected end of data");return o})(t,i,r,e)});var ie=Object.freeze({__proto__:null,identity:r4({prefix:"\0",name:"identity",encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)})}),it=Object.freeze({__proto__:null,base2:r7({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})}),ir=Object.freeze({__proto__:null,base8:r7({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})}),ii=Object.freeze({__proto__:null,base10:r9({prefix:"9",name:"base10",alphabet:"0123456789"})}),is=Object.freeze({__proto__:null,base16:r7({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper:r7({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})});const io=r7({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),ia=r7({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ih=r7({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),iu=r7({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),ic=r7({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),il=r7({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),id=r7({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});var ip=Object.freeze({__proto__:null,base32:io,base32upper:ia,base32pad:ih,base32padupper:iu,base32hex:ic,base32hexupper:il,base32hexpad:id,base32hexpadupper:r7({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z:r7({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})}),ig=Object.freeze({__proto__:null,base36:r9({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper:r9({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})}),ib=Object.freeze({__proto__:null,base58btc:r9({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr:r9({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})});const iy=r7({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),im=r7({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});var iv=Object.freeze({__proto__:null,base64:iy,base64pad:im,base64url:r7({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad:r7({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})});const iw=Array.from("\uD83D\uDE80\uD83E\uDE90\uD83D\uDEF0\uD83C\uDF0C\uD83C\uDF11\uD83C\uDF12\uD83C\uDF13\uD83C\uDF14\uD83C\uDF15\uD83C\uDF16\uD83C\uDF17\uD83C\uDF18\uD83C\uDF0D\uD83C\uDF0F\uD83C\uDF0E\uD83D\uDC09\uD83D\uDCBB\uD83D\uDDA5\uD83D\uDCBE\uD83D\uDCBF\uD83D\uDE02\uD83D\uDE0D\uD83E\uDD23\uD83D\uDE0A\uD83D\uDE4F\uD83D\uDC95\uD83D\uDE2D\uD83D\uDE18\uD83D\uDC4D\uD83D\uDE05\uD83D\uDC4F\uD83D\uDE01\uD83D\uDD25\uD83E\uDD70\uD83D\uDC94\uD83D\uDC96\uD83D\uDC99\uD83D\uDE22\uD83E\uDD14\uD83D\uDE06\uD83D\uDE44\uD83D\uDCAA\uD83D\uDE09\uD83D\uDC4C\uD83E\uDD17\uD83D\uDC9C\uD83D\uDE14\uD83D\uDE0E\uD83D\uDE07\uD83C\uDF39\uD83E\uDD26\uD83C\uDF89\uD83D\uDC9E\uD83E\uDD37\uD83D\uDE31\uD83D\uDE0C\uD83C\uDF38\uD83D\uDE4C\uD83D\uDE0B\uD83D\uDC97\uD83D\uDC9A\uD83D\uDE0F\uD83D\uDC9B\uD83D\uDE42\uD83D\uDC93\uD83E\uDD29\uD83D\uDE04\uD83D\uDE00\uD83D\uDDA4\uD83D\uDE03\uD83D\uDCAF\uD83D\uDE48\uD83D\uDC47\uD83C\uDFB6\uD83D\uDE12\uD83E\uDD2D\uD83D\uDE1C\uD83D\uDC8B\uD83D\uDC40\uD83D\uDE2A\uD83D\uDE11\uD83D\uDCA5\uD83D\uDE4B\uD83D\uDE1E\uD83D\uDE29\uD83D\uDE21\uD83E\uDD2A\uD83D\uDC4A\uD83E\uDD73\uD83D\uDE25\uD83E\uDD24\uD83D\uDC49\uD83D\uDC83\uD83D\uDE33\uD83D\uDE1A\uD83D\uDE1D\uD83D\uDE34\uD83C\uDF1F\uD83D\uDE2C\uD83D\uDE43\uD83C\uDF40\uD83C\uDF37\uD83D\uDE3B\uD83D\uDE13\uD83E\uDD7A\uD83C\uDF08\uD83D\uDE08\uD83E\uDD18\uD83D\uDCA6\uD83D\uDE23\uD83C\uDFC3\uD83D\uDC90\uD83C\uDF8A\uD83D\uDC98\uD83D\uDE20\uD83D\uDE15\uD83C\uDF3A\uD83C\uDF82\uD83C\uDF3B\uD83D\uDE10\uD83D\uDD95\uD83D\uDC9D\uD83D\uDE4A\uD83D\uDE39\uD83D\uDDE3\uD83D\uDCAB\uD83D\uDC80\uD83D\uDC51\uD83C\uDFB5\uD83E\uDD1E\uD83D\uDE1B\uD83D\uDD34\uD83D\uDE24\uD83C\uDF3C\uD83D\uDE2B\uD83E\uDD19\uD83C\uDFC6\uD83E\uDD2B\uD83D\uDC48\uD83D\uDE2E\uD83D\uDE46\uD83C\uDF7B\uD83C\uDF43\uD83D\uDC36\uD83D\uDC81\uD83D\uDE32\uD83C\uDF3F\uD83E\uDDE1\uD83C\uDF81\uD83C\uDF1E\uD83C\uDF88\uD83D\uDC4B\uD83D\uDE30\uD83E\uDD28\uD83D\uDE36\uD83E\uDD1D\uD83D\uDEB6\uD83D\uDCB0\uD83C\uDF53\uD83D\uDCA2\uD83E\uDD1F\uD83D\uDE41\uD83D\uDEA8\uD83D\uDCA8\uD83E\uDD2C\uD83C\uDF80\uD83C\uDF7A\uD83E\uDD13\uD83D\uDE19\uD83D\uDC9F\uD83C\uDF31\uD83D\uDE16\uD83D\uDC76\uD83E\uDD74\uD83D\uDC8E\uD83D\uDCB8\uD83D\uDE28\uD83C\uDF1A\uD83E\uDD8B\uD83D\uDE37\uD83D\uDD7A\uD83D\uDE45\uD83D\uDE1F\uD83D\uDE35\uD83D\uDC4E\uD83E\uDD32\uD83E\uDD20\uD83E\uDD27\uD83D\uDCCC\uD83D\uDD35\uD83D\uDC85\uD83E\uDDD0\uD83D\uDC3E\uD83C\uDF52\uD83D\uDE17\uD83E\uDD11\uD83C\uDF0A\uD83E\uDD2F\uD83D\uDC37\uD83D\uDCA7\uD83D\uDE2F\uD83D\uDC86\uD83D\uDC46\uD83C\uDFA4\uD83D\uDE47\uD83C\uDF51\uD83C\uDF34\uD83D\uDCA3\uD83D\uDC38\uD83D\uDC8C\uD83D\uDCCD\uD83E\uDD40\uD83E\uDD22\uD83D\uDC45\uD83D\uDCA1\uD83D\uDCA9\uD83D\uDC50\uD83D\uDCF8\uD83D\uDC7B\uD83E\uDD10\uD83E\uDD2E\uD83C\uDFBC\uD83E\uDD75\uD83D\uDEA9\uD83C\uDF4E\uD83C\uDF4A\uD83D\uDC7C\uD83D\uDC8D\uD83D\uDCE3\uD83E\uDD42"),iD=iw.reduce((e,t,r)=>(e[r]=t,e),[]),ix=iw.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]);var iE=Object.freeze({__proto__:null,base256emoji:r4({prefix:"\uD83D\uDE80",name:"base256emoji",encode:function(e){return e.reduce((e,t)=>e+=iD[t],"")},decode:function(e){let t=[];for(let r of e){let e=ix[r.codePointAt(0)];if(void 0===e)throw Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}})});function i_(e,t,r){t=t||[],r=r||0;for(var i=r;e>=0x80000000;)t[r++]=255&e|128,e/=128;for(;-128&e;)t[r++]=255&e|128,e>>>=7;return t[r]=0|e,i_.bytes=r-i+1,t}const iS=(e,t,r=0)=>(i_(e,t,r),t),iI=e=>{var t;return(t=e)<128?1:t<16384?2:t<2097152?3:t<0x10000000?4:t<0x800000000?5:t<0x40000000000?6:t<0x2000000000000?7:t<0x100000000000000?8:t<0x8000000000000000?9:10},iA=(e,t)=>{let r=t.byteLength,i=iI(e),n=i+iI(r),s=new Uint8Array(n+r);return iS(e,s,0),iS(r,s,i),s.set(t,n),new iM(e,r,t,s)};class iM{constructor(e,t,r,i){this.code=e,this.size=t,this.digest=r,this.bytes=i}}const iC=({name:e,code:t,encode:r})=>new iO(e,t,r);class iO{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?iA(this.code,t):t.then(e=>iA(this.code,e))}throw Error("Unknown type, must be binary type")}}const iP=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t));var iR=Object.freeze({__proto__:null,sha256:iC({name:"sha2-256",code:18,encode:iP("SHA-256")}),sha512:iC({name:"sha2-512",code:19,encode:iP("SHA-512")})}),iT=Object.freeze({__proto__:null,identity:{code:0,name:"identity",encode:r1,digest:e=>iA(0,r1(e))}});new TextEncoder,new TextDecoder;const iN={...ie,...it,...ir,...ii,...is,...ip,...ig,...ib,...iv,...iE};function iB(e,t,r,i){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:i}}}({...iR,...iT});const iL=iB("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),ik=iB("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{let t=rX((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),iU={utf8:iL,"utf-8":iL,hex:iN.base16,latin1:ik,ascii:ik,binary:ik,...iN};function iz(e,t="utf8"){let r=iU[t];if(!r)throw Error(`Unsupported encoding "${t}"`);return("utf8"===t||"utf-8"===t)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):r.encoder.encode(e).substring(1)}function ij(e,t="utf8"){let r=iU[t];if(!r)throw Error(`Unsupported encoding "${t}"`);return("utf8"===t||"utf-8"===t)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?rJ(globalThis.Buffer.from(e,"utf-8")):r.decoder.decode(`${r.prefix}${e}`)}function iq(e){return eE(iz(ij(e,rW),rG))}function iF(e){return iz(ij(e_(e),rG),rW)}function iH(e){return["did:key","z"+iz(rQ([ij("K36",rZ),e]),rZ)].join(":")}function iK(e){let t=e.split("."),r=iq(t[0]),i=iq(t[1]);return{header:r,payload:i,signature:ij(t[2],rW),data:ij(t.slice(0,2).join("."),rY)}}function i$(e=tT(32)){let t=rV.getPublicKey(e);return{secretKey:rQ([e,t]),publicKey:t}}async function iV(e,t,r,i,n=(0,x.fromMiliseconds)(Date.now())){let s={alg:"EdDSA",typ:"JWT"},o={iss:iH(i.publicKey),sub:e,aud:t,iat:n,exp:n+r},a=ij([iF((h={header:s,payload:o}).header),iF(h.payload)].join("."),rY);var h,u={header:s,payload:o,signature:rV.sign(a,i.secretKey.slice(0,32))};return[iF(u.header),iF(u.payload),iz(u.signature,rW)].join(".")}var iW={};function iG(){throw Error("setTimeout has not been defined")}function iY(){throw Error("clearTimeout has not been defined")}try{I_="function"==typeof setTimeout?setTimeout:iG}catch(e){I_=iG}try{IS="function"==typeof clearTimeout?clearTimeout:iY}catch(e){IS=iY}function iZ(e){if(I_===setTimeout)return setTimeout(e,0);if((I_===iG||!I_)&&setTimeout)return I_=setTimeout,setTimeout(e,0);try{return I_(e,0)}catch(t){try{return I_.call(null,e,0)}catch(t){return I_.call(this,e,0)}}}var iJ=[],iX=!1,iQ=-1;function i0(){iX&&II&&(iX=!1,II.length?iJ=II.concat(iJ):iQ=-1,iJ.length&&i1())}function i1(){if(!iX){var e=iZ(i0);iX=!0;for(var t=iJ.length;t;){for(II=iJ,iJ=[];++iQ<t;)II&&II[iQ].run();iQ=-1,t=iJ.length}II=null,iX=!1,function(e){if(IS===clearTimeout)return clearTimeout(e);if((IS===iY||!IS)&&clearTimeout)return IS=clearTimeout,clearTimeout(e);try{IS(e)}catch(t){try{return IS.call(null,e)}catch(t){return IS.call(this,e)}}}(e)}}function i3(e,t){this.fun=e,this.array=t}function i2(){}iW.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];iJ.push(new i3(e,t)),1!==iJ.length||iX||iZ(i1)},i3.prototype.run=function(){this.fun.apply(null,this.array)},iW.title="browser",iW.browser=!0,iW.env={},iW.argv=[],iW.version="",iW.versions={},iW.on=i2,iW.addListener=i2,iW.once=i2,iW.off=i2,iW.removeListener=i2,iW.removeAllListeners=i2,iW.emit=i2,iW.prependListener=i2,iW.prependOnceListener=i2,iW.listeners=function(e){return[]},iW.binding=function(e){throw Error("process.binding is not supported")},iW.cwd=function(){return"/"},iW.chdir=function(e){throw Error("process.chdir is not supported")},iW.umask=function(){return 0};var i8=function(e,t,r){if(r||2==arguments.length)for(var i,n=0,s=t.length;n<s;n++)!i&&n in t||(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))},i6=function(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"},i5=function(e,t,r,i){this.name=e,this.version=t,this.os=r,this.bot=i,this.type="bot-device"},i4=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},i9=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},i7=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,ne=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],nt=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function nr(e){return e?ni(e):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new i9:"undefined"!=typeof navigator?ni(navigator.userAgent):null}function ni(e){var t=""!==e&&ne.reduce(function(t,r){var i=r[0],n=r[1];if(t)return t;var s=n.exec(e);return!!s&&[i,s]},!1);if(!t)return null;var r=t[0],i=t[1];if("searchbot"===r)return new i4;var n=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);n?n.length<3&&(n=i8(i8([],n,!0),function(e){for(var t=[],r=0;r<e;r++)t.push("0");return t}(3-n.length),!0)):n=[];var s=n.join("."),o=function(e){for(var t=0,r=nt.length;t<r;t++){var i=nt[t],n=i[0];if(i[1].exec(e))return n}return null}(e),a=i7.exec(e);return a&&a[1]?new i5(r,s,o,a[1]):new i6(r,s,o)}var nn={};function ns(e){let t;return"undefined"!=typeof window&&void 0!==window[e]&&(t=window[e]),t}function no(e){let t=ns(e);if(!t)throw Error(`${e} is not defined in Window`);return t}Object.defineProperty(nn,"__esModule",{value:!0}),nn.getLocalStorage=nn.getLocalStorageOrThrow=nn.getCrypto=nn.getCryptoOrThrow=nn.getLocation=nn.getLocationOrThrow=nn.getNavigator=nn.getNavigatorOrThrow=nn.getDocument=nn.getDocumentOrThrow=nn.getFromWindowOrThrow=nn.getFromWindow=void 0,nn.getFromWindow=ns,nn.getFromWindowOrThrow=no,nn.getDocumentOrThrow=function(){return no("document")},nn.getDocument=function(){return ns("document")},nn.getNavigatorOrThrow=function(){return no("navigator")},nn.getNavigator=function(){return ns("navigator")},nn.getLocationOrThrow=function(){return no("location")},nn.getLocation=function(){return ns("location")},nn.getCryptoOrThrow=function(){return no("crypto")},nn.getCrypto=function(){return ns("crypto")},nn.getLocalStorageOrThrow=function(){return no("localStorage")},nn.getLocalStorage=function(){return ns("localStorage")};var na={};Object.defineProperty(na,"__esModule",{value:!0}),na.getWindowMetadata=void 0,na.getWindowMetadata=function(){let e,t,r;try{e=nn.getDocumentOrThrow(),t=nn.getLocationOrThrow()}catch(e){return null}function i(...t){let r=e.getElementsByTagName("meta");for(let e=0;e<r.length;e++){let i=r[e],n=["itemprop","property","name"].map(e=>i.getAttribute(e)).filter(e=>!!e&&t.includes(e));if(n.length&&n){let e=i.getAttribute("content");if(e)return e}}return""}let n=((r=i("name","og:site_name","og:title","twitter:title"))||(r=e.title),r),s=i("description","og:description","twitter:description","keywords"),o=t.origin;return{description:s,url:o,icons:function(){let r=e.getElementsByTagName("link"),i=[];for(let e=0;e<r.length;e++){let n=r[e],s=n.getAttribute("rel");if(s&&s.toLowerCase().indexOf("icon")>-1){let e=n.getAttribute("href");if(e)if(-1===e.toLowerCase().indexOf("https:")&&-1===e.toLowerCase().indexOf("http:")&&0!==e.indexOf("//")){let r=t.protocol+"//"+t.host;if(0===e.indexOf("/"))r+=e;else{let i=t.pathname.split("/");i.pop(),r+=i.join("/")+"/"+e}i.push(r)}else if(0===e.indexOf("//")){let r=t.protocol+e;i.push(r)}else i.push(e)}}return i}(),name:n}};var nh={};e(nh,"noble",()=>o4),e(nh,"createKeyPair",()=>o9),e(nh,"randomPrivateKey",()=>at),e(nh,"getPublicKey",()=>o7),e(nh,"getSharedSecret",()=>ae),e(nh,"recoverAddress",()=>ar),e(nh,"recoverPublicKey",()=>ai),e(nh,"sign",()=>an),e(nh,"verify",()=>as);var nu={};Object.defineProperty(nu,"__esModule",{value:!0}),nu.encodeToCurve=nu.hashToCurve=nu.secp256k1_hasher=nu.schnorr=nu.secp256k1=void 0;var nf={};Object.defineProperty(nf,"__esModule",{value:!0}),nf.sha512_224=nf.sha512_256=nf.sha384=nf.sha512=nf.sha224=nf.sha256=nf.SHA512_256=nf.SHA512_224=nf.SHA384=nf.SHA512=nf.SHA224=nf.SHA256=void 0;var nc={};Object.defineProperty(nc,"__esModule",{value:!0}),nc.SHA512_IV=nc.SHA384_IV=nc.SHA224_IV=nc.SHA256_IV=nc.HashMD=void 0,nc.setBigUint64=nd,nc.Chi=function(e,t,r){return e&t^~e&r},nc.Maj=function(e,t,r){return e&t^e&r^t&r};var nl=s("cLJKR");function nd(e,t,r,i){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,i);let n=BigInt(32),s=BigInt(0xffffffff),o=Number(r>>n&s),a=Number(r&s),h=4*!!i,u=4*!i;e.setUint32(t+h,o,i),e.setUint32(t+u,a,i)}class np extends nl.Hash{constructor(e,t,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(e),this.view=(0,nl.createView)(this.buffer)}update(e){(0,nl.aexists)(this),e=(0,nl.toBytes)(e),(0,nl.abytes)(e);let{view:t,buffer:r,blockLen:i}=this,n=e.length;for(let s=0;s<n;){let o=Math.min(i-this.pos,n-s);if(o===i){let t=(0,nl.createView)(e);for(;i<=n-s;s+=i)this.process(t,s);continue}r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,nl.aexists)(this),(0,nl.aoutput)(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:i,isLE:n}=this,{pos:s}=this;t[s++]=128,(0,nl.clean)(this.buffer.subarray(s)),this.padOffset>i-s&&(this.process(r,0),s=0);for(let e=s;e<i;e++)t[e]=0;nd(r,i-8,BigInt(8*this.length),n),this.process(r,0);let o=(0,nl.createView)(e),a=this.outputLen;if(a%4)throw Error("_sha2: outputLen should be aligned to 32bit");let h=a/4,u=this.get();if(h>u.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<h;e++)o.setUint32(4*e,u[e],n)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:i,finished:n,destroyed:s,pos:o}=this;return e.destroyed=s,e.finished=n,e.length=i,e.pos=o,i%t&&e.buffer.set(r),e}clone(){return this._cloneInto()}}nc.HashMD=np,nc.SHA256_IV=Uint32Array.from([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),nc.SHA224_IV=Uint32Array.from([0xc1059ed8,0x367cd507,0x3070dd17,0xf70e5939,0xffc00b31,0x68581511,0x64f98fa7,0xbefa4fa4]),nc.SHA384_IV=Uint32Array.from([0xcbbb9d5d,0xc1059ed8,0x629a292a,0x367cd507,0x9159015a,0x3070dd17,0x152fecd8,0xf70e5939,0x67332667,0xffc00b31,0x8eb44a87,0x68581511,0xdb0c2e0d,0x64f98fa7,0x47b5481d,0xbefa4fa4]),nc.SHA512_IV=Uint32Array.from([0x6a09e667,0xf3bcc908,0xbb67ae85,0x84caa73b,0x3c6ef372,0xfe94f82b,0xa54ff53a,0x5f1d36f1,0x510e527f,0xade682d1,0x9b05688c,0x2b3e6c1f,0x1f83d9ab,0xfb41bd6b,0x5be0cd19,0x137e2179]);var ng={};Object.defineProperty(ng,"__esModule",{value:!0}),ng.toBig=ng.shrSL=ng.shrSH=ng.rotrSL=ng.rotrSH=ng.rotrBL=ng.rotrBH=ng.rotr32L=ng.rotr32H=ng.rotlSL=ng.rotlSH=ng.rotlBL=ng.rotlBH=ng.add5L=ng.add5H=ng.add4L=ng.add4H=ng.add3L=ng.add3H=void 0,ng.add=nT,ng.fromBig=nm,ng.split=nv;const nb=BigInt(0x100000000-1),ny=BigInt(32);function nm(e,t=!1){return t?{h:Number(e&nb),l:Number(e>>ny&nb)}:{h:0|Number(e>>ny&nb),l:0|Number(e&nb)}}function nv(e,t=!1){let r=e.length,i=new Uint32Array(r),n=new Uint32Array(r);for(let s=0;s<r;s++){let{h:r,l:o}=nm(e[s],t);[i[s],n[s]]=[r,o]}return[i,n]}const nw=(e,t)=>BigInt(e>>>0)<<ny|BigInt(t>>>0);ng.toBig=nw;const nD=(e,t,r)=>e>>>r;ng.shrSH=nD;const nx=(e,t,r)=>e<<32-r|t>>>r;ng.shrSL=nx;const nE=(e,t,r)=>e>>>r|t<<32-r;ng.rotrSH=nE;const n_=(e,t,r)=>e<<32-r|t>>>r;ng.rotrSL=n_;const nS=(e,t,r)=>e<<64-r|t>>>r-32;ng.rotrBH=nS;const nI=(e,t,r)=>e>>>r-32|t<<64-r;ng.rotrBL=nI;const nA=(e,t)=>t;ng.rotr32H=nA;const nM=(e,t)=>e;ng.rotr32L=nM;const nC=(e,t,r)=>e<<r|t>>>32-r;ng.rotlSH=nC;const nO=(e,t,r)=>t<<r|e>>>32-r;ng.rotlSL=nO;const nP=(e,t,r)=>t<<r-32|e>>>64-r;ng.rotlBH=nP;const nR=(e,t,r)=>e<<r-32|t>>>64-r;function nT(e,t,r,i){let n=(t>>>0)+(i>>>0);return{h:e+r+(n/0x100000000|0)|0,l:0|n}}ng.rotlBL=nR;const nN=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0);ng.add3L=nN;const nB=(e,t,r,i)=>t+r+i+(e/0x100000000|0)|0;ng.add3H=nB;const nL=(e,t,r,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0);ng.add4L=nL;const nk=(e,t,r,i,n)=>t+r+i+n+(e/0x100000000|0)|0;ng.add4H=nk;const nU=(e,t,r,i,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0)+(n>>>0);ng.add5L=nU;const nz=(e,t,r,i,n,s)=>t+r+i+n+s+(e/0x100000000|0)|0;ng.add5H=nz,ng.default={fromBig:nm,split:nv,toBig:nw,shrSH:nD,shrSL:nx,rotrSH:nE,rotrSL:n_,rotrBH:nS,rotrBL:nI,rotr32H:nA,rotr32L:nM,rotlSH:nC,rotlSL:nO,rotlBH:nP,rotlBL:nR,add:nT,add3L:nN,add3H:nB,add4L:nL,add4H:nk,add5H:nz,add5L:nU};var nl=s("cLJKR");const nj=Uint32Array.from([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]),nq=new Uint32Array(64);class nF extends nc.HashMD{constructor(e=32){super(64,e,8,!1),this.A=0|nc.SHA256_IV[0],this.B=0|nc.SHA256_IV[1],this.C=0|nc.SHA256_IV[2],this.D=0|nc.SHA256_IV[3],this.E=0|nc.SHA256_IV[4],this.F=0|nc.SHA256_IV[5],this.G=0|nc.SHA256_IV[6],this.H=0|nc.SHA256_IV[7]}get(){let{A:e,B:t,C:r,D:i,E:n,F:s,G:o,H:a}=this;return[e,t,r,i,n,s,o,a]}set(e,t,r,i,n,s,o,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|i,this.E=0|n,this.F=0|s,this.G=0|o,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)nq[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=nq[e-15],r=nq[e-2],i=(0,nl.rotr)(t,7)^(0,nl.rotr)(t,18)^t>>>3,n=(0,nl.rotr)(r,17)^(0,nl.rotr)(r,19)^r>>>10;nq[e]=n+nq[e-7]+i+nq[e-16]|0}let{A:r,B:i,C:n,D:s,E:o,F:a,G:h,H:u}=this;for(let e=0;e<64;e++){let t=u+((0,nl.rotr)(o,6)^(0,nl.rotr)(o,11)^(0,nl.rotr)(o,25))+(0,nc.Chi)(o,a,h)+nj[e]+nq[e]|0,f=((0,nl.rotr)(r,2)^(0,nl.rotr)(r,13)^(0,nl.rotr)(r,22))+(0,nc.Maj)(r,i,n)|0;u=h,h=a,a=o,o=s+t|0,s=n,n=i,i=r,r=t+f|0}r=r+this.A|0,i=i+this.B|0,n=n+this.C|0,s=s+this.D|0,o=o+this.E|0,a=a+this.F|0,h=h+this.G|0,u=u+this.H|0,this.set(r,i,n,s,o,a,h,u)}roundClean(){(0,nl.clean)(nq)}destroy(){this.set(0,0,0,0,0,0,0,0),(0,nl.clean)(this.buffer)}}nf.SHA256=nF;class nH extends nF{constructor(){super(28),this.A=0|nc.SHA224_IV[0],this.B=0|nc.SHA224_IV[1],this.C=0|nc.SHA224_IV[2],this.D=0|nc.SHA224_IV[3],this.E=0|nc.SHA224_IV[4],this.F=0|nc.SHA224_IV[5],this.G=0|nc.SHA224_IV[6],this.H=0|nc.SHA224_IV[7]}}nf.SHA224=nH;const nK=ng.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),n$=nK[0],nV=nK[1],nW=new Uint32Array(80),nG=new Uint32Array(80);class nY extends nc.HashMD{constructor(e=64){super(128,e,16,!1),this.Ah=0|nc.SHA512_IV[0],this.Al=0|nc.SHA512_IV[1],this.Bh=0|nc.SHA512_IV[2],this.Bl=0|nc.SHA512_IV[3],this.Ch=0|nc.SHA512_IV[4],this.Cl=0|nc.SHA512_IV[5],this.Dh=0|nc.SHA512_IV[6],this.Dl=0|nc.SHA512_IV[7],this.Eh=0|nc.SHA512_IV[8],this.El=0|nc.SHA512_IV[9],this.Fh=0|nc.SHA512_IV[10],this.Fl=0|nc.SHA512_IV[11],this.Gh=0|nc.SHA512_IV[12],this.Gl=0|nc.SHA512_IV[13],this.Hh=0|nc.SHA512_IV[14],this.Hl=0|nc.SHA512_IV[15]}get(){let{Ah:e,Al:t,Bh:r,Bl:i,Ch:n,Cl:s,Dh:o,Dl:a,Eh:h,El:u,Fh:f,Fl:c,Gh:l,Gl:d,Hh:p,Hl:g}=this;return[e,t,r,i,n,s,o,a,h,u,f,c,l,d,p,g]}set(e,t,r,i,n,s,o,a,h,u,f,c,l,d,p,g){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|i,this.Ch=0|n,this.Cl=0|s,this.Dh=0|o,this.Dl=0|a,this.Eh=0|h,this.El=0|u,this.Fh=0|f,this.Fl=0|c,this.Gh=0|l,this.Gl=0|d,this.Hh=0|p,this.Hl=0|g}process(e,t){for(let r=0;r<16;r++,t+=4)nW[r]=e.getUint32(t),nG[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){let t=0|nW[e-15],r=0|nG[e-15],i=ng.rotrSH(t,r,1)^ng.rotrSH(t,r,8)^ng.shrSH(t,r,7),n=ng.rotrSL(t,r,1)^ng.rotrSL(t,r,8)^ng.shrSL(t,r,7),s=0|nW[e-2],o=0|nG[e-2],a=ng.rotrSH(s,o,19)^ng.rotrBH(s,o,61)^ng.shrSH(s,o,6),h=ng.rotrSL(s,o,19)^ng.rotrBL(s,o,61)^ng.shrSL(s,o,6),u=ng.add4L(n,h,nG[e-7],nG[e-16]),f=ng.add4H(u,i,a,nW[e-7],nW[e-16]);nW[e]=0|f,nG[e]=0|u}let{Ah:r,Al:i,Bh:n,Bl:s,Ch:o,Cl:a,Dh:h,Dl:u,Eh:f,El:c,Fh:l,Fl:d,Gh:p,Gl:g,Hh:b,Hl:y}=this;for(let e=0;e<80;e++){let t=ng.rotrSH(f,c,14)^ng.rotrSH(f,c,18)^ng.rotrBH(f,c,41),m=ng.rotrSL(f,c,14)^ng.rotrSL(f,c,18)^ng.rotrBL(f,c,41),v=f&l^~f&p,w=c&d^~c&g,D=ng.add5L(y,m,w,nV[e],nG[e]),x=ng.add5H(D,b,t,v,n$[e],nW[e]),E=0|D,_=ng.rotrSH(r,i,28)^ng.rotrBH(r,i,34)^ng.rotrBH(r,i,39),S=ng.rotrSL(r,i,28)^ng.rotrBL(r,i,34)^ng.rotrBL(r,i,39),I=r&n^r&o^n&o,A=i&s^i&a^s&a;b=0|p,y=0|g,p=0|l,g=0|d,l=0|f,d=0|c,({h:f,l:c}=ng.add(0|h,0|u,0|x,0|E)),h=0|o,u=0|a,o=0|n,a=0|s,n=0|r,s=0|i;let M=ng.add3L(E,S,A);r=ng.add3H(M,x,_,I),i=0|M}({h:r,l:i}=ng.add(0|this.Ah,0|this.Al,0|r,0|i)),({h:n,l:s}=ng.add(0|this.Bh,0|this.Bl,0|n,0|s)),({h:o,l:a}=ng.add(0|this.Ch,0|this.Cl,0|o,0|a)),({h:h,l:u}=ng.add(0|this.Dh,0|this.Dl,0|h,0|u)),({h:f,l:c}=ng.add(0|this.Eh,0|this.El,0|f,0|c)),({h:l,l:d}=ng.add(0|this.Fh,0|this.Fl,0|l,0|d)),({h:p,l:g}=ng.add(0|this.Gh,0|this.Gl,0|p,0|g)),({h:b,l:y}=ng.add(0|this.Hh,0|this.Hl,0|b,0|y)),this.set(r,i,n,s,o,a,h,u,f,c,l,d,p,g,b,y)}roundClean(){(0,nl.clean)(nW,nG)}destroy(){(0,nl.clean)(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}nf.SHA512=nY;class nZ extends nY{constructor(){super(48),this.Ah=0|nc.SHA384_IV[0],this.Al=0|nc.SHA384_IV[1],this.Bh=0|nc.SHA384_IV[2],this.Bl=0|nc.SHA384_IV[3],this.Ch=0|nc.SHA384_IV[4],this.Cl=0|nc.SHA384_IV[5],this.Dh=0|nc.SHA384_IV[6],this.Dl=0|nc.SHA384_IV[7],this.Eh=0|nc.SHA384_IV[8],this.El=0|nc.SHA384_IV[9],this.Fh=0|nc.SHA384_IV[10],this.Fl=0|nc.SHA384_IV[11],this.Gh=0|nc.SHA384_IV[12],this.Gl=0|nc.SHA384_IV[13],this.Hh=0|nc.SHA384_IV[14],this.Hl=0|nc.SHA384_IV[15]}}nf.SHA384=nZ;const nJ=Uint32Array.from([0x8c3d37c8,0x19544da2,0x73e19966,0x89dcd4d6,0x1dfab7ae,0x32ff9c82,0x679dd514,0x582f9fcf,0xf6d2b69,0x7bd44da8,0x77e36f73,0x4c48942,0x3f9d85a8,0x6a1d36c8,0x1112e6ad,0x91d692a1]),nX=Uint32Array.from([0x22312194,0xfc2bf72c,0x9f555fa3,0xc84c64c2,0x2393b86b,0x6f53b151,0x96387719,0x5940eabd,0x96283ee2,0xa88effe3,0xbe5e1e25,0x53863992,0x2b0199fc,0x2c85b8aa,0xeb72ddc,0x81c52ca2]);class nQ extends nY{constructor(){super(28),this.Ah=0|nJ[0],this.Al=0|nJ[1],this.Bh=0|nJ[2],this.Bl=0|nJ[3],this.Ch=0|nJ[4],this.Cl=0|nJ[5],this.Dh=0|nJ[6],this.Dl=0|nJ[7],this.Eh=0|nJ[8],this.El=0|nJ[9],this.Fh=0|nJ[10],this.Fl=0|nJ[11],this.Gh=0|nJ[12],this.Gl=0|nJ[13],this.Hh=0|nJ[14],this.Hl=0|nJ[15]}}nf.SHA512_224=nQ;class n0 extends nY{constructor(){super(32),this.Ah=0|nX[0],this.Al=0|nX[1],this.Bh=0|nX[2],this.Bl=0|nX[3],this.Ch=0|nX[4],this.Cl=0|nX[5],this.Dh=0|nX[6],this.Dl=0|nX[7],this.Eh=0|nX[8],this.El=0|nX[9],this.Fh=0|nX[10],this.Fl=0|nX[11],this.Gh=0|nX[12],this.Gl=0|nX[13],this.Hh=0|nX[14],this.Hl=0|nX[15]}}nf.SHA512_256=n0,nf.sha256=(0,nl.createHasher)(()=>new nF),nf.sha224=(0,nl.createHasher)(()=>new nH),nf.sha512=(0,nl.createHasher)(()=>new nY),nf.sha384=(0,nl.createHasher)(()=>new nZ),nf.sha512_256=(0,nl.createHasher)(()=>new n0),nf.sha512_224=(0,nl.createHasher)(()=>new nQ);var nl=s("cLJKR"),n1={};Object.defineProperty(n1,"__esModule",{value:!0}),n1.getHash=sh,n1.createCurve=function(e,t){let r=t=>(0,n8.weierstrass)({...e,...sh(t)});return{...r(t),create:r}};var n3={};Object.defineProperty(n3,"__esModule",{value:!0}),n3.hmac=n3.HMAC=void 0;var nl=s("cLJKR");class n2 extends nl.Hash{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,(0,nl.ahash)(e);let r=(0,nl.toBytes)(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,n=new Uint8Array(i);n.set(r.length>i?e.create().update(r).digest():r);for(let e=0;e<n.length;e++)n[e]^=54;this.iHash.update(n),this.oHash=e.create();for(let e=0;e<n.length;e++)n[e]^=106;this.oHash.update(n),(0,nl.clean)(n)}update(e){return(0,nl.aexists)(this),this.iHash.update(e),this}digestInto(e){(0,nl.aexists)(this),(0,nl.abytes)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:i,destroyed:n,blockLen:s,outputLen:o}=this;return e.finished=i,e.destroyed=n,e.blockLen=s,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}n3.HMAC=n2,n3.hmac=(e,t,r)=>new n2(e,t).update(r).digest(),n3.hmac.create=(e,t)=>new n2(e,t);var nl=s("cLJKR"),n8={};Object.defineProperty(n8,"__esModule",{value:!0}),n8.DER=n8.DERErr=void 0,n8.weierstrassPoints=so,n8.weierstrass=function(e){let t=function(e){let t=(0,n6.validateBasic)(e);return(0,n4.validateObject)(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:r,n:i,nByteLength:n,nBitLength:s}=t,o=r.BYTES+1,a=2*r.BYTES+1;function h(e){return(0,n5.mod)(e,i)}function u(e){return(0,n5.invert)(e,i)}let{ProjectivePoint:f,normPrivateKeyToScalar:c,weierstrassEquation:l,isWithinCurveOrder:d}=so({...t,toBytes(e,t,i){let n=t.toAffine(),s=r.toBytes(n.x),o=n4.concatBytes;return((0,n4.abool)("isCompressed",i),i)?o(Uint8Array.from([t.hasEvenY()?2:3]),s):o(Uint8Array.from([4]),s,r.toBytes(n.y))},fromBytes(e){let t=e.length,i=e[0],n=e.subarray(1);if(t===o&&(2===i||3===i)){let e,t=(0,n4.bytesToNumberBE)(n);if(!(0,n4.inRange)(t,sr,r.ORDER))throw Error("Point is not on curve");let s=l(t);try{e=r.sqrt(s)}catch(e){throw Error("Point is not on curve"+(e instanceof Error?": "+e.message:""))}return(1&i)==1!=((e&sr)===sr)&&(e=r.neg(e)),{x:t,y:e}}if(t===a&&4===i)return{x:r.fromBytes(n.subarray(0,r.BYTES)),y:r.fromBytes(n.subarray(r.BYTES,2*r.BYTES))};throw Error("invalid Point, expected length of "+o+", or uncompressed "+a+", got "+t)}}),p=(e,t,r)=>(0,n4.bytesToNumberBE)(e.slice(t,r));class g{constructor(e,t,r){(0,n4.aInRange)("r",e,sr,i),(0,n4.aInRange)("s",t,sr,i),this.r=e,this.s=t,null!=r&&(this.recovery=r),Object.freeze(this)}static fromCompact(e){return new g(p(e=(0,n4.ensureBytes)("compactSignature",e,2*n),0,n),p(e,n,2*n))}static fromDER(e){let{r:t,s:r}=n8.DER.toSig((0,n4.ensureBytes)("DER",e));return new g(t,r)}assertValidity(){}addRecoveryBit(e){return new g(this.r,this.s,e)}recoverPublicKey(e){let{r:i,s:n,recovery:s}=this,o=m((0,n4.ensureBytes)("msgHash",e));if(null==s||![0,1,2,3].includes(s))throw Error("recovery id invalid");let a=2===s||3===s?i+t.n:i;if(a>=r.ORDER)throw Error("recovery id 2 or 3 invalid");let c=(1&s)==0?"02":"03",l=f.fromHex(c+se(a,r.BYTES)),d=u(a),p=h(-o*d),g=h(n*d),b=f.BASE.multiplyAndAddUnsafe(l,p,g);if(!b)throw Error("point at infinify");return b.assertValidity(),b}hasHighS(){return this.s>i>>sr}normalizeS(){return this.hasHighS()?new g(this.r,h(-this.s),this.recovery):this}toDERRawBytes(){return(0,n4.hexToBytes)(this.toDERHex())}toDERHex(){return n8.DER.hexFromSig(this)}toCompactRawBytes(){return(0,n4.hexToBytes)(this.toCompactHex())}toCompactHex(){return se(this.r,n)+se(this.s,n)}}function b(e){if("bigint"==typeof e)return!1;if(e instanceof f)return!0;let i=(0,n4.ensureBytes)("key",e).length,s=r.BYTES,o=s+1;if(!t.allowedPrivateKeyLengths&&n!==o)return i===o||i===2*s+1}let y=t.bits2int||function(e){if(e.length>8192)throw Error("input is too large");let t=(0,n4.bytesToNumberBE)(e),r=8*e.length-s;return r>0?t>>BigInt(r):t},m=t.bits2int_modN||function(e){return h(y(e))},v=(0,n4.bitMask)(s);function w(e){return(0,n4.aInRange)("num < 2^"+s,e,st,v),(0,n4.numberToBytesBE)(e,n)}let D={lowS:t.lowS,prehash:!1},x={lowS:t.lowS,prehash:!1};return f.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return f.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,r=!0){if(!0===b(e))throw Error("first arg must be private key");if(!1===b(t))throw Error("second arg must be public key");return f.fromHex(t).multiply(c(e)).toRawBytes(r)},sign:function(e,n,s=D){let{seed:o,k2sig:a}=function(e,n,s=D){if(["recovered","canonical"].some(e=>e in s))throw Error("sign() legacy options not supported");let{hash:o,randomBytes:a}=t,{lowS:l,prehash:p,extraEntropy:b}=s;null==l&&(l=!0),e=(0,n4.ensureBytes)("msgHash",e),n9(s),p&&(e=(0,n4.ensureBytes)("prehashed msgHash",o(e)));let v=m(e),x=c(n),E=[w(x),w(v)];if(null!=b&&!1!==b){let e=!0===b?a(r.BYTES):b;E.push((0,n4.ensureBytes)("extraEntropy",e))}return{seed:(0,n4.concatBytes)(...E),k2sig:function(e){var t;let r=y(e);if(!d(r))return;let n=u(r),s=f.BASE.multiply(r).toAffine(),o=h(s.x);if(o===st)return;let a=h(n*h(v+o*x));if(a===st)return;let c=2*(s.x!==o)|Number(s.y&sr),p=a;return l&&a>i>>sr&&(p=(t=a)>i>>sr?h(-t):t,c^=1),new g(o,p,c)}}}(e,n,s);return(0,n4.createHmacDrbg)(t.hash.outputLen,t.nByteLength,t.hmac)(o,a)},verify:function(e,r,i,n=x){let s,o;r=(0,n4.ensureBytes)("msgHash",r),i=(0,n4.ensureBytes)("publicKey",i);let{lowS:a,prehash:c,format:l}=n;if(n9(n),"strict"in n)throw Error("options.strict was renamed to lowS");if(void 0!==l&&"compact"!==l&&"der"!==l)throw Error("format must be compact or der");let d="string"==typeof e||(0,n4.isBytes)(e),p=!d&&!l&&"object"==typeof e&&null!==e&&"bigint"==typeof e.r&&"bigint"==typeof e.s;if(!d&&!p)throw Error("invalid signature, expected Uint8Array, hex string or Signature instance");try{if(p&&(o=new g(e.r,e.s)),d){try{"compact"!==l&&(o=g.fromDER(e))}catch(e){if(!(e instanceof n8.DER.Err))throw e}o||"der"===l||(o=g.fromCompact(e))}s=f.fromHex(i)}catch(e){return!1}if(!o||a&&o.hasHighS())return!1;c&&(r=t.hash(r));let{r:b,s:y}=o,v=m(r),w=u(y),D=h(v*w),E=h(b*w),_=f.BASE.multiplyAndAddUnsafe(s,D,E)?.toAffine();return!!_&&h(_.x)===b},ProjectivePoint:f,Signature:g,utils:{isValidPrivateKey(e){try{return c(e),!0}catch(e){return!1}},normPrivateKeyToScalar:c,randomPrivateKey:()=>{let e=(0,n5.getMinHashLength)(t.n);return(0,n5.mapHashToField)(t.randomBytes(e),t.n)},precompute:(e=8,t=f.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}},n8.SWUFpSqrtRatio=sa,n8.mapToCurveSimpleSWU=function(e,t){if((0,n5.validateField)(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw Error("mapToCurveSimpleSWU: invalid opts");let r=sa(e,t.Z);if(!e.isOdd)throw Error("Fp.isOdd is not implemented!");return i=>{let n,s,o,a,h,u,f,c;n=e.sqr(i),n=e.mul(n,t.Z),s=e.sqr(n),s=e.add(s,n),o=e.add(s,e.ONE),o=e.mul(o,t.B),a=e.cmov(t.Z,e.neg(s),!e.eql(s,e.ZERO)),a=e.mul(a,t.A),s=e.sqr(o),u=e.sqr(a),h=e.mul(u,t.A),s=e.add(s,h),s=e.mul(s,o),u=e.mul(u,a),h=e.mul(u,t.B),s=e.add(s,h),f=e.mul(n,o);let{isValid:l,value:d}=r(s,u);c=e.mul(n,i),c=e.mul(c,d),f=e.cmov(f,o,l),c=e.cmov(c,d,l);let p=e.isOdd(i)===e.isOdd(c);c=e.cmov(e.neg(c),c,p);let g=(0,n5.FpInvertBatch)(e,[a],!0)[0];return{x:f=e.mul(f,g),y:c}}};var n6=s("lgCxf"),n5=s("es3xL"),n4=s("5l7pf");function n9(e){void 0!==e.lowS&&(0,n4.abool)("lowS",e.lowS),void 0!==e.prehash&&(0,n4.abool)("prehash",e.prehash)}class n7 extends Error{constructor(e=""){super(e)}}function se(e,t){return(0,n4.bytesToHex)((0,n4.numberToBytesBE)(e,t))}n8.DERErr=n7,n8.DER={Err:n7,_tlv:{encode:(e,t)=>{let{Err:r}=n8.DER;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(1&t.length)throw new r("tlv.encode: unpadded data");let i=t.length/2,n=(0,n4.numberToHexUnpadded)(i);if(n.length/2&128)throw new r("tlv.encode: long form length too big");let s=i>127?(0,n4.numberToHexUnpadded)(n.length/2|128):"";return(0,n4.numberToHexUnpadded)(e)+s+n+t},decode(e,t){let{Err:r}=n8.DER,i=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[i++]!==e)throw new r("tlv.decode: wrong tlv");let n=t[i++],s=0;if(128&n){let e=127&n;if(!e)throw new r("tlv.decode(long): indefinite length not supported");if(e>4)throw new r("tlv.decode(long): byte length is too big");let o=t.subarray(i,i+e);if(o.length!==e)throw new r("tlv.decode: length bytes not complete");if(0===o[0])throw new r("tlv.decode(long): zero leftmost byte");for(let e of o)s=s<<8|e;if(i+=e,s<128)throw new r("tlv.decode(long): not minimal encoding")}else s=n;let o=t.subarray(i,i+s);if(o.length!==s)throw new r("tlv.decode: wrong value length");return{v:o,l:t.subarray(i+s)}}},_int:{encode(e){let{Err:t}=n8.DER;if(e<st)throw new t("integer: negative integers are not allowed");let r=(0,n4.numberToHexUnpadded)(e);if(8&Number.parseInt(r[0],16)&&(r="00"+r),1&r.length)throw new t("unexpected DER parsing assertion: unpadded hex");return r},decode(e){let{Err:t}=n8.DER;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return(0,n4.bytesToNumberBE)(e)}},toSig(e){let{Err:t,_int:r,_tlv:i}=n8.DER,n=(0,n4.ensureBytes)("signature",e),{v:s,l:o}=i.decode(48,n);if(o.length)throw new t("invalid signature: left bytes after parsing");let{v:a,l:h}=i.decode(2,s),{v:u,l:f}=i.decode(2,h);if(f.length)throw new t("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(u)}},hexFromSig(e){let{_tlv:t,_int:r}=n8.DER,i=t.encode(2,r.encode(e.r)),n=t.encode(2,r.encode(e.s));return t.encode(48,i+n)}};const st=BigInt(0),sr=BigInt(1),si=BigInt(2),sn=BigInt(3),ss=BigInt(4);function so(e){let t=function(e){let t=(0,n6.validateBasic)(e);(0,n4.validateObject)(t,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});let{endo:r,Fp:i,a:n}=t;if(r){if(!i.eql(n,i.ZERO))throw Error("invalid endo: CURVE.a must be 0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...t})}(e),{Fp:r}=t,i=(0,n5.Field)(t.n,t.nBitLength),n=t.toBytes||((e,t,i)=>{let n=t.toAffine();return(0,n4.concatBytes)(Uint8Array.from([4]),r.toBytes(n.x),r.toBytes(n.y))}),s=t.fromBytes||(e=>{let t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}});function o(e){let{a:i,b:n}=t,s=r.sqr(e),o=r.mul(s,e);return r.add(r.add(o,r.mul(e,i)),n)}function a(e,t){let i=r.sqr(t),n=o(e);return r.eql(i,n)}if(!a(t.Gx,t.Gy))throw Error("bad curve params: generator point");let h=r.mul(r.pow(t.a,sn),ss),u=r.mul(r.sqr(t.b),BigInt(27));if(r.is0(r.add(h,u)))throw Error("bad curve params: a or b");function f(e){let r,{allowedPrivateKeyLengths:i,nByteLength:n,wrapPrivateKey:s,n:o}=t;if(i&&"bigint"!=typeof e){if((0,n4.isBytes)(e)&&(e=(0,n4.bytesToHex)(e)),"string"!=typeof e||!i.includes(e.length))throw Error("invalid private key");e=e.padStart(2*n,"0")}try{r="bigint"==typeof e?e:(0,n4.bytesToNumberBE)((0,n4.ensureBytes)("private key",e,n))}catch(t){throw Error("invalid private key, expected hex or "+n+" bytes, got "+typeof e)}return s&&(r=(0,n5.mod)(r,o)),(0,n4.aInRange)("private key",r,sr,o),r}function c(e){if(!(e instanceof p))throw Error("ProjectivePoint expected")}let l=(0,n4.memoized)((e,t)=>{let{px:i,py:n,pz:s}=e;if(r.eql(s,r.ONE))return{x:i,y:n};let o=e.is0();null==t&&(t=o?r.ONE:r.inv(s));let a=r.mul(i,t),h=r.mul(n,t),u=r.mul(s,t);if(o)return{x:r.ZERO,y:r.ZERO};if(!r.eql(u,r.ONE))throw Error("invZ was invalid");return{x:a,y:h}}),d=(0,n4.memoized)(e=>{if(e.is0()){if(t.allowInfinityPoint&&!r.is0(e.py))return;throw Error("bad point: ZERO")}let{x:i,y:n}=e.toAffine();if(!r.isValid(i)||!r.isValid(n))throw Error("bad point: x or y not FE");if(!a(i,n))throw Error("bad point: equation left != right");if(!e.isTorsionFree())throw Error("bad point: not in prime-order subgroup");return!0});class p{constructor(e,t,i){if(null==e||!r.isValid(e))throw Error("x required");if(null==t||!r.isValid(t)||r.is0(t))throw Error("y required");if(null==i||!r.isValid(i))throw Error("z required");this.px=e,this.py=t,this.pz=i,Object.freeze(this)}static fromAffine(e){let{x:t,y:i}=e||{};if(!e||!r.isValid(t)||!r.isValid(i))throw Error("invalid affine point");if(e instanceof p)throw Error("projective point not allowed");let n=e=>r.eql(e,r.ZERO);return n(t)&&n(i)?p.ZERO:new p(t,i,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){let t=(0,n5.FpInvertBatch)(r,e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(p.fromAffine)}static fromHex(e){let t=p.fromAffine(s((0,n4.ensureBytes)("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return p.BASE.multiply(f(e))}static msm(e,t){return(0,n6.pippenger)(p,i,e,t)}_setWindowSize(e){y.setWindowSize(this,e)}assertValidity(){d(this)}hasEvenY(){let{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw Error("Field doesn't support isOdd")}equals(e){c(e);let{px:t,py:i,pz:n}=this,{px:s,py:o,pz:a}=e,h=r.eql(r.mul(t,a),r.mul(s,n)),u=r.eql(r.mul(i,a),r.mul(o,n));return h&&u}negate(){return new p(this.px,r.neg(this.py),this.pz)}double(){let{a:e,b:i}=t,n=r.mul(i,sn),{px:s,py:o,pz:a}=this,h=r.ZERO,u=r.ZERO,f=r.ZERO,c=r.mul(s,s),l=r.mul(o,o),d=r.mul(a,a),g=r.mul(s,o);return g=r.add(g,g),f=r.mul(s,a),f=r.add(f,f),h=r.mul(e,f),u=r.mul(n,d),u=r.add(h,u),h=r.sub(l,u),u=r.add(l,u),u=r.mul(h,u),h=r.mul(g,h),f=r.mul(n,f),d=r.mul(e,d),g=r.sub(c,d),g=r.mul(e,g),g=r.add(g,f),f=r.add(c,c),c=r.add(f,c),c=r.add(c,d),c=r.mul(c,g),u=r.add(u,c),d=r.mul(o,a),d=r.add(d,d),c=r.mul(d,g),h=r.sub(h,c),f=r.mul(d,l),f=r.add(f,f),new p(h,u,f=r.add(f,f))}add(e){c(e);let{px:i,py:n,pz:s}=this,{px:o,py:a,pz:h}=e,u=r.ZERO,f=r.ZERO,l=r.ZERO,d=t.a,g=r.mul(t.b,sn),b=r.mul(i,o),y=r.mul(n,a),m=r.mul(s,h),v=r.add(i,n),w=r.add(o,a);v=r.mul(v,w),w=r.add(b,y),v=r.sub(v,w),w=r.add(i,s);let D=r.add(o,h);return w=r.mul(w,D),D=r.add(b,m),w=r.sub(w,D),D=r.add(n,s),u=r.add(a,h),D=r.mul(D,u),u=r.add(y,m),D=r.sub(D,u),l=r.mul(d,w),u=r.mul(g,m),l=r.add(u,l),u=r.sub(y,l),l=r.add(y,l),f=r.mul(u,l),y=r.add(b,b),y=r.add(y,b),m=r.mul(d,m),w=r.mul(g,w),y=r.add(y,m),m=r.sub(b,m),m=r.mul(d,m),w=r.add(w,m),b=r.mul(y,w),f=r.add(f,b),b=r.mul(D,w),u=r.mul(v,u),u=r.sub(u,b),b=r.mul(v,y),l=r.mul(D,l),new p(u,f,l=r.add(l,b))}subtract(e){return this.add(e.negate())}is0(){return this.equals(p.ZERO)}wNAF(e){return y.wNAFCached(this,e,p.normalizeZ)}multiplyUnsafe(e){let{endo:i,n:n}=t;(0,n4.aInRange)("scalar",e,st,n);let s=p.ZERO;if(e===st)return s;if(this.is0()||e===sr)return this;if(!i||y.hasPrecomputes(this))return y.wNAFCachedUnsafe(this,e,p.normalizeZ);let{k1neg:o,k1:a,k2neg:h,k2:u}=i.splitScalar(e),f=s,c=s,l=this;for(;a>st||u>st;)a&sr&&(f=f.add(l)),u&sr&&(c=c.add(l)),l=l.double(),a>>=sr,u>>=sr;return o&&(f=f.negate()),h&&(c=c.negate()),c=new p(r.mul(c.px,i.beta),c.py,c.pz),f.add(c)}multiply(e){let i,n,{endo:s,n:o}=t;if((0,n4.aInRange)("scalar",e,sr,o),s){let{k1neg:t,k1:o,k2neg:a,k2:h}=s.splitScalar(e),{p:u,f:f}=this.wNAF(o),{p:c,f:l}=this.wNAF(h);u=y.constTimeNegate(t,u),c=y.constTimeNegate(a,c),c=new p(r.mul(c.px,s.beta),c.py,c.pz),i=u.add(c),n=f.add(l)}else{let{p:t,f:r}=this.wNAF(e);i=t,n=r}return p.normalizeZ([i,n])[0]}multiplyAndAddUnsafe(e,t,r){let i=p.BASE,n=(e,t)=>t!==st&&t!==sr&&e.equals(i)?e.multiply(t):e.multiplyUnsafe(t),s=n(this,t).add(n(e,r));return s.is0()?void 0:s}toAffine(e){return l(this,e)}isTorsionFree(){let{h:e,isTorsionFree:r}=t;if(e===sr)return!0;if(r)return r(p,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:e,clearCofactor:r}=t;return e===sr?this:r?r(p,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return(0,n4.abool)("isCompressed",e),this.assertValidity(),n(p,this,e)}toHex(e=!0){return(0,n4.abool)("isCompressed",e),(0,n4.bytesToHex)(this.toRawBytes(e))}}p.BASE=new p(t.Gx,t.Gy,r.ONE),p.ZERO=new p(r.ZERO,r.ONE,r.ZERO);let{endo:g,nBitLength:b}=t,y=(0,n6.wNAF)(p,g?Math.ceil(b/2):b);return{CURVE:t,ProjectivePoint:p,normPrivateKeyToScalar:f,weierstrassEquation:o,isWithinCurveOrder:function(e){return(0,n4.inRange)(e,sr,t.n)}}}function sa(e,t){let r=e.ORDER,i=st;for(let e=r-sr;e%si===st;e/=si)i+=sr;let n=i,s=si<<n-sr-sr,o=s*si,a=(r-sr)/o,h=(a-sr)/si,u=o-sr,f=e.pow(t,a),c=e.pow(t,(a+sr)/si),l=(t,r)=>{let i=f,o=e.pow(r,u),a=e.sqr(o);a=e.mul(a,r);let l=e.mul(t,a);l=e.pow(l,h),l=e.mul(l,o),o=e.mul(l,r),a=e.mul(l,t);let d=e.mul(a,o);l=e.pow(d,s);let p=e.eql(l,e.ONE);o=e.mul(a,c),l=e.mul(d,i),a=e.cmov(o,a,p),d=e.cmov(l,d,p);for(let t=n;t>sr;t--){let r=t-si;r=si<<r-sr;let n=e.pow(d,r),s=e.eql(n,e.ONE);o=e.mul(a,i),i=e.mul(i,i),n=e.mul(d,i),a=e.cmov(o,a,s),d=e.cmov(n,d,s)}return{isValid:p,value:a}};if(e.ORDER%ss===sn){let r=(e.ORDER-sn)/ss,i=e.sqrt(e.neg(t));l=(t,n)=>{let s=e.sqr(n),o=e.mul(t,n);s=e.mul(s,o);let a=e.pow(s,r);a=e.mul(a,o);let h=e.mul(a,i),u=e.mul(e.sqr(a),n),f=e.eql(u,t),c=e.cmov(h,a,f);return{isValid:f,value:c}}}return l}function sh(e){return{hash:e,hmac:(t,...r)=>(0,n3.hmac)(e,t,(0,nl.concatBytes)(...r)),randomBytes:nl.randomBytes}}var su={};Object.defineProperty(su,"__esModule",{value:!0}),su.expand_message_xmd=sd,su.expand_message_xof=sp,su.hash_to_field=sg,su.isogenyMap=function(e,t){let r=t.map(e=>Array.from(e).reverse());return(t,i)=>{let[n,s,o,a]=r.map(r=>r.reduce((r,i)=>e.add(e.mul(r,t),i))),[h,u]=(0,n5.FpInvertBatch)(e,[s,a],!0);return t=e.mul(n,h),i=e.mul(i,e.mul(o,u)),{x:t,y:i}}},su.createHasher=function(e,t,r){if("function"!=typeof t)throw Error("mapToCurve() must be defined");function i(r){return e.fromAffine(t(r))}function n(t){let r=t.clearCofactor();return r.equals(e.ZERO)?e.ZERO:(r.assertValidity(),r)}return{defaults:r,hashToCurve(e,t){let s=sg(e,2,{...r,DST:r.DST,...t}),o=i(s[0]),a=i(s[1]);return n(o.add(a))},encodeToCurve:(e,t)=>n(i(sg(e,1,{...r,DST:r.encodeDST,...t})[0])),mapToCurve(e){if(!Array.isArray(e))throw Error("expected array of bigints");for(let t of e)if("bigint"!=typeof t)throw Error("expected array of bigints");return n(i(e))}}};var n5=s("es3xL"),n4=s("5l7pf");const sf=n4.bytesToNumberBE;function sc(e,t){if(sl(e),sl(t),e<0||e>=1<<8*t)throw Error("invalid I2OSP input: "+e);let r=Array.from({length:t}).fill(0);for(let i=t-1;i>=0;i--)r[i]=255&e,e>>>=8;return new Uint8Array(r)}function sl(e){if(!Number.isSafeInteger(e))throw Error("number expected")}function sd(e,t,r,i){(0,n4.abytes)(e),(0,n4.abytes)(t),sl(r),t.length>255&&(t=i((0,n4.concatBytes)((0,n4.utf8ToBytes)("H2C-OVERSIZE-DST-"),t)));let{outputLen:n,blockLen:s}=i,o=Math.ceil(r/n);if(r>65535||o>255)throw Error("expand_message_xmd: invalid lenInBytes");let a=(0,n4.concatBytes)(t,sc(t.length,1)),h=sc(0,s),u=sc(r,2),f=Array(o),c=i((0,n4.concatBytes)(h,e,u,sc(0,1),a));f[0]=i((0,n4.concatBytes)(c,sc(1,1),a));for(let e=1;e<=o;e++){let t=[function(e,t){let r=new Uint8Array(e.length);for(let i=0;i<e.length;i++)r[i]=e[i]^t[i];return r}(c,f[e-1]),sc(e+1,1),a];f[e]=i((0,n4.concatBytes)(...t))}return(0,n4.concatBytes)(...f).slice(0,r)}function sp(e,t,r,i,n){if((0,n4.abytes)(e),(0,n4.abytes)(t),sl(r),t.length>255){let e=Math.ceil(2*i/8);t=n.create({dkLen:e}).update((0,n4.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(t).digest()}if(r>65535||t.length>255)throw Error("expand_message_xof: invalid lenInBytes");return n.create({dkLen:r}).update(e).update(sc(r,2)).update(t).update(sc(t.length,1)).digest()}function sg(e,t,r){let i;(0,n4.validateObject)(r,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});let{p:n,k:s,m:o,hash:a,expand:h,DST:u}=r;(0,n4.abytes)(e),sl(t);let f="string"==typeof u?(0,n4.utf8ToBytes)(u):u,c=Math.ceil((n.toString(2).length+s)/8),l=t*o*c;if("xmd"===h)i=sd(e,f,l,a);else if("xof"===h)i=sp(e,f,l,s,a);else if("_internal_pass"===h)i=e;else throw Error('expand must be "xmd" or "xof"');let d=Array(t);for(let e=0;e<t;e++){let t=Array(o);for(let r=0;r<o;r++){let s=c*(r+e*o),a=i.subarray(s,s+c);t[r]=(0,n5.mod)(sf(a),n)}d[e]=t}return d}var n5=s("es3xL"),n4=s("5l7pf");const sb=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),sy=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),sm=BigInt(0),sv=BigInt(1),sw=BigInt(2),sD=(e,t)=>(e+t/sw)/t;function sx(e){let t=BigInt(3),r=BigInt(6),i=BigInt(11),n=BigInt(22),s=BigInt(23),o=BigInt(44),a=BigInt(88),h=e*e*e%sb,u=h*h*e%sb,f=(0,n5.pow2)(u,t,sb)*u%sb,c=(0,n5.pow2)(f,t,sb)*u%sb,l=(0,n5.pow2)(c,sw,sb)*h%sb,d=(0,n5.pow2)(l,i,sb)*l%sb,p=(0,n5.pow2)(d,n,sb)*d%sb,g=(0,n5.pow2)(p,o,sb)*p%sb,b=(0,n5.pow2)(g,a,sb)*g%sb,y=(0,n5.pow2)(b,o,sb)*p%sb,m=(0,n5.pow2)(y,t,sb)*u%sb,v=(0,n5.pow2)(m,s,sb)*d%sb,w=(0,n5.pow2)(v,r,sb)*h%sb,D=(0,n5.pow2)(w,sw,sb);if(!sE.eql(sE.sqr(D),e))throw Error("Cannot find square root");return D}const sE=(0,n5.Field)(sb,void 0,void 0,{sqrt:sx});nu.secp256k1=(0,n1.createCurve)({a:sm,b:BigInt(7),Fp:sE,n:sy,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-sv*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),n=BigInt("0x100000000000000000000000000000000"),s=sD(t*e,sy),o=sD(-r*e,sy),a=(0,n5.mod)(e-s*t-o*i,sy),h=(0,n5.mod)(-s*r-o*t,sy),u=a>n,f=h>n;if(u&&(a=sy-a),f&&(h=sy-h),a>n||h>n)throw Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:u,k1:a,k2neg:f,k2:h}}}},nf.sha256);const s_={};function sS(e,...t){let r=s_[e];if(void 0===r){let t=(0,nf.sha256)(Uint8Array.from(e,e=>e.charCodeAt(0)));r=(0,n4.concatBytes)(t,t),s_[e]=r}return(0,nf.sha256)((0,n4.concatBytes)(r,...t))}const sI=e=>e.toRawBytes(!0).slice(1),sA=e=>(0,n4.numberToBytesBE)(e,32),sM=e=>(0,n5.mod)(e,sb),sC=e=>(0,n5.mod)(e,sy),sO=nu.secp256k1.ProjectivePoint;function sP(e){let t=nu.secp256k1.utils.normPrivateKeyToScalar(e),r=sO.fromPrivateKey(t);return{scalar:r.hasEvenY()?t:sC(-t),bytes:sI(r)}}function sR(e){(0,n4.aInRange)("x",e,sv,sb);let t=sM(e*e),r=sx(sM(t*e+BigInt(7)));r%sw!==sm&&(r=sM(-r));let i=new sO(e,r,sv);return i.assertValidity(),i}const sT=n4.bytesToNumberBE;function sN(...e){return sC(sT(sS("BIP0340/challenge",...e)))}function sB(e,t,r){let i=(0,n4.ensureBytes)("signature",e,64),n=(0,n4.ensureBytes)("message",t),s=(0,n4.ensureBytes)("publicKey",r,32);try{let e,t=sR(sT(s)),r=sT(i.subarray(0,32));if(!(0,n4.inRange)(r,sv,sb))return!1;let o=sT(i.subarray(32,64));if(!(0,n4.inRange)(o,sv,sy))return!1;let a=sN(sA(r),sI(t),n),h=(e=sC(-a),sO.BASE.multiplyAndAddUnsafe(t,o,e));if(!h||!h.hasEvenY()||h.toAffine().x!==r)return!1;return!0}catch(e){return!1}}nu.schnorr={getPublicKey:function(e){return sP(e).bytes},sign:function(e,t,r=(0,nl.randomBytes)(32)){let i=(0,n4.ensureBytes)("message",e),{bytes:n,scalar:s}=sP(t),o=sA(s^sT(sS("BIP0340/aux",(0,n4.ensureBytes)("auxRand",r,32)))),a=sC(sT(sS("BIP0340/nonce",o,n,i)));if(a===sm)throw Error("sign failed: k is zero");let{bytes:h,scalar:u}=sP(a),f=sN(h,n,i),c=new Uint8Array(64);if(c.set(h,0),c.set(sA(sC(u+f*s)),32),!sB(c,i,n))throw Error("sign: Invalid signature produced");return c},verify:sB,utils:{randomPrivateKey:nu.secp256k1.utils.randomPrivateKey,lift_x:sR,pointToBytes:sI,numberToBytesBE:n4.numberToBytesBE,bytesToNumberBE:n4.bytesToNumberBE,taggedHash:sS,mod:n5.mod}};const sL=(0,su.isogenyMap)(sE,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(e=>e.map(e=>BigInt(e)))),sk=(0,n8.mapToCurveSimpleSWU)(sE,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:sE.create(BigInt("-11"))});nu.secp256k1_hasher=(0,su.createHasher)(nu.secp256k1.ProjectivePoint,e=>{let{x:t,y:r}=sk(sE.create(e[0]));return sL(t,r)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:sE.ORDER,m:1,k:128,expand:"xmd",hash:nf.sha256}),nu.hashToCurve=nu.secp256k1_hasher.hashToCurve,nu.encodeToCurve=nu.secp256k1_hasher.encodeToCurve;var n4=s("5l7pf");class sU extends Error{constructor(e,t={}){let r=(()=>{if(t.cause instanceof sU){if(t.cause.details)return t.cause.details;if(t.cause.shortMessage)return t.cause.shortMessage}return t.cause&&"details"in t.cause&&"string"==typeof t.cause.details?t.cause.details:t.cause?.message?t.cause.message:t.details})(),i=t.cause instanceof sU&&t.cause.docsPath||t.docsPath,n=`https://oxlib.sh${i??""}`;super([e||"An error occurred.",...t.metaMessages?["",...t.metaMessages]:[],...r||i?["",r?`Details: ${r}`:void 0,i?`See: ${n}`:void 0]:[]].filter(e=>"string"==typeof e).join("\n"),t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:"ox@0.1.1"}),this.cause=t.cause,this.details=r,this.docs=n,this.docsPath=i,this.shortMessage=e}walk(e){return function e(t,r){return r?.(t)?t:t&&"object"==typeof t&&"cause"in t&&t.cause?e(t.cause,r):r?null:t}(this,e)}}var n4=s("5l7pf");function sz(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:void 0}function sj(e,t){if(sZ(e)>t)throw new s1({givenSize:sZ(e),maxSize:t})}function sq(e,t={}){let{dir:r,size:i=32}=t;if(0===i)return e;let n=e.replace("0x","");if(n.length>2*i)throw new s2({size:Math.ceil(n.length/2),targetSize:i,type:"Hex"});return`0x${n["right"===r?"padEnd":"padStart"](2*i,"0")}`}function sF(e,t,r){return JSON.stringify(e,(e,r)=>"function"==typeof t?t(e,r):"bigint"==typeof r?r.toString()+"#__bigint":r,r)}const sH=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function sK(...e){return`0x${e.reduce((e,t)=>e+t.replace("0x",""),"")}`}function s$(e){return e instanceof Uint8Array?sV(e):Array.isArray(e)?sV(new Uint8Array(e)):e}function sV(e,t={}){let r="";for(let t=0;t<e.length;t++)r+=sH[e[t]];let i=`0x${r}`;return"number"==typeof t.size?(sj(i,t.size),sG(i,t.size)):i}function sW(e,t={}){let r,{signed:i,size:n}=t,s=BigInt(e);n?r=i?(1n<<8n*BigInt(n)-1n)-1n:2n**(8n*BigInt(n))-1n:"number"==typeof e&&(r=BigInt(Number.MAX_SAFE_INTEGER));let o="bigint"==typeof r&&i?-r-1n:0;if(r&&s>r||s<o){let t="bigint"==typeof e?"n":"";throw new sX({max:r?`${r}${t}`:void 0,min:`${o}${t}`,signed:i,size:n,value:`${e}${t}`})}let a=(i&&s<0?(1n<<BigInt(8*n))+BigInt(s):s).toString(16),h=`0x${a}`;return n?sq(h,{dir:"left",size:n}):h}function sG(e,t){return sq(e,{dir:"right",size:t})}function sY(e,t,r,i={}){let{strict:n}=i;if("number"==typeof t&&t>0&&t>sZ(e)-1)throw new s3({offset:t,position:"start",size:sZ(e)});let s=`0x${e.replace("0x","").slice((t??0)*2,(r??e.length)*2)}`;return n&&function(e,t,r){if("number"==typeof t&&"number"==typeof r&&sZ(e)!==r-t)throw new s3({offset:r,position:"end",size:sZ(e)})}(s,t,r),s}function sZ(e){return Math.ceil((e.length-2)/2)}function sJ(e){return function(e,t={}){let{dir:r="left"}=t,i=e.replace("0x",""),n=0;for(let e=0;e<i.length-1;e++)if("0"===i["left"===r?e:i.length-e-1].toString())n++;else break;return"0"===(i="left"===r?i.slice(n):i.slice(0,i.length-n))?"0x":"right"===r&&i.length%2==1?`0x${i}0`:`0x${i}`}(e,{dir:"left"})}class sX extends sU{constructor({max:e,min:t,signed:r,size:i,value:n}){super(`Number \`${n}\` is not in safe${i?` ${8*i}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${t}\` to \`${e}\`)`:`(above \`${t}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class sQ extends sU{constructor(e){super(`Value \`${"object"==typeof e?sF(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class s0 extends sU{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}class s1 extends sU{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed \`${t}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}}class s3 extends sU{constructor({offset:e,position:t,size:r}){super(`Slice ${"start"===t?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}class s2 extends sU{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}}const s8=new TextEncoder;function s6(e){var t;return e instanceof Uint8Array?e:"string"==typeof e?s5(e):(t=e)instanceof Uint8Array?t:new Uint8Array(t)}function s5(e,t={}){let{size:r}=t,i=e;r&&(sj(e,r),i=sG(e,r));let n=i.slice(2);n.length%2&&(n=`0${n}`);let s=n.length/2,o=new Uint8Array(s);for(let e=0,t=0;e<s;e++){let r=sz(n.charCodeAt(t++)),i=sz(n.charCodeAt(t++));if(void 0===r||void 0===i)throw new sU(`Invalid byte sequence ("${n[t-2]}${n[t-1]}" in "${n}").`);o[e]=16*r+i}return o}class s4 extends sU{constructor(e){super(`Value \`${"object"==typeof e?sF(e):e}\` of type \`${typeof e}\` is an invalid Bytes value.`,{metaMessages:["Bytes values must be of type `Bytes`."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesTypeError"})}}class s9 extends sU{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed \`${t}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}}class s7 extends sU{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}}class oe extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){let t=super.get(e);return super.has(e)&&void 0!==t&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){let e=this.keys().next().value;e&&this.delete(e)}return this}}const ot={checksum:new oe(8192)}.checksum;var or={};Object.defineProperty(or,"__esModule",{value:!0}),or.ripemd160=or.RIPEMD160=void 0;var oi={};Object.defineProperty(oi,"__esModule",{value:!0}),oi.ripemd160=oi.RIPEMD160=oi.md5=oi.MD5=oi.sha1=oi.SHA1=void 0;var nl=s("cLJKR");const on=Uint32Array.from([0x67452301,0xefcdab89,0x98badcfe,0x10325476,0xc3d2e1f0]),os=new Uint32Array(80);class oo extends nc.HashMD{constructor(){super(64,20,8,!1),this.A=0|on[0],this.B=0|on[1],this.C=0|on[2],this.D=0|on[3],this.E=0|on[4]}get(){let{A:e,B:t,C:r,D:i,E:n}=this;return[e,t,r,i,n]}set(e,t,r,i,n){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|i,this.E=0|n}process(e,t){for(let r=0;r<16;r++,t+=4)os[r]=e.getUint32(t,!1);for(let e=16;e<80;e++)os[e]=(0,nl.rotl)(os[e-3]^os[e-8]^os[e-14]^os[e-16],1);let{A:r,B:i,C:n,D:s,E:o}=this;for(let e=0;e<80;e++){let t,a;e<20?(t=(0,nc.Chi)(i,n,s),a=0x5a827999):e<40?(t=i^n^s,a=0x6ed9eba1):e<60?(t=(0,nc.Maj)(i,n,s),a=0x8f1bbcdc):(t=i^n^s,a=0xca62c1d6);let h=(0,nl.rotl)(r,5)+t+o+a+os[e]|0;o=s,s=n,n=(0,nl.rotl)(i,30),i=r,r=h}r=r+this.A|0,i=i+this.B|0,n=n+this.C|0,s=s+this.D|0,o=o+this.E|0,this.set(r,i,n,s,o)}roundClean(){(0,nl.clean)(os)}destroy(){this.set(0,0,0,0,0),(0,nl.clean)(this.buffer)}}oi.SHA1=oo,oi.sha1=(0,nl.createHasher)(()=>new oo);const oa=Array.from({length:64},(e,t)=>Math.floor(0x100000000*Math.abs(Math.sin(t+1)))),oh=on.slice(0,4),ou=new Uint32Array(16);class of extends nc.HashMD{constructor(){super(64,16,8,!0),this.A=0|oh[0],this.B=0|oh[1],this.C=0|oh[2],this.D=0|oh[3]}get(){let{A:e,B:t,C:r,D:i}=this;return[e,t,r,i]}set(e,t,r,i){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|i}process(e,t){for(let r=0;r<16;r++,t+=4)ou[r]=e.getUint32(t,!0);let{A:r,B:i,C:n,D:s}=this;for(let e=0;e<64;e++){let t,o,a;e<16?(t=(0,nc.Chi)(i,n,s),o=e,a=[7,12,17,22]):e<32?(t=(0,nc.Chi)(s,i,n),o=(5*e+1)%16,a=[5,9,14,20]):e<48?(t=i^n^s,o=(3*e+5)%16,a=[4,11,16,23]):(t=n^(i|~s),o=7*e%16,a=[6,10,15,21]),t=t+r+oa[e]+ou[o],r=s,s=n,n=i,i+=(0,nl.rotl)(t,a[e%4])}r=r+this.A|0,i=i+this.B|0,n=n+this.C|0,s=s+this.D|0,this.set(r,i,n,s)}roundClean(){(0,nl.clean)(ou)}destroy(){this.set(0,0,0,0),(0,nl.clean)(this.buffer)}}oi.MD5=of,oi.md5=(0,nl.createHasher)(()=>new of);const oc=Uint8Array.from([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),ol=Uint8Array.from(Array(16).fill(0).map((e,t)=>t)),od=ol.map(e=>(9*e+5)%16),op=(()=>{let e=[[ol],[od]];for(let t=0;t<4;t++)for(let r of e)r.push(r[t].map(e=>oc[e]));return e})(),og=op[0],ob=op[1],oy=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>Uint8Array.from(e)),om=og.map((e,t)=>e.map(e=>oy[t][e])),ov=ob.map((e,t)=>e.map(e=>oy[t][e])),ow=Uint32Array.from([0,0x5a827999,0x6ed9eba1,0x8f1bbcdc,0xa953fd4e]),oD=Uint32Array.from([0x50a28be6,0x5c4dd124,0x6d703ef3,0x7a6d76e9,0]);function ox(e,t,r,i){return 0===e?t^r^i:1===e?t&r|~t&i:2===e?(t|~r)^i:3===e?t&i|r&~i:t^(r|~i)}const oE=new Uint32Array(16);class o_ extends nc.HashMD{constructor(){super(64,20,8,!0),this.h0=0x67452301,this.h1=-0x10325477,this.h2=-0x67452302,this.h3=0x10325476,this.h4=-0x3c2d1e10}get(){let{h0:e,h1:t,h2:r,h3:i,h4:n}=this;return[e,t,r,i,n]}set(e,t,r,i,n){this.h0=0|e,this.h1=0|t,this.h2=0|r,this.h3=0|i,this.h4=0|n}process(e,t){for(let r=0;r<16;r++,t+=4)oE[r]=e.getUint32(t,!0);let r=0|this.h0,i=r,n=0|this.h1,s=n,o=0|this.h2,a=o,h=0|this.h3,u=h,f=0|this.h4,c=f;for(let e=0;e<5;e++){let t=4-e,l=ow[e],d=oD[e],p=og[e],g=ob[e],b=om[e],y=ov[e];for(let t=0;t<16;t++){let i=(0,nl.rotl)(r+ox(e,n,o,h)+oE[p[t]]+l,b[t])+f|0;r=f,f=h,h=0|(0,nl.rotl)(o,10),o=n,n=i}for(let e=0;e<16;e++){let r=(0,nl.rotl)(i+ox(t,s,a,u)+oE[g[e]]+d,y[e])+c|0;i=c,c=u,u=0|(0,nl.rotl)(a,10),a=s,s=r}}this.set(this.h1+o+u|0,this.h2+h+c|0,this.h3+f+i|0,this.h4+r+s|0,this.h0+n+a|0)}roundClean(){(0,nl.clean)(oE)}destroy(){this.destroyed=!0,(0,nl.clean)(this.buffer),this.set(0,0,0,0,0)}}oi.RIPEMD160=o_,oi.ripemd160=(0,nl.createHasher)(()=>new o_),or.RIPEMD160=oi.RIPEMD160,or.ripemd160=oi.ripemd160;var oS={};Object.defineProperty(oS,"__esModule",{value:!0}),oS.shake256=oS.shake128=oS.keccak_512=oS.keccak_384=oS.keccak_256=oS.keccak_224=oS.sha3_512=oS.sha3_384=oS.sha3_256=oS.sha3_224=oS.Keccak=void 0,oS.keccakP=oj;var nl=s("cLJKR");const oI=BigInt(0),oA=BigInt(1),oM=BigInt(2),oC=BigInt(7),oO=BigInt(256),oP=BigInt(113),oR=[],oT=[],oN=[];for(let e=0,t=oA,r=1,i=0;e<24;e++){[r,i]=[i,(2*r+3*i)%5],oR.push(2*(5*i+r)),oT.push((e+1)*(e+2)/2%64);let n=oI;for(let e=0;e<7;e++)(t=(t<<oA^(t>>oC)*oP)%oO)&oM&&(n^=oA<<(oA<<BigInt(e))-oA);oN.push(n)}const oB=(0,ng.split)(oN,!0),oL=oB[0],ok=oB[1],oU=(e,t,r)=>r>32?(0,ng.rotlBH)(e,t,r):(0,ng.rotlSH)(e,t,r),oz=(e,t,r)=>r>32?(0,ng.rotlBL)(e,t,r):(0,ng.rotlSL)(e,t,r);function oj(e,t=24){let r=new Uint32Array(10);for(let i=24-t;i<24;i++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){let i=(t+8)%10,n=(t+2)%10,s=r[n],o=r[n+1],a=oU(s,o,1)^r[i],h=oz(s,o,1)^r[i+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=h}let t=e[2],n=e[3];for(let r=0;r<24;r++){let i=oT[r],s=oU(t,n,i),o=oz(t,n,i),a=oR[r];t=e[a],n=e[a+1],e[a]=s,e[a+1]=o}for(let t=0;t<50;t+=10){for(let i=0;i<10;i++)r[i]=e[t+i];for(let i=0;i<10;i++)e[t+i]^=~r[(i+2)%10]&r[(i+4)%10]}e[0]^=oL[i],e[1]^=ok[i]}(0,nl.clean)(r)}class oq extends nl.Hash{constructor(e,t,r,i=!1,n=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=n,(0,nl.anumber)(r),!(0<e&&e<200))throw Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=(0,nl.u32)(this.state)}clone(){return this._cloneInto()}keccak(){(0,nl.swap32IfBE)(this.state32),oj(this.state32,this.rounds),(0,nl.swap32IfBE)(this.state32),this.posOut=0,this.pos=0}update(e){(0,nl.aexists)(this),e=(0,nl.toBytes)(e),(0,nl.abytes)(e);let{blockLen:t,state:r}=this,i=e.length;for(let n=0;n<i;){let s=Math.min(t-this.pos,i-n);for(let t=0;t<s;t++)r[this.pos++]^=e[n++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:r,blockLen:i}=this;e[r]^=t,(128&t)!=0&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){(0,nl.aexists)(this,!1),(0,nl.abytes)(e),this.finish();let t=this.state,{blockLen:r}=this;for(let i=0,n=e.length;i<n;){this.posOut>=r&&this.keccak();let s=Math.min(r-this.posOut,n-i);e.set(t.subarray(this.posOut,this.posOut+s),i),this.posOut+=s,i+=s}return e}xofInto(e){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return(0,nl.anumber)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,nl.aoutput)(e,this),this.finished)throw Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,(0,nl.clean)(this.state)}_cloneInto(e){let{blockLen:t,suffix:r,outputLen:i,rounds:n,enableXOF:s}=this;return e||(e=new oq(t,r,i,s,n)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=n,e.suffix=r,e.outputLen=i,e.enableXOF=s,e.destroyed=this.destroyed,e}}oS.Keccak=oq;const oF=(e,t,r)=>(0,nl.createHasher)(()=>new oq(t,e,r));oS.sha3_224=oF(6,144,28),oS.sha3_256=oF(6,136,32),oS.sha3_384=oF(6,104,48),oS.sha3_512=oF(6,72,64),oS.keccak_224=oF(1,144,28),oS.keccak_256=oF(1,136,32),oS.keccak_384=oF(1,104,48),oS.keccak_512=oF(1,72,64);const oH=(e,t,r)=>(0,nl.createXOFer)((i={})=>new oq(t,e,void 0===i.dkLen?r:i.dkLen,!0));oS.shake128=oH(31,168,16),oS.shake256=oH(31,136,32);var oK={};function o$(e,t={}){let{as:r="string"==typeof e?"Hex":"Bytes"}=t,i=(0,oS.keccak_256)(s6(e));return"Bytes"===r?i:sV(i)}function oV(e,t={}){let{compressed:r}=t,{prefix:i,x:n,y:s}=e;if(!1===r||"bigint"==typeof n&&"bigint"==typeof s){if(4!==i)throw new oJ({prefix:i,cause:new oQ});return}if(!0===r||"bigint"==typeof n&&void 0===s){if(3!==i&&2!==i)throw new oJ({prefix:i,cause:new oX});return}throw new oZ({publicKey:e})}function oW(e){let t=(()=>{if(function(e,t={}){let{strict:r=!1}=t;try{return!function(e,t={}){let{strict:r=!1}=t;if(!e||"string"!=typeof e)throw new sQ(e);if(r&&!/^0x[0-9a-fA-F]*$/.test(e)||!e.startsWith("0x"))throw new s0(e)}(e,{strict:r}),!0}catch{return!1}}(e))return oG(e);if(function(e){try{if(!(e instanceof Uint8Array)&&(!e||"object"!=typeof e||!("BYTES_PER_ELEMENT"in e)||1!==e.BYTES_PER_ELEMENT||"Uint8Array"!==e.constructor.name))throw new s4(e);return!0}catch{return!1}}(e))return oG(sV(e));let{prefix:t,x:r,y:i}=e;return"bigint"==typeof r&&"bigint"==typeof i?{prefix:t??4,x:r,y:i}:{prefix:t,x:r}})();return oV(t),t}function oG(e){if(132!==e.length&&130!==e.length&&68!==e.length)throw new o0({publicKey:e});if(130===e.length)return{prefix:4,x:BigInt(sY(e,0,32)),y:BigInt(sY(e,32,64))};if(132===e.length){let t=Number(sY(e,0,1));return{prefix:t,x:BigInt(sY(e,1,33)),y:BigInt(sY(e,33,65))}}return{prefix:Number(sY(e,0,1)),x:BigInt(sY(e,1,33))}}function oY(e,t={}){oV(e);let{prefix:r,x:i,y:n}=e,{includePrefix:s=!0}=t;return sK(s?sW(r,{size:1}):"0x",sW(i,{size:32}),"bigint"==typeof n?sW(n,{size:32}):"0x")}Object.defineProperty(oK,"__esModule",{value:!0}),oK.sha224=oK.SHA224=oK.sha256=oK.SHA256=void 0,oK.SHA256=nf.SHA256,oK.sha256=nf.sha256,oK.SHA224=nf.SHA224,oK.sha224=nf.sha224;class oZ extends sU{constructor({publicKey:e}){super(`Value \`${sF(e)}\` is not a valid public key.`,{metaMessages:["Public key must contain:","- an `x` and `prefix` value (compressed)","- an `x`, `y`, and `prefix` value (uncompressed)"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidError"})}}class oJ extends sU{constructor({prefix:e,cause:t}){super(`Prefix "${e}" is invalid.`,{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidPrefixError"})}}class oX extends sU{constructor(){super("Prefix must be 2 or 3 for compressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidCompressedPrefixError"})}}class oQ extends sU{constructor(){super("Prefix must be 4 for uncompressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidUncompressedPrefixError"})}}class o0 extends sU{constructor({publicKey:e}){super(`Value \`${e}\` is an invalid public key size.`,{metaMessages:["Expected: 33 bytes (compressed + prefix), 64 bytes (uncompressed) or 65 bytes (uncompressed + prefix).",`Received ${sZ(s$(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidSerializedSizeError"})}}const o1=/^0x[a-fA-F0-9]{40}$/;function o3(e,t={}){let{strict:r=!0}=t;if(!o1.test(e))throw new o8({address:e,cause:new o6});if(r){if(e.toLowerCase()===e)return;if(o2(e)!==e)throw new o8({address:e,cause:new o5})}}function o2(e){if(ot.has(e))return ot.get(e);o3(e,{strict:!1});let t=e.substring(2).toLowerCase(),r=o$(function(e,t={}){let{size:r}=t,i=s8.encode(e);if("number"==typeof r){if(i.length>r)throw new s9({givenSize:i.length,maxSize:r});return function(e,t={}){let{dir:r,size:i=32}=t;if(0===i)return e;if(e.length>i)throw new s7({size:e.length,targetSize:i,type:"Bytes"});let n=new Uint8Array(i);for(let t=0;t<i;t++){let s="right"===r;n[s?t:i-t-1]=e[s?t:e.length-t-1]}return n}(i,{dir:"right",size:r})}return i}(t),{as:"Bytes"}),i=t.split("");for(let e=0;e<40;e+=2)r[e>>1]>>4>=8&&i[e]&&(i[e]=i[e].toUpperCase()),(15&r[e>>1])>=8&&i[e+1]&&(i[e+1]=i[e+1].toUpperCase());let n=`0x${i.join("")}`;return ot.set(e,n),n}class o8 extends sU{constructor({address:e,cause:t}){super(`Address "${e}" is invalid.`,{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class o6 extends sU{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class o5 extends sU{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}const o4=nu.secp256k1;function o9(e={}){let{as:t="Hex"}=e,r=at({as:t}),i=o7({privateKey:r});return{privateKey:r,publicKey:i}}function o7(e){let{privateKey:t}=e;return oW(nu.secp256k1.ProjectivePoint.fromPrivateKey(s$(t).slice(2)))}function ae(e){let{as:t="Hex",privateKey:r,publicKey:i}=e,n=nu.secp256k1.ProjectivePoint.fromHex(oY(i).slice(2)).multiply(nu.secp256k1.utils.normPrivateKeyToScalar(s$(r).slice(2))).toRawBytes(!0);return"Hex"===t?sV(n):n}function at(e={}){let{as:t="Hex"}=e,r=nu.secp256k1.utils.randomPrivateKey();return"Hex"===t?sV(r):r}function ar(e){return function(e,t={}){let r=o$(`0x${oY(e).slice(4)}`).substring(26);return function(e,t={}){let{checksum:r=!1}=t;return(o3(e),r)?o2(e):e}(`0x${r}`,t)}(ai(e))}function ai(e){let{payload:t,signature:r}=e,{r:i,s:n,yParity:s}=r;return oW(new nu.secp256k1.Signature(BigInt(i),BigInt(n)).addRecoveryBit(s).recoverPublicKey(s$(t).substring(2)))}function an(e){let{extraEntropy:t=!1,hash:r,payload:i,privateKey:n}=e,{r:s,s:o,recovery:a}=nu.secp256k1.sign(s6(i),s6(n),{extraEntropy:"boolean"==typeof t?t:s$(t).slice(2),lowS:!0,...r?{prehash:!0}:{}});return{r:s,s:o,yParity:a}}function as(e){let{address:t,hash:r,payload:i,publicKey:n,signature:s}=e;if(t){var o;return o=ar({payload:i,signature:s}),o3(t,{strict:!1}),o3(o,{strict:!1}),t.toLowerCase()===o.toLowerCase()}return nu.secp256k1.verify(s,s6(i),function(e,t={}){return s5(oY(e,t))}(n),...r?[{prehash:!0,lowS:!0}]:[])}var ao={};e(ao,"assert",()=>ah),e(ao,"MissingPropertiesError",()=>aC),e(ao,"InvalidRError",()=>aO),e(ao,"InvalidSError",()=>aP),e(ao,"InvalidYParityError",()=>aR),e(ao,"fromBytes",()=>au),e(ao,"fromHex",()=>af),e(ao,"InvalidSerializedSizeError",()=>aM),e(ao,"vToYParity",()=>aI),e(ao,"extract",()=>ac),e(ao,"from",()=>al),e(ao,"fromRpc",()=>ab),e(ao,"fromLegacy",()=>ag),e(ao,"fromDerBytes",()=>ad),e(ao,"fromDerHex",()=>ap),e(ao,"fromTuple",()=>ay),e(ao,"toBytes",()=>am),e(ao,"toHex",()=>av),e(ao,"yParityToV",()=>aA),e(ao,"toDerBytes",()=>aw),e(ao,"toDerHex",()=>aD),e(ao,"toLegacy",()=>ax),e(ao,"toRpc",()=>aE),e(ao,"toTuple",()=>a_),e(ao,"validate",()=>aS),e(ao,"InvalidVError",()=>aT);const aa=2n**256n-1n;function ah(e,t={}){let{recovered:r}=t;if(void 0===e.r||void 0===e.s||r&&void 0===e.yParity)throw new aC({signature:e});if(e.r<0n||e.r>aa)throw new aO({value:e.r});if(e.s<0n||e.s>aa)throw new aP({value:e.s});if("number"==typeof e.yParity&&0!==e.yParity&&1!==e.yParity)throw new aR({value:e.yParity})}function au(e){return af(sV(e))}function af(e){if(130!==e.length&&132!==e.length)throw new aM({signature:e});let t=BigInt(sY(e,0,32)),r=BigInt(sY(e,32,64)),i=(()=>{let t=Number(`0x${e.slice(130)}`);if(!Number.isNaN(t))try{return aI(t)}catch{throw new aR({value:t})}})();return void 0===i?{r:t,s:r}:{r:t,s:r,yParity:i}}function ac(e){if(void 0!==e.r&&void 0!==e.s)return al(e)}function al(e){let t="string"==typeof e?af(e):e instanceof Uint8Array?au(e):"string"==typeof e.r?ab(e):e.v?ag(e):{r:e.r,s:e.s,...void 0!==e.yParity?{yParity:e.yParity}:{}};return ah(t),t}function ad(e){return ap(sV(e))}function ap(e){let{r:t,s:r}=nu.secp256k1.Signature.fromDER(s$(e).slice(2));return{r:t,s:r}}function ag(e){return{r:e.r,s:e.s,yParity:aI(e.v)}}function ab(e){let t=(()=>{let t=e.v?Number(e.v):void 0,r=e.yParity?Number(e.yParity):void 0;if("number"==typeof t&&"number"!=typeof r&&(r=aI(t)),"number"!=typeof r)throw new aR({value:e.yParity});return r})();return{r:BigInt(e.r),s:BigInt(e.s),yParity:t}}function ay(e){let[t,r,i]=e;return al({r:"0x"===r?0n:BigInt(r),s:"0x"===i?0n:BigInt(i),yParity:"0x"===t?0:Number(t)})}function am(e){return s5(av(e))}function av(e){ah(e);let t=e.r,r=e.s;return sK(sW(t,{size:32}),sW(r,{size:32}),"number"==typeof e.yParity?sW(aA(e.yParity),{size:1}):"0x")}function aw(e){return new nu.secp256k1.Signature(e.r,e.s).toDERRawBytes()}function aD(e){let t=new nu.secp256k1.Signature(e.r,e.s);return`0x${t.toDERHex()}`}function ax(e){return{r:e.r,s:e.s,v:aA(e.yParity)}}function aE(e){let{r:t,s:r,yParity:i}=e;return{r:sW(t,{size:32}),s:sW(r,{size:32}),yParity:0===i?"0x0":"0x1"}}function a_(e){let{r:t,s:r,yParity:i}=e;return[i?"0x01":"0x",0n===t?"0x":sJ(sW(t)),0n===r?"0x":sJ(sW(r))]}function aS(e,t={}){try{return ah(e,t),!0}catch{return!1}}function aI(e){if(0===e||27===e)return 0;if(1===e||28===e)return 1;if(e>=35)return+(e%2==0);throw new aT({value:e})}function aA(e){if(0===e)return 27;if(1===e)return 28;throw new aR({value:e})}class aM extends sU{constructor({signature:e}){super(`Value \`${e}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${sZ(s$(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}}class aC extends sU{constructor({signature:e}){super(`Signature \`${sF(e)}\` is missing either an \`r\`, \`s\`, or \`yParity\` property.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.MissingPropertiesError"})}}class aO extends sU{constructor({value:e}){super(`Value \`${e}\` is an invalid r value. r must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidRError"})}}class aP extends sU{constructor({value:e}){super(`Value \`${e}\` is an invalid s value. s must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSError"})}}class aR extends sU{constructor({value:e}){super(`Value \`${e}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}}class aT extends sU{constructor({value:e}){super(`Value \`${e}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}}!function(e){if(e.length>=255)throw TypeError("Alphabet too long");let t=new Uint8Array(256);for(let e=0;e<t.length;e++)t[e]=255;for(let r=0;r<e.length;r++){let i=e.charAt(r),n=i.charCodeAt(0);if(255!==t[n])throw TypeError(i+" is ambiguous");t[n]=r}let r=e.length,i=e.charAt(0),n=Math.log(r)/Math.log(256)}("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");class aN{constructor(e,t){this.type=e,this.data=t}}class aB extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Object.create(aB.prototype)),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:aB.name})}}const aL={type:-1,encode:function(e){return e instanceof Date?function({sec:e,nsec:t}){if(e>=0&&t>=0&&e<=0x3ffffffff)if(0===t&&e<=0xffffffff){let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e),t}else{let r=e/0x100000000,i=new Uint8Array(8),n=new DataView(i.buffer);return n.setUint32(0,t<<2|3&r),n.setUint32(4,0|e),i}{let r=new Uint8Array(12),i=new DataView(r.buffer);i.setUint32(0,t);let n=Math.floor(e/0x100000000);return i.setUint32(4,n),i.setUint32(8,e),r}}(function(e){let t=e.getTime(),r=Math.floor(t/1e3),i=(t-1e3*r)*1e6,n=Math.floor(i/1e9);return{sec:r+n,nsec:i-1e9*n}}(e)):null},decode:function(e){let t=function(e){let t=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(e.byteLength){case 4:return{sec:t.getUint32(0),nsec:0};case 8:{let e=t.getUint32(0);return{sec:(3&e)*0x100000000+t.getUint32(4),nsec:e>>>2}}case 12:var r;return{sec:0x100000000*(r=t).getInt32(4)+r.getUint32(8),nsec:t.getUint32(0)};default:throw new aB(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${e.length}`)}}(e);return new Date(1e3*t.sec+t.nsec/1e6)}};class ak{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(aL)}register({type:e,encode:t,decode:r}){if(e>=0)this.encoders[e]=t,this.decoders[e]=r;else{let i=-1-e;this.builtInEncoders[i]=t,this.builtInDecoders[i]=r}}tryToEncode(e,t){for(let r=0;r<this.builtInEncoders.length;r++){let i=this.builtInEncoders[r];if(null!=i){let n=i(e,t);if(null!=n)return new aN(-1-r,n)}}for(let r=0;r<this.encoders.length;r++){let i=this.encoders[r];if(null!=i){let n=i(e,t);if(null!=n)return new aN(r,n)}}return e instanceof aN?e:null}decode(e,t,r){let i=t<0?this.builtInDecoders[-1-t]:this.decoders[t];return i?i(e,t,r):new aN(t,e)}}ak.defaultCodec=new ak,new TextEncoder,new TextDecoder;const aU=new DataView(new ArrayBuffer(0));new Uint8Array(aU.buffer);try{aU.getInt8(0)}catch(e){if(!(e instanceof RangeError))throw Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}function az(e,t){return!!Array.isArray(t)&&(0===t.length||(e?t.every(e=>"string"==typeof e):t.every(e=>Number.isSafeInteger(e))))}RangeError("Insufficient data"),new class{constructor(e=16,t=16){this.hit=0,this.miss=0,this.maxKeyLength=e,this.maxLengthPerKey=t,this.caches=[];for(let e=0;e<this.maxKeyLength;e++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,t,r){let i=this.caches[r-1];e:for(let n of i){let i=n.bytes;for(let n=0;n<r;n++)if(i[n]!==e[t+n])continue e;return n.str}return null}store(e,t){let r=this.caches[e.length-1],i={bytes:e,str:t};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=i:r.push(i)}decode(e,t,r){let i=this.find(e,t,r);if(null!=i)return this.hit++,i;this.miss++;let n=function(e,t,r){let i=t,n=i+r,s=[],o="";for(;i<n;){let t=e[i++];if((128&t)==0)s.push(t);else if((224&t)==192){let r=63&e[i++];s.push((31&t)<<6|r)}else if((240&t)==224){let r=63&e[i++],n=63&e[i++];s.push((31&t)<<12|r<<6|n)}else if((248&t)==240){let r=63&e[i++],n=(7&t)<<18|r<<12|(63&e[i++])<<6|63&e[i++];n>65535&&(n-=65536,s.push(n>>>10&1023|55296),n=56320|1023&n),s.push(n)}else s.push(t);s.length>=4096&&(o+=String.fromCharCode(...s),s.length=0)}return s.length>0&&(o+=String.fromCharCode(...s)),o}(e,t,r),s=Uint8Array.prototype.slice.call(e,t,t+r);return this.store(s,n),n}};function aj(e,t){if("string"!=typeof t)throw Error(`${e}: string expected`);return!0}function aq(e){if(!Array.isArray(e))throw Error("array expected")}function aF(e,t){if(!az(!0,t))throw Error(`${e}: array of strings expected`)}const aH=(e,t)=>0===t?e:aH(t,e%t),aK=(()=>{let e=[];for(let t=0;t<40;t++)e.push(2**t);return e})();"function"==typeof Uint8Array.from([]).toBase64&&Uint8Array.fromBase64;"function"==typeof Uint8Array.from([]).toHex&&Uint8Array.fromHex;var a$={};Object.defineProperty(a$,"__esModule",{value:!0});var aV={};Object.defineProperty(aV,"__esModule",{value:!0}),aV.compare=function(e,t){for(let r=0;r<e.byteLength;r++){if(e[r]<t[r])return -1;if(e[r]>t[r])return 1}return e.byteLength>t.byteLength?1:e.byteLength<t.byteLength?-1:0};var aW={};Object.defineProperty(aW,"__esModule",{value:!0});var aG={};Object.defineProperty(aG,"__esModule",{value:!0});var aY={};Object.defineProperty(aY,"__esModule",{value:!0}),aY.asUint8Array=function(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e},aG.alloc=function(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.alloc?aY.asUint8Array(globalThis.Buffer.alloc(e)):new Uint8Array(e)},aG.allocUnsafe=function(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?aY.asUint8Array(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)},aW.concat=function(e,t){t||(t=e.reduce((e,t)=>e+t.length,0));let r=aG.allocUnsafe(t),i=0;for(let t of e)r.set(t,i),i+=t.length;return aY.asUint8Array(r)};var aZ={};Object.defineProperty(aZ,"__esModule",{value:!0}),aZ.equals=function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0};var aJ={};Object.defineProperty(aJ,"__esModule",{value:!0});var aX={},aQ={};Object.defineProperty(aQ,"__esModule",{value:!0});var a0={};Object.defineProperty(a0,"__esModule",{value:!0});var a1={};Object.defineProperty(a1,"__esModule",{value:!0});var a3={};a3=function(e,t){if(e.length>=255)throw TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<e.length;n++){var s=e.charAt(n),o=s.charCodeAt(0);if(255!==r[o])throw TypeError(s+" is ambiguous");r[o]=n}var a=e.length,h=e.charAt(0),u=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function c(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[0]){for(var i=0,n=0;e[t]===h;)i++,t++;for(var s=(e.length-t)*u+1>>>0,o=new Uint8Array(s);e[t];){var f=r[e.charCodeAt(t)];if(255===f)return;for(var c=0,l=s-1;(0!==f||c<n)&&-1!==l;l--,c++)f+=a*o[l]>>>0,o[l]=f%256>>>0,f=f/256>>>0;if(0!==f)throw Error("Non-zero carry");n=c,t++}if(" "!==e[t]){for(var d=s-n;d!==s&&0===o[d];)d++;for(var p=new Uint8Array(i+(s-d)),g=i;d!==s;)p[g++]=o[d++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,i=0,n=0,s=t.length;n!==s&&0===t[n];)n++,r++;for(var o=(s-n)*f+1>>>0,u=new Uint8Array(o);n!==s;){for(var c=t[n],l=0,d=o-1;(0!==c||l<i)&&-1!==d;d--,l++)c+=256*u[d]>>>0,u[d]=c%a>>>0,c=c/a>>>0;if(0!==c)throw Error("Non-zero carry");i=l,n++}for(var p=o-i;p!==o&&0===u[p];)p++;for(var g=h.repeat(r);p<o;++p)g+=e.charAt(u[p]);return g},decodeUnsafe:c,decode:function(e){var r=c(e);if(r)return r;throw Error(`Non-${t} character`)}}};var a2={};Object.defineProperty(a2,"__esModule",{value:!0});const a8=new Uint8Array(0);a2.coerce=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw Error("Unknown type, must be binary type")},a2.empty=a8,a2.equals=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0},a2.fromHex=e=>{let t=e.match(/../g);return t?new Uint8Array(t.map(e=>parseInt(e,16))):a8},a2.fromString=e=>new TextEncoder().encode(e),a2.isBinary=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e),a2.toHex=e=>e.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),""),a2.toString=e=>new TextDecoder().decode(e);class a6{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class a5{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return a9(this,e)}}class a4{constructor(e){this.decoders=e}or(e){return a9(this,e)}decode(e){let t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const a9=(e,t)=>new a4({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class a7{constructor(e,t,r,i){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=i,this.encoder=new a6(e,t,r),this.decoder=new a5(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const he=({name:e,prefix:t,encode:r,decode:i})=>new a7(e,t,r,i);a1.Codec=a7,a1.baseX=({prefix:e,name:t,alphabet:r})=>{let{encode:i,decode:n}=a3(r,t);return he({prefix:e,name:t,encode:i,decode:e=>a2.coerce(n(e))})},a1.from=he,a1.or=a9,a1.rfc4648=({name:e,prefix:t,bitsPerChar:r,alphabet:i})=>he({prefix:t,name:e,encode:e=>((e,t,r)=>{let i="="===t[t.length-1],n=(1<<r)-1,s="",o=0,a=0;for(let i=0;i<e.length;++i)for(a=a<<8|e[i],o+=8;o>r;)o-=r,s+=t[n&a>>o];if(o&&(s+=t[n&a<<r-o]),i)for(;s.length*r&7;)s+="=";return s})(e,i,r),decode:t=>((e,t,r,i)=>{let n={};for(let e=0;e<t.length;++e)n[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;let o=new Uint8Array(s*r/8|0),a=0,h=0,u=0;for(let t=0;t<s;++t){let s=n[e[t]];if(void 0===s)throw SyntaxError(`Non-${i} character`);h=h<<r|s,(a+=r)>=8&&(a-=8,o[u++]=255&h>>a)}if(a>=r||255&h<<8-a)throw SyntaxError("Unexpected end of data");return o})(t,i,r,e)}),a0.identity=a1.from({prefix:"\0",name:"identity",encode:e=>a2.toString(e),decode:e=>a2.fromString(e)});var ht={};Object.defineProperty(ht,"__esModule",{value:!0}),ht.base2=a1.rfc4648({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var hr={};Object.defineProperty(hr,"__esModule",{value:!0}),hr.base8=a1.rfc4648({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var hi={};Object.defineProperty(hi,"__esModule",{value:!0}),hi.base10=a1.baseX({prefix:"9",name:"base10",alphabet:"0123456789"});var hn={};Object.defineProperty(hn,"__esModule",{value:!0});const hs=a1.rfc4648({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),ho=a1.rfc4648({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});hn.base16=hs,hn.base16upper=ho;var ha={};Object.defineProperty(ha,"__esModule",{value:!0});const hh=a1.rfc4648({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),hu=a1.rfc4648({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),hf=a1.rfc4648({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),hc=a1.rfc4648({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),hl=a1.rfc4648({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),hd=a1.rfc4648({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),hp=a1.rfc4648({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),hg=a1.rfc4648({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),hb=a1.rfc4648({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});ha.base32=hh,ha.base32hex=hl,ha.base32hexpad=hp,ha.base32hexpadupper=hg,ha.base32hexupper=hd,ha.base32pad=hf,ha.base32padupper=hc,ha.base32upper=hu,ha.base32z=hb;var hy={};Object.defineProperty(hy,"__esModule",{value:!0});const hm=a1.baseX({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),hv=a1.baseX({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});hy.base36=hm,hy.base36upper=hv;var hw={};Object.defineProperty(hw,"__esModule",{value:!0});const hD=a1.baseX({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),hx=a1.baseX({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});hw.base58btc=hD,hw.base58flickr=hx;var hE={};Object.defineProperty(hE,"__esModule",{value:!0});const h_=a1.rfc4648({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),hS=a1.rfc4648({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),hI=a1.rfc4648({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),hA=a1.rfc4648({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});hE.base64=h_,hE.base64pad=hS,hE.base64url=hI,hE.base64urlpad=hA;var hM={};Object.defineProperty(hM,"__esModule",{value:!0});const hC=Array.from("\uD83D\uDE80\uD83E\uDE90\uD83D\uDEF0\uD83C\uDF0C\uD83C\uDF11\uD83C\uDF12\uD83C\uDF13\uD83C\uDF14\uD83C\uDF15\uD83C\uDF16\uD83C\uDF17\uD83C\uDF18\uD83C\uDF0D\uD83C\uDF0F\uD83C\uDF0E\uD83D\uDC09\uD83D\uDCBB\uD83D\uDDA5\uD83D\uDCBE\uD83D\uDCBF\uD83D\uDE02\uD83D\uDE0D\uD83E\uDD23\uD83D\uDE0A\uD83D\uDE4F\uD83D\uDC95\uD83D\uDE2D\uD83D\uDE18\uD83D\uDC4D\uD83D\uDE05\uD83D\uDC4F\uD83D\uDE01\uD83D\uDD25\uD83E\uDD70\uD83D\uDC94\uD83D\uDC96\uD83D\uDC99\uD83D\uDE22\uD83E\uDD14\uD83D\uDE06\uD83D\uDE44\uD83D\uDCAA\uD83D\uDE09\uD83D\uDC4C\uD83E\uDD17\uD83D\uDC9C\uD83D\uDE14\uD83D\uDE0E\uD83D\uDE07\uD83C\uDF39\uD83E\uDD26\uD83C\uDF89\uD83D\uDC9E\uD83E\uDD37\uD83D\uDE31\uD83D\uDE0C\uD83C\uDF38\uD83D\uDE4C\uD83D\uDE0B\uD83D\uDC97\uD83D\uDC9A\uD83D\uDE0F\uD83D\uDC9B\uD83D\uDE42\uD83D\uDC93\uD83E\uDD29\uD83D\uDE04\uD83D\uDE00\uD83D\uDDA4\uD83D\uDE03\uD83D\uDCAF\uD83D\uDE48\uD83D\uDC47\uD83C\uDFB6\uD83D\uDE12\uD83E\uDD2D\uD83D\uDE1C\uD83D\uDC8B\uD83D\uDC40\uD83D\uDE2A\uD83D\uDE11\uD83D\uDCA5\uD83D\uDE4B\uD83D\uDE1E\uD83D\uDE29\uD83D\uDE21\uD83E\uDD2A\uD83D\uDC4A\uD83E\uDD73\uD83D\uDE25\uD83E\uDD24\uD83D\uDC49\uD83D\uDC83\uD83D\uDE33\uD83D\uDE1A\uD83D\uDE1D\uD83D\uDE34\uD83C\uDF1F\uD83D\uDE2C\uD83D\uDE43\uD83C\uDF40\uD83C\uDF37\uD83D\uDE3B\uD83D\uDE13\uD83E\uDD7A\uD83C\uDF08\uD83D\uDE08\uD83E\uDD18\uD83D\uDCA6\uD83D\uDE23\uD83C\uDFC3\uD83D\uDC90\uD83C\uDF8A\uD83D\uDC98\uD83D\uDE20\uD83D\uDE15\uD83C\uDF3A\uD83C\uDF82\uD83C\uDF3B\uD83D\uDE10\uD83D\uDD95\uD83D\uDC9D\uD83D\uDE4A\uD83D\uDE39\uD83D\uDDE3\uD83D\uDCAB\uD83D\uDC80\uD83D\uDC51\uD83C\uDFB5\uD83E\uDD1E\uD83D\uDE1B\uD83D\uDD34\uD83D\uDE24\uD83C\uDF3C\uD83D\uDE2B\uD83E\uDD19\uD83C\uDFC6\uD83E\uDD2B\uD83D\uDC48\uD83D\uDE2E\uD83D\uDE46\uD83C\uDF7B\uD83C\uDF43\uD83D\uDC36\uD83D\uDC81\uD83D\uDE32\uD83C\uDF3F\uD83E\uDDE1\uD83C\uDF81\uD83C\uDF1E\uD83C\uDF88\uD83D\uDC4B\uD83D\uDE30\uD83E\uDD28\uD83D\uDE36\uD83E\uDD1D\uD83D\uDEB6\uD83D\uDCB0\uD83C\uDF53\uD83D\uDCA2\uD83E\uDD1F\uD83D\uDE41\uD83D\uDEA8\uD83D\uDCA8\uD83E\uDD2C\uD83C\uDF80\uD83C\uDF7A\uD83E\uDD13\uD83D\uDE19\uD83D\uDC9F\uD83C\uDF31\uD83D\uDE16\uD83D\uDC76\uD83E\uDD74\uD83D\uDC8E\uD83D\uDCB8\uD83D\uDE28\uD83C\uDF1A\uD83E\uDD8B\uD83D\uDE37\uD83D\uDD7A\uD83D\uDE45\uD83D\uDE1F\uD83D\uDE35\uD83D\uDC4E\uD83E\uDD32\uD83E\uDD20\uD83E\uDD27\uD83D\uDCCC\uD83D\uDD35\uD83D\uDC85\uD83E\uDDD0\uD83D\uDC3E\uD83C\uDF52\uD83D\uDE17\uD83E\uDD11\uD83C\uDF0A\uD83E\uDD2F\uD83D\uDC37\uD83D\uDCA7\uD83D\uDE2F\uD83D\uDC86\uD83D\uDC46\uD83C\uDFA4\uD83D\uDE47\uD83C\uDF51\uD83C\uDF34\uD83D\uDCA3\uD83D\uDC38\uD83D\uDC8C\uD83D\uDCCD\uD83E\uDD40\uD83E\uDD22\uD83D\uDC45\uD83D\uDCA1\uD83D\uDCA9\uD83D\uDC50\uD83D\uDCF8\uD83D\uDC7B\uD83E\uDD10\uD83E\uDD2E\uD83C\uDFBC\uD83E\uDD75\uD83D\uDEA9\uD83C\uDF4E\uD83C\uDF4A\uD83D\uDC7C\uD83D\uDC8D\uD83D\uDCE3\uD83E\uDD42"),hO=hC.reduce((e,t,r)=>(e[r]=t,e),[]),hP=hC.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]);hM.base256emoji=a1.from({prefix:"\uD83D\uDE80",name:"base256emoji",encode:function(e){return e.reduce((e,t)=>e+=hO[t],"")},decode:function(e){let t=[];for(let r of e){let e=hP[r.codePointAt(0)];if(void 0===e)throw Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}});var hR={};Object.defineProperty(hR,"__esModule",{value:!0});var hT={};Object.defineProperty(hT,"__esModule",{value:!0});var hN={};Object.defineProperty(hN,"__esModule",{value:!0});var hB={};Object.defineProperty(hB,"__esModule",{value:!0});var hL={};function hk(e,t,r){t=t||[];for(var i=r=r||0;e>=0x80000000;)t[r++]=255&e|128,e/=128;for(;-128&e;)t[r++]=255&e|128,e>>>=7;return t[r]=0|e,hk.bytes=r-i+1,t}function hU(e,t){var r,i=0,t=t||0,n=0,s=t,o=e.length;do{if(s>=o)throw hU.bytes=0,RangeError("Could not decode varint");r=e[s++],i+=n<28?(127&r)<<n:(127&r)*Math.pow(2,n),n+=7}while(r>=128)return hU.bytes=s-t,i}hL={encode:hk,decode:hU,encodingLength:function(e){return e<128?1:e<16384?2:e<2097152?3:e<0x10000000?4:e<0x800000000?5:e<0x40000000000?6:e<0x2000000000000?7:e<0x100000000000000?8:e<0x8000000000000000?9:10}},hB.decode=(e,t=0)=>[hL.decode(e,t),hL.decode.bytes],hB.encodeTo=(e,t,r=0)=>(hL.encode(e,t,r),t),hB.encodingLength=e=>hL.encodingLength(e);class hz{constructor(e,t,r,i){this.code=e,this.size=t,this.digest=r,this.bytes=i}}hN.Digest=hz,hN.create=(e,t)=>{let r=t.byteLength,i=hB.encodingLength(e),n=i+hB.encodingLength(r),s=new Uint8Array(n+r);return hB.encodeTo(e,s,0),hB.encodeTo(r,s,i),s.set(t,n),new hz(e,r,t,s)},hN.decode=e=>{let t=a2.coerce(e),[r,i]=hB.decode(t),[n,s]=hB.decode(t.subarray(i)),o=t.subarray(i+s);if(o.byteLength!==n)throw Error("Incorrect length");return new hz(r,n,o,t)},hN.equals=(e,t)=>e===t||e.code===t.code&&e.size===t.size&&a2.equals(e.bytes,t.bytes);class hj{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?hN.create(this.code,t):t.then(e=>hN.create(this.code,e))}throw Error("Unknown type, must be binary type")}}hT.Hasher=hj,hT.from=({name:e,code:t,encode:r})=>new hj(e,t,r);const hq=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),hF=hT.from({name:"sha2-256",code:18,encode:hq("SHA-256")}),hH=hT.from({name:"sha2-512",code:19,encode:hq("SHA-512")});hR.sha256=hF,hR.sha512=hH;var hK={};Object.defineProperty(hK,"__esModule",{value:!0});const h$=a2.coerce;hK.identity={code:0,name:"identity",encode:h$,digest:e=>hN.create(0,h$(e))};var hV={};Object.defineProperty(hV,"__esModule",{value:!0}),hV.code=85,hV.decode=e=>a2.coerce(e),hV.encode=e=>a2.coerce(e),hV.name="raw";var hW={};Object.defineProperty(hW,"__esModule",{value:!0});const hG=new TextEncoder,hY=new TextDecoder;hW.code=512,hW.decode=e=>JSON.parse(hY.decode(e)),hW.encode=e=>hG.encode(JSON.stringify(e)),hW.name="json";var hZ={};Object.defineProperty(hZ,"__esModule",{value:!0});var hJ={};Object.defineProperty(hJ,"__esModule",{value:!0});class hX{constructor(e,t,r,i){this.code=t,this.version=e,this.multihash=r,this.bytes=i,this.byteOffset=i.byteOffset,this.byteLength=i.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:h4,byteLength:h4,code:h5,version:h5,multihash:h5,bytes:h5,_baseCache:h4,asCID:h4})}toV0(){if(0===this.version)return this;{let{code:e,multihash:t}=this;if(e!==h3)throw Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==h2)throw Error("Cannot convert non sha2-256 multihash CID to CIDv0");return hX.createV0(t)}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,r=hN.create(e,t);return hX.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&hN.equals(this.multihash,e.multihash)}toString(e){let{bytes:t,version:r,_baseCache:i}=this;return 0===r?h0(t,i,e||hw.base58btc.encoder):h1(t,i,e||ha.base32.encoder)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return h9(/^0\.0/,h7),!!(e&&(e[h6]||e.asCID===e))}get toBaseEncodedString(){throw Error("Deprecated, use .toString()")}get codec(){throw Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw Error('"multibaseName" property is deprecated')}get prefix(){throw Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof hX)return e;if(null!=e&&e.asCID===e){let{version:t,code:r,multihash:i,bytes:n}=e;return new hX(t,r,i,n||h8(t,r,i.bytes))}if(null==e||!0!==e[h6])return null;{let{version:t,multihash:r,code:i}=e,n=hN.decode(r);return hX.create(t,i,n)}}static create(e,t,r){if("number"!=typeof t)throw Error("String codecs are no longer supported");switch(e){case 0:if(t===h3)return new hX(e,t,r,r.bytes);throw Error(`Version 0 CID must use dag-pb (code: ${h3}) block encoding`);case 1:{let i=h8(e,t,r.bytes);return new hX(e,t,r,i)}default:throw Error("Invalid version")}}static createV0(e){return hX.create(0,h3,e)}static createV1(e,t){return hX.create(1,e,t)}static decode(e){let[t,r]=hX.decodeFirst(e);if(r.length)throw Error("Incorrect length");return t}static decodeFirst(e){let t=hX.inspectBytes(e),r=t.size-t.multihashSize,i=a2.coerce(e.subarray(r,r+t.multihashSize));if(i.byteLength!==t.multihashSize)throw Error("Incorrect length");let n=i.subarray(t.multihashSize-t.digestSize),s=new hN.Digest(t.multihashCode,t.digestSize,n,i);return[0===t.version?hX.createV0(s):hX.createV1(t.codec,s),e.subarray(t.size)]}static inspectBytes(e){let t=0,r=()=>{let[r,i]=hB.decode(e.subarray(t));return t+=i,r},i=r(),n=h3;if(18===i?(i=0,t=0):1===i&&(n=r()),0!==i&&1!==i)throw RangeError(`Invalid CID version ${i}`);let s=t,o=r(),a=r(),h=t+a;return{version:i,codec:n,multihashCode:o,digestSize:a,multihashSize:h-s,size:h}}static parse(e,t){let[r,i]=hQ(e,t),n=hX.decode(i);return n._baseCache.set(r,e),n}}const hQ=(e,t)=>{switch(e[0]){case"Q":{let r=t||hw.base58btc;return[hw.base58btc.prefix,r.decode(`${hw.base58btc.prefix}${e}`)]}case hw.base58btc.prefix:{let r=t||hw.base58btc;return[hw.base58btc.prefix,r.decode(e)]}case ha.base32.prefix:{let r=t||ha.base32;return[ha.base32.prefix,r.decode(e)]}default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},h0=(e,t,r)=>{let{prefix:i}=r;if(i!==hw.base58btc.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let n=t.get(i);if(null!=n)return n;{let n=r.encode(e).slice(1);return t.set(i,n),n}},h1=(e,t,r)=>{let{prefix:i}=r,n=t.get(i);if(null!=n)return n;{let n=r.encode(e);return t.set(i,n),n}},h3=112,h2=18,h8=(e,t,r)=>{let i=hB.encodingLength(e),n=i+hB.encodingLength(t),s=new Uint8Array(n+r.byteLength);return hB.encodeTo(e,s,0),hB.encodeTo(t,s,i),s.set(r,n),s},h6=Symbol.for("@ipld/js-cid/CID"),h5={writable:!1,configurable:!1,enumerable:!0},h4={writable:!1,enumerable:!1,configurable:!1},h9=(e,t)=>{if(e.test("0.0.0-dev"))console.warn(t);else throw Error(t)},h7=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`;hJ.CID=hX,hZ.CID=hJ.CID,hZ.varint=hB,hZ.bytes=a2,hZ.hasher=hT,hZ.digest=hN;const ue={...a0,...ht,...hr,...hi,...hn,...ha,...hy,...hw,...hE,...hM},ut={...hR,...hK};function ur(e,t,r,i){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:i}}}aQ.CID=hJ.CID,aQ.hasher=hT,aQ.digest=hN,aQ.varint=hB,aQ.bytes=a2,aQ.bases=ue,aQ.codecs={raw:hV,json:hW},aQ.hashes=ut;const ui=ur("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),un=ur("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);let t=aG.allocUnsafe(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t});aX={utf8:ui,"utf-8":ui,hex:aQ.bases.base16,latin1:un,ascii:un,binary:un,...aQ.bases},aJ.fromString=function(e,t="utf8"){let r=aX[t];if(!r)throw Error(`Unsupported encoding "${t}"`);return("utf8"===t||"utf-8"===t)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?aY.asUint8Array(globalThis.Buffer.from(e,"utf-8")):r.decoder.decode(`${r.prefix}${e}`)};var us={};Object.defineProperty(us,"__esModule",{value:!0}),us.toString=function(e,t="utf8"){let r=aX[t];if(!r)throw Error(`Unsupported encoding "${t}"`);return("utf8"===t||"utf-8"===t)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):r.encoder.encode(e).substring(1)};var uo={};Object.defineProperty(uo,"__esModule",{value:!0}),uo.xor=function(e,t){if(e.length!==t.length)throw Error("Inputs should have the same length");let r=aG.allocUnsafe(e.length);for(let i=0;i<e.length;i++)r[i]=e[i]^t[i];return aY.asUint8Array(r)},a$.compare=aV.compare,a$.concat=aW.concat,a$.equals=aZ.equals,a$.fromString=aJ.fromString,a$.toString=us.toString,a$.xor=uo.xor;const ua={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var uh={},uu={};function uf(e){return(0x100000000+e).toString(16).substring(1)}function uc(e,t,r){let i=e[t]+e[r],n=e[t+1]+e[r+1];i>=0x100000000&&n++,e[t]=i,e[t+1]=n}function ul(e,t,r,i){let n=e[t]+r;r<0&&(n+=0x100000000);let s=e[t+1]+i;n>=0x100000000&&s++,e[t]=n,e[t+1]=s}function ud(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function up(e,t,r,i,n,s){let o=um[n],a=um[n+1],h=um[s],u=um[s+1];uc(uy,e,t),ul(uy,e,o,a);let f=uy[i]^uy[e],c=uy[i+1]^uy[e+1];uy[i]=c,uy[i+1]=f,uc(uy,r,i),f=uy[t]^uy[r],c=uy[t+1]^uy[r+1],uy[t]=f>>>24^c<<8,uy[t+1]=c>>>24^f<<8,uc(uy,e,t),ul(uy,e,h,u),f=uy[i]^uy[e],c=uy[i+1]^uy[e+1],uy[i]=f>>>16^c<<16,uy[i+1]=c>>>16^f<<16,uc(uy,r,i),f=uy[t]^uy[r],c=uy[t+1]^uy[r+1],uy[t]=c>>>31^f<<1,uy[t+1]=f>>>31^c<<1}uu={normalizeInput:function(e){let t;if(e instanceof Uint8Array)t=e;else if("string"==typeof e)t=new TextEncoder().encode(e);else throw Error("Input must be an string, Buffer or Uint8Array");return t},toHex:function(e){return Array.prototype.map.call(e,function(e){return(e<16?"0":"")+e.toString(16)}).join("")},debugPrint:function(e,t,r){let i="\n"+e+" = ";for(let n=0;n<t.length;n+=2){if(32===r)i+=uf(t[n]).toUpperCase(),i+=" ",i+=uf(t[n+1]).toUpperCase();else if(64===r)i+=uf(t[n+1]).toUpperCase(),i+=uf(t[n]).toUpperCase();else throw Error("Invalid size "+r);n%6==4?i+="\n"+Array(e.length+4).join(" "):n<t.length-2&&(i+=" ")}console.log(i)},testSpeed:function(e,t,r){let i=new Date().getTime(),n=new Uint8Array(t);for(let e=0;e<t;e++)n[e]=e%256;let s=new Date().getTime();console.log("Generated random input in "+(s-i)+"ms"),i=s;for(let s=0;s<r;s++){let r=e(n),s=new Date().getTime(),o=s-i;i=s,console.log("Hashed in "+o+"ms: "+r.substring(0,20)+"..."),console.log(Math.round(t/1048576/(o/1e3)*100)/100+" MB PER SECOND")}}};const ug=new Uint32Array([0xf3bcc908,0x6a09e667,0x84caa73b,0xbb67ae85,0xfe94f82b,0x3c6ef372,0x5f1d36f1,0xa54ff53a,0xade682d1,0x510e527f,0x2b3e6c1f,0x9b05688c,0xfb41bd6b,0x1f83d9ab,0x137e2179,0x5be0cd19]),ub=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3].map(function(e){return 2*e})),uy=new Uint32Array(32),um=new Uint32Array(32);function uv(e,t){let r=0;for(r=0;r<16;r++)uy[r]=e.h[r],uy[r+16]=ug[r];for(uy[24]=uy[24]^e.t,uy[25]=uy[25]^e.t/0x100000000,t&&(uy[28]=~uy[28],uy[29]=~uy[29]),r=0;r<32;r++)um[r]=ud(e.b,4*r);for(r=0;r<12;r++)up(0,8,16,24,ub[16*r+0],ub[16*r+1]),up(2,10,18,26,ub[16*r+2],ub[16*r+3]),up(4,12,20,28,ub[16*r+4],ub[16*r+5]),up(6,14,22,30,ub[16*r+6],ub[16*r+7]),up(0,10,20,30,ub[16*r+8],ub[16*r+9]),up(2,12,22,24,ub[16*r+10],ub[16*r+11]),up(4,14,16,26,ub[16*r+12],ub[16*r+13]),up(6,8,18,28,ub[16*r+14],ub[16*r+15]);for(r=0;r<16;r++)e.h[r]=e.h[r]^uy[r]^uy[r+16]}const uw=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function uD(e,t,r,i){if(0===e||e>64)throw Error("Illegal output length, expected 0 < length <= 64");if(t&&t.length>64)throw Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(r&&16!==r.length)throw Error("Illegal salt, expected Uint8Array with length is 16");if(i&&16!==i.length)throw Error("Illegal personal, expected Uint8Array with length is 16");let n={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:e};uw.fill(0),uw[0]=e,t&&(uw[1]=t.length),uw[2]=1,uw[3]=1,r&&uw.set(r,32),i&&uw.set(i,48);for(let e=0;e<16;e++)n.h[e]=ug[e]^ud(uw,4*e);return t&&(ux(n,t),n.c=128),n}function ux(e,t){for(let r=0;r<t.length;r++)128===e.c&&(e.t+=e.c,uv(e,!1),e.c=0),e.b[e.c++]=t[r]}function uE(e){for(e.t+=e.c;e.c<128;)e.b[e.c++]=0;uv(e,!0);let t=new Uint8Array(e.outlen);for(let r=0;r<e.outlen;r++)t[r]=e.h[r>>2]>>8*(3&r);return t}function u_(e,t,r,i,n){r=r||64,e=uu.normalizeInput(e),i&&(i=uu.normalizeInput(i)),n&&(n=uu.normalizeInput(n));let s=uD(r,t,i,n);return ux(s,e),uE(s)}uh={blake2b:u_,blake2bHex:function(e,t,r,i,n){let s=u_(e,t,r,i,n);return uu.toHex(s)},blake2bInit:uD,blake2bUpdate:ux,blake2bFinal:uE};var uS={};function uI(e,t,r,i,n,s){uO[e]=uO[e]+uO[t]+n,uO[i]=uA(uO[i]^uO[e],16),uO[r]=uO[r]+uO[i],uO[t]=uA(uO[t]^uO[r],12),uO[e]=uO[e]+uO[t]+s,uO[i]=uA(uO[i]^uO[e],8),uO[r]=uO[r]+uO[i],uO[t]=uA(uO[t]^uO[r],7)}function uA(e,t){return e>>>t^e<<32-t}const uM=new Uint32Array([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),uC=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),uO=new Uint32Array(16),uP=new Uint32Array(16);function uR(e,t){let r=0;for(r=0;r<8;r++)uO[r]=e.h[r],uO[r+8]=uM[r];for(uO[12]^=e.t,uO[13]^=e.t/0x100000000,t&&(uO[14]=~uO[14]),r=0;r<16;r++){var i,n;uP[r]=(i=e.b)[n=4*r]^i[n+1]<<8^i[n+2]<<16^i[n+3]<<24}for(r=0;r<10;r++)uI(0,4,8,12,uP[uC[16*r+0]],uP[uC[16*r+1]]),uI(1,5,9,13,uP[uC[16*r+2]],uP[uC[16*r+3]]),uI(2,6,10,14,uP[uC[16*r+4]],uP[uC[16*r+5]]),uI(3,7,11,15,uP[uC[16*r+6]],uP[uC[16*r+7]]),uI(0,5,10,15,uP[uC[16*r+8]],uP[uC[16*r+9]]),uI(1,6,11,12,uP[uC[16*r+10]],uP[uC[16*r+11]]),uI(2,7,8,13,uP[uC[16*r+12]],uP[uC[16*r+13]]),uI(3,4,9,14,uP[uC[16*r+14]],uP[uC[16*r+15]]);for(r=0;r<8;r++)e.h[r]^=uO[r]^uO[r+8]}function uT(e,t){if(!(e>0&&e<=32))throw Error("Incorrect output length, should be in [1, 32]");let r=t?t.length:0;if(t&&!(r>0&&r<=32))throw Error("Incorrect key length, should be in [1, 32]");let i={h:new Uint32Array(uM),b:new Uint8Array(64),c:0,t:0,outlen:e};return i.h[0]^=0x1010000^r<<8^e,r>0&&(uN(i,t),i.c=64),i}function uN(e,t){for(let r=0;r<t.length;r++)64===e.c&&(e.t+=e.c,uR(e,!1),e.c=0),e.b[e.c++]=t[r]}function uB(e){for(e.t+=e.c;e.c<64;)e.b[e.c++]=0;uR(e,!0);let t=new Uint8Array(e.outlen);for(let r=0;r<e.outlen;r++)t[r]=e.h[r>>2]>>8*(3&r)&255;return t}function uL(e,t,r){r=r||32,e=uu.normalizeInput(e);let i=uT(r,t);return uN(i,e),uB(i)}uS={blake2s:uL,blake2sHex:function(e,t,r){let i=uL(e,t,r);return uu.toHex(i)},blake2sInit:uT,blake2sUpdate:uN,blake2sFinal:uB},uh.blake2b,uh.blake2bHex,uh.blake2bInit,uh.blake2bUpdate,uh.blake2bFinal,uS.blake2s,uS.blake2sHex,uS.blake2sInit,uS.blake2sUpdate,uS.blake2sFinal,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;const uk="react-native",uU="browser";function uz(){return!(0,nn.getDocument)()&&!!(0,nn.getNavigator)()&&"ReactNative"===navigator.product}function uj(){return!!(0,nn.getNavigator)()&&!!(0,nn.getDocument)()}function uq(){return uz()?uk:uj()?uU:"unknown"}function uF(){var e;try{return uz()&&"u">typeof t&&"u">typeof(null==t?void 0:t.Application)?null==(e=t.Application)?void 0:e.applicationId:void 0}catch{return}}function uH(e,r,i){let n=function(){if(uq()===uk&&"u">typeof t&&"u">typeof(null==t?void 0:t.Platform)){let{OS:e,Version:r}=t.Platform;return[e,r].join("-")}let e=nr();if(null===e)return"unknown";let r=e.os?e.os.replace(" ","").toLowerCase():"unknown";return"browser"===e.type?[r,e.name,e.version].join("-"):[r,e.version].join("-")}(),s=function(){var e;let t=uq();return t===uU?[t,(null==(e=(0,nn.getLocation)())?void 0:e.host)||"unknown"].join(":"):t}();return[[e,r].join("-"),["js",i].join("-"),n,s].join("/")}function uK(e){return Object.fromEntries(e.entries())}function u$(e){return new Map(Object.entries(e))}function uV(e,t,r){return new Promise(async(i,n)=>{let s=setTimeout(()=>n(Error(r)),t);try{let t=await e;i(t)}catch(e){n(e)}clearTimeout(s)})}function uW(e,t){if("string"==typeof t&&t.startsWith(`${e}:`))return t;if("topic"===e.toLowerCase()){if("string"!=typeof t)throw Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}if("id"===e.toLowerCase()){if("number"!=typeof t)throw Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw Error(`Unknown expirer target type: ${e}`)}function uG(e,t){return(0,x.fromMiliseconds)((t||Date.now())+(0,x.toMiliseconds)(e))}function uY(e){return Date.now()>=(0,x.toMiliseconds)(e)}function uZ(e,t){return`${e}${t?`:${t}`:""}`}function uJ(){return"u">typeof crypto&&null!=crypto&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,e=>{let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}function uX(e){return F.from(e,"base64").toString("utf-8")}const uQ=BigInt(0x100000000-1),u0=BigInt(32);function u1(e,t=!1){return t?{h:Number(e&uQ),l:Number(e>>u0&uQ)}:{h:0|Number(e>>u0&uQ),l:0|Number(e&uQ)}}function u3(e,t=!1){let r=e.length,i=new Uint32Array(r),n=new Uint32Array(r);for(let s=0;s<r;s++){let{h:r,l:o}=u1(e[s],t);[i[s],n[s]]=[r,o]}return[i,n]}const u2=(e,t,r)=>e>>>r,u8=(e,t,r)=>e<<32-r|t>>>r,u6=(e,t,r)=>e>>>r|t<<32-r,u5=(e,t,r)=>e<<32-r|t>>>r,u4=(e,t,r)=>e<<64-r|t>>>r-32,u9=(e,t,r)=>e>>>r-32|t<<64-r;function u7(e,t,r,i){let n=(t>>>0)+(i>>>0);return{h:e+r+(n/0x100000000|0)|0,l:0|n}}const fe=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),ft=(e,t,r,i)=>t+r+i+(e/0x100000000|0)|0,fr=(e,t,r,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0),fi=(e,t,r,i,n)=>t+r+i+n+(e/0x100000000|0)|0,fn=(e,t,r,i,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0)+(n>>>0),fs=(e,t,r,i,n,s)=>t+r+i+n+s+(e/0x100000000|0)|0,fo="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;function fa(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function fh(e){if(!Number.isSafeInteger(e)||e<0)throw Error("positive integer expected, got "+e)}function fu(e,...t){if(!fa(e))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function ff(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.createHasher");fh(e.outputLen),fh(e.blockLen)}function fc(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function fl(e,t){fu(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}function fd(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function fp(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function fg(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function fb(e,t){return e<<32-t|e>>>t}const fy=68===new Uint8Array(new Uint32Array([0x11223344]).buffer)[0];function fm(e){return e<<24&0xff000000|e<<8&0xff0000|e>>>8&65280|e>>>24&255}const fv=fy?e=>e:e=>fm(e),fw=fy?e=>e:function(e){for(let t=0;t<e.length;t++)e[t]=fm(e[t]);return e},fD="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex,fx=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function fE(e){if(fu(e),fD)return e.toHex();let t="";for(let r=0;r<e.length;r++)t+=fx[e[r]];return t}function f_(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:void 0}function fS(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);if(fD)return Uint8Array.fromHex(e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let i=new Uint8Array(r);for(let t=0,n=0;t<r;t++,n+=2){let r=f_(e.charCodeAt(n)),s=f_(e.charCodeAt(n+1));if(void 0===r||void 0===s)throw Error('hex string expected, got non-hex character "'+(e[n]+e[n+1])+'" at index '+n);i[t]=16*r+s}return i}function fI(e){if("string"!=typeof e)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function fA(e){return"string"==typeof e&&(e=fI(e)),fu(e),e}function fM(...e){let t=0;for(let r=0;r<e.length;r++){let i=e[r];fu(i),t+=i.length}let r=new Uint8Array(t);for(let t=0,i=0;t<e.length;t++){let n=e[t];r.set(n,i),i+=n.length}return r}class fC{}function fO(e){let t=t=>e().update(fA(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function fP(e=32){if(fo&&"function"==typeof fo.getRandomValues)return fo.getRandomValues(new Uint8Array(e));if(fo&&"function"==typeof fo.randomBytes)return Uint8Array.from(fo.randomBytes(e));throw Error("crypto.getRandomValues must be defined")}const fR=BigInt(0),fT=BigInt(1),fN=BigInt(2),fB=BigInt(7),fL=BigInt(256),fk=BigInt(113),fU=[],fz=[],fj=[];for(let e=0,t=fT,r=1,i=0;e<24;e++){[r,i]=[i,(2*r+3*i)%5],fU.push(2*(5*i+r)),fz.push((e+1)*(e+2)/2%64);let n=fR;for(let e=0;e<7;e++)(t=(t<<fT^(t>>fB)*fk)%fL)&fN&&(n^=fT<<(fT<<BigInt(e))-fT);fj.push(n)}const fq=u3(fj,!0),fF=fq[0],fH=fq[1],fK=(e,t,r)=>r>32?t<<r-32|e>>>64-r:e<<r|t>>>32-r,f$=(e,t,r)=>r>32?e<<r-32|t>>>64-r:t<<r|e>>>32-r;class fV extends fC{constructor(e,t,r,i=!1,n=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=n,fh(r),!(0<e&&e<200))throw Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=fd(this.state)}clone(){return this._cloneInto()}keccak(){fw(this.state32),function(e,t=24){let r=new Uint32Array(10);for(let i=24-t;i<24;i++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){let i=(t+8)%10,n=(t+2)%10,s=r[n],o=r[n+1],a=fK(s,o,1)^r[i],h=f$(s,o,1)^r[i+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=h}let t=e[2],n=e[3];for(let r=0;r<24;r++){let i=fz[r],s=fK(t,n,i),o=f$(t,n,i),a=fU[r];t=e[a],n=e[a+1],e[a]=s,e[a+1]=o}for(let t=0;t<50;t+=10){for(let i=0;i<10;i++)r[i]=e[t+i];for(let i=0;i<10;i++)e[t+i]^=~r[(i+2)%10]&r[(i+4)%10]}e[0]^=fF[i],e[1]^=fH[i]}fp(r)}(this.state32,this.rounds),fw(this.state32),this.posOut=0,this.pos=0}update(e){fc(this),fu(e=fA(e));let{blockLen:t,state:r}=this,i=e.length;for(let n=0;n<i;){let s=Math.min(t-this.pos,i-n);for(let t=0;t<s;t++)r[this.pos++]^=e[n++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:r,blockLen:i}=this;e[r]^=t,(128&t)!=0&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){fc(this,!1),fu(e),this.finish();let t=this.state,{blockLen:r}=this;for(let i=0,n=e.length;i<n;){this.posOut>=r&&this.keccak();let s=Math.min(r-this.posOut,n-i);e.set(t.subarray(this.posOut,this.posOut+s),i),this.posOut+=s,i+=s}return e}xofInto(e){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return fh(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(fl(e,this),this.finished)throw Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,fp(this.state)}_cloneInto(e){let{blockLen:t,suffix:r,outputLen:i,rounds:n,enableXOF:s}=this;return e||(e=new fV(t,r,i,s,n)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=n,e.suffix=r,e.outputLen=i,e.enableXOF=s,e.destroyed=this.destroyed,e}}fO(()=>new fV(136,1,32));class fW extends fC{constructor(e,t,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(e),this.view=fg(this.buffer)}update(e){fc(this),fu(e=fA(e));let{view:t,buffer:r,blockLen:i}=this,n=e.length;for(let s=0;s<n;){let o=Math.min(i-this.pos,n-s);if(o===i){let t=fg(e);for(;i<=n-s;s+=i)this.process(t,s);continue}r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){fc(this),fl(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:i,isLE:n}=this,{pos:s}=this;t[s++]=128,fp(this.buffer.subarray(s)),this.padOffset>i-s&&(this.process(r,0),s=0);for(let e=s;e<i;e++)t[e]=0;(function(e,t,r,i){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,i);let n=BigInt(32),s=BigInt(0xffffffff),o=Number(r>>n&s),a=Number(r&s),h=4*!!i,u=4*!i;e.setUint32(t+h,o,i),e.setUint32(t+u,a,i)})(r,i-8,BigInt(8*this.length),n),this.process(r,0);let o=fg(e),a=this.outputLen;if(a%4)throw Error("_sha2: outputLen should be aligned to 32bit");let h=a/4,u=this.get();if(h>u.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<h;e++)o.setUint32(4*e,u[e],n)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:i,finished:n,destroyed:s,pos:o}=this;return e.destroyed=s,e.finished=n,e.length=i,e.pos=o,i%t&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const fG=Uint32Array.from([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),fY=Uint32Array.from([0xcbbb9d5d,0xc1059ed8,0x629a292a,0x367cd507,0x9159015a,0x3070dd17,0x152fecd8,0xf70e5939,0x67332667,0xffc00b31,0x8eb44a87,0x68581511,0xdb0c2e0d,0x64f98fa7,0x47b5481d,0xbefa4fa4]),fZ=Uint32Array.from([0x6a09e667,0xf3bcc908,0xbb67ae85,0x84caa73b,0x3c6ef372,0xfe94f82b,0xa54ff53a,0x5f1d36f1,0x510e527f,0xade682d1,0x9b05688c,0x2b3e6c1f,0x1f83d9ab,0xfb41bd6b,0x5be0cd19,0x137e2179]),fJ=Uint32Array.from([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]),fX=new Uint32Array(64);class fQ extends fW{constructor(e=32){super(64,e,8,!1),this.A=0|fG[0],this.B=0|fG[1],this.C=0|fG[2],this.D=0|fG[3],this.E=0|fG[4],this.F=0|fG[5],this.G=0|fG[6],this.H=0|fG[7]}get(){let{A:e,B:t,C:r,D:i,E:n,F:s,G:o,H:a}=this;return[e,t,r,i,n,s,o,a]}set(e,t,r,i,n,s,o,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|i,this.E=0|n,this.F=0|s,this.G=0|o,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)fX[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=fX[e-15],r=fX[e-2],i=fb(t,7)^fb(t,18)^t>>>3,n=fb(r,17)^fb(r,19)^r>>>10;fX[e]=n+fX[e-7]+i+fX[e-16]|0}let{A:r,B:i,C:n,D:s,E:o,F:a,G:h,H:u}=this;for(let e=0;e<64;e++){var f,c,l,d;let t=u+(fb(o,6)^fb(o,11)^fb(o,25))+((f=o)&a^~f&h)+fJ[e]+fX[e]|0,p=(fb(r,2)^fb(r,13)^fb(r,22))+((c=r)&(l=i)^c&(d=n)^l&d)|0;u=h,h=a,a=o,o=s+t|0,s=n,n=i,i=r,r=t+p|0}r=r+this.A|0,i=i+this.B|0,n=n+this.C|0,s=s+this.D|0,o=o+this.E|0,a=a+this.F|0,h=h+this.G|0,u=u+this.H|0,this.set(r,i,n,s,o,a,h,u)}roundClean(){fp(fX)}destroy(){this.set(0,0,0,0,0,0,0,0),fp(this.buffer)}}const f0=u3(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),f1=f0[0],f3=f0[1],f2=new Uint32Array(80),f8=new Uint32Array(80);class f6 extends fW{constructor(e=64){super(128,e,16,!1),this.Ah=0|fZ[0],this.Al=0|fZ[1],this.Bh=0|fZ[2],this.Bl=0|fZ[3],this.Ch=0|fZ[4],this.Cl=0|fZ[5],this.Dh=0|fZ[6],this.Dl=0|fZ[7],this.Eh=0|fZ[8],this.El=0|fZ[9],this.Fh=0|fZ[10],this.Fl=0|fZ[11],this.Gh=0|fZ[12],this.Gl=0|fZ[13],this.Hh=0|fZ[14],this.Hl=0|fZ[15]}get(){let{Ah:e,Al:t,Bh:r,Bl:i,Ch:n,Cl:s,Dh:o,Dl:a,Eh:h,El:u,Fh:f,Fl:c,Gh:l,Gl:d,Hh:p,Hl:g}=this;return[e,t,r,i,n,s,o,a,h,u,f,c,l,d,p,g]}set(e,t,r,i,n,s,o,a,h,u,f,c,l,d,p,g){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|i,this.Ch=0|n,this.Cl=0|s,this.Dh=0|o,this.Dl=0|a,this.Eh=0|h,this.El=0|u,this.Fh=0|f,this.Fl=0|c,this.Gh=0|l,this.Gl=0|d,this.Hh=0|p,this.Hl=0|g}process(e,t){for(let r=0;r<16;r++,t+=4)f2[r]=e.getUint32(t),f8[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){let t=0|f2[e-15],r=0|f8[e-15],i=u6(t,r,1)^u6(t,r,8)^u2(t,r,7),n=u5(t,r,1)^u5(t,r,8)^u8(t,r,7),s=0|f2[e-2],o=0|f8[e-2],a=u6(s,o,19)^u4(s,o,61)^u2(s,o,6),h=fr(n,u5(s,o,19)^u9(s,o,61)^u8(s,o,6),f8[e-7],f8[e-16]),u=fi(h,i,a,f2[e-7],f2[e-16]);f2[e]=0|u,f8[e]=0|h}let{Ah:r,Al:i,Bh:n,Bl:s,Ch:o,Cl:a,Dh:h,Dl:u,Eh:f,El:c,Fh:l,Fl:d,Gh:p,Gl:g,Hh:b,Hl:y}=this;for(let e=0;e<80;e++){let t=u6(f,c,14)^u6(f,c,18)^u4(f,c,41),m=u5(f,c,14)^u5(f,c,18)^u9(f,c,41),v=f&l^~f&p,w=fn(y,m,c&d^~c&g,f3[e],f8[e]),D=fs(w,b,t,v,f1[e],f2[e]),x=0|w,E=u6(r,i,28)^u4(r,i,34)^u4(r,i,39),_=u5(r,i,28)^u9(r,i,34)^u9(r,i,39),S=r&n^r&o^n&o,I=i&s^i&a^s&a;b=0|p,y=0|g,p=0|l,g=0|d,l=0|f,d=0|c,({h:f,l:c}=u7(0|h,0|u,0|D,0|x)),h=0|o,u=0|a,o=0|n,a=0|s,n=0|r,s=0|i;let A=fe(x,_,I);r=ft(A,D,E,S),i=0|A}({h:r,l:i}=u7(0|this.Ah,0|this.Al,0|r,0|i)),({h:n,l:s}=u7(0|this.Bh,0|this.Bl,0|n,0|s)),({h:o,l:a}=u7(0|this.Ch,0|this.Cl,0|o,0|a)),({h:h,l:u}=u7(0|this.Dh,0|this.Dl,0|h,0|u)),({h:f,l:c}=u7(0|this.Eh,0|this.El,0|f,0|c)),({h:l,l:d}=u7(0|this.Fh,0|this.Fl,0|l,0|d)),({h:p,l:g}=u7(0|this.Gh,0|this.Gl,0|p,0|g)),({h:b,l:y}=u7(0|this.Hh,0|this.Hl,0|b,0|y)),this.set(r,i,n,s,o,a,h,u,f,c,l,d,p,g,b,y)}roundClean(){fp(f2,f8)}destroy(){fp(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class f5 extends f6{constructor(){super(48),this.Ah=0|fY[0],this.Al=0|fY[1],this.Bh=0|fY[2],this.Bl=0|fY[3],this.Ch=0|fY[4],this.Cl=0|fY[5],this.Dh=0|fY[6],this.Dl=0|fY[7],this.Eh=0|fY[8],this.El=0|fY[9],this.Fh=0|fY[10],this.Fl=0|fY[11],this.Gh=0|fY[12],this.Gl=0|fY[13],this.Hh=0|fY[14],this.Hl=0|fY[15]}}const f4=Uint32Array.from([0x22312194,0xfc2bf72c,0x9f555fa3,0xc84c64c2,0x2393b86b,0x6f53b151,0x96387719,0x5940eabd,0x96283ee2,0xa88effe3,0xbe5e1e25,0x53863992,0x2b0199fc,0x2c85b8aa,0xeb72ddc,0x81c52ca2]);class f9 extends f6{constructor(){super(32),this.Ah=0|f4[0],this.Al=0|f4[1],this.Bh=0|f4[2],this.Bl=0|f4[3],this.Ch=0|f4[4],this.Cl=0|f4[5],this.Dh=0|f4[6],this.Dl=0|f4[7],this.Eh=0|f4[8],this.El=0|f4[9],this.Fh=0|f4[10],this.Fl=0|f4[11],this.Gh=0|f4[12],this.Gl=0|f4[13],this.Hh=0|f4[14],this.Hl=0|f4[15]}}const f7=fO(()=>new fQ),ce=fO(()=>new f6),ct=fO(()=>new f5),cr=(fO(()=>new f9),Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9])),ci=Uint32Array.from([0xf3bcc908,0x6a09e667,0x84caa73b,0xbb67ae85,0xfe94f82b,0x3c6ef372,0x5f1d36f1,0xa54ff53a,0xade682d1,0x510e527f,0x2b3e6c1f,0x9b05688c,0xfb41bd6b,0x1f83d9ab,0x137e2179,0x5be0cd19]),cn=new Uint32Array(32);function cs(e,t,r,i,n,s){let o=n[s],a=n[s+1],h=cn[2*e],u=cn[2*e+1],f=cn[2*t],c=cn[2*t+1],l=cn[2*r],d=cn[2*r+1],p=cn[2*i],g=cn[2*i+1],b=fe(h,f,o);u=ft(b,u,c,a),h=0|b,({Dh:g,Dl:p}={Dh:g^u,Dl:p^h}),({Dh:g,Dl:p}={Dh:p,Dl:g}),({h:d,l:l}=u7(d,l,g,p)),({Bh:c,Bl:f}={Bh:c^d,Bl:f^l}),({Bh:c,Bl:f}={Bh:u6(c,f,24),Bl:u5(c,f,24)}),cn[2*e]=h,cn[2*e+1]=u,cn[2*t]=f,cn[2*t+1]=c,cn[2*r]=l,cn[2*r+1]=d,cn[2*i]=p,cn[2*i+1]=g}function co(e,t,r,i,n,s){let o=n[s],a=n[s+1],h=cn[2*e],u=cn[2*e+1],f=cn[2*t],c=cn[2*t+1],l=cn[2*r],d=cn[2*r+1],p=cn[2*i],g=cn[2*i+1],b=fe(h,f,o);u=ft(b,u,c,a),h=0|b,({Dh:g,Dl:p}={Dh:g^u,Dl:p^h}),({Dh:g,Dl:p}={Dh:u6(g,p,16),Dl:u5(g,p,16)}),({h:d,l:l}=u7(d,l,g,p)),({Bh:c,Bl:f}={Bh:c^d,Bl:f^l}),({Bh:c,Bl:f}={Bh:u4(c,f,63),Bl:u9(c,f,63)}),cn[2*e]=h,cn[2*e+1]=u,cn[2*t]=f,cn[2*t+1]=c,cn[2*r]=l,cn[2*r+1]=d,cn[2*i]=p,cn[2*i+1]=g}class ca extends fC{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,fh(e),fh(t),this.blockLen=e,this.outputLen=t,this.buffer=new Uint8Array(e),this.buffer32=fd(this.buffer)}update(e){fc(this),fu(e=fA(e));let{blockLen:t,buffer:r,buffer32:i}=this,n=e.length,s=e.byteOffset,o=e.buffer;for(let a=0;a<n;){this.pos===t&&(fw(i),this.compress(i,0,!1),fw(i),this.pos=0);let h=Math.min(t-this.pos,n-a),u=s+a;if(h===t&&!(u%4)&&a+h<n){let e=new Uint32Array(o,u,Math.floor((n-a)/4));fw(e);for(let r=0;a+t<n;r+=i.length,a+=t)this.length+=t,this.compress(e,r,!1);fw(e);continue}r.set(e.subarray(a,a+h),this.pos),this.pos+=h,this.length+=h,a+=h}return this}digestInto(e){fc(this),fl(e,this);let{pos:t,buffer32:r}=this;this.finished=!0,fp(this.buffer.subarray(t)),fw(r),this.compress(r,0,!0),fw(r);let i=fd(e);this.get().forEach((e,t)=>i[t]=fv(e))}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){let{buffer:t,length:r,finished:i,destroyed:n,outputLen:s,pos:o}=this;return e||(e=new this.constructor({dkLen:s})),e.set(...this.get()),e.buffer.set(t),e.destroyed=n,e.finished=i,e.length=r,e.pos=o,e.outputLen=s,e}clone(){return this._cloneInto()}}class ch extends ca{constructor(e={}){let t=void 0===e.dkLen?64:e.dkLen;super(128,t),this.v0l=0|ci[0],this.v0h=0|ci[1],this.v1l=0|ci[2],this.v1h=0|ci[3],this.v2l=0|ci[4],this.v2h=0|ci[5],this.v3l=0|ci[6],this.v3h=0|ci[7],this.v4l=0|ci[8],this.v4h=0|ci[9],this.v5l=0|ci[10],this.v5h=0|ci[11],this.v6l=0|ci[12],this.v6h=0|ci[13],this.v7l=0|ci[14],this.v7h=0|ci[15],function(e,t={},r,i,n){if(fh(64),e<0||e>64)throw Error("outputLen bigger than keyLen");let{key:s,salt:o,personalization:a}=t;if(void 0!==s&&(s.length<1||s.length>r))throw Error("key length must be undefined or 1.."+r);if(void 0!==o&&16!==o.length)throw Error("salt must be undefined or 16");if(void 0!==a&&16!==a.length)throw Error("personalization must be undefined or 16")}(t,e,64,16,16);let{key:r,personalization:i,salt:n}=e,s=0;if(void 0!==r&&(s=(r=fA(r)).length),this.v0l^=this.outputLen|s<<8|0x1010000,void 0!==n){let e=fd(n=fA(n));this.v4l^=fv(e[0]),this.v4h^=fv(e[1]),this.v5l^=fv(e[2]),this.v5h^=fv(e[3])}if(void 0!==i){let e=fd(i=fA(i));this.v6l^=fv(e[0]),this.v6h^=fv(e[1]),this.v7l^=fv(e[2]),this.v7h^=fv(e[3])}if(void 0!==r){let e=new Uint8Array(this.blockLen);e.set(r),this.update(e)}}get(){let{v0l:e,v0h:t,v1l:r,v1h:i,v2l:n,v2h:s,v3l:o,v3h:a,v4l:h,v4h:u,v5l:f,v5h:c,v6l:l,v6h:d,v7l:p,v7h:g}=this;return[e,t,r,i,n,s,o,a,h,u,f,c,l,d,p,g]}set(e,t,r,i,n,s,o,a,h,u,f,c,l,d,p,g){this.v0l=0|e,this.v0h=0|t,this.v1l=0|r,this.v1h=0|i,this.v2l=0|n,this.v2h=0|s,this.v3l=0|o,this.v3h=0|a,this.v4l=0|h,this.v4h=0|u,this.v5l=0|f,this.v5h=0|c,this.v6l=0|l,this.v6h=0|d,this.v7l=0|p,this.v7h=0|g}compress(e,t,r){this.get().forEach((e,t)=>cn[t]=e),cn.set(ci,16);let{h:i,l:n}=u1(BigInt(this.length));cn[24]=ci[8]^n,cn[25]=ci[9]^i,r&&(cn[28]=~cn[28],cn[29]=~cn[29]);let s=0;for(let r=0;r<12;r++)cs(0,4,8,12,e,t+2*cr[s++]),co(0,4,8,12,e,t+2*cr[s++]),cs(1,5,9,13,e,t+2*cr[s++]),co(1,5,9,13,e,t+2*cr[s++]),cs(2,6,10,14,e,t+2*cr[s++]),co(2,6,10,14,e,t+2*cr[s++]),cs(3,7,11,15,e,t+2*cr[s++]),co(3,7,11,15,e,t+2*cr[s++]),cs(0,5,10,15,e,t+2*cr[s++]),co(0,5,10,15,e,t+2*cr[s++]),cs(1,6,11,12,e,t+2*cr[s++]),co(1,6,11,12,e,t+2*cr[s++]),cs(2,7,8,13,e,t+2*cr[s++]),co(2,7,8,13,e,t+2*cr[s++]),cs(3,4,9,14,e,t+2*cr[s++]),co(3,4,9,14,e,t+2*cr[s++]);this.v0l^=cn[0]^cn[16],this.v0h^=cn[1]^cn[17],this.v1l^=cn[2]^cn[18],this.v1h^=cn[3]^cn[19],this.v2l^=cn[4]^cn[20],this.v2h^=cn[5]^cn[21],this.v3l^=cn[6]^cn[22],this.v3h^=cn[7]^cn[23],this.v4l^=cn[8]^cn[24],this.v4h^=cn[9]^cn[25],this.v5l^=cn[10]^cn[26],this.v5h^=cn[11]^cn[27],this.v6l^=cn[12]^cn[28],this.v6h^=cn[13]^cn[29],this.v7l^=cn[14]^cn[30],this.v7h^=cn[15]^cn[31],fp(cn)}destroy(){this.destroyed=!0,fp(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}function cu(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function cf(e){if("boolean"!=typeof e)throw Error(`boolean expected, not ${e}`)}function cc(e){if(!Number.isSafeInteger(e)||e<0)throw Error("positive integer expected, got "+e)}function cl(e,...t){if(!cu(e))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function cd(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function cp(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function cg(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}!function(e){let t=(t,r)=>e(r).update(fA(t)).digest(),r=e({});t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t)}(e=>new ch(e)),Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;const cb=68===new Uint8Array(new Uint32Array([0x11223344]).buffer)[0];function cy(e){if("string"==typeof e)e=function(e){if("string"!=typeof e)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}(e);else if(cu(e))e=cw(e);else throw Error("Uint8Array expected, got "+typeof e);return e}function cm(e,t,r=!0){if(void 0===t)return new Uint8Array(e);if(t.length!==e)throw Error("invalid output length, expected "+e+", got: "+t.length);if(r&&t.byteOffset%4!=0)throw Error("invalid output, must be aligned");return t}function cv(e,t,r,i){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,i);let n=BigInt(32),s=BigInt(0xffffffff),o=Number(r>>n&s),a=Number(r&s),h=4*!!i,u=4*!i;e.setUint32(t+h,o,i),e.setUint32(t+u,a,i)}function cw(e){return Uint8Array.from(e)}const cD=e=>Uint8Array.from(e.split("").map(e=>e.charCodeAt(0))),cx=cD("expand 16-byte k"),cE=cD("expand 32-byte k"),c_=cp(cx),cS=cp(cE);function cI(e,t){return e<<t|e>>>32-t}function cA(e){return e.byteOffset%4==0}const cM=0x100000000-1,cC=new Uint32Array,cO=(e,t)=>255&e[t++]|(255&e[t++])<<8;class cP{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,cl(e=cy(e),32);let t=cO(e,0),r=cO(e,2),i=cO(e,4),n=cO(e,6),s=cO(e,8),o=cO(e,10),a=cO(e,12),h=cO(e,14);this.r[0]=8191&t,this.r[1]=(t>>>13|r<<3)&8191,this.r[2]=(r>>>10|i<<6)&7939,this.r[3]=(i>>>7|n<<9)&8191,this.r[4]=(n>>>4|s<<12)&255,this.r[5]=s>>>1&8190,this.r[6]=(s>>>14|o<<2)&8191,this.r[7]=(o>>>11|a<<5)&8065,this.r[8]=(a>>>8|h<<8)&8191,this.r[9]=h>>>5&127;for(let t=0;t<8;t++)this.pad[t]=cO(e,16+2*t)}process(e,t,r=!1){let{h:i,r:n}=this,s=n[0],o=n[1],a=n[2],h=n[3],u=n[4],f=n[5],c=n[6],l=n[7],d=n[8],p=n[9],g=cO(e,t+0),b=cO(e,t+2),y=cO(e,t+4),m=cO(e,t+6),v=cO(e,t+8),w=cO(e,t+10),D=cO(e,t+12),x=cO(e,t+14),E=i[0]+(8191&g),_=i[1]+((g>>>13|b<<3)&8191),S=i[2]+((b>>>10|y<<6)&8191),I=i[3]+((y>>>7|m<<9)&8191),A=i[4]+((m>>>4|v<<12)&8191),M=i[5]+(v>>>1&8191),C=i[6]+((v>>>14|w<<2)&8191),O=i[7]+((w>>>11|D<<5)&8191),P=i[8]+((D>>>8|x<<8)&8191),R=i[9]+(x>>>5|2048*!r),T=0,N=0+E*s+5*p*_+5*d*S+5*l*I+5*c*A;T=N>>>13,N&=8191,N+=5*f*M+5*u*C+5*h*O+5*a*P+5*o*R,T+=N>>>13,N&=8191;let B=T+E*o+_*s+5*p*S+5*d*I+5*l*A;T=B>>>13,B&=8191,B+=5*c*M+5*f*C+5*u*O+5*h*P+5*a*R,T+=B>>>13,B&=8191;let L=T+E*a+_*o+S*s+5*p*I+5*d*A;T=L>>>13,L&=8191,L+=5*l*M+5*c*C+5*f*O+5*u*P+5*h*R,T+=L>>>13,L&=8191;let k=T+E*h+_*a+S*o+I*s+5*p*A;T=k>>>13,k&=8191,k+=5*d*M+5*l*C+5*c*O+5*f*P+5*u*R,T+=k>>>13,k&=8191;let U=T+E*u+_*h+S*a+I*o+A*s;T=U>>>13,U&=8191,U+=5*p*M+5*d*C+5*l*O+5*c*P+5*f*R,T+=U>>>13,U&=8191;let z=T+E*f+_*u+S*h+I*a+A*o;T=z>>>13,z&=8191,z+=M*s+5*p*C+5*d*O+5*l*P+5*c*R,T+=z>>>13,z&=8191;let j=T+E*c+_*f+S*u+I*h+A*a;T=j>>>13,j&=8191,j+=M*o+C*s+5*p*O+5*d*P+5*l*R,T+=j>>>13,j&=8191;let q=T+E*l+_*c+S*f+I*u+A*h;T=q>>>13,q&=8191,q+=M*a+C*o+O*s+5*p*P+5*d*R,T+=q>>>13,q&=8191;let F=T+E*d+_*l+S*c+I*f+A*u;T=F>>>13,F&=8191,F+=M*h+C*a+O*o+P*s+5*p*R,T+=F>>>13,F&=8191;let H=T+E*p+_*d+S*l+I*c+A*f;T=H>>>13,H&=8191,H+=M*u+C*h+O*a+P*o+R*s,T+=H>>>13,H&=8191,N=8191&(T=(T=(T<<2)+T|0)+N|0),T>>>=13,B+=T,i[0]=N,i[1]=B,i[2]=L,i[3]=k,i[4]=U,i[5]=z,i[6]=j,i[7]=q,i[8]=F,i[9]=H}finalize(){let{h:e,pad:t}=this,r=new Uint16Array(10),i=e[1]>>>13;e[1]&=8191;for(let t=2;t<10;t++)e[t]+=i,i=e[t]>>>13,e[t]&=8191;e[0]+=5*i,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,r[0]=e[0]+5,i=r[0]>>>13,r[0]&=8191;for(let t=1;t<10;t++)r[t]=e[t]+i,i=r[t]>>>13,r[t]&=8191;r[9]-=8192;let n=(1^i)-1;for(let e=0;e<10;e++)r[e]&=n;n=~n;for(let t=0;t<10;t++)e[t]=e[t]&n|r[t];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let s=e[0]+t[0];e[0]=65535&s;for(let r=1;r<8;r++)s=(e[r]+t[r]|0)+(s>>>16)|0,e[r]=65535&s;cg(r)}update(e){cd(this),cl(e=cy(e));let{buffer:t,blockLen:r}=this,i=e.length;for(let n=0;n<i;){let s=Math.min(r-this.pos,i-n);if(s===r){for(;r<=i-n;n+=r)this.process(e,n);continue}t.set(e.subarray(n,n+s),this.pos),this.pos+=s,n+=s,this.pos===r&&(this.process(t,0,!1),this.pos=0)}return this}destroy(){cg(this.h,this.r,this.buffer,this.pad)}digestInto(e){cd(this),function(e,t){cl(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}(e,this),this.finished=!0;let{buffer:t,h:r}=this,{pos:i}=this;if(i){for(t[i++]=1;i<16;i++)t[i]=0;this.process(t,0,!0)}this.finalize();let n=0;for(let t=0;t<8;t++)e[n++]=r[t]>>>0,e[n++]=r[t]>>>8;return e}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}}const cR=function(e){let t=(t,r)=>e(r).update(cy(t)).digest(),r=e(new Uint8Array(32));return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t}(e=>new cP(e)),cT=function(e,t){let{allowShortKeys:r,extendNonceFn:i,counterLength:n,counterRight:s,rounds:o}=function(e,t){if(null==t||"object"!=typeof t)throw Error("options must be defined");return Object.assign(e,t)}({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if("function"!=typeof e)throw Error("core must be a function");return cc(n),cc(o),cf(s),cf(r),(t,a,h,u,f=0)=>{cl(t),cl(a),cl(h);let c=h.length;if(void 0===u&&(u=new Uint8Array(c)),cl(u),cc(f),f<0||f>=cM)throw Error("arx: counter overflow");if(u.length<c)throw Error(`arx: output (${u.length}) is shorter than data (${c})`);let l=[],d=t.length,p,g;if(32===d)l.push(p=cw(t)),g=cS;else if(16===d&&r)(p=new Uint8Array(32)).set(t),p.set(t,16),g=c_,l.push(p);else throw Error(`arx: invalid 32-byte key, got length=${d}`);cA(a)||l.push(a=cw(a));let b=cp(p);if(i){if(24!==a.length)throw Error("arx: extended nonce must be 24 bytes");i(g,b,cp(a.subarray(0,16)),b),a=a.subarray(16)}let y=16-n;if(y!==a.length)throw Error(`arx: nonce must be ${y} or 16 bytes`);if(12!==y){let e=new Uint8Array(12);e.set(a,s?0:12-a.length),a=e,l.push(a)}return function(e,t,r,i,n,s,o,a){let h=n.length,u=new Uint8Array(64),f=cp(u),c=cA(n)&&cA(s),l=c?cp(n):cC,d=c?cp(s):cC;for(let p=0;p<h;o++){if(e(t,r,i,f,o,a),o>=cM)throw Error("arx: counter overflow");let g=Math.min(64,h-p);if(c&&64===g){let e=p/4;if(p%4!=0)throw Error("arx: invalid block position");for(let t=0,r;t<16;t++)d[r=e+t]=l[r]^f[t];p+=64;continue}for(let e=0,t;e<g;e++)s[t=p+e]=n[t]^u[e];p+=g}}(e,g,b,cp(a),h,u,f,o),cg(...l),u}}(function(e,t,r,i,n,s=20){let o=e[0],a=e[1],h=e[2],u=e[3],f=t[0],c=t[1],l=t[2],d=t[3],p=t[4],g=t[5],b=t[6],y=t[7],m=r[0],v=r[1],w=r[2],D=o,x=a,E=h,_=u,S=f,I=c,A=l,M=d,C=p,O=g,P=b,R=y,T=n,N=m,B=v,L=w;for(let e=0;e<s;e+=2)C=C+(T=cI(T^(D=D+S|0),16))|0,D=D+(S=cI(S^C,12))|0,C=C+(T=cI(T^D,8))|0,S=cI(S^C,7),O=O+(N=cI(N^(x=x+I|0),16))|0,x=x+(I=cI(I^O,12))|0,O=O+(N=cI(N^x,8))|0,I=cI(I^O,7),P=P+(B=cI(B^(E=E+A|0),16))|0,E=E+(A=cI(A^P,12))|0,P=P+(B=cI(B^E,8))|0,A=cI(A^P,7),R=R+(L=cI(L^(_=_+M|0),16))|0,_=_+(M=cI(M^R,12))|0,R=R+(L=cI(L^_,8))|0,M=cI(M^R,7),P=P+(L=cI(L^(D=D+I|0),16))|0,D=D+(I=cI(I^P,12))|0,P=P+(L=cI(L^D,8))|0,I=cI(I^P,7),R=R+(T=cI(T^(x=x+A|0),16))|0,x=x+(A=cI(A^R,12))|0,R=R+(T=cI(T^x,8))|0,A=cI(A^R,7),C=C+(N=cI(N^(E=E+M|0),16))|0,E=E+(M=cI(M^C,12))|0,C=C+(N=cI(N^E,8))|0,M=cI(M^C,7),O=O+(B=cI(B^(_=_+S|0),16))|0,_=_+(S=cI(S^O,12))|0,O=O+(B=cI(B^_,8))|0,S=cI(S^O,7);let k=0;i[k++]=o+D|0,i[k++]=a+x|0,i[k++]=h+E|0,i[k++]=u+_|0,i[k++]=f+S|0,i[k++]=c+I|0,i[k++]=l+A|0,i[k++]=d+M|0,i[k++]=p+C|0,i[k++]=g+O|0,i[k++]=b+P|0,i[k++]=y+R|0,i[k++]=n+T|0,i[k++]=m+N|0,i[k++]=v+B|0,i[k++]=w+L|0},{counterRight:!1,counterLength:4,allowShortKeys:!1}),cN=new Uint8Array(16),cB=(e,t)=>{e.update(t);let r=t.length%16;r&&e.update(cN.subarray(r))},cL=new Uint8Array(32);function ck(e,t,r,i,n){let s=e(t,r,cL),o=cR.create(s);n&&cB(o,n),cB(o,i);let a=function(e,t,r){cf(r);let i=new Uint8Array(16),n=new DataView(i.buffer,i.byteOffset,i.byteLength);return cv(n,0,BigInt(t),r),cv(n,8,BigInt(e),r),i}(i.length,n?n.length:0,!0);o.update(a);let h=o.digest();return cg(s,a),h}const cU=((e,t)=>{function r(i,...n){if(cl(i),!cb)throw Error("Non little-endian hardware is not yet supported");if(void 0!==e.nonceLength){let t=n[0];if(!t)throw Error("nonce / iv required");e.varSizeNonce?cl(t):cl(t,e.nonceLength)}let s=e.tagLength;s&&void 0!==n[1]&&cl(n[1]);let o=t(i,...n),a=(e,t)=>{if(void 0!==t){if(2!==e)throw Error("cipher output not supported");cl(t)}},h=!1;return{encrypt(e,t){if(h)throw Error("cannot encrypt() twice with same key + nonce");return h=!0,cl(e),a(o.encrypt.length,t),o.encrypt(e,t)},decrypt(e,t){if(cl(e),s&&e.length<s)throw Error("invalid ciphertext length: smaller than tagLength="+s);return a(o.decrypt.length,t),o.decrypt(e,t)}}}return Object.assign(r,e),r})({blockSize:64,nonceLength:12,tagLength:16},(e,t,r)=>({encrypt(i,n){let s=i.length;(n=cm(s+16,n,!1)).set(i);let o=n.subarray(0,-16);cT(e,t,o,o,1);let a=ck(cT,e,t,o,r);return n.set(a,s),cg(a),n},decrypt(i,n){n=cm(i.length-16,n,!1);let s=i.subarray(0,-16),o=i.subarray(-16),a=ck(cT,e,t,s,r);if(!function(e,t){if(e.length!==t.length)return!1;let r=0;for(let i=0;i<e.length;i++)r|=e[i]^t[i];return 0===r}(o,a))throw Error("invalid tag");return n.set(i.subarray(0,-16)),cT(e,t,n,n,1),cg(a),n}}));class cz extends fC{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,ff(e);let r=fA(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,n=new Uint8Array(i);n.set(r.length>i?e.create().update(r).digest():r);for(let e=0;e<n.length;e++)n[e]^=54;this.iHash.update(n),this.oHash=e.create();for(let e=0;e<n.length;e++)n[e]^=106;this.oHash.update(n),fp(n)}update(e){return fc(this),this.iHash.update(e),this}digestInto(e){fc(this),fu(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:i,destroyed:n,blockLen:s,outputLen:o}=this;return e.finished=i,e.destroyed=n,e.blockLen=s,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const cj=(e,t,r)=>new cz(e,t).update(r).digest();cj.create=(e,t)=>new cz(e,t);const cq=Uint8Array.from([0]),cF=Uint8Array.of(),cH=BigInt(0),cK=BigInt(1);function c$(e,t=""){if("boolean"!=typeof e)throw Error((t&&`"${t}"`)+"expected boolean, got type="+typeof e);return e}function cV(e,t,r=""){let i=fa(e),n=e?.length,s=void 0!==t;if(!i||s&&n!==t)throw Error((r&&`"${r}" `)+"expected Uint8Array"+(s?` of length ${t}`:"")+", got "+(i?`length=${n}`:`type=${typeof e}`));return e}function cW(e){let t=e.toString(16);return 1&t.length?"0"+t:t}function cG(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return""===e?cH:BigInt("0x"+e)}function cY(e){return fu(e),cG(fE(Uint8Array.from(e).reverse()))}function cZ(e,t){return fS(e.toString(16).padStart(2*t,"0"))}function cJ(e,t){return cZ(e,t).reverse()}function cX(e,t,r){let i;if("string"==typeof t)try{i=fS(t)}catch(t){throw Error(e+" must be hex string or Uint8Array, cause: "+t)}else if(fa(t))i=Uint8Array.from(t);else throw Error(e+" must be hex string or Uint8Array");let n=i.length;if("number"==typeof r&&n!==r)throw Error(e+" of length "+r+" expected, got "+n);return i}const cQ=e=>"bigint"==typeof e&&cH<=e;function c0(e,t,r,i){if(!(cQ(t)&&cQ(r)&&cQ(i))||!(r<=t)||!(t<i))throw Error("expected valid "+e+": "+r+" <= n < "+i+", got "+t)}function c1(e){let t;for(t=0;e>cH;e>>=cK,t+=1);return t}const c3=e=>(cK<<BigInt(e))-cK;function c2(e,t,r={}){if(!e||"object"!=typeof e)throw Error("expected valid options object");function i(t,r,i){let n=e[t];if(i&&void 0===n)return;let s=typeof n;if(s!==r||null===n)throw Error(`param "${t}" is invalid: expected ${r}, got ${s}`)}Object.entries(t).forEach(([e,t])=>i(e,t,!1)),Object.entries(r).forEach(([e,t])=>i(e,t,!0))}function c8(e){let t=new WeakMap;return(r,...i)=>{let n=t.get(r);if(void 0!==n)return n;let s=e(r,...i);return t.set(r,s),s}}const c6=BigInt(0),c5=BigInt(1),c4=BigInt(2),c9=BigInt(3),c7=BigInt(4),le=BigInt(5),lt=BigInt(7),lr=BigInt(8),li=BigInt(9),ln=BigInt(16);function ls(e,t){let r=e%t;return r>=c6?r:t+r}function lo(e,t,r){let i=e;for(;t-- >c6;)i*=i,i%=r;return i}function la(e,t){if(e===c6)throw Error("invert: expected non-zero number");if(t<=c6)throw Error("invert: expected positive modulus, got "+t);let r=ls(e,t),i=t,n=c6,s=c5;for(;r!==c6;){let e=i/r,t=i%r,o=n-s*e;i=r,r=t,n=s,s=o}if(i!==c5)throw Error("invert: does not exist");return ls(n,t)}function lh(e,t,r){if(!e.eql(e.sqr(t),r))throw Error("Cannot find square root")}function lu(e,t){let r=(e.ORDER+c5)/c7,i=e.pow(t,r);return lh(e,i,t),i}function lf(e,t){let r=(e.ORDER-le)/lr,i=e.mul(t,c4),n=e.pow(i,r),s=e.mul(t,n),o=e.mul(e.mul(s,c4),n),a=e.mul(s,e.sub(o,e.ONE));return lh(e,a,t),a}function lc(e){if(e<c9)throw Error("sqrt is not defined for small field");let t=e-c5,r=0;for(;t%c4===c6;)t/=c4,r++;let i=c4,n=lb(e);for(;1===lp(n,i);)if(i++>1e3)throw Error("Cannot find square root: probably non-prime P");if(1===r)return lu;let s=n.pow(i,t),o=(t+c5)/c4;return function(e,i){if(e.is0(i))return i;if(1!==lp(e,i))throw Error("Cannot find square root");let n=r,a=e.mul(e.ONE,s),h=e.pow(i,t),u=e.pow(i,o);for(;!e.eql(h,e.ONE);){if(e.is0(h))return e.ZERO;let t=1,r=e.sqr(h);for(;!e.eql(r,e.ONE);)if(t++,r=e.sqr(r),t===n)throw Error("Cannot find square root");let i=c5<<BigInt(n-t-1),s=e.pow(a,i);n=t,a=e.sqr(s),h=e.mul(h,a),u=e.mul(u,s)}return u}}const ll=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function ld(e,t,r=!1){let i=Array(t.length).fill(r?e.ZERO:void 0),n=t.reduce((t,r,n)=>e.is0(r)?t:(i[n]=t,e.mul(t,r)),e.ONE),s=e.inv(n);return t.reduceRight((t,r,n)=>e.is0(r)?t:(i[n]=e.mul(t,i[n]),e.mul(t,r)),s),i}function lp(e,t){let r=(e.ORDER-c5)/c4,i=e.pow(t,r),n=e.eql(i,e.ONE),s=e.eql(i,e.ZERO),o=e.eql(i,e.neg(e.ONE));if(!n&&!s&&!o)throw Error("invalid Legendre symbol result");return n?1:s?0:-1}function lg(e,t){void 0!==t&&fh(t);let r=void 0!==t?t:e.toString(2).length,i=Math.ceil(r/8);return{nBitLength:r,nByteLength:i}}function lb(e,t,r=!1,i={}){let n;if(e<=c6)throw Error("invalid field: expected ORDER > 0, got "+e);let s,o,a=!1,h;if("object"==typeof t&&null!=t){if(i.sqrt||r)throw Error("cannot specify opts in two arguments");t.BITS&&(s=t.BITS),t.sqrt&&(o=t.sqrt),"boolean"==typeof t.isLE&&(r=t.isLE),"boolean"==typeof t.modFromBytes&&(a=t.modFromBytes),h=t.allowedLengths}else"number"==typeof t&&(s=t),i.sqrt&&(o=i.sqrt);let{nBitLength:u,nByteLength:f}=lg(e,s);if(f>2048)throw Error("invalid field: expected ORDER of <= 2048 bytes");let c=Object.freeze({ORDER:e,isLE:r,BITS:u,BYTES:f,MASK:c3(u),ZERO:c6,ONE:c5,allowedLengths:h,create:t=>ls(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error("invalid field element: expected bigint, got "+typeof t);return c6<=t&&t<e},is0:e=>e===c6,isValidNot0:e=>!c.is0(e)&&c.isValid(e),isOdd:e=>(e&c5)===c5,neg:t=>ls(-t,e),eql:(e,t)=>e===t,sqr:t=>ls(t*t,e),add:(t,r)=>ls(t+r,e),sub:(t,r)=>ls(t-r,e),mul:(t,r)=>ls(t*r,e),pow:(e,t)=>(function(e,t,r){if(r<c6)throw Error("invalid exponent, negatives unsupported");if(r===c6)return e.ONE;if(r===c5)return t;let i=e.ONE,n=t;for(;r>c6;)r&c5&&(i=e.mul(i,n)),n=e.sqr(n),r>>=c5;return i})(c,e,t),div:(t,r)=>ls(t*la(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>la(t,e),sqrt:o||(t=>(n||(n=e%c7===c9?lu:e%lr===le?lf:e%ln===li?function(e){let t=lb(e),r=lc(e),i=r(t,t.neg(t.ONE)),n=r(t,i),s=r(t,t.neg(i)),o=(e+lt)/ln;return(e,t)=>{let r=e.pow(t,o),a=e.mul(r,i),h=e.mul(r,n),u=e.mul(r,s),f=e.eql(e.sqr(a),t),c=e.eql(e.sqr(h),t);r=e.cmov(r,a,f),a=e.cmov(u,h,c);let l=e.eql(e.sqr(a),t),d=e.cmov(r,a,l);return lh(e,d,t),d}}(e):lc(e)),n(c,t))),toBytes:e=>r?cJ(e,f):cZ(e,f),fromBytes:(t,i=!0)=>{if(h){if(!h.includes(t.length)||t.length>f)throw Error("Field.fromBytes: expected "+h+" bytes, got "+t.length);let e=new Uint8Array(f);e.set(t,r?0:e.length-t.length),t=e}if(t.length!==f)throw Error("Field.fromBytes: expected "+f+" bytes, got "+t.length);let n=r?cY(t):cG(fE(t));if(a&&(n=ls(n,e)),!i&&!c.isValid(n))throw Error("invalid field element: outside of range 0..ORDER");return n},invertBatch:e=>ld(c,e),cmov:(e,t,r)=>r?t:e});return Object.freeze(c)}function ly(e){if("bigint"!=typeof e)throw Error("field order must be bigint");return Math.ceil(e.toString(2).length/8)}function lm(e){let t=ly(e);return t+Math.ceil(t/2)}const lv=BigInt(0),lw=BigInt(1);function lD(e,t){let r=t.negate();return e?r:t}function lx(e,t){let r=ld(e.Fp,t.map(e=>e.Z));return t.map((t,i)=>e.fromAffine(t.toAffine(r[i])))}function lE(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw Error("invalid window size, expected [1.."+t+"], got W="+e)}function l_(e,t){lE(e,t);let r=Math.ceil(t/e)+1,i=2**(e-1),n=2**e;return{windows:r,windowSize:i,mask:c3(e),maxNumber:n,shiftBy:BigInt(e)}}function lS(e,t,r){let{windowSize:i,mask:n,maxNumber:s,shiftBy:o}=r,a=Number(e&n),h=e>>o;a>i&&(a-=s,h+=lw);let u=t*i;return{nextN:h,offset:u+Math.abs(a)-1,isZero:0===a,isNeg:a<0,isNegF:t%2!=0,offsetF:u}}const lI=new WeakMap,lA=new WeakMap;function lM(e){return lA.get(e)||1}function lC(e){if(e!==lv)throw Error("invalid wNAF")}class lO{constructor(e,t){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=t}_unsafeLadder(e,t,r=this.ZERO){let i=e;for(;t>lv;)t&lw&&(r=r.add(i)),i=i.double(),t>>=lw;return r}precomputeWindow(e,t){let{windows:r,windowSize:i}=l_(t,this.bits),n=[],s=e,o=s;for(let e=0;e<r;e++){o=s,n.push(o);for(let e=1;e<i;e++)o=o.add(s),n.push(o);s=o.double()}return n}wNAF(e,t,r){if(!this.Fn.isValid(r))throw Error("invalid scalar");let i=this.ZERO,n=this.BASE,s=l_(e,this.bits);for(let e=0;e<s.windows;e++){let{nextN:o,offset:a,isZero:h,isNeg:u,isNegF:f,offsetF:c}=lS(r,e,s);r=o,h?n=n.add(lD(f,t[c])):i=i.add(lD(u,t[a]))}return lC(r),{p:i,f:n}}wNAFUnsafe(e,t,r,i=this.ZERO){let n=l_(e,this.bits);for(let e=0;e<n.windows&&r!==lv;e++){let{nextN:s,offset:o,isZero:a,isNeg:h}=lS(r,e,n);if(r=s,!a){let e=t[o];i=i.add(h?e.negate():e)}}return lC(r),i}getPrecomputes(e,t,r){let i=lI.get(t);return i||(i=this.precomputeWindow(t,e),1!==e&&("function"==typeof r&&(i=r(i)),lI.set(t,i))),i}cached(e,t,r){let i=lM(e);return this.wNAF(i,this.getPrecomputes(i,e,r),t)}unsafe(e,t,r,i){let n=lM(e);return 1===n?this._unsafeLadder(e,t,i):this.wNAFUnsafe(n,this.getPrecomputes(n,e,r),t,i)}createCache(e,t){lE(t,this.bits),lA.set(e,t),lI.delete(e)}hasCache(e){return 1!==lM(e)}}function lP(e,t,r){if(!t)return lb(e,{isLE:r});if(t.ORDER!==e)throw Error("Field.ORDER must match order: Fp == p, Fn == n");return c2(t,ll.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"})),t}BigInt(0),BigInt(1),BigInt(2),BigInt(8),fI("HashToScalar-");const lR=BigInt(0),lT=BigInt(1),lN=BigInt(2),lB=BigInt(1),lL=BigInt(2),lk=BigInt(3),lU=BigInt(5),lz=BigInt(8),lj=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed");function lq(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}const lF=lb({p:lj,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:lz,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")}.p,{isLE:!0}),lH=(()=>{let e=lF.ORDER;return function(e){let{P:t,type:r,adjustScalarBytes:i,powPminus2:n,randomBytes:s}=(c2(e,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...e})),o="x25519"===r;if(!o&&"x448"!==r)throw Error("invalid type");let a=s||fP,h=o?255:448,u=o?32:56,f=BigInt(o?9:5),c=BigInt(o?121665:39081),l=o?lN**BigInt(254):lN**BigInt(447),d=l+(o?BigInt(8)*lN**BigInt(251)-lT:BigInt(4)*lN**BigInt(445)-lT)+lT,p=e=>ls(e,t),g=cJ(p(f),u);function b(e,r){let s=function(e,r){c0("u",e,lR,t),c0("scalar",r,l,d);let i=lT,s=lR,o=e,a=lT,u=lR;for(let t=BigInt(h-1);t>=lR;t--){let n=r>>t&lT;u^=n,({x_2:i,x_3:o}=m(u,i,o)),({x_2:s,x_3:a}=m(u,s,a)),u=n;let h=i+s,f=p(h*h),l=i-s,d=p(l*l),g=f-d,b=o+a,y=p((o-a)*h),v=p(b*l),w=y+v,D=y-v;o=p(w*w),a=p(e*p(D*D)),i=p(f*d),s=p(g*(f+p(c*g)))}return{x_2:i,x_3:o}=m(u,i,o),{x_2:s,x_3:a}=m(u,s,a),p(i*n(s))}(function(e){let t=cX("u coordinate",e,u);return o&&(t[31]&=127),p(cY(t))}(r),cY(i(cX("scalar",e,u))));if(s===lR)throw Error("invalid private or public key received");return cJ(p(s),u)}function y(e){return b(e,g)}function m(e,t,r){let i=p(e*(t-r));return{x_2:t=p(t-i),x_3:r=p(r+i)}}let v={secretKey:u,publicKey:u,seed:u},w=(e=a(u))=>(fu(e,v.seed),e);return{keygen:function(e){let t=w(e);return{secretKey:t,publicKey:y(t)}},getSharedSecret:(e,t)=>b(e,t),getPublicKey:e=>y(e),scalarMult:b,scalarMultBase:y,utils:{randomSecretKey:w,randomPrivateKey:w},GuBytes:g.slice(),lengths:v}}({P:e,type:"x25519",powPminus2:t=>{let{pow_p_5_8:r,b2:i}=function(e){let t=BigInt(10),r=BigInt(20),i=BigInt(40),n=BigInt(80),s=e*e%lj*e%lj,o=lo(s,lL,lj)*s%lj,a=lo(o,lB,lj)*e%lj,h=lo(a,lU,lj)*a%lj,u=lo(h,t,lj)*h%lj,f=lo(u,r,lj)*u%lj,c=lo(f,i,lj)*f%lj,l=lo(c,n,lj)*c%lj,d=lo(l,n,lj)*c%lj,p=lo(d,t,lj)*h%lj;return{pow_p_5_8:lo(p,lL,lj)*e%lj,b2:s}}(t);return ls(lo(r,lk,e)*i,e)},adjustScalarBytes:lq})})(),lK=(e,t)=>(e+(e>=0?t:-t)/lZ)/t;function l$(e){if(!["compact","recovered","der"].includes(e))throw Error('Signature format must be "compact", "recovered", or "der"');return e}function lV(e,t){let r={};for(let i of Object.keys(t))r[i]=void 0===e[i]?t[i]:e[i];return c$(r.lowS,"lowS"),c$(r.prehash,"prehash"),void 0!==r.format&&l$(r.format),r}const lW={Err:class extends Error{constructor(e=""){super(e)}},_tlv:{encode:(e,t)=>{let{Err:r}=lW;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(1&t.length)throw new r("tlv.encode: unpadded data");let i=t.length/2,n=cW(i);if(n.length/2&128)throw new r("tlv.encode: long form length too big");let s=i>127?cW(n.length/2|128):"";return cW(e)+s+n+t},decode(e,t){let{Err:r}=lW,i=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[i++]!==e)throw new r("tlv.decode: wrong tlv");let n=t[i++],s=0;if(128&n){let e=127&n;if(!e)throw new r("tlv.decode(long): indefinite length not supported");if(e>4)throw new r("tlv.decode(long): byte length is too big");let o=t.subarray(i,i+e);if(o.length!==e)throw new r("tlv.decode: length bytes not complete");if(0===o[0])throw new r("tlv.decode(long): zero leftmost byte");for(let e of o)s=s<<8|e;if(i+=e,s<128)throw new r("tlv.decode(long): not minimal encoding")}else s=n;let o=t.subarray(i,i+s);if(o.length!==s)throw new r("tlv.decode: wrong value length");return{v:o,l:t.subarray(i+s)}}},_int:{encode(e){let{Err:t}=lW;if(e<lG)throw new t("integer: negative integers are not allowed");let r=cW(e);if(8&Number.parseInt(r[0],16)&&(r="00"+r),1&r.length)throw new t("unexpected DER parsing assertion: unpadded hex");return r},decode(e){let{Err:t}=lW;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return cG(fE(e))}},toSig(e){let{Err:t,_int:r,_tlv:i}=lW,n=cX("signature",e),{v:s,l:o}=i.decode(48,n);if(o.length)throw new t("invalid signature: left bytes after parsing");let{v:a,l:h}=i.decode(2,s),{v:u,l:f}=i.decode(2,h);if(f.length)throw new t("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(u)}},hexFromSig(e){let{_tlv:t,_int:r}=lW,i=t.encode(2,r.encode(e.r)),n=t.encode(2,r.encode(e.s));return t.encode(48,i+n)}},lG=BigInt(0),lY=BigInt(1),lZ=BigInt(2),lJ=BigInt(3),lX=BigInt(4);function lQ(e,t){let r,{BYTES:i}=e;if("bigint"==typeof t)r=t;else{let n=cX("private key",t);try{r=e.fromBytes(n)}catch{throw Error(`invalid private key: expected ui8a of size ${i}, got ${typeof t}`)}}if(!e.isValidNot0(r))throw Error("invalid private key: out of range [1..N-1]");return r}function l0(e){return Uint8Array.of(e?2:3)}function l1(e,t){return{secretKey:t.BYTES,publicKey:1+e.BYTES,publicKeyUncompressed:1+2*e.BYTES,publicKeyHasPrefix:!0,signature:2*t.BYTES}}function l3(e,t){let r=t=>(function(e){let{CURVE:t,curveOpts:r,hash:i,ecdsaOpts:n}=function(e){let{CURVE:t,curveOpts:r}=function(e){let t={a:e.a,b:e.b,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},r=e.Fp,i=e.allowedPrivateKeyLengths?Array.from(new Set(e.allowedPrivateKeyLengths.map(e=>Math.ceil(e/2)))):void 0,n={Fp:r,Fn:lb(t.n,{BITS:e.nBitLength,allowedLengths:i,modFromBytes:e.wrapPrivateKey}),allowInfinityPoint:e.allowInfinityPoint,endo:e.endo,isTorsionFree:e.isTorsionFree,clearCofactor:e.clearCofactor,fromBytes:e.fromBytes,toBytes:e.toBytes};return{CURVE:t,curveOpts:n}}(e),i={hmac:e.hmac,randomBytes:e.randomBytes,lowS:e.lowS,bits2int:e.bits2int,bits2int_modN:e.bits2int_modN};return{CURVE:t,curveOpts:r,hash:e.hash,ecdsaOpts:i}}(e),s=function(e,t,r={}){ff(t),c2(r,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});let i=r.randomBytes||fP,n=r.hmac||((e,...r)=>cj(t,e,fM(...r))),{Fp:s,Fn:o}=e,{ORDER:a,BITS:h}=o,{keygen:u,getPublicKey:f,getSharedSecret:c,utils:l,lengths:d}=function(e,t={}){let{Fn:r}=e,i=t.randomBytes||fP,n=Object.assign(l1(e.Fp,r),{seed:lm(r.ORDER)});function s(e){try{return!!lQ(r,e)}catch{return!1}}function o(e=i(n.seed)){return function(e,t,r=!1){let i=e.length,n=ly(t),s=lm(t);if(i<16||i<s||i>1024)throw Error("expected "+s+"-1024 bytes of input, got "+i);let o=ls(r?cY(e):cG(fE(e)),t-c5)+c5;return r?cJ(o,n):cZ(o,n)}(cV(e,n.seed,"seed"),r.ORDER)}function a(t,i=!0){return e.BASE.multiply(lQ(r,t)).toBytes(i)}function h(t){if("bigint"==typeof t)return!1;if(t instanceof e)return!0;let{secretKey:i,publicKey:s,publicKeyUncompressed:o}=n;if(r.allowedLengths||i===s)return;let a=cX("key",t).length;return a===s||a===o}return Object.freeze({getPublicKey:a,getSharedSecret:function(t,i,n=!0){if(!0===h(t))throw Error("first arg must be private key");if(!1===h(i))throw Error("second arg must be public key");let s=lQ(r,t);return e.fromHex(i).multiply(s).toBytes(n)},keygen:function(e){let t=o(e);return{secretKey:t,publicKey:a(t)}},Point:e,utils:{isValidSecretKey:s,isValidPublicKey:function(t,r){let{publicKey:i,publicKeyUncompressed:s}=n;try{let n=t.length;return(!0!==r||n===i)&&(!1!==r||n===s)&&!!e.fromBytes(t)}catch{return!1}},randomSecretKey:o,isValidPrivateKey:s,randomPrivateKey:o,normPrivateKeyToScalar:e=>lQ(r,e),precompute:(t=8,r=e.BASE)=>r.precompute(t,!1)},lengths:n})}(e,r),p={prehash:!1,lowS:"boolean"==typeof r.lowS&&r.lowS,format:void 0,extraEntropy:!1},g="compact";function b(e,t){if(!o.isValidNot0(t))throw Error(`invalid signature ${e}: out of range 1..Point.Fn.ORDER`);return t}class y{constructor(e,t,r){this.r=b("r",e),this.s=b("s",t),null!=r&&(this.recovery=r),Object.freeze(this)}static fromBytes(e,t=g){let r;if(!function(e,t){l$(t);let r=d.signature;cV(e,"compact"===t?r:"recovered"===t?r+1:void 0,`${t} signature`)}(e,t),"der"===t){let{r:t,s:r}=lW.toSig(cV(e));return new y(t,r)}"recovered"===t&&(r=e[0],t="compact",e=e.subarray(1));let i=o.BYTES,n=e.subarray(0,i),s=e.subarray(i,2*i);return new y(o.fromBytes(n),o.fromBytes(s),r)}static fromHex(e,t){return this.fromBytes(fS(e),t)}addRecoveryBit(e){return new y(this.r,this.s,e)}recoverPublicKey(t){let r=s.ORDER,{r:i,s:n,recovery:h}=this;if(null==h||![0,1,2,3].includes(h))throw Error("recovery id invalid");if(a*lZ<r&&h>1)throw Error("recovery id is ambiguous for h>1 curve");let u=2===h||3===h?i+a:i;if(!s.isValid(u))throw Error("recovery id 2 or 3 invalid");let f=s.toBytes(u),c=e.fromBytes(fM(l0((1&h)==0),f)),l=o.inv(u),d=v(cX("msgHash",t)),p=o.create(-d*l),g=o.create(n*l),b=e.BASE.multiplyUnsafe(p).add(c.multiplyUnsafe(g));if(b.is0())throw Error("point at infinify");return b.assertValidity(),b}hasHighS(){return this.s>a>>lY}toBytes(e=g){if(l$(e),"der"===e)return fS(lW.hexFromSig(this));let t=o.toBytes(this.r),r=o.toBytes(this.s);if("recovered"===e){if(null==this.recovery)throw Error("recovery bit must be present");return fM(Uint8Array.of(this.recovery),t,r)}return fM(t,r)}toHex(e){return fE(this.toBytes(e))}assertValidity(){}static fromCompact(e){return y.fromBytes(cX("sig",e),"compact")}static fromDER(e){return y.fromBytes(cX("sig",e),"der")}normalizeS(){return this.hasHighS()?new y(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return fE(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return fE(this.toBytes("compact"))}}let m=r.bits2int||function(e){if(e.length>8192)throw Error("input is too large");let t=cG(fE(e)),r=8*e.length-h;return r>0?t>>BigInt(r):t},v=r.bits2int_modN||function(e){return o.create(m(e))},w=c3(h);function D(e){return c0("num < 2^"+h,e,lG,w),o.toBytes(e)}function x(e,r){return cV(e,void 0,"message"),r?cV(t(e),void 0,"prehashed message"):e}return Object.freeze({keygen:u,getPublicKey:f,getSharedSecret:c,utils:l,lengths:d,Point:e,sign:function(r,s,h={}){let{seed:u,k2sig:f}=function(t,r,n){if(["recovered","canonical"].some(e=>e in n))throw Error("sign() legacy options not supported");let{lowS:s,prehash:h,extraEntropy:u}=lV(n,p),f=v(t=x(t,h)),c=lQ(o,r),l=[D(c),D(f)];if(null!=u&&!1!==u){let e=!0===u?i(d.secretKey):u;l.push(cX("extraEntropy",e))}return{seed:fM(...l),k2sig:function(t){let r=m(t);if(!o.isValidNot0(r))return;let i=o.inv(r),n=e.BASE.multiply(r).toAffine(),h=o.create(n.x);if(h===lG)return;let u=o.create(i*o.create(f+h*c));if(u===lG)return;let l=2*(n.x!==h)|Number(n.y&lY),d=u;return s&&u>a>>lY&&(d=o.neg(u),l^=1),new y(h,d,l)}}}(r=cX("message",r),s,h);return(function(e,t,r){if("number"!=typeof e||e<2)throw Error("hashLen must be a number");if("number"!=typeof t||t<2)throw Error("qByteLen must be a number");if("function"!=typeof r)throw Error("hmacFn must be a function");let i=e=>new Uint8Array(e),n=e=>Uint8Array.of(e),s=i(e),o=i(e),a=0,h=()=>{s.fill(1),o.fill(0),a=0},u=(...e)=>r(o,s,...e),f=(e=i(0))=>{o=u(n(0),e),s=u(),0!==e.length&&(o=u(n(1),e),s=u())},c=()=>{if(a++>=1e3)throw Error("drbg: tried 1000 values");let e=0,r=[];for(;e<t;){let t=(s=u()).slice();r.push(t),e+=s.length}return fM(...r)};return(e,t)=>{let r;for(h(),f(e);!(r=t(c()));)f();return h(),r}})(t.outputLen,o.BYTES,n)(u,f)},verify:function(t,r,i,n={}){let{lowS:s,prehash:a,format:h}=lV(n,p);if(i=cX("publicKey",i),r=x(cX("message",r),a),"strict"in n)throw Error("options.strict was renamed to lowS");let u=void 0===h?function(e){let t,r="string"==typeof e||fa(e),i=!r&&null!==e&&"object"==typeof e&&"bigint"==typeof e.r&&"bigint"==typeof e.s;if(!r&&!i)throw Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(i)t=new y(e.r,e.s);else if(r){try{t=y.fromBytes(cX("sig",e),"der")}catch(e){if(!(e instanceof lW.Err))throw e}if(!t)try{t=y.fromBytes(cX("sig",e),"compact")}catch{return!1}}return t||!1}(t):y.fromBytes(cX("sig",t),h);if(!1===u)return!1;try{let t=e.fromBytes(i);if(s&&u.hasHighS())return!1;let{r:n,s:a}=u,h=v(r),f=o.inv(a),c=o.create(h*f),l=o.create(n*f),d=e.BASE.multiplyUnsafe(c).add(t.multiplyUnsafe(l));return!d.is0()&&o.create(d.x)===n}catch{return!1}},recoverPublicKey:function(e,t,r={}){let{prehash:i}=lV(r,p);return t=x(t,i),y.fromBytes(e,"recovered").recoverPublicKey(t).toBytes()},Signature:y,hash:t})}(function(e,t={}){let r=function(e,t,r={},i){if(void 0===i&&(i="edwards"===e),!t||"object"!=typeof t)throw Error(`expected valid ${e} CURVE object`);for(let e of["p","n","h"]){let r=t[e];if(!("bigint"==typeof r&&r>lv))throw Error(`CURVE.${e} must be positive bigint`)}let n=lP(t.p,r.Fp,i),s=lP(t.n,r.Fn,i);for(let r of["Gx","Gy","a","weierstrass"===e?"b":"d"])if(!n.isValid(t[r]))throw Error(`CURVE.${r} must be valid field element of CURVE.Fp`);return{CURVE:t=Object.freeze(Object.assign({},t)),Fp:n,Fn:s}}("weierstrass",e,t),{Fp:i,Fn:n}=r,s=r.CURVE,{h:o,n:a}=s;c2(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});let{endo:h}=t;if(h&&(!i.is0(s.a)||"bigint"!=typeof h.beta||!Array.isArray(h.basises)))throw Error('invalid endo: expected "beta": bigint and "basises": array');let u=l1(i,n);function f(){if(!i.isOdd)throw Error("compression is not supported: Field does not have .isOdd()")}let c=t.toBytes||function(e,t,r){let{x:n,y:s}=t.toAffine(),o=i.toBytes(n);return(c$(r,"isCompressed"),r)?(f(),fM(l0(!i.isOdd(s)),o)):fM(Uint8Array.of(4),o,i.toBytes(s))},l=t.fromBytes||function(e){cV(e,void 0,"Point");let{publicKey:t,publicKeyUncompressed:r}=u,n=e.length,s=e[0],o=e.subarray(1);if(n===t&&(2===s||3===s)){let e,t=i.fromBytes(o);if(!i.isValid(t))throw Error("bad point: is not on curve, wrong x");let r=d(t);try{e=i.sqrt(r)}catch(e){throw Error("bad point: is not on curve, sqrt error"+(e instanceof Error?": "+e.message:""))}return f(),(1&s)==1!==i.isOdd(e)&&(e=i.neg(e)),{x:t,y:e}}if(n===r&&4===s){let e=i.BYTES,t=i.fromBytes(o.subarray(0,e)),r=i.fromBytes(o.subarray(e,2*e));if(!p(t,r))throw Error("bad point: is not on curve");return{x:t,y:r}}throw Error(`bad point: got length ${n}, expected compressed=${t} or uncompressed=${r}`)};function d(e){let t=i.sqr(e),r=i.mul(t,e);return i.add(i.add(r,i.mul(e,s.a)),s.b)}function p(e,t){let r=i.sqr(t),n=d(e);return i.eql(r,n)}if(!p(s.Gx,s.Gy))throw Error("bad curve params: generator point");let g=i.mul(i.pow(s.a,lJ),lX),b=i.mul(i.sqr(s.b),BigInt(27));if(i.is0(i.add(g,b)))throw Error("bad curve params: a or b");function y(e,t,r=!1){if(!i.isValid(t)||r&&i.is0(t))throw Error(`bad point coordinate ${e}`);return t}function m(e){if(!(e instanceof E))throw Error("ProjectivePoint expected")}function v(e){if(!h||!h.basises)throw Error("no endo");return function(e,t,r){let[[i,n],[s,o]]=t,a=lK(o*e,r),h=lK(-n*e,r),u=e-a*i-h*s,f=-a*n-h*o,c=u<lG,l=f<lG;c&&(u=-u),l&&(f=-f);let d=c3(Math.ceil(c1(r)/2))+lY;if(u<lG||u>=d||f<lG||f>=d)throw Error("splitScalar (endomorphism): failed, k="+e);return{k1neg:c,k1:u,k2neg:l,k2:f}}(e,h.basises,n.ORDER)}let w=c8((e,t)=>{let{X:r,Y:n,Z:s}=e;if(i.eql(s,i.ONE))return{x:r,y:n};let o=e.is0();null==t&&(t=o?i.ONE:i.inv(s));let a=i.mul(r,t),h=i.mul(n,t),u=i.mul(s,t);if(o)return{x:i.ZERO,y:i.ZERO};if(!i.eql(u,i.ONE))throw Error("invZ was invalid");return{x:a,y:h}}),D=c8(e=>{if(e.is0()){if(t.allowInfinityPoint&&!i.is0(e.Y))return;throw Error("bad point: ZERO")}let{x:r,y:n}=e.toAffine();if(!i.isValid(r)||!i.isValid(n))throw Error("bad point: x or y not field elements");if(!p(r,n))throw Error("bad point: equation left != right");if(!e.isTorsionFree())throw Error("bad point: not in prime-order subgroup");return!0});function x(e,t,r,n,s){return r=new E(i.mul(r.X,e),r.Y,r.Z),t=lD(n,t),r=lD(s,r),t.add(r)}class E{constructor(e,t,r){this.X=y("x",e),this.Y=y("y",t,!0),this.Z=y("z",r),Object.freeze(this)}static CURVE(){return s}static fromAffine(e){let{x:t,y:r}=e||{};if(!e||!i.isValid(t)||!i.isValid(r))throw Error("invalid affine point");if(e instanceof E)throw Error("projective point not allowed");return i.is0(t)&&i.is0(r)?E.ZERO:new E(t,r,i.ONE)}static fromBytes(e){let t=E.fromAffine(l(cV(e,void 0,"point")));return t.assertValidity(),t}static fromHex(e){return E.fromBytes(cX("pointHex",e))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(e=8,t=!0){return S.createCache(this,e),t||this.multiply(lJ),this}assertValidity(){D(this)}hasEvenY(){let{y:e}=this.toAffine();if(!i.isOdd)throw Error("Field doesn't support isOdd");return!i.isOdd(e)}equals(e){m(e);let{X:t,Y:r,Z:n}=this,{X:s,Y:o,Z:a}=e,h=i.eql(i.mul(t,a),i.mul(s,n)),u=i.eql(i.mul(r,a),i.mul(o,n));return h&&u}negate(){return new E(this.X,i.neg(this.Y),this.Z)}double(){let{a:e,b:t}=s,r=i.mul(t,lJ),{X:n,Y:o,Z:a}=this,h=i.ZERO,u=i.ZERO,f=i.ZERO,c=i.mul(n,n),l=i.mul(o,o),d=i.mul(a,a),p=i.mul(n,o);return p=i.add(p,p),f=i.mul(n,a),f=i.add(f,f),h=i.mul(e,f),u=i.mul(r,d),u=i.add(h,u),h=i.sub(l,u),u=i.add(l,u),u=i.mul(h,u),h=i.mul(p,h),f=i.mul(r,f),d=i.mul(e,d),p=i.sub(c,d),p=i.mul(e,p),p=i.add(p,f),f=i.add(c,c),c=i.add(f,c),c=i.add(c,d),c=i.mul(c,p),u=i.add(u,c),d=i.mul(o,a),d=i.add(d,d),c=i.mul(d,p),h=i.sub(h,c),f=i.mul(d,l),f=i.add(f,f),new E(h,u,f=i.add(f,f))}add(e){m(e);let{X:t,Y:r,Z:n}=this,{X:o,Y:a,Z:h}=e,u=i.ZERO,f=i.ZERO,c=i.ZERO,l=s.a,d=i.mul(s.b,lJ),p=i.mul(t,o),g=i.mul(r,a),b=i.mul(n,h),y=i.add(t,r),v=i.add(o,a);y=i.mul(y,v),v=i.add(p,g),y=i.sub(y,v),v=i.add(t,n);let w=i.add(o,h);return v=i.mul(v,w),w=i.add(p,b),v=i.sub(v,w),w=i.add(r,n),u=i.add(a,h),w=i.mul(w,u),u=i.add(g,b),w=i.sub(w,u),c=i.mul(l,v),u=i.mul(d,b),c=i.add(u,c),u=i.sub(g,c),c=i.add(g,c),f=i.mul(u,c),g=i.add(p,p),g=i.add(g,p),b=i.mul(l,b),v=i.mul(d,v),g=i.add(g,b),b=i.sub(p,b),b=i.mul(l,b),v=i.add(v,b),p=i.mul(g,v),f=i.add(f,p),p=i.mul(w,v),u=i.mul(y,u),u=i.sub(u,p),p=i.mul(y,g),c=i.mul(w,c),new E(u,f,c=i.add(c,p))}subtract(e){return this.add(e.negate())}is0(){return this.equals(E.ZERO)}multiply(e){let r,i,{endo:s}=t;if(!n.isValidNot0(e))throw Error("invalid scalar: out of range");let o=e=>S.cached(this,e,e=>lx(E,e));if(s){let{k1neg:t,k1:n,k2neg:a,k2:h}=v(e),{p:u,f:f}=o(n),{p:c,f:l}=o(h);i=f.add(l),r=x(s.beta,u,c,t,a)}else{let{p:t,f:n}=o(e);r=t,i=n}return lx(E,[r,i])[0]}multiplyUnsafe(e){let{endo:r}=t;if(!n.isValid(e))throw Error("invalid scalar: out of range");if(e===lG||this.is0())return E.ZERO;if(e===lY)return this;if(S.hasCache(this))return this.multiply(e);if(!r)return S.unsafe(this,e);{let{k1neg:t,k1:i,k2neg:n,k2:s}=v(e),{p1:o,p2:a}=function(e,t,r,i){let n=t,s=e.ZERO,o=e.ZERO;for(;r>lv||i>lv;)r&lw&&(s=s.add(n)),i&lw&&(o=o.add(n)),n=n.double(),r>>=lw,i>>=lw;return{p1:s,p2:o}}(E,this,i,s);return x(r.beta,o,a,t,n)}}multiplyAndAddUnsafe(e,t,r){let i=this.multiplyUnsafe(t).add(e.multiplyUnsafe(r));return i.is0()?void 0:i}toAffine(e){return w(this,e)}isTorsionFree(){let{isTorsionFree:e}=t;return o===lY||(e?e(E,this):S.unsafe(this,a).is0())}clearCofactor(){let{clearCofactor:e}=t;return o===lY?this:e?e(E,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(e=!0){return c$(e,"isCompressed"),this.assertValidity(),c(E,this,e)}toHex(e=!0){return fE(this.toBytes(e))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(e=!0){return this.toBytes(e)}_setWindowSize(e){this.precompute(e)}static normalizeZ(e){return lx(E,e)}static msm(e,t){return function(e,t,r,i){(function(e,t){if(!Array.isArray(e))throw Error("array expected");e.forEach((e,r)=>{if(!(e instanceof t))throw Error("invalid point at index "+r)})})(r,e),function(e,t){if(!Array.isArray(e))throw Error("array of scalars expected");e.forEach((e,r)=>{if(!t.isValid(e))throw Error("invalid scalar at index "+r)})}(i,t);let n=r.length,s=i.length;if(n!==s)throw Error("arrays of points and scalars must have equal length");let o=e.ZERO,a=c1(BigInt(n)),h=1;a>12?h=a-3:a>4?h=a-2:a>0&&(h=2);let u=c3(h),f=Array(Number(u)+1).fill(o),c=Math.floor((t.BITS-1)/h)*h,l=o;for(let e=c;e>=0;e-=h){f.fill(o);for(let t=0;t<s;t++){let n=Number(i[t]>>BigInt(e)&u);f[n]=f[n].add(r[t])}let t=o;for(let e=f.length-1,r=o;e>0;e--)r=r.add(f[e]),t=t.add(r);if(l=l.add(t),0!==e)for(let e=0;e<h;e++)l=l.double()}return l}(E,n,e,t)}static fromPrivateKey(e){return E.BASE.multiply(lQ(n,e))}}E.BASE=new E(s.Gx,s.Gy,i.ONE),E.ZERO=new E(i.ZERO,i.ONE,i.ZERO),E.Fp=i,E.Fn=n;let _=n.BITS,S=new lO(E,t.endo?Math.ceil(_/2):_);return E.BASE.precompute(8),E}(t,r),i,n),o=s.Point;return Object.assign({},s,{ProjectivePoint:o,CURVE:Object.assign({},e,lg(o.Fn.ORDER,o.Fn.BITS))})})({...e,hash:t});return{...r(t),create:r}}const l2={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},l8={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},l6={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},l5=lb(l2.p),l4=lb(l8.p),l9=lb(l6.p),l7=l3({...l2,Fp:l5,lowS:!1},f7);l3({...l8,Fp:l4,lowS:!1},ct),l3({...l6,Fp:l9,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},ce);const de="base10",dt="base16",dr="base64pad",di="base64url",dn="utf8";function ds(){let e=fP(32);return(0,a$.toString)(e,dt)}function da(e){let t=f7((0,a$.fromString)(e,dt));return(0,a$.toString)(t,dt)}function dh(e){let t=f7((0,a$.fromString)(e,dn));return(0,a$.toString)(t,dt)}function du(e){return(0,a$.fromString)(`${e}`,de)}function df(e){return Number((0,a$.toString)(e,de))}function dc(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function dl(e){let t=e.replace(/-/g,"+").replace(/_/g,"/"),r=(4-t.length%4)%4;return t+"=".repeat(r)}function dd(e){if(2===df(e.type))return(0,a$.toString)((0,a$.concat)([e.type,e.sealed]),dr);if(1===df(e.type)){if(typeof e.senderPublicKey>"u")throw Error("Missing sender public key for type 1 envelope");return(0,a$.toString)((0,a$.concat)([e.type,e.senderPublicKey,e.iv,e.sealed]),dr)}return(0,a$.toString)((0,a$.concat)([e.type,e.iv,e.sealed]),dr)}function dp(e){let t=(e.encoding||dr)===di?dl(e.encoded):e.encoded,r=(0,a$.fromString)(t,dr),i=r.slice(0,1);if(1===df(i)){let e=r.slice(1,33),t=r.slice(33,45);return{type:i,sealed:r.slice(45),iv:t,senderPublicKey:e}}if(2===df(i))return{type:i,sealed:r.slice(1),iv:fP(12)};let n=r.slice(1,13);return{type:i,sealed:r.slice(13),iv:n}}function dg(e){let t=e?.type||0;if(1===t){if(typeof e?.senderPublicKey>"u")throw Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw Error("missing receiver public key")}return{type:t,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function db(e){return 1===e.type&&"string"==typeof e.senderPublicKey&&"string"==typeof e.receiverPublicKey}function dy(e){return e?.relay||{protocol:"irn"}}function dm(e){let t=ua[e];if(typeof t>"u")throw Error(`Relay Protocol not supported: ${e}`);return t}var dv=Object.defineProperty,dw=Object.defineProperties,dD=Object.getOwnPropertyDescriptors,dx=Object.getOwnPropertySymbols,dE=Object.prototype.hasOwnProperty,d_=Object.prototype.propertyIsEnumerable,dS=(e,t,r)=>t in e?dv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,dI=(e,t)=>{for(var r in t||(t={}))dE.call(t,r)&&dS(e,r,t[r]);if(dx)for(var r of dx(t))d_.call(t,r)&&dS(e,r,t[r]);return e};function dA(e){var t;if(!e.includes("wc:")){let t=uX(e);null!=t&&t.includes("wc:")&&(e=t)}let r=(e=(e=e.includes("wc://")?e.replace("wc://",""):e).includes("wc:")?e.replace("wc:",""):e).indexOf(":"),i=-1!==e.indexOf("?")?e.indexOf("?"):void 0,n=e.substring(0,r),s=e.substring(r+1,i).split("@"),o=Object.fromEntries(new URLSearchParams("u">typeof i?e.substring(i):"").entries()),a="string"==typeof o.methods?o.methods.split(","):void 0;return{protocol:n,topic:(t=s[0]).startsWith("//")?t.substring(2):t,version:parseInt(s[1],10),symKey:o.symKey,relay:function(e,t="-"){let r={},i="relay"+t;return Object.keys(e).forEach(t=>{if(t.startsWith(i)){let n=t.replace(i,""),s=e[t];r[n]=s}}),r}(o),methods:a,expiryTimestamp:o.expiryTimestamp?parseInt(o.expiryTimestamp,10):void 0}}function dM(e){let t=new URLSearchParams;return Object.entries(dI(dI(dw(dI({},function(e,t="-"){let r={};return Object.keys(e).forEach(i=>{e[i]&&(r["relay"+t+i]=e[i])}),r}(e.relay)),dD({symKey:e.symKey})),e.expiryTimestamp&&{expiryTimestamp:e.expiryTimestamp.toString()}),e.methods&&{methods:e.methods.join(",")})).sort(([e],[t])=>e.localeCompare(t)).forEach(([e,r])=>{void 0!==r&&t.append(e,String(r))}),`${e.protocol}:${e.topic}@${e.version}?${t}`}Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;const dC={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},dO={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function dP(e,t){let{message:r,code:i}=dO[e];return{message:t?`${r} ${t}`:r,code:i}}function dR(e,t){let{message:r,code:i}=dC[e];return{message:t?`${r} ${t}`:r,code:i}}function dT(e){return typeof e>"u"}function dN(e,t){return!!(t&&dT(e))||"string"==typeof e&&!!e.trim().length}function dB(e){function t(e){try{return"u">typeof new URL(e)}catch{return!1}}try{if(dN(e,!1)){if(t(e))return!0;let r=uX(e);return t(r)}}catch{}return!1}function dL(e){return"u">typeof e}function dk(){let e=uq();return new Promise(t=>{switch(e){case uU:t(uj()&&navigator?.onLine);break;case uk:t(dU());break;default:t(!0)}})}async function dU(){if(uz()&&"u">typeof t&&null!=t&&t.NetInfo){let e=await (null==t?void 0:t.NetInfo.fetch());return e?.isConnected}return!0}var dz={};e(dz,"parseConnectionError",()=>d$),e(dz,"formatJsonRpcError",()=>dV.formatJsonRpcError),e(dz,"formatJsonRpcRequest",()=>dV.formatJsonRpcRequest),e(dz,"formatJsonRpcResult",()=>dV.formatJsonRpcResult),e(dz,"getBigIntRpcId",()=>dV.getBigIntRpcId),e(dz,"IJsonRpcProvider",()=>dV.IJsonRpcProvider),e(dz,"isJsonRpcError",()=>dV.isJsonRpcError),e(dz,"isJsonRpcRequest",()=>dV.isJsonRpcRequest),e(dz,"isJsonRpcResponse",()=>dV.isJsonRpcResponse),e(dz,"isJsonRpcResult",()=>dV.isJsonRpcResult),e(dz,"isLocalhostUrl",()=>dV.isLocalhostUrl),e(dz,"isReactNative",()=>dV.isReactNative),e(dz,"isWsUrl",()=>dV.isWsUrl),e(dz,"parseConnectionError",()=>dV.parseConnectionError),e(dz,"payloadId",()=>dV.payloadId),e(dz,"formatJsonRpcError",()=>dX),e(dz,"formatJsonRpcRequest",()=>dZ),e(dz,"formatJsonRpcResult",()=>dJ),e(dz,"getBigIntRpcId",()=>dY),e(dz,"payloadId",()=>dG),e(dz,"IJsonRpcProvider",()=>d1),e(dz,"isLocalhostUrl",()=>d2),e(dz,"isWsUrl",()=>d3),e(dz,"isJsonRpcError",()=>d9),e(dz,"isJsonRpcRequest",()=>d6),e(dz,"isJsonRpcResponse",()=>d5),e(dz,"isJsonRpcResult",()=>d4);const dj="INTERNAL_ERROR",dq="SERVER_ERROR",dF=[-32700,-32600,-32601,-32602,-32603],dH={PARSE_ERROR:{code:-32700,message:"Parse error"},INVALID_REQUEST:{code:-32600,message:"Invalid Request"},METHOD_NOT_FOUND:{code:-32601,message:"Method not found"},INVALID_PARAMS:{code:-32602,message:"Invalid params"},[dj]:{code:-32603,message:"Internal error"},[dq]:{code:-32e3,message:"Server error"}};function dK(e){return Object.keys(dH).includes(e)?dH[e]:dH[dq]}function d$(e,t,r){return e.message.includes("getaddrinfo ENOTFOUND")||e.message.includes("connect ECONNREFUSED")?Error(`Unavailable ${r} RPC url at ${t}`):e}var dV={};function dW(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||(t[r]=e[r])}function dG(e=3){return Date.now()*Math.pow(10,e)+Math.floor(Math.random()*Math.pow(10,e))}function dY(e=6){return BigInt(dG(e))}function dZ(e,t,r){return{id:r||dG(),jsonrpc:"2.0",method:e,params:t}}function dJ(e,t){return{id:e,jsonrpc:"2.0",result:t}}function dX(e,t,r){var i,n,s;return{id:e,jsonrpc:"2.0",error:(i=t,n=r,void 0===i?dK(dj):("string"==typeof i&&(i=Object.assign(Object.assign({},dK(dq)),{message:i})),void 0!==n&&(i.data=n),s=i.code,dF.includes(s)&&(i=function(e){let t=Object.values(dH).find(t=>t.code===e);return t||dH[dq]}(i.code)),i))}}Object.defineProperty(dV,"__esModule",{value:!0}),dW(s("ljFVp"),dV),dW(s("5vmD7"),dV),dV.isNode;class dQ{}class d0 extends dQ{constructor(){super()}}class d1 extends d0{constructor(e){super()}}function d3(e){let t=function(e){let t=e.match(RegExp(/^\w+:/,"gi"));if(t&&t.length)return t[0]}(e);return void 0!==t&&RegExp("^wss?:").test(t)}function d2(e){return RegExp("wss?://localhost(:d{2,5})?").test(e)}function d8(e){return"object"==typeof e&&"id"in e&&"jsonrpc"in e&&"2.0"===e.jsonrpc}function d6(e){return d8(e)&&"method"in e}function d5(e){return d8(e)&&(d4(e)||d9(e))}function d4(e){return"result"in e}function d9(e){return"error"in e}class d7 extends d1{constructor(e){super(e),this.events=new(0,a.EventEmitter),this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(dZ(e.method,e.params||[],e.id||dY().toString()),t)}async requestStrict(e,t){return new Promise(async(r,i)=>{if(!this.connection.connected)try{await this.open()}catch(e){i(e)}this.events.on(`${e.id}`,e=>{d9(e)?i(e.error):r(e.result)});try{await this.connection.send(e,t)}catch(e){i(e)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),d5(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&3e3===e.code&&this.events.emit("error",Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),"string"==typeof e&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const pe=e=>e.split("?")[0],pt="u">typeof WebSocket?WebSocket:"u">typeof t&&"u">typeof t.WebSocket?t.WebSocket:"u">typeof window&&"u">typeof window.WebSocket?window.WebSocket:"u">typeof self&&"u">typeof self.WebSocket?self.WebSocket:s("fvaAM");class pr{constructor(e){if(this.url=e,this.events=new(0,a.EventEmitter),this.registering=!1,!d3(e))throw Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return"u">typeof this.socket}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,t)=>{if(typeof this.socket>"u")return void t(Error("Connection already closed"));this.socket.onclose=t=>{this.onClose(t),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(e_(e))}catch(t){this.onError(e.id,t)}}register(e=this.url){if(!d3(e))throw Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){let e=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=e||this.events.listenerCount("open")>=e)&&this.events.setMaxListeners(e+1),new Promise((e,t)=>{this.events.once("register_error",e=>{this.resetMaxListeners(),t(e)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return t(Error("WebSocket connection is missing or invalid"));e(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,i)=>{let n=(0,dV.isReactNative)()?void 0:{rejectUnauthorized:!d2(e)},s=new pt(e,[],n);"u">typeof WebSocket||"u">typeof t&&"u">typeof t.WebSocket||"u">typeof window&&"u">typeof window.WebSocket||"u">typeof self&&"u">typeof self.WebSocket?s.onerror=e=>{i(this.emitError(e.error))}:s.on("error",e=>{i(this.emitError(e))}),s.onopen=()=>{this.onOpen(s),r(s)}})}onOpen(e){e.onmessage=e=>this.onPayload(e),e.onclose=e=>this.onClose(e),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;let t="string"==typeof e.data?eE(e.data):e.data;this.events.emit("payload",t)}onError(e,t){let r=this.parseError(t),i=dX(e,r.message||r.toString());this.events.emit("payload",i)}parseError(e,t=this.url){return d$(e,pe(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}emitError(e){let t=this.parseError(Error(e?.message||`WebSocket connection failed for host: ${pe(this.url)}`));return this.events.emit("register_error",t),t}}const pi="core",pn=`wc@2:${pi}:`,ps={database:":memory:"},po="client_ed25519_seed",pa=x.ONE_DAY,ph=x.SIX_HOURS,pu="wss://relay.walletconnect.org",pf="relayer_message",pc="relayer_message_ack",pl="relayer_connection_stalled",pd="relayer_publish",pp="payload",pg="connect",pb="disconnect",py="error",pm="2.22.4",pv="link_mode",pw="relay",pD="inbound",px="WALLETCONNECT_LINK_MODE_APPS",pE="subscription_created",p_="subscription_deleted",pS=(x.THIRTY_DAYS,x.FIVE_SECONDS,x.THIRTY_DAYS,{wc_pairingDelete:{req:{ttl:x.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:x.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:x.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:x.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:x.ONE_DAY,prompt:!1,tag:0},res:{ttl:x.ONE_DAY,prompt:!1,tag:0}}}),pI="pairing_create",pA="history_created",pM="history_updated",pC="history_deleted",pO="expirer_created",pP="expirer_deleted",pR="expirer_expired",pT=(x.ONE_DAY,"https://verify.walletconnect.org"),pN=`${pT}/v3`,pB=["https://verify.walletconnect.com",pT],pL="malformed_pairing_uri";var pk=function(e,t){if(e.length>=255)throw TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<e.length;n++){var s=e.charAt(n),o=s.charCodeAt(0);if(255!==r[o])throw TypeError(s+" is ambiguous");r[o]=n}var a=e.length,h=e.charAt(0),u=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function c(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[0]){for(var i=0,n=0;e[t]===h;)i++,t++;for(var s=(e.length-t)*u+1>>>0,o=new Uint8Array(s);e[t];){var f=r[e.charCodeAt(t)];if(255===f)return;for(var c=0,l=s-1;(0!==f||c<n)&&-1!==l;l--,c++)f+=a*o[l]>>>0,o[l]=f%256>>>0,f=f/256>>>0;if(0!==f)throw Error("Non-zero carry");n=c,t++}if(" "!==e[t]){for(var d=s-n;d!==s&&0===o[d];)d++;for(var p=new Uint8Array(i+(s-d)),g=i;d!==s;)p[g++]=o[d++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,i=0,n=0,s=t.length;n!==s&&0===t[n];)n++,r++;for(var o=(s-n)*f+1>>>0,u=new Uint8Array(o);n!==s;){for(var c=t[n],l=0,d=o-1;(0!==c||l<i)&&-1!==d;d--,l++)c+=256*u[d]>>>0,u[d]=c%a>>>0,c=c/a>>>0;if(0!==c)throw Error("Non-zero carry");i=l,n++}for(var p=o-i;p!==o&&0===u[p];)p++;for(var g=h.repeat(r);p<o;++p)g+=e.charAt(u[p]);return g},decodeUnsafe:c,decode:function(e){var r=c(e);if(r)return r;throw Error(`Non-${t} character`)}}};const pU=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw Error("Unknown type, must be binary type")};class pz{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class pj{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return pF(this,e)}}class pq{constructor(e){this.decoders=e}or(e){return pF(this,e)}decode(e){let t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const pF=(e,t)=>new pq({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class pH{constructor(e,t,r,i){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=i,this.encoder=new pz(e,t,r),this.decoder=new pj(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const pK=({name:e,prefix:t,encode:r,decode:i})=>new pH(e,t,r,i),p$=({prefix:e,name:t,alphabet:r})=>{let{encode:i,decode:n}=pk(r,t);return pK({prefix:e,name:t,encode:i,decode:e=>pU(n(e))})},pV=({name:e,prefix:t,bitsPerChar:r,alphabet:i})=>pK({prefix:t,name:e,encode:e=>((e,t,r)=>{let i="="===t[t.length-1],n=(1<<r)-1,s="",o=0,a=0;for(let i=0;i<e.length;++i)for(a=a<<8|e[i],o+=8;o>r;)o-=r,s+=t[n&a>>o];if(o&&(s+=t[n&a<<r-o]),i)for(;s.length*r&7;)s+="=";return s})(e,i,r),decode:t=>((e,t,r,i)=>{let n={};for(let e=0;e<t.length;++e)n[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;let o=new Uint8Array(s*r/8|0),a=0,h=0,u=0;for(let t=0;t<s;++t){let s=n[e[t]];if(void 0===s)throw SyntaxError(`Non-${i} character`);h=h<<r|s,(a+=r)>=8&&(a-=8,o[u++]=255&h>>a)}if(a>=r||255&h<<8-a)throw SyntaxError("Unexpected end of data");return o})(t,i,r,e)});var pW=Object.freeze({__proto__:null,identity:pK({prefix:"\0",name:"identity",encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)})}),pG=Object.freeze({__proto__:null,base2:pV({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})}),pY=Object.freeze({__proto__:null,base8:pV({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})}),pZ=Object.freeze({__proto__:null,base10:p$({prefix:"9",name:"base10",alphabet:"0123456789"})}),pJ=Object.freeze({__proto__:null,base16:pV({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper:pV({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})});const pX=pV({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),pQ=pV({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),p0=pV({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),p1=pV({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),p3=pV({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),p2=pV({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),p8=pV({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});var p6=Object.freeze({__proto__:null,base32:pX,base32upper:pQ,base32pad:p0,base32padupper:p1,base32hex:p3,base32hexupper:p2,base32hexpad:p8,base32hexpadupper:pV({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z:pV({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})}),p5=Object.freeze({__proto__:null,base36:p$({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper:p$({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})}),p4=Object.freeze({__proto__:null,base58btc:p$({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr:p$({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})});const p9=pV({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),p7=pV({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});var ge=Object.freeze({__proto__:null,base64:p9,base64pad:p7,base64url:pV({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad:pV({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})});const gt=Array.from("\uD83D\uDE80\uD83E\uDE90\uD83D\uDEF0\uD83C\uDF0C\uD83C\uDF11\uD83C\uDF12\uD83C\uDF13\uD83C\uDF14\uD83C\uDF15\uD83C\uDF16\uD83C\uDF17\uD83C\uDF18\uD83C\uDF0D\uD83C\uDF0F\uD83C\uDF0E\uD83D\uDC09\uD83D\uDCBB\uD83D\uDDA5\uD83D\uDCBE\uD83D\uDCBF\uD83D\uDE02\uD83D\uDE0D\uD83E\uDD23\uD83D\uDE0A\uD83D\uDE4F\uD83D\uDC95\uD83D\uDE2D\uD83D\uDE18\uD83D\uDC4D\uD83D\uDE05\uD83D\uDC4F\uD83D\uDE01\uD83D\uDD25\uD83E\uDD70\uD83D\uDC94\uD83D\uDC96\uD83D\uDC99\uD83D\uDE22\uD83E\uDD14\uD83D\uDE06\uD83D\uDE44\uD83D\uDCAA\uD83D\uDE09\uD83D\uDC4C\uD83E\uDD17\uD83D\uDC9C\uD83D\uDE14\uD83D\uDE0E\uD83D\uDE07\uD83C\uDF39\uD83E\uDD26\uD83C\uDF89\uD83D\uDC9E\uD83E\uDD37\uD83D\uDE31\uD83D\uDE0C\uD83C\uDF38\uD83D\uDE4C\uD83D\uDE0B\uD83D\uDC97\uD83D\uDC9A\uD83D\uDE0F\uD83D\uDC9B\uD83D\uDE42\uD83D\uDC93\uD83E\uDD29\uD83D\uDE04\uD83D\uDE00\uD83D\uDDA4\uD83D\uDE03\uD83D\uDCAF\uD83D\uDE48\uD83D\uDC47\uD83C\uDFB6\uD83D\uDE12\uD83E\uDD2D\uD83D\uDE1C\uD83D\uDC8B\uD83D\uDC40\uD83D\uDE2A\uD83D\uDE11\uD83D\uDCA5\uD83D\uDE4B\uD83D\uDE1E\uD83D\uDE29\uD83D\uDE21\uD83E\uDD2A\uD83D\uDC4A\uD83E\uDD73\uD83D\uDE25\uD83E\uDD24\uD83D\uDC49\uD83D\uDC83\uD83D\uDE33\uD83D\uDE1A\uD83D\uDE1D\uD83D\uDE34\uD83C\uDF1F\uD83D\uDE2C\uD83D\uDE43\uD83C\uDF40\uD83C\uDF37\uD83D\uDE3B\uD83D\uDE13\uD83E\uDD7A\uD83C\uDF08\uD83D\uDE08\uD83E\uDD18\uD83D\uDCA6\uD83D\uDE23\uD83C\uDFC3\uD83D\uDC90\uD83C\uDF8A\uD83D\uDC98\uD83D\uDE20\uD83D\uDE15\uD83C\uDF3A\uD83C\uDF82\uD83C\uDF3B\uD83D\uDE10\uD83D\uDD95\uD83D\uDC9D\uD83D\uDE4A\uD83D\uDE39\uD83D\uDDE3\uD83D\uDCAB\uD83D\uDC80\uD83D\uDC51\uD83C\uDFB5\uD83E\uDD1E\uD83D\uDE1B\uD83D\uDD34\uD83D\uDE24\uD83C\uDF3C\uD83D\uDE2B\uD83E\uDD19\uD83C\uDFC6\uD83E\uDD2B\uD83D\uDC48\uD83D\uDE2E\uD83D\uDE46\uD83C\uDF7B\uD83C\uDF43\uD83D\uDC36\uD83D\uDC81\uD83D\uDE32\uD83C\uDF3F\uD83E\uDDE1\uD83C\uDF81\uD83C\uDF1E\uD83C\uDF88\uD83D\uDC4B\uD83D\uDE30\uD83E\uDD28\uD83D\uDE36\uD83E\uDD1D\uD83D\uDEB6\uD83D\uDCB0\uD83C\uDF53\uD83D\uDCA2\uD83E\uDD1F\uD83D\uDE41\uD83D\uDEA8\uD83D\uDCA8\uD83E\uDD2C\uD83C\uDF80\uD83C\uDF7A\uD83E\uDD13\uD83D\uDE19\uD83D\uDC9F\uD83C\uDF31\uD83D\uDE16\uD83D\uDC76\uD83E\uDD74\uD83D\uDC8E\uD83D\uDCB8\uD83D\uDE28\uD83C\uDF1A\uD83E\uDD8B\uD83D\uDE37\uD83D\uDD7A\uD83D\uDE45\uD83D\uDE1F\uD83D\uDE35\uD83D\uDC4E\uD83E\uDD32\uD83E\uDD20\uD83E\uDD27\uD83D\uDCCC\uD83D\uDD35\uD83D\uDC85\uD83E\uDDD0\uD83D\uDC3E\uD83C\uDF52\uD83D\uDE17\uD83E\uDD11\uD83C\uDF0A\uD83E\uDD2F\uD83D\uDC37\uD83D\uDCA7\uD83D\uDE2F\uD83D\uDC86\uD83D\uDC46\uD83C\uDFA4\uD83D\uDE47\uD83C\uDF51\uD83C\uDF34\uD83D\uDCA3\uD83D\uDC38\uD83D\uDC8C\uD83D\uDCCD\uD83E\uDD40\uD83E\uDD22\uD83D\uDC45\uD83D\uDCA1\uD83D\uDCA9\uD83D\uDC50\uD83D\uDCF8\uD83D\uDC7B\uD83E\uDD10\uD83E\uDD2E\uD83C\uDFBC\uD83E\uDD75\uD83D\uDEA9\uD83C\uDF4E\uD83C\uDF4A\uD83D\uDC7C\uD83D\uDC8D\uD83D\uDCE3\uD83E\uDD42"),gr=gt.reduce((e,t,r)=>(e[r]=t,e),[]),gi=gt.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]);var gn=Object.freeze({__proto__:null,base256emoji:pK({prefix:"\uD83D\uDE80",name:"base256emoji",encode:function(e){return e.reduce((e,t)=>e+=gr[t],"")},decode:function(e){let t=[];for(let r of e){let e=gi[r.codePointAt(0)];if(void 0===e)throw Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}})});function gs(e,t,r){t=t||[],r=r||0;for(var i=r;e>=0x80000000;)t[r++]=255&e|128,e/=128;for(;-128&e;)t[r++]=255&e|128,e>>>=7;return t[r]=0|e,gs.bytes=r-i+1,t}const go=(e,t,r=0)=>(gs(e,t,r),t),ga=e=>{var t;return(t=e)<128?1:t<16384?2:t<2097152?3:t<0x10000000?4:t<0x800000000?5:t<0x40000000000?6:t<0x2000000000000?7:t<0x100000000000000?8:t<0x8000000000000000?9:10},gh=(e,t)=>{let r=t.byteLength,i=ga(e),n=i+ga(r),s=new Uint8Array(n+r);return go(e,s,0),go(r,s,i),s.set(t,n),new gu(e,r,t,s)};class gu{constructor(e,t,r,i){this.code=e,this.size=t,this.digest=r,this.bytes=i}}const gf=({name:e,code:t,encode:r})=>new gc(e,t,r);class gc{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?gh(this.code,t):t.then(e=>gh(this.code,e))}throw Error("Unknown type, must be binary type")}}const gl=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t));var gd=Object.freeze({__proto__:null,sha256:gf({name:"sha2-256",code:18,encode:gl("SHA-256")}),sha512:gf({name:"sha2-512",code:19,encode:gl("SHA-512")})}),gp=Object.freeze({__proto__:null,identity:{code:0,name:"identity",encode:pU,digest:e=>gh(0,pU(e))}});new TextEncoder,new TextDecoder;const gg={...pW,...pG,...pY,...pZ,...pJ,...p6,...p5,...p4,...ge,...gn};function gb(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function gy(e,t,r,i){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:i}}}({...gd,...gp});const gm=gy("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),gv=gy("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{let t=function(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?gb(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),gw={utf8:gm,"utf-8":gm,hex:gg.base16,latin1:gv,ascii:gv,binary:gv,...gg};var gD=Object.defineProperty,gx=(e,t,r)=>{let i;return(i="symbol"!=typeof t?t+"":t)in e?gD(e,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[i]=r};class gE{constructor(e,t){this.core=e,this.logger=t,gx(this,"keychain",new Map),gx(this,"name","keychain"),gx(this,"version","0.3"),gx(this,"initialized",!1),gx(this,"storagePrefix",pn),gx(this,"init",async()=>{if(!this.initialized){let e=await this.getKeyChain();"u">typeof e&&(this.keychain=e),this.initialized=!0}}),gx(this,"has",e=>(this.isInitialized(),this.keychain.has(e))),gx(this,"set",async(e,t)=>{this.isInitialized(),this.keychain.set(e,t),await this.persist()}),gx(this,"get",e=>{this.isInitialized();let t=this.keychain.get(e);if(typeof t>"u"){let{message:t}=dP("NO_MATCHING_KEY",`${this.name}: ${e}`);throw Error(t)}return t}),gx(this,"del",async e=>{this.isInitialized(),this.keychain.delete(e),await this.persist()}),this.core=e,this.logger=tc(t,this.name)}get context(){return tf(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,uK(e))}async getKeyChain(){let e=await this.core.storage.getItem(this.storageKey);return"u">typeof e?u$(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){let{message:e}=dP("NOT_INITIALIZED",this.name);throw Error(e)}}}var g_=Object.defineProperty,gS=(e,t,r)=>{let i;return(i="symbol"!=typeof t?t+"":t)in e?g_(e,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[i]=r};class gI{constructor(e,t,r){this.core=e,this.logger=t,gS(this,"name","crypto"),gS(this,"keychain"),gS(this,"randomSessionIdentifier",ds()),gS(this,"initialized",!1),gS(this,"clientId"),gS(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),gS(this,"hasKeys",e=>(this.isInitialized(),this.keychain.has(e))),gS(this,"getClientId",async()=>{if(this.isInitialized(),this.clientId)return this.clientId;let e=iH(i$(await this.getClientSeed()).publicKey);return this.clientId=e,e}),gS(this,"generateKeyPair",()=>{this.isInitialized();let e=function(){let e=lH.utils.randomPrivateKey(),t=lH.getPublicKey(e);return{privateKey:(0,a$.toString)(e,dt),publicKey:(0,a$.toString)(t,dt)}}();return this.setPrivateKey(e.publicKey,e.privateKey)}),gS(this,"signJWT",async e=>{this.isInitialized();let t=i$(await this.getClientSeed()),r=this.randomSessionIdentifier;return await iV(r,e,pa,t)}),gS(this,"generateSharedKey",(e,t,r)=>{this.isInitialized();let i=function(e,t){var r,i;let n=lH.getSharedSecret((0,a$.fromString)(e,dt),(0,a$.fromString)(t,dt)),s=(r=void 0,function(e,t,r,i=32){ff(e),fh(i);let n=e.outputLen;if(i>255*n)throw Error("Length should be <= 255*HashLen");let s=Math.ceil(i/n);void 0===r&&(r=cF);let o=new Uint8Array(s*n),a=cj.create(e,t),h=a._cloneInto(),u=new Uint8Array(a.outputLen);for(let e=0;e<s;e++)cq[0]=e+1,h.update(0===e?cF:u).update(r).update(cq).digestInto(u),o.set(u,n*e),a._cloneInto(h);return a.destroy(),h.destroy(),fp(u,cq),o.slice(0,i)}(f7,(i=void 0,ff(f7),void 0===i&&(i=new Uint8Array(f7.outputLen)),cj(f7,fA(i),fA(n))),r,32));return(0,a$.toString)(s,dt)}(this.getPrivateKey(e),t);return this.setSymKey(i,r)}),gS(this,"setSymKey",async(e,t)=>{this.isInitialized();let r=t||da(e);return await this.keychain.set(r,e),r}),gS(this,"deleteKeyPair",async e=>{this.isInitialized(),await this.keychain.del(e)}),gS(this,"deleteSymKey",async e=>{this.isInitialized(),await this.keychain.del(e)}),gS(this,"encode",async(e,t,r)=>{this.isInitialized();let i=dg(r),n=e_(t);if(2===i.type)return function(e,t){let r=du(2),i=fP(12),n=dd({type:r,sealed:(0,a$.fromString)(e,dn),iv:i});return t===di?dc(n):n}(n,r?.encoding);if(db(i)){let t=i.senderPublicKey,r=i.receiverPublicKey;e=await this.generateSharedKey(t,r)}let s=this.getSymKey(e),{type:o,senderPublicKey:a}=i;return function(e){let t=du("u">typeof e.type?e.type:0);if(1===df(t)&&typeof e.senderPublicKey>"u")throw Error("Missing sender public key for type 1 envelope");let r="u">typeof e.senderPublicKey?(0,a$.fromString)(e.senderPublicKey,dt):void 0,i="u">typeof e.iv?(0,a$.fromString)(e.iv,dt):fP(12),n=dd({type:t,sealed:cU((0,a$.fromString)(e.symKey,dt),i).encrypt((0,a$.fromString)(e.message,dn)),iv:i,senderPublicKey:r});return e.encoding===di?dc(n):n}({type:o,symKey:s,message:n,senderPublicKey:a,encoding:r?.encoding})}),gS(this,"decode",async(e,t,r)=>{this.isInitialized();let i=function(e,t){let r=dp({encoded:e,encoding:t?.encoding});return dg({type:df(r.type),senderPublicKey:"u">typeof r.senderPublicKey?(0,a$.toString)(r.senderPublicKey,dt):void 0,receiverPublicKey:t?.receiverPublicKey})}(t,r);if(2===i.type)return eE(function(e,t){let{sealed:r}=dp({encoded:e,encoding:t});return(0,a$.toString)(r,dn)}(t,r?.encoding));if(db(i)){let t=i.receiverPublicKey,r=i.senderPublicKey;e=await this.generateSharedKey(t,r)}try{let i=this.getSymKey(e),n=function(e){let t=(0,a$.fromString)(e.symKey,dt),{sealed:r,iv:i}=dp({encoded:e.encoded,encoding:e.encoding}),n=cU(t,i).decrypt(r);if(null===n)throw Error("Failed to decrypt");return(0,a$.toString)(n,dn)}({symKey:i,encoded:t,encoding:r?.encoding});return eE(n)}catch(t){this.logger.error(`Failed to decode message from topic: '${e}', clientId: '${await this.getClientId()}'`),this.logger.error(t)}}),gS(this,"getPayloadType",(e,t=dr)=>df(dp({encoded:e,encoding:t}).type)),gS(this,"getPayloadSenderPublicKey",(e,t=dr)=>{let r=dp({encoded:e,encoding:t});return r.senderPublicKey?(0,a$.toString)(r.senderPublicKey,dt):void 0}),this.core=e,this.logger=tc(t,this.name),this.keychain=r||new gE(this.core,this.logger)}get context(){return tf(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(po)}catch{e=ds(),await this.keychain.set(po,e)}return function(e,t="utf8"){let r=gw[t];if(!r)throw Error(`Unsupported encoding "${t}"`);return("utf8"===t||"utf-8"===t)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?gb(globalThis.Buffer.from(e,"utf-8")):r.decoder.decode(`${r.prefix}${e}`)}(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){let{message:e}=dP("NOT_INITIALIZED",this.name);throw Error(e)}}}var gA=Object.defineProperty,gM=Object.defineProperties,gC=Object.getOwnPropertyDescriptors,gO=Object.getOwnPropertySymbols,gP=Object.prototype.hasOwnProperty,gR=Object.prototype.propertyIsEnumerable,gT=(e,t,r)=>t in e?gA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,gN=(e,t,r)=>gT(e,"symbol"!=typeof t?t+"":t,r);class gB extends tm{constructor(e,t){super(e,t),this.logger=e,this.core=t,gN(this,"messages",new Map),gN(this,"messagesWithoutClientAck",new Map),gN(this,"name","messages"),gN(this,"version","0.3"),gN(this,"initialized",!1),gN(this,"storagePrefix",pn),gN(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{let e=await this.getRelayerMessages();"u">typeof e&&(this.messages=e);let t=await this.getRelayerMessagesWithoutClientAck();"u">typeof t&&(this.messagesWithoutClientAck=t),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}finally{this.initialized=!0}}}),gN(this,"set",async(e,t,r)=>{this.isInitialized();let i=dh(t),n=this.messages.get(e);if(typeof n>"u"&&(n={}),"u">typeof n[i])return i;if(n[i]=t,this.messages.set(e,n),r===pD){let r=this.messagesWithoutClientAck.get(e)||{};this.messagesWithoutClientAck.set(e,gM(((e,t)=>{for(var r in t||(t={}))gP.call(t,r)&&gT(e,r,t[r]);if(gO)for(var r of gO(t))gR.call(t,r)&&gT(e,r,t[r]);return e})({},r),gC({[i]:t})))}return await this.persist(),i}),gN(this,"get",e=>{this.isInitialized();let t=this.messages.get(e);return typeof t>"u"&&(t={}),t}),gN(this,"getWithoutAck",e=>{this.isInitialized();let t={};for(let r of e){let e=this.messagesWithoutClientAck.get(r)||{};t[r]=Object.values(e)}return t}),gN(this,"has",(e,t)=>(this.isInitialized(),"u">typeof this.get(e)[dh(t)])),gN(this,"ack",async(e,t)=>{this.isInitialized();let r=this.messagesWithoutClientAck.get(e);if(typeof r>"u")return;let i=dh(t);delete r[i],0===Object.keys(r).length?this.messagesWithoutClientAck.delete(e):this.messagesWithoutClientAck.set(e,r),await this.persist()}),gN(this,"del",async e=>{this.isInitialized(),this.messages.delete(e),this.messagesWithoutClientAck.delete(e),await this.persist()}),this.logger=tc(e,this.name),this.core=t}get context(){return tf(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,uK(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,uK(e))}async getRelayerMessages(){let e=await this.core.storage.getItem(this.storageKey);return"u">typeof e?u$(e):void 0}async getRelayerMessagesWithoutClientAck(){let e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return"u">typeof e?u$(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){let{message:e}=dP("NOT_INITIALIZED",this.name);throw Error(e)}}}var gL=Object.defineProperty,gk=Object.defineProperties,gU=Object.getOwnPropertyDescriptors,gz=Object.getOwnPropertySymbols,gj=Object.prototype.hasOwnProperty,gq=Object.prototype.propertyIsEnumerable,gF=(e,t,r)=>t in e?gL(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,gH=(e,t)=>{for(var r in t||(t={}))gj.call(t,r)&&gF(e,r,t[r]);if(gz)for(var r of gz(t))gq.call(t,r)&&gF(e,r,t[r]);return e},gK=(e,t)=>gk(e,gU(t)),g$=(e,t,r)=>gF(e,"symbol"!=typeof t?t+"":t,r);class gV extends tv{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,g$(this,"events",new(0,a.EventEmitter)),g$(this,"name","publisher"),g$(this,"queue",new Map),g$(this,"publishTimeout",(0,x.toMiliseconds)(x.ONE_MINUTE)),g$(this,"initialPublishTimeout",(0,x.toMiliseconds)(15*x.ONE_SECOND)),g$(this,"needsTransportRestart",!1),g$(this,"publish",async(e,t,r)=>{var i,n,s,o,a;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:e,message:t,opts:r}});let h=r?.ttl||ph,u=r?.prompt||!1,f=r?.tag||0,c=r?.id||dY().toString(),l=dm(dy().protocol),d={id:c,method:r?.publishMethod||l.publish,params:gH({topic:e,message:t,ttl:h,prompt:u,tag:f,attestation:r?.attestation},r?.tvf)},p=`Failed to publish payload, please try again. id:${c} tag:${f}`;try{dT(null==(i=d.params)?void 0:i.prompt)&&(null==(n=d.params)||delete n.prompt),dT(null==(s=d.params)?void 0:s.tag)&&(null==(o=d.params)||delete o.tag);let a=new Promise(async e=>{let t=({id:r})=>{var i;(null==(i=d.id)?void 0:i.toString())===r.toString()&&(this.removeRequestFromQueue(r),this.relayer.events.removeListener(pd,t),e())};this.relayer.events.on(pd,t);let i=uV(new Promise((e,t)=>{this.rpcPublish(d,r).then(e).catch(e=>{this.logger.warn(e,e?.message),t(e)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${c} tag:${f}`);try{await i,this.events.removeListener(pd,t)}catch(e){this.queue.set(c,{request:d,opts:r,attempt:1}),this.logger.warn(e,e?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:c,topic:e,message:t,opts:r}}),await uV(a,this.publishTimeout,p)}catch(e){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(e),null!=(a=r?.internal)&&a.throwOnFailedPublish)throw e}finally{this.queue.delete(c)}}),g$(this,"publishCustom",async e=>{var t,r,i,n,s;this.logger.debug("Publishing custom payload"),this.logger.trace({type:"method",method:"publishCustom",params:e});let{payload:o,opts:a={}}=e,{attestation:h,tvf:u,publishMethod:f,prompt:c,tag:l,ttl:d=x.FIVE_MINUTES}=a,p=a.id||dY().toString(),g=dm(dy().protocol),b=f||g.publish,y={id:p,method:b,params:gH(gK(gH({},o),{ttl:d,prompt:c,tag:l,attestation:h}),u)},m=`Failed to publish custom payload, please try again. id:${p} tag:${l}`;try{dT(null==(t=y.params)?void 0:t.prompt)&&(null==(r=y.params)||delete r.prompt),dT(null==(i=y.params)?void 0:i.tag)&&(null==(n=y.params)||delete n.tag);let e=new Promise(async e=>{let t=({id:r})=>{var i;(null==(i=y.id)?void 0:i.toString())===r.toString()&&(this.removeRequestFromQueue(r),this.relayer.events.removeListener(pd,t),e())};this.relayer.events.on(pd,t);let r=uV(new Promise((e,t)=>{this.rpcPublish(y,a).then(e).catch(e=>{this.logger.warn(e,e?.message),t(e)})}),this.initialPublishTimeout,`Failed initial custom payload publish, retrying.... method:${b} id:${p} tag:${l}`);try{await r,this.events.removeListener(pd,t)}catch(e){this.queue.set(p,{request:y,opts:a,attempt:1}),this.logger.warn(e,e?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:p,payload:o,opts:a}}),await uV(e,this.publishTimeout,m)}catch(e){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(e),null!=(s=a?.internal)&&s.throwOnFailedPublish)throw e}finally{this.queue.delete(p)}}),g$(this,"on",(e,t)=>{this.events.on(e,t)}),g$(this,"once",(e,t)=>{this.events.once(e,t)}),g$(this,"off",(e,t)=>{this.events.off(e,t)}),g$(this,"removeListener",(e,t)=>{this.events.removeListener(e,t)}),this.relayer=e,this.logger=tc(t,this.name),this.registerEventListeners()}get context(){return tf(this.logger)}async rpcPublish(e,t){this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:e});let r=await this.relayer.request(e);return this.relayer.events.emit(pd,gH(gH({},e),t)),this.logger.debug("Successfully Published Payload"),r}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,t)=>{var r;let i=e.attempt+1;this.queue.set(t,gK(gH({},e),{attempt:i})),this.logger.warn({},`Publisher: queue->publishing: ${e.request.id}, tag: ${null==(r=e.request.params)?void 0:r.tag}, attempt: ${i}`),await this.rpcPublish(e.request,e.opts),this.logger.warn({},`Publisher: queue->published: ${e.request.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(A,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(pl);return}this.checkQueue()}),this.relayer.on(pc,e=>{this.removeRequestFromQueue(e.id.toString())})}}var gW=Object.defineProperty,gG=(e,t,r)=>{let i;return(i="symbol"!=typeof t?t+"":t)in e?gW(e,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[i]=r};class gY{constructor(){gG(this,"map",new Map),gG(this,"set",(e,t)=>{let r=this.get(e);this.exists(e,t)||this.map.set(e,[...r,t])}),gG(this,"get",e=>this.map.get(e)||[]),gG(this,"exists",(e,t)=>this.get(e).includes(t)),gG(this,"delete",(e,t)=>{if(typeof t>"u")return void this.map.delete(e);if(!this.map.has(e))return;let r=this.get(e);if(!this.exists(e,t))return;let i=r.filter(e=>e!==t);if(!i.length)return void this.map.delete(e);this.map.set(e,i)}),gG(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var gZ=Object.defineProperty,gJ=Object.defineProperties,gX=Object.getOwnPropertyDescriptors,gQ=Object.getOwnPropertySymbols,g0=Object.prototype.hasOwnProperty,g1=Object.prototype.propertyIsEnumerable,g3=(e,t,r)=>t in e?gZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g2=(e,t)=>{for(var r in t||(t={}))g0.call(t,r)&&g3(e,r,t[r]);if(gQ)for(var r of gQ(t))g1.call(t,r)&&g3(e,r,t[r]);return e},g8=(e,t)=>gJ(e,gX(t)),g6=(e,t,r)=>g3(e,"symbol"!=typeof t?t+"":t,r);class g5 extends tx{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,g6(this,"subscriptions",new Map),g6(this,"topicMap",new gY),g6(this,"events",new(0,a.EventEmitter)),g6(this,"name","subscription"),g6(this,"version","0.3"),g6(this,"pending",new Map),g6(this,"cached",[]),g6(this,"initialized",!1),g6(this,"storagePrefix",pn),g6(this,"subscribeTimeout",(0,x.toMiliseconds)(x.ONE_MINUTE)),g6(this,"initialSubscribeTimeout",(0,x.toMiliseconds)(15*x.ONE_SECOND)),g6(this,"clientId"),g6(this,"batchSubscribeTopicsLimit",500),g6(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),g6(this,"subscribe",async(e,t)=>{var r;this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:e,opts:t}});try{let i=dy(t),n={topic:e,relay:i,transportType:t?.transportType};null!=(r=t?.internal)&&r.skipSubscribe||this.pending.set(e,n);let s=await this.rpcSubscribe(e,i,t);return"string"==typeof s&&(this.onSubscribe(s,n),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:e,opts:t}})),s}catch(e){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(e),e}}),g6(this,"unsubscribe",async(e,t)=>{this.isInitialized(),"u">typeof t?.id?await this.unsubscribeById(e,t.id,t):await this.unsubscribeByTopic(e,t)}),g6(this,"isSubscribed",e=>new Promise(t=>{t(this.topicMap.topics.includes(e))})),g6(this,"isKnownTopic",e=>new Promise(t=>{t(this.topicMap.topics.includes(e)||this.pending.has(e)||this.cached.some(t=>t.topic===e))})),g6(this,"on",(e,t)=>{this.events.on(e,t)}),g6(this,"once",(e,t)=>{this.events.once(e,t)}),g6(this,"off",(e,t)=>{this.events.off(e,t)}),g6(this,"removeListener",(e,t)=>{this.events.removeListener(e,t)}),g6(this,"start",async()=>{await this.onConnect()}),g6(this,"stop",async()=>{await this.onDisconnect()}),g6(this,"restart",async()=>{await this.restore(),await this.onRestart()}),g6(this,"checkPending",async()=>{if(0===this.pending.size&&(!this.initialized||!this.relayer.connected))return;let e=[];this.pending.forEach(t=>{e.push(t)}),await this.batchSubscribe(e)}),g6(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(A,async()=>{await this.checkPending()}),this.events.on(pE,async e=>{this.logger.info(`Emitting ${pE}`),this.logger.debug({type:"event",event:pE,data:e}),await this.persist()}),this.events.on(p_,async e=>{this.logger.info(`Emitting ${p_}`),this.logger.debug({type:"event",event:p_,data:e}),await this.persist()})}),this.relayer=e,this.logger=tc(t,this.name),this.clientId=""}get context(){return tf(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,t){let r=!1;try{r=this.getSubscription(e).topic===t}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){let r=this.topicMap.get(e);await Promise.all(r.map(async r=>await this.unsubscribeById(e,r,t)))}async unsubscribeById(e,t,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}});try{let i=dy(r);await this.restartToComplete({topic:e,id:t,relay:i}),await this.rpcUnsubscribe(e,t,i);let n=dR("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,n),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}})}catch(e){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(e),e}}async rpcSubscribe(e,t,r){var i,n;let s=await this.getSubscriptionId(e);if(null!=(i=r?.internal)&&i.skipSubscribe)return s;r&&r?.transportType!==pw||await this.restartToComplete({topic:e,id:e,relay:t});let o={method:dm(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:o});let a=null==(n=r?.internal)?void 0:n.throwOnFailedPublish;try{if(r?.transportType===pv)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(o).catch(e=>this.logger.warn(e))},(0,x.toMiliseconds)(x.ONE_SECOND)),s;let t=new Promise(async t=>{let r=i=>{i.topic===e&&(this.events.removeListener(pE,r),t(i.id))};this.events.on(pE,r);try{let i=await uV(new Promise((e,t)=>{this.relayer.request(o).catch(e=>{this.logger.warn(e,e?.message),t(e)}).then(e)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(pE,r),t(i)}catch{}}),i=await uV(t,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!i&&a)throw Error(`Subscribing to ${e} failed, please try again`);return i?s:null}catch(e){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(pl),a)throw e}return null}async rpcBatchSubscribe(e){if(!e.length)return;let t={method:dm(e[0].relay.protocol).batchSubscribe,params:{topics:e.map(e=>e.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:t});try{await await uV(new Promise(e=>{this.relayer.request(t).catch(e=>this.logger.warn(e)).then(e)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(pl)}}async rpcBatchFetchMessages(e){let t;if(!e.length)return;let r={method:dm(e[0].relay.protocol).batchFetchMessages,params:{topics:e.map(e=>e.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{t=await await uV(new Promise((e,t)=>{this.relayer.request(r).catch(e=>{this.logger.warn(e),t(e)}).then(e)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(pl)}return t}rpcUnsubscribe(e,t,r){let i={method:dm(r.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,t){this.setSubscription(e,g8(g2({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(e=>{this.setSubscription(e.id,g2({},e)),this.pending.delete(e.topic)})}async onUnsubscribe(e,t,r){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t)}addSubscription(e,t){this.subscriptions.set(e,g2({},t)),this.topicMap.set(t.topic,e),this.events.emit(pE,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});let t=this.subscriptions.get(e);if(!t){let{message:t}=dP("NO_MATCHING_KEY",`${this.name}: ${e}`);throw Error(t)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});let r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(p_,g8(g2({},r),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit("subscription_sync")}async onRestart(){if(this.cached.length){let e=[...this.cached],t=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<t;r++){let t=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(t)}}this.events.emit("subscription_resubscribed")}async restore(){try{let e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size&&!e.every(e=>{var t;return e.topic===(null==(t=this.subscriptions.get(e.id))?void 0:t.topic)})){let{message:e}=dP("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),Error(e)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async e=>g8(g2({},e),{id:await this.getSubscriptionId(e.topic)})))))}async batchFetchMessages(e){var t;if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);let r=await this.rpcBatchFetchMessages(e);r&&r.messages&&(await (t=(0,x.toMiliseconds)(x.ONE_SECOND),new Promise(e=>setTimeout(e,t))),await this.relayer.handleBatchMessageEvents(r.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){let{message:e}=dP("NOT_INITIALIZED",this.name);throw Error(e)}}async restartToComplete(e){this.relayer.connected||this.relayer.connecting||(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return dh(e+await this.getClientId())}}var g4=Object.defineProperty,g9=Object.getOwnPropertySymbols,g7=Object.prototype.hasOwnProperty,be=Object.prototype.propertyIsEnumerable,bt=(e,t,r)=>t in e?g4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,br=(e,t)=>{for(var r in t||(t={}))g7.call(t,r)&&bt(e,r,t[r]);if(g9)for(var r of g9(t))be.call(t,r)&&bt(e,r,t[r]);return e},bi=(e,t,r)=>bt(e,"symbol"!=typeof t?t+"":t,r);class bn extends tw{constructor(e){var r;super(e),bi(this,"protocol","wc"),bi(this,"version",2),bi(this,"core"),bi(this,"logger"),bi(this,"events",new(0,a.EventEmitter)),bi(this,"provider"),bi(this,"messages"),bi(this,"subscriber"),bi(this,"publisher"),bi(this,"name","relayer"),bi(this,"transportExplicitlyClosed",!1),bi(this,"initialized",!1),bi(this,"connectionAttemptInProgress",!1),bi(this,"relayUrl"),bi(this,"projectId"),bi(this,"packageName"),bi(this,"bundleId"),bi(this,"hasExperiencedNetworkDisruption",!1),bi(this,"pingTimeout"),bi(this,"heartBeatTimeout",(0,x.toMiliseconds)(x.THIRTY_SECONDS+x.FIVE_SECONDS)),bi(this,"reconnectTimeout"),bi(this,"connectPromise"),bi(this,"reconnectInProgress",!1),bi(this,"requestsInFlight",[]),bi(this,"connectTimeout",(0,x.toMiliseconds)(15*x.ONE_SECOND)),bi(this,"request",async e=>{var t,r;this.logger.debug("Publishing Request Payload");let i=e.id||dY().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:e.method,topic:null==(t=e.params)?void 0:t.topic},"relayer.request - publishing...");let n=`${i}:${(null==(r=e.params)?void 0:r.tag)||""}`;this.requestsInFlight.push(n);let s=await this.provider.request(e);return this.requestsInFlight=this.requestsInFlight.filter(e=>e!==n),s}catch(e){throw this.logger.debug(`Failed to Publish Request: ${i}`),e}}),bi(this,"resetPingTimeout",()=>{}),bi(this,"onPayloadHandler",e=>{this.onProviderPayload(e),this.resetPingTimeout()}),bi(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected \uD83D\uDEDC"),this.startPingTimeout(),this.events.emit("relayer_connect")}),bi(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected \uD83D\uDED1"),this.requestsInFlight=[],this.onProviderDisconnect()}),bi(this,"onProviderErrorHandler",e=>{this.logger.fatal(`Fatal socket error: ${e.message}`),this.events.emit("relayer_error",e),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),bi(this,"registerProviderListeners",()=>{this.provider.on(pp,this.onPayloadHandler),this.provider.on(pg,this.onConnectHandler),this.provider.on(pb,this.onDisconnectHandler),this.provider.on(py,this.onProviderErrorHandler)}),this.core=e.core,this.logger=function({logger:e,name:t}){let r="string"==typeof e?tl({opts:{level:e,name:t}}).logger:e;return r.level="string"==typeof e?e:e.level,r}({logger:null!=(r=e.logger)?r:"error",name:this.name}),this.messages=new gB(this.logger,e.core),this.subscriber=new g5(this,this.logger),this.publisher=new gV(this,this.logger),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||pu,uz()&&"u">typeof t&&"u">typeof(null==t?void 0:t.Platform)&&(null==t?void 0:t.Platform.OS)==="android"?this.packageName=uF():uz()&&"u">typeof t&&"u">typeof(null==t?void 0:t.Platform)&&(null==t?void 0:t.Platform.OS)==="ios"&&(this.bundleId=uF()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(e=>this.logger.warn(e,e?.message))}get context(){return tf(this.logger)}get connected(){var e,t,r;return(null==(r=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:r.readyState)===1}get connecting(){var e,t,r;return(null==(r=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:r.readyState)===0||void 0!==this.connectPromise}async publish(e,t,r){this.isInitialized(),await this.publisher.publish(e,t,r),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now(),transportType:pw},"outbound")}async publishCustom(e){this.isInitialized(),await this.publisher.publishCustom(e)}async subscribe(e,t){var r,i,n;this.isInitialized(),null!=t&&t.transportType&&t?.transportType!=="relay"||await this.toEstablishConnection();let s=typeof(null==(r=t?.internal)?void 0:r.throwOnFailedPublish)>"u"||(null==(i=t?.internal)?void 0:i.throwOnFailedPublish),o=(null==(n=this.subscriber.topicMap.get(e))?void 0:n[0])||"",a,h=t=>{t.topic===e&&(this.subscriber.off(pE,h),a())};return await Promise.all([new Promise(e=>{a=e,this.subscriber.on(pE,h)}),new Promise(async(r,i)=>{o=await this.subscriber.subscribe(e,br({internal:{throwOnFailedPublish:s}},t)).catch(e=>{s&&i(e)})||o,r()})]),o}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await uV(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics)return void this.logger.info("Starting WS connection skipped because the client has no topics to work with.");if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(t,r)=>{await this.connect(e).then(t).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),this.connectionAttemptInProgress||(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await dk())throw Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if(e?.length===0)return void this.logger.trace("Batch message events is empty. Ignoring...");let t=e.sort((e,t)=>e.publishedAt-t.publishedAt);for(let e of(this.logger.debug(`Batch of ${t.length} message events sorted`),t))try{await this.onMessageEvent(e)}catch(e){this.logger.warn(e,"Error while processing batch message event: "+e?.message)}this.logger.trace(`Batch of ${t.length} message events processed`)}async onLinkMessageEvent(e,t){let{topic:r}=e;if(!t.sessionExists){let e=uG(x.FIVE_MINUTES);await this.core.pairing.pairings.set(r,{topic:r,expiry:e,relay:{protocol:"irn"},active:!1})}this.events.emit(pf,e),await this.recordMessageEvent(e,pD)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let t=1;for(;t<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${t}...`),await this.createProvider(),await new Promise(async(e,t)=>{let r=()=>{t(Error("Connection interrupted while trying to connect"))};this.provider.once(pb,r),await uV(new Promise((e,t)=>{this.provider.connect().then(e).catch(t)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(e=>{t(e)}).finally(()=>{this.provider.off(pb,r),clearTimeout(this.reconnectTimeout)}),await new Promise(async(e,r)=>{let i=()=>{t(Error("Connection interrupted while trying to subscribe"))};this.provider.once(pb,i),await this.subscriber.start().then(e).catch(r).finally(()=>{this.provider.off(pb,i)})}),this.hasExperiencedNetworkDisruption=!1,e()})}catch(e){await this.subscriber.stop(),this.logger.warn({},e.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${t}`);break}await new Promise(e=>setTimeout(e,(0,x.toMiliseconds)(+t))),t++}}startPingTimeout(){}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();let e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new d7(new pr(function({protocol:e,version:t,relayUrl:r,sdkVersion:i,auth:n,projectId:s,useOnCloseEvent:o,bundleId:a,packageName:h}){let u=r.split("?"),f=uH(e,t,i),c=function(e,t){let r=new URLSearchParams(e);return Object.entries(t).sort(([e],[t])=>e.localeCompare(t)).forEach(([e,t])=>{null!=t&&r.set(e,String(t))}),r.toString()}(u[1]||"",{auth:n,ua:f,projectId:s,useOnCloseEvent:o||void 0,packageName:h||void 0,bundleId:a||void 0});return u[0]+"?"+c}({sdkVersion:pm,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,t){let{topic:r,message:i}=e;await this.messages.set(r,i,t)}async shouldIgnoreMessageEvent(e){let{topic:t,message:r}=e;if(!r||0===r.length)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(t))return this.logger.warn(`Ignoring message for unknown topic ${t}`),!0;let i=this.messages.has(t,r);return i&&this.logger.warn(`Ignoring duplicate message: ${r}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),d6(e)){if(!e.method.endsWith("_subscription"))return;let t=e.params,{topic:r,message:i,publishedAt:n,attestation:s}=t.data,o={topic:r,message:i,publishedAt:n,transportType:pw,attestation:s};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(br({type:"event",event:t.id},o)),this.events.emit(t.id,o),await this.acknowledgePayload(e),await this.onMessageEvent(o)}else d5(e)&&this.events.emit(pc,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,pD),this.events.emit(pf,e))}async acknowledgePayload(e){let t=dJ(e.id,!0);await this.provider.connection.send(t)}unregisterProviderListeners(){this.provider.off(pp,this.onPayloadHandler),this.provider.off(pg,this.onConnectHandler),this.provider.off(pb,this.onDisconnectHandler),this.provider.off(py,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await dk();(function(e){var r,i;switch(uq()){case uU:r=e,!uz()&&uj()&&(window.addEventListener("online",()=>r(!0)),window.addEventListener("offline",()=>r(!1)));break;case uk:i=e,uz()&&"u">typeof t&&null!=t&&t.NetInfo&&t?.NetInfo.addEventListener(e=>i(e?.isConnected))}})(async t=>{e!==t&&(e=t,t?await this.transportOpen().catch(e=>this.logger.error(e,e?.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(A,async()=>{var e;if(!this.transportExplicitlyClosed&&!this.connected&&(!(uj()&&(0,nn.getDocument)())||(null==(e=(0,nn.getDocument)())?void 0:e.visibilityState)==="visible"))try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(e){this.logger.warn(e,e?.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit("relayer_disconnect"),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e?.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},(0,x.toMiliseconds)(.1)))))}isInitialized(){if(!this.initialized){let{message:e}=dP("NOT_INITIALIZED",this.name);throw Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise)return void await this.connectPromise;await this.connect()}}}function bs(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.prototype.propertyIsEnumerable.call(e,t))}function bo(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const ba="[object Arguments]",bh="[object Object]";function bu(){}function bf(e){if(!e||"object"!=typeof e)return!1;let t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&"[object Object]"===Object.prototype.toString.call(e)}var bc=Object.defineProperty,bl=Object.getOwnPropertySymbols,bd=Object.prototype.hasOwnProperty,bp=Object.prototype.propertyIsEnumerable,bg=(e,t,r)=>t in e?bc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,bb=(e,t)=>{for(var r in t||(t={}))bd.call(t,r)&&bg(e,r,t[r]);if(bl)for(var r of bl(t))bp.call(t,r)&&bg(e,r,t[r]);return e},by=(e,t,r)=>bg(e,"symbol"!=typeof t?t+"":t,r);class bm extends tD{constructor(e,t,r,i=pn,n){super(e,t,r,i),this.core=e,this.logger=t,this.name=r,by(this,"map",new Map),by(this,"version","0.3"),by(this,"cached",[]),by(this,"initialized",!1),by(this,"getKey"),by(this,"storagePrefix",pn),by(this,"recentlyDeleted",[]),by(this,"recentlyDeletedLimit",200),by(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(e=>{var t;this.getKey&&null!==e&&!dT(e)?this.map.set(this.getKey(e),e):(null==(t=e?.proposer)?void 0:t.publicKey)?this.map.set(e.id,e):e?.topic&&this.map.set(e.topic,e)}),this.cached=[],this.initialized=!0)}),by(this,"set",async(e,t)=>{this.isInitialized(),this.map.has(e)?await this.update(e,t):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:e,value:t}),this.map.set(e,t),await this.persist())}),by(this,"get",e=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:e}),this.getData(e))),by(this,"getAll",e=>(this.isInitialized(),e?this.values.filter(t=>Object.keys(e).every(r=>{var i;return i=t[r],function e(t,r,i,n,s,o,a){let h=a(t,r,i,n,s,o);if(void 0!==h)return h;if(typeof t==typeof r)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":case"function":return t===r;case"number":return t===r||Object.is(t,r)}return function t(r,i,n,s){if(Object.is(r,i))return!0;let o=bo(r),a=bo(i);if(o===ba&&(o=bh),a===ba&&(a=bh),o!==a)return!1;switch(o){case"[object String]":return r.toString()===i.toString();case"[object Number]":{let e=r.valueOf(),t=i.valueOf();return e===t||Number.isNaN(e)&&Number.isNaN(t)}case"[object Boolean]":case"[object Date]":case"[object Symbol]":return Object.is(r.valueOf(),i.valueOf());case"[object RegExp]":return r.source===i.source&&r.flags===i.flags;case"[object Function]":return r===i}let h=(n=n??new Map).get(r),u=n.get(i);if(null!=h&&null!=u)return h===i;n.set(r,i),n.set(i,r);try{switch(o){case"[object Map]":if(r.size!==i.size)return!1;for(let[t,o]of r.entries())if(!i.has(t)||!e(o,i.get(t),t,r,i,n,s))return!1;return!0;case"[object Set]":{if(r.size!==i.size)return!1;let t=Array.from(r.values()),o=Array.from(i.values());for(let a=0;a<t.length;a++){let h=t[a],u=o.findIndex(t=>e(h,t,void 0,r,i,n,s));if(-1===u)return!1;o.splice(u,1)}return!0}case"[object Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":case"[object BigUint64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object BigInt64Array]":case"[object Float32Array]":case"[object Float64Array]":if(F.isBuffer(r)!==F.isBuffer(i)||r.length!==i.length)return!1;for(let t=0;t<r.length;t++)if(!e(r[t],i[t],t,r,i,n,s))return!1;return!0;case"[object ArrayBuffer]":return r.byteLength===i.byteLength&&t(new Uint8Array(r),new Uint8Array(i),n,s);case"[object DataView]":return r.byteLength===i.byteLength&&r.byteOffset===i.byteOffset&&t(new Uint8Array(r),new Uint8Array(i),n,s);case"[object Error]":return r.name===i.name&&r.message===i.message;case bh:{if(!(t(r.constructor,i.constructor,n,s)||bf(r)&&bf(i)))return!1;let o=[...Object.keys(r),...bs(r)],a=[...Object.keys(i),...bs(i)];if(o.length!==a.length)return!1;for(let t=0;t<o.length;t++){let a=o[t],h=r[a];if(!Object.hasOwn(i,a))return!1;let u=i[a];if(!e(h,u,a,r,i,n,s))return!1}return!0}default:return!1}}finally{n.delete(r),n.delete(i)}}(t,r,o,a)}(i,e[r],void 0,void 0,void 0,void 0,bu)})):this.values)),by(this,"update",async(e,t)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:e,update:t});let r=bb(bb({},this.getData(e)),t);this.map.set(e,r),await this.persist()}),by(this,"delete",async(e,t)=>{this.isInitialized(),this.map.has(e)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:e,reason:t}),this.map.delete(e),this.addToRecentlyDeleted(e),await this.persist())}),this.logger=tc(t,this.name),this.storagePrefix=i,this.getKey=n}get context(){return tf(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){let t=this.map.get(e);if(!t){if(this.recentlyDeleted.includes(e)){let{message:t}=dP("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(t),Error(t)}let{message:t}=dP("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(t),Error(t)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{let e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){let{message:e}=dP("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),Error(e)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){let{message:e}=dP("NOT_INITIALIZED",this.name);throw Error(e)}}}var bv=Object.defineProperty,bw=(e,t,r)=>{let i;return(i="symbol"!=typeof t?t+"":t)in e?bv(e,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[i]=r};class bD{constructor(e,t){this.core=e,this.logger=t,bw(this,"name","pairing"),bw(this,"version","0.3"),bw(this,"events",new(r(a))),bw(this,"pairings"),bw(this,"initialized",!1),bw(this,"storagePrefix",pn),bw(this,"ignoredPayloadTypes",[1]),bw(this,"registeredMethods",[]),bw(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),bw(this,"register",({methods:e})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...e])]}),bw(this,"create",async e=>{this.isInitialized();let t=ds(),r=await this.core.crypto.setSymKey(t),i=uG(x.FIVE_MINUTES),n={protocol:"irn"},s={topic:r,expiry:i,relay:n,active:!1,methods:e?.methods},o=dM({protocol:this.core.protocol,version:this.core.version,topic:r,symKey:t,relay:n,expiryTimestamp:i,methods:e?.methods});return this.events.emit(pI,s),this.core.expirer.set(r,i),await this.pairings.set(r,s),await this.core.relayer.subscribe(r,{transportType:e?.transportType,internal:e?.internal}),{topic:r,uri:o}}),bw(this,"pair",async e=>{let t;this.isInitialized();let r=this.core.eventClient.createEvent({properties:{topic:e?.uri,trace:["pairing_started"]}});this.isValidPair(e,r);let{topic:i,symKey:n,relay:s,expiryTimestamp:o,methods:a}=dA(e.uri);if(r.props.properties.topic=i,r.addTrace("pairing_uri_validation_success"),r.addTrace("pairing_uri_not_expired"),this.pairings.keys.includes(i)){if(t=this.pairings.get(i),r.addTrace("existing_pairing"),t.active)throw r.setError("active_pairing_already_exists"),Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);r.addTrace("pairing_not_expired")}let h=o||uG(x.FIVE_MINUTES),u={topic:i,relay:s,expiry:h,active:!1,methods:a};this.core.expirer.set(i,h),await this.pairings.set(i,u),r.addTrace("store_new_pairing"),e.activatePairing&&await this.activate({topic:i}),this.events.emit(pI,u),r.addTrace("emit_inactive_pairing"),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(n,i),r.addTrace("subscribing_pairing_topic");try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{r.setError("no_internet_connection")}try{await this.core.relayer.subscribe(i,{relay:s})}catch(e){throw r.setError("subscribe_pairing_topic_failure"),e}return r.addTrace("subscribe_pairing_topic_success"),u}),bw(this,"activate",async({topic:e})=>{this.isInitialized();let t=uG(x.FIVE_MINUTES);this.core.expirer.set(e,t),await this.pairings.update(e,{active:!0,expiry:t})}),bw(this,"ping",async e=>{this.isInitialized(),await this.isValidPing(e),this.logger.warn("ping() is deprecated and will be removed in the next major release.");let{topic:t}=e;if(this.pairings.keys.includes(t)){let e=await this.sendRequest(t,"wc_pairingPing",{}),{done:r,resolve:i,reject:n}=function(e=x.FIVE_MINUTES,t){let r,i,n,s,o=(0,x.toMiliseconds)(e||x.FIVE_MINUTES);return{resolve:e=>{n&&r&&(clearTimeout(n),r(e),s=Promise.resolve(e))},reject:e=>{n&&i&&(clearTimeout(n),i(e))},done:()=>new Promise((e,t)=>{if(s)return e(s);n=setTimeout(()=>{let e=Error(void 0);s=Promise.reject(e),t(e)},o),r=e,i=t})}}();this.events.once(uZ("pairing_ping",e),({error:e})=>{e?n(e):i()}),await r()}}),bw(this,"updateExpiry",async({topic:e,expiry:t})=>{this.isInitialized(),await this.pairings.update(e,{expiry:t})}),bw(this,"updateMetadata",async({topic:e,metadata:t})=>{this.isInitialized(),await this.pairings.update(e,{peerMetadata:t})}),bw(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),bw(this,"disconnect",async e=>{this.isInitialized(),await this.isValidDisconnect(e);let{topic:t}=e;this.pairings.keys.includes(t)&&(await this.sendRequest(t,"wc_pairingDelete",dR("USER_DISCONNECTED")),await this.deletePairing(t))}),bw(this,"formatUriFromPairing",e=>{this.isInitialized();let{topic:t,relay:r,expiry:i,methods:n}=e,s=this.core.crypto.keychain.get(t);return dM({protocol:this.core.protocol,version:this.core.version,topic:t,symKey:s,relay:r,expiryTimestamp:i,methods:n})}),bw(this,"sendRequest",async(e,t,r)=>{let i=dZ(t,r),n=await this.core.crypto.encode(e,i),s=pS[t].req;return this.core.history.set(e,i),this.core.relayer.publish(e,n,s),i.id}),bw(this,"sendResult",async(e,t,r)=>{let i=dJ(e,r),n=await this.core.crypto.encode(t,i),s=pS[(await this.core.history.get(t,e)).request.method].res;await this.core.relayer.publish(t,n,s),await this.core.history.resolve(i)}),bw(this,"sendError",async(e,t,r)=>{let i=dX(e,r),n=await this.core.crypto.encode(t,i),s=(await this.core.history.get(t,e)).request.method,o=pS[s]?pS[s].res:pS.unregistered_method.res;await this.core.relayer.publish(t,n,o),await this.core.history.resolve(i)}),bw(this,"deletePairing",async(e,t)=>{await this.core.relayer.unsubscribe(e),await Promise.all([this.pairings.delete(e,dR("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(e),t?Promise.resolve():this.core.expirer.del(e)])}),bw(this,"cleanup",async()=>{let e=this.pairings.getAll().filter(e=>uY(e.expiry));await Promise.all(e.map(e=>this.deletePairing(e.topic)))}),bw(this,"onRelayEventRequest",async e=>{let{topic:t,payload:r}=e;switch(r.method){case"wc_pairingPing":return await this.onPairingPingRequest(t,r);case"wc_pairingDelete":return await this.onPairingDeleteRequest(t,r);default:return await this.onUnknownRpcMethodRequest(t,r)}}),bw(this,"onRelayEventResponse",async e=>{let{topic:t,payload:r}=e,i=(await this.core.history.get(t,r.id)).request.method;return"wc_pairingPing"===i?this.onPairingPingResponse(t,r):this.onUnknownRpcMethodResponse(i)}),bw(this,"onPairingPingRequest",async(e,t)=>{let{id:r}=t;try{this.isValidPing({topic:e}),await this.sendResult(r,e,!0),this.events.emit("pairing_ping",{id:r,topic:e})}catch(t){await this.sendError(r,e,t),this.logger.error(t)}}),bw(this,"onPairingPingResponse",(e,t)=>{let{id:r}=t;setTimeout(()=>{d4(t)?this.events.emit(uZ("pairing_ping",r),{}):d9(t)&&this.events.emit(uZ("pairing_ping",r),{error:t.error})},500)}),bw(this,"onPairingDeleteRequest",async(e,t)=>{let{id:r}=t;try{this.isValidDisconnect({topic:e}),await this.deletePairing(e),this.events.emit("pairing_delete",{id:r,topic:e})}catch(t){await this.sendError(r,e,t),this.logger.error(t)}}),bw(this,"onUnknownRpcMethodRequest",async(e,t)=>{let{id:r,method:i}=t;try{if(this.registeredMethods.includes(i))return;let t=dR("WC_METHOD_UNSUPPORTED",i);await this.sendError(r,e,t),this.logger.error(t)}catch(t){await this.sendError(r,e,t),this.logger.error(t)}}),bw(this,"onUnknownRpcMethodResponse",e=>{this.registeredMethods.includes(e)||this.logger.error(dR("WC_METHOD_UNSUPPORTED",e))}),bw(this,"isValidPair",(e,t)=>{var r;if(!dL(e)){let{message:r}=dP("MISSING_OR_INVALID",`pair() params: ${e}`);throw t.setError(pL),Error(r)}if(!dB(e.uri)){let{message:r}=dP("MISSING_OR_INVALID",`pair() uri: ${e.uri}`);throw t.setError(pL),Error(r)}let i=dA(e?.uri);if(!(null!=(r=i?.relay)&&r.protocol)){let{message:e}=dP("MISSING_OR_INVALID","pair() uri#relay-protocol");throw t.setError(pL),Error(e)}if(!(null!=i&&i.symKey)){let{message:e}=dP("MISSING_OR_INVALID","pair() uri#symKey");throw t.setError(pL),Error(e)}if(null!=i&&i.expiryTimestamp&&(0,x.toMiliseconds)(i?.expiryTimestamp)<Date.now()){t.setError("pairing_expired");let{message:e}=dP("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw Error(e)}}),bw(this,"isValidPing",async e=>{if(!dL(e)){let{message:t}=dP("MISSING_OR_INVALID",`ping() params: ${e}`);throw Error(t)}let{topic:t}=e;await this.isValidPairingTopic(t)}),bw(this,"isValidDisconnect",async e=>{if(!dL(e)){let{message:t}=dP("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw Error(t)}let{topic:t}=e;await this.isValidPairingTopic(t)}),bw(this,"isValidPairingTopic",async e=>{if(!dN(e,!1)){let{message:t}=dP("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw Error(t)}if(!this.pairings.keys.includes(e)){let{message:t}=dP("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw Error(t)}if(uY(this.pairings.get(e).expiry)){await this.deletePairing(e);let{message:t}=dP("EXPIRED",`pairing topic: ${e}`);throw Error(t)}}),this.core=e,this.logger=tc(t,this.name),this.pairings=new bm(this.core,this.logger,this.name,this.storagePrefix)}get context(){return tf(this.logger)}isInitialized(){if(!this.initialized){let{message:e}=dP("NOT_INITIALIZED",this.name);throw Error(e)}}registerRelayerEvents(){this.core.relayer.on(pf,async e=>{let{topic:t,message:r,transportType:i}=e;if(this.pairings.keys.includes(t)&&i!==pv&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{let e=await this.core.crypto.decode(t,r);d6(e)?(this.core.history.set(t,e),await this.onRelayEventRequest({topic:t,payload:e})):d5(e)&&(await this.core.history.resolve(e),await this.onRelayEventResponse({topic:t,payload:e}),this.core.history.delete(t,e.id)),await this.core.relayer.messages.ack(t,r)}catch(e){this.logger.error(e)}})}registerExpirerEvents(){this.core.expirer.on(pR,async e=>{let{topic:t}=function(e){let[t,r]=e.split(":"),i={id:void 0,topic:void 0};if("topic"===t&&"string"==typeof r)i.topic=r;else if("id"===t&&Number.isInteger(Number(r)))i.id=Number(r);else throw Error(`Invalid target, expected id:number or topic:string, got ${t}:${r}`);return i}(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit("pairing_expire",{topic:t}))})}}var bx=Object.defineProperty,bE=(e,t,r)=>{let i;return(i="symbol"!=typeof t?t+"":t)in e?bx(e,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[i]=r};class b_ extends ty{constructor(e,t){super(e,t),this.core=e,this.logger=t,bE(this,"records",new Map),bE(this,"events",new(0,a.EventEmitter)),bE(this,"name","history"),bE(this,"version","0.3"),bE(this,"cached",[]),bE(this,"initialized",!1),bE(this,"storagePrefix",pn),bE(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(e=>this.records.set(e.id,e)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),bE(this,"set",(e,t,r)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:e,request:t,chainId:r}),this.records.has(t.id))return;let i={id:t.id,topic:e,request:{method:t.method,params:t.params||null},chainId:r,expiry:uG(x.THIRTY_DAYS)};this.records.set(i.id,i),this.persist(),this.events.emit(pA,i)}),bE(this,"resolve",async e=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:e}),!this.records.has(e.id))return;let t=await this.getRecord(e.id);typeof t.response>"u"&&(t.response=d9(e)?{error:e.error}:{result:e.result},this.records.set(t.id,t),this.persist(),this.events.emit(pM,t))}),bE(this,"get",async(e,t)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:e,id:t}),await this.getRecord(t))),bE(this,"delete",(e,t)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:t}),this.values.forEach(r=>{r.topic===e&&("u">typeof t&&r.id!==t||(this.records.delete(r.id),this.events.emit(pC,r)))}),this.persist()}),bE(this,"exists",async(e,t)=>(this.isInitialized(),!!this.records.has(t)&&(await this.getRecord(t)).topic===e)),bE(this,"on",(e,t)=>{this.events.on(e,t)}),bE(this,"once",(e,t)=>{this.events.once(e,t)}),bE(this,"off",(e,t)=>{this.events.off(e,t)}),bE(this,"removeListener",(e,t)=>{this.events.removeListener(e,t)}),this.logger=tc(t,this.name)}get context(){return tf(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){let e=[];return this.values.forEach(t=>{if("u">typeof t.response)return;let r={topic:t.topic,request:dZ(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();let t=this.records.get(e);if(!t){let{message:t}=dP("NO_MATCHING_KEY",`${this.name}: ${e}`);throw Error(t)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit("history_sync")}async restore(){try{let e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){let{message:e}=dP("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),Error(e)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(pA,e=>{this.logger.info(`Emitting ${pA}`),this.logger.debug({type:"event",event:pA,record:e})}),this.events.on(pM,e=>{this.logger.info(`Emitting ${pM}`),this.logger.debug({type:"event",event:pM,record:e})}),this.events.on(pC,e=>{this.logger.info(`Emitting ${pC}`),this.logger.debug({type:"event",event:pC,record:e})}),this.core.heartbeat.on(A,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(t=>{(0,x.toMiliseconds)(t.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${t.id}`),this.records.delete(t.id),this.events.emit(pC,t,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){let{message:e}=dP("NOT_INITIALIZED",this.name);throw Error(e)}}}var bS=Object.defineProperty,bI=(e,t,r)=>{let i;return(i="symbol"!=typeof t?t+"":t)in e?bS(e,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[i]=r};class bA extends tE{constructor(e,t){super(e,t),this.core=e,this.logger=t,bI(this,"expirations",new Map),bI(this,"events",new(0,a.EventEmitter)),bI(this,"name","expirer"),bI(this,"version","0.3"),bI(this,"cached",[]),bI(this,"initialized",!1),bI(this,"storagePrefix",pn),bI(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(e=>this.expirations.set(e.target,e)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),bI(this,"has",e=>{try{let t=this.formatTarget(e);return"u">typeof this.getExpiration(t)}catch{return!1}}),bI(this,"set",(e,t)=>{this.isInitialized();let r=this.formatTarget(e),i={target:r,expiry:t};this.expirations.set(r,i),this.checkExpiry(r,i),this.events.emit(pO,{target:r,expiration:i})}),bI(this,"get",e=>{this.isInitialized();let t=this.formatTarget(e);return this.getExpiration(t)}),bI(this,"del",e=>{if(this.isInitialized(),this.has(e)){let t=this.formatTarget(e),r=this.getExpiration(t);this.expirations.delete(t),this.events.emit(pP,{target:t,expiration:r})}}),bI(this,"on",(e,t)=>{this.events.on(e,t)}),bI(this,"once",(e,t)=>{this.events.once(e,t)}),bI(this,"off",(e,t)=>{this.events.off(e,t)}),bI(this,"removeListener",(e,t)=>{this.events.removeListener(e,t)}),this.logger=tc(t,this.name)}get context(){return tf(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if("string"==typeof e)return uW("topic",e);if("number"==typeof e)return uW("id",e);let{message:t}=dP("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit("expirer_sync")}async restore(){try{let e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){let{message:e}=dP("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),Error(e)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){let t=this.expirations.get(e);if(!t){let{message:t}=dP("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(t),Error(t)}return t}checkExpiry(e,t){let{expiry:r}=t;(0,x.toMiliseconds)(r)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(pR,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(A,()=>this.checkExpirations()),this.events.on(pO,e=>{this.logger.info(`Emitting ${pO}`),this.logger.debug({type:"event",event:pO,data:e}),this.persist()}),this.events.on(pR,e=>{this.logger.info(`Emitting ${pR}`),this.logger.debug({type:"event",event:pR,data:e}),this.persist()}),this.events.on(pP,e=>{this.logger.info(`Emitting ${pP}`),this.logger.debug({type:"event",event:pP,data:e}),this.persist()})}isInitialized(){if(!this.initialized){let{message:e}=dP("NOT_INITIALIZED",this.name);throw Error(e)}}}var bM=Object.defineProperty,bC=(e,t,r)=>{let i;return(i="symbol"!=typeof t?t+"":t)in e?bM(e,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[i]=r};class bO extends t_{constructor(e,t,r){super(e,t,r),this.core=e,this.logger=t,this.store=r,bC(this,"name","verify-api"),bC(this,"abortController"),bC(this,"isDevEnv"),bC(this,"verifyUrlV3",pN),bC(this,"storagePrefix",pn),bC(this,"version",2),bC(this,"publicKey"),bC(this,"fetchPromise"),bC(this,"init",async()=>{var e;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&(0,x.toMiliseconds)(null==(e=this.publicKey)?void 0:e.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),bC(this,"register",async e=>{if(!uj()||this.isDevEnv)return;let t=window.location.origin,{id:r,decryptedId:i}=e,n=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${t}&id=${r}&decryptedId=${i}`;try{let e=(0,nn.getDocument)(),t=this.startAbortTimer(5*x.ONE_SECOND),i=await new Promise((i,s)=>{let o=()=>{window.removeEventListener("message",h),e.body.removeChild(a),s("attestation aborted")};this.abortController.signal.addEventListener("abort",o);let a=e.createElement("iframe");a.src=n,a.style.display="none",a.addEventListener("error",o,{signal:this.abortController.signal});let h=n=>{if(n.data&&"string"==typeof n.data)try{let s=JSON.parse(n.data);if("verify_attestation"===s.type){if(iK(s.attestation).payload.id!==r)return;clearInterval(t),e.body.removeChild(a),this.abortController.signal.removeEventListener("abort",o),window.removeEventListener("message",h),i(null===s.attestation?"":s.attestation)}}catch(e){this.logger.warn(e)}};e.body.appendChild(a),window.addEventListener("message",h,{signal:this.abortController.signal})});return this.logger.debug(i,"jwt attestation"),i}catch(e){this.logger.warn(e)}return""}),bC(this,"resolve",async e=>{if(this.isDevEnv)return"";let{attestationId:t,hash:r,encryptedId:i}=e;if(""===t)return void this.logger.debug("resolve: attestationId is empty, skipping");if(t){if(iK(t).payload.id!==i)return;let e=await this.isValidJwtAttestation(t);if(e)return e.isVerified?e:void this.logger.warn("resolve: jwt attestation: origin url not verified")}if(!r)return;let n=this.getVerifyUrl(e?.verifyUrl);return this.fetchAttestation(r,n)}),bC(this,"fetchAttestation",async(e,t)=>{this.logger.debug(`resolving attestation: ${e} from url: ${t}`);let r=this.startAbortTimer(5*x.ONE_SECOND),i=await fetch(`${t}/attestation/${e}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(r),200===i.status?await i.json():void 0}),bC(this,"getVerifyUrl",e=>{let t=e||pT;return pB.includes(t)||(this.logger.info(`verify url: ${t}, not included in trusted list, assigning default: ${pT}`),t=pT),t}),bC(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);let e=this.startAbortTimer(x.FIVE_SECONDS),t=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(e),await t.json()}catch(e){this.logger.warn(e)}}),bC(this,"persistPublicKey",async e=>{this.logger.debug(e,"persisting public key to local storage"),await this.store.setItem(this.storeKey,e),this.publicKey=e}),bC(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),bC(this,"isValidJwtAttestation",async e=>{let t=await this.getPublicKey();try{if(t)return this.validateAttestation(e,t)}catch(e){this.logger.error(e),this.logger.warn("error validating attestation")}let r=await this.fetchAndPersistPublicKey();try{if(r)return this.validateAttestation(e,r)}catch(e){this.logger.error(e),this.logger.warn("error validating attestation")}}),bC(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),bC(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async e=>{let t=await this.fetchPublicKey();t&&(await this.persistPublicKey(t),e(t))});let e=await this.fetchPromise;return this.fetchPromise=void 0,e}),bC(this,"validateAttestation",(e,t)=>{let r=function(e,t){let[r,i,n]=e.split("."),s=F.from(dl(n),"base64");if(64!==s.length)throw Error("Invalid signature length");let o=s.slice(0,32),a=s.slice(32,64),h=f7(`${r}.${i}`),u=function(e){let t=F.from(e.x,"base64"),r=F.from(e.y,"base64");return(0,a$.concat)([new Uint8Array([4]),t,r])}(t);if(!l7.verify((0,a$.concat)([o,a]),h,u))throw Error("Invalid signature");return iK(e).payload}(e,t.publicKey),i={hasExpired:(0,x.toMiliseconds)(r.exp)<Date.now(),payload:r};if(i.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),Error("JWT attestation expired");return{origin:i.payload.origin,isScam:i.payload.isScam,isVerified:i.payload.isVerified}}),this.logger=tc(t,this.name),this.abortController=new AbortController,this.isDevEnv=!1,this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return tf(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),(0,x.toMiliseconds)(e))}}var bP=Object.defineProperty,bR=(e,t,r)=>{let i;return(i="symbol"!=typeof t?t+"":t)in e?bP(e,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[i]=r};class bT extends tS{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,bR(this,"context","echo"),bR(this,"registerDeviceToken",async e=>{let{clientId:t,token:r,notificationType:i,enableEncrypted:n=!1}=e,s=`https://echo.walletconnect.com/${this.projectId}/clients`;await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:t,type:i,token:r,always_raw:n})})}),this.logger=tc(t,this.context)}}var bN=Object.defineProperty,bB=Object.getOwnPropertySymbols,bL=Object.prototype.hasOwnProperty,bk=Object.prototype.propertyIsEnumerable,bU=(e,t,r)=>t in e?bN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,bz=(e,t)=>{for(var r in t||(t={}))bL.call(t,r)&&bU(e,r,t[r]);if(bB)for(var r of bB(t))bk.call(t,r)&&bU(e,r,t[r]);return e},bj=(e,t,r)=>bU(e,"symbol"!=typeof t?t+"":t,r);class bq extends tI{constructor(e,t,r=!0){super(e,t,r),this.core=e,this.logger=t,bj(this,"context","event-client"),bj(this,"storagePrefix",pn),bj(this,"storageVersion",.1),bj(this,"events",new Map),bj(this,"shouldPersist",!1),bj(this,"init",async()=>{try{let e={eventId:uJ(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:uH(this.core.relayer.protocol,this.core.relayer.version,pm)}}};await this.sendEvent([e])}catch(e){this.logger.warn(e)}}),bj(this,"createEvent",e=>{let{event:t="ERROR",type:r="",properties:{topic:i,trace:n}}=e,s=uJ(),o=this.core.projectId||"",a=bz({eventId:s,timestamp:Date.now(),props:{event:t,type:r,properties:{topic:i,trace:n}},bundleId:o,domain:this.getAppDomain()},this.setMethods(s));return this.telemetryEnabled&&(this.events.set(s,a),this.shouldPersist=!0),a}),bj(this,"getEvent",e=>{let{eventId:t,topic:r}=e;if(t)return this.events.get(t);let i=Array.from(this.events.values()).find(e=>e.props.properties.topic===r);if(i)return bz(bz({},i),this.setMethods(i.eventId))}),bj(this,"deleteEvent",e=>{let{eventId:t}=e;this.events.delete(t),this.shouldPersist=!0}),bj(this,"setEventListeners",()=>{this.core.heartbeat.on(A,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(e=>{(0,x.fromMiliseconds)(Date.now())-(0,x.fromMiliseconds)(e.timestamp)>86400&&(this.events.delete(e.eventId),this.shouldPersist=!0)})})}),bj(this,"setMethods",e=>({addTrace:t=>this.addTrace(e,t),setError:t=>this.setError(e,t)})),bj(this,"addTrace",(e,t)=>{let r=this.events.get(e);r&&(r.props.properties.trace.push(t),this.events.set(e,r),this.shouldPersist=!0)}),bj(this,"setError",(e,t)=>{let r=this.events.get(e);r&&(r.props.type=t,r.timestamp=Date.now(),this.events.set(e,r),this.shouldPersist=!0)}),bj(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),bj(this,"restore",async()=>{try{let e=await this.core.storage.getItem(this.storageKey)||[];if(!e.length)return;e.forEach(e=>{this.events.set(e.eventId,bz(bz({},e),this.setMethods(e.eventId)))})}catch(e){this.logger.warn(e)}}),bj(this,"submit",async()=>{if(!this.telemetryEnabled||0===this.events.size)return;let e=[];for(let[t,r]of this.events)r.props.type&&e.push(r);if(0!==e.length)try{if((await this.sendEvent(e)).ok)for(let t of e)this.events.delete(t.eventId),this.shouldPersist=!0}catch(e){this.logger.warn(e)}}),bj(this,"sendEvent",async e=>{let t=this.getAppDomain()?"":"&sp=desktop";return await fetch(`https://pulse.walletconnect.org/batch?projectId=${this.core.projectId}&st=events_sdk&sv=js-${pm}${t}`,{method:"POST",body:JSON.stringify(e)})}),bj(this,"getAppDomain",()=>((0,na.getWindowMetadata)()||{name:"",description:"",url:"",icons:[""]}).url),this.logger=tc(t,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var bF=Object.defineProperty,bH=Object.getOwnPropertySymbols,bK=Object.prototype.hasOwnProperty,b$=Object.prototype.propertyIsEnumerable,bV=(e,t,r)=>t in e?bF(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,bW=(e,t)=>{for(var r in t||(t={}))bK.call(t,r)&&bV(e,r,t[r]);if(bH)for(var r of bH(t))b$.call(t,r)&&bV(e,r,t[r]);return e},bG=(e,t,r)=>bV(e,"symbol"!=typeof t?t+"":t,r);class bY extends tg{constructor(e){var t,r;super(e),bG(this,"protocol","wc"),bG(this,"version",2),bG(this,"name",pi),bG(this,"relayUrl"),bG(this,"projectId"),bG(this,"customStoragePrefix"),bG(this,"events",new(0,a.EventEmitter)),bG(this,"logger"),bG(this,"heartbeat"),bG(this,"relayer"),bG(this,"crypto"),bG(this,"storage"),bG(this,"history"),bG(this,"expirer"),bG(this,"pairing"),bG(this,"verify"),bG(this,"echoClient"),bG(this,"linkModeSupportedApps"),bG(this,"eventClient"),bG(this,"initialized",!1),bG(this,"logChunkController"),bG(this,"on",(e,t)=>this.events.on(e,t)),bG(this,"once",(e,t)=>this.events.once(e,t)),bG(this,"off",(e,t)=>this.events.off(e,t)),bG(this,"removeListener",(e,t)=>this.events.removeListener(e,t)),bG(this,"dispatchEnvelope",({topic:e,message:t,sessionExists:r})=>{if(!e||!t)return;let i={topic:e,message:t,publishedAt:Date.now(),transportType:pv};this.relayer.onLinkMessageEvent(i,{sessionExists:r})});let i=this.getGlobalCore(e?.customStoragePrefix);if(i)try{return this.customStoragePrefix=i.customStoragePrefix,this.logger=i.logger,this.heartbeat=i.heartbeat,this.crypto=i.crypto,this.history=i.history,this.expirer=i.expirer,this.storage=i.storage,this.relayer=i.relayer,this.pairing=i.pairing,this.verify=i.verify,this.echoClient=i.echoClient,this.linkModeSupportedApps=i.linkModeSupportedApps,this.eventClient=i.eventClient,this.initialized=i.initialized,this.logChunkController=i.logChunkController,i}catch(e){console.warn("Failed to copy global core",e)}this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||pu,this.customStoragePrefix=null!=e&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";let{logger:n,chunkLoggerController:s}=tl({opts:tu(th({},r={level:"string"==typeof e?.logger&&e.logger?e.logger:"error",name:pi}),{level:r?.level||"info"}),maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger});this.logChunkController=s,null!=(t=this.logChunkController)&&t.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var e,t;null!=(e=this.logChunkController)&&e.downloadLogsBlobInBrowser&&(null==(t=this.logChunkController)||t.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=tc(n,this.name),this.heartbeat=new M,this.crypto=new gI(this,this.logger,e?.keychain),this.history=new b_(this,this.logger),this.expirer=new bA(this,this.logger),this.storage=null!=e&&e.storage?e.storage:new eT(bW(bW({},ps),e?.storageOptions)),this.relayer=new bn({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new bD(this,this.logger),this.verify=new bO(this,this.logger,this.storage),this.echoClient=new bT(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new bq(this,this.logger,e?.telemetryEnabled),this.setGlobalCore(this)}static async init(e){let t=new bY(e);await t.initialize();let r=await t.crypto.getClientId();return await t.storage.setItem("WALLETCONNECT_CLIENT_ID",r),t}get context(){return tf(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return null==(e=this.logChunkController)?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(px,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(px)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(e,`Core Initialization Failure at epoch ${Date.now()}`),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;let t=`_walletConnectCore_${e}`,r=`${t}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[t]}catch(e){console.warn("Failed to get global WalletConnect core",e);return}}setGlobalCore(e){var t;try{if(this.isGlobalCoreDisabled())return;let r=`_walletConnectCore_${(null==(t=e.opts)?void 0:t.customStoragePrefix)||""}`;globalThis[r]=e}catch(e){console.warn("Failed to set global WalletConnect core",e)}}isGlobalCoreDisabled(){try{return!1}catch{return!0}}}var bZ={};bZ=bX;const bJ=function(){function e(e){return void 0!==e&&e}try{if("undefined"!=typeof globalThis)return globalThis;return Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch(t){return e(self)||e(window)||e(this)||{}}}().console||{};function bX(e){var t,r;(e=e||{}).browser=e.browser||{};let i=e.browser.transmit;if(i&&"function"!=typeof i.send)throw Error("pino: transmit option must have a send function");let n=e.browser.write||bJ;e.browser.write&&(e.browser.asObject=!0);let s=e.serializers||{},o=(t=e.browser.serialize,Array.isArray(t)?t.filter(function(e){return"!stdSerializers.err"!==e}):!0===t&&Object.keys(s)),a=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(a=!1),"function"==typeof n&&(n.error=n.fatal=n.warn=n.info=n.debug=n.trace=n),!1===e.enabled&&(e.level="silent");let h=e.level||"info",u=Object.create(n);u.log||(u.log=b6),Object.defineProperty(u,"levelVal",{get:function(){return"silent"===this.level?1/0:this.levels.values[this.level]}}),Object.defineProperty(u,"level",{get:function(){return this._level},set:function(e){if("silent"!==e&&!this.levels.values[e])throw Error("unknown level "+e);this._level=e,bQ(f,u,"error","log"),bQ(f,u,"fatal","error"),bQ(f,u,"warn","error"),bQ(f,u,"info","log"),bQ(f,u,"debug","log"),bQ(f,u,"trace","log")}});let f={transmit:i,serialize:o,asObject:e.browser.asObject,levels:["error","fatal","warn","info","debug","trace"],timestamp:"function"==typeof(r=e).timestamp?r.timestamp:!1===r.timestamp?b5:b4};return u.levels=bX.levels,u.level=h,u.setMaxListeners=u.getMaxListeners=u.emit=u.addListener=u.on=u.prependListener=u.once=u.prependOnceListener=u.removeListener=u.removeAllListeners=u.listeners=u.listenerCount=u.eventNames=u.write=u.flush=b6,u.serializers=s,u._serialize=o,u._stdErrSerialize=a,u.child=function(t,r){if(!t)throw Error("missing bindings for child Pino");r=r||{},o&&t.serializers&&(r.serializers=t.serializers);let n=r.serializers;if(o&&n){var a=Object.assign({},s,n),h=!0===e.browser.serialize?Object.keys(a):o;delete t.serializers,b0([t],h,a,this._stdErrSerialize)}function u(e){this._childLevel=(0|e._childLevel)+1,this.error=b1(e,t,"error"),this.fatal=b1(e,t,"fatal"),this.warn=b1(e,t,"warn"),this.info=b1(e,t,"info"),this.debug=b1(e,t,"debug"),this.trace=b1(e,t,"trace"),a&&(this.serializers=a,this._serialize=h),i&&(this._logEvent=b3([].concat(e._logEvent.bindings,t)))}return u.prototype=this,new u(this)},i&&(u._logEvent=b3()),u}function bQ(e,t,r,i){let n=Object.getPrototypeOf(t);t[r]=t.levelVal>t.levels.values[r]?b6:n[r]?n[r]:bJ[r]||bJ[i]||b6,function(e,t,r){if(e.transmit||t[r]!==b6){var i;t[r]=(i=t[r],function(){let n=e.timestamp(),s=Array(arguments.length),o=Object.getPrototypeOf&&Object.getPrototypeOf(this)===bJ?bJ:this;for(var a=0;a<s.length;a++)s[a]=arguments[a];if(e.serialize&&!e.asObject&&b0(s,this._serialize,this.serializers,this._stdErrSerialize),e.asObject?i.call(o,function(e,t,r,i){e._serialize&&b0(r,e._serialize,e.serializers,e._stdErrSerialize);let n=r.slice(),s=n[0],o={};i&&(o.time=i),o.level=bX.levels.values[t];let a=(0|e._childLevel)+1;if(a<1&&(a=1),null!==s&&"object"==typeof s){for(;a--&&"object"==typeof n[0];)Object.assign(o,n.shift());s=n.length?eB(n.shift(),n):void 0}else"string"==typeof s&&(s=eB(n.shift(),n));return void 0!==s&&(o.msg=s),o}(this,r,s,n)):i.apply(o,s),e.transmit){let i=e.transmit.level||t.level,o=bX.levels.values[i],a=bX.levels.values[r];if(a<o)return;!function(e,t,r){let i=t.send,n=t.ts,s=t.methodLevel,o=t.methodValue,a=t.val,h=e._logEvent.bindings;b0(r,e._serialize||Object.keys(e.serializers),e.serializers,void 0===e._stdErrSerialize||e._stdErrSerialize),e._logEvent.ts=n,e._logEvent.messages=r.filter(function(e){return -1===h.indexOf(e)}),e._logEvent.level.label=s,e._logEvent.level.value=o,i(s,e._logEvent,a),e._logEvent=b3(h)}(this,{ts:n,methodLevel:r,methodValue:a,transmitLevel:i,transmitValue:bX.levels.values[e.transmit.level||t.level],send:e.transmit.send,val:t.levelVal},s)}})}}(e,t,r)}function b0(e,t,r,i){for(let n in e)if(i&&e[n]instanceof Error)e[n]=bX.stdSerializers.err(e[n]);else if("object"==typeof e[n]&&!Array.isArray(e[n]))for(let i in e[n])t&&t.indexOf(i)>-1&&i in r&&(e[n][i]=r[i](e[n][i]))}function b1(e,t,r){return function(){let i=Array(1+arguments.length);i[0]=t;for(var n=1;n<i.length;n++)i[n]=arguments[n-1];return e[r].apply(this,i)}}function b3(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function b2(){return{}}function b8(e){return e}function b6(){}function b5(){return!1}function b4(){return Date.now()}bX.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},bX.stdSerializers={mapHttpRequest:b2,mapHttpResponse:b2,wrapRequestSerializer:b8,wrapResponseSerializer:b8,wrapErrorSerializer:b8,req:b2,res:b2,err:function(e){let t={type:e.constructor.name,msg:e.message,stack:e.stack};for(let r in e)void 0===t[r]&&(t[r]=e[r]);return t}},bX.stdTimeFunctions=Object.assign({},{nullTime:b5,epochTime:b4,unixTime:function(){return Math.round(Date.now()/1e3)},isoTime:function(){return new Date(Date.now()).toISOString()}});const b9="custom_context";var b7=Object.defineProperty,ye=Object.defineProperties,yt=Object.getOwnPropertyDescriptors,yr=Object.getOwnPropertySymbols,yi=Object.prototype.hasOwnProperty,yn=Object.prototype.propertyIsEnumerable,ys=(e,t,r)=>t in e?b7(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function yo(e,t=b9){return typeof e.bindings>"u"?function(e,t=b9){return e[t]||""}(e,t):e.bindings().context||""}const ya=null!=(IA=bZ.default)?IA:bZ;let yh=!1,yu=!1;const yf={debug:1,default:2,info:2,warning:3,error:4,off:5};let yc=yf.default,yl=null;const yd=function(){try{let e=[];if(["NFD","NFC","NFKD","NFKC"].forEach(t=>{try{if("test"!=="test".normalize(t))throw Error("bad normalize")}catch(r){e.push(t)}}),e.length)throw Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw Error("broken implementation")}catch(e){return e.message}return null}();(Il=IM||(IM={})).DEBUG="DEBUG",Il.INFO="INFO",Il.WARNING="WARNING",Il.ERROR="ERROR",Il.OFF="OFF",(Id=IC||(IC={})).UNKNOWN_ERROR="UNKNOWN_ERROR",Id.NOT_IMPLEMENTED="NOT_IMPLEMENTED",Id.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",Id.NETWORK_ERROR="NETWORK_ERROR",Id.SERVER_ERROR="SERVER_ERROR",Id.TIMEOUT="TIMEOUT",Id.BUFFER_OVERRUN="BUFFER_OVERRUN",Id.NUMERIC_FAULT="NUMERIC_FAULT",Id.MISSING_NEW="MISSING_NEW",Id.INVALID_ARGUMENT="INVALID_ARGUMENT",Id.MISSING_ARGUMENT="MISSING_ARGUMENT",Id.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",Id.CALL_EXCEPTION="CALL_EXCEPTION",Id.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",Id.NONCE_EXPIRED="NONCE_EXPIRED",Id.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",Id.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",Id.TRANSACTION_REPLACED="TRANSACTION_REPLACED",Id.ACTION_REJECTED="ACTION_REJECTED";const yp="0123456789abcdef";class yg{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){let r=e.toLowerCase();null==yf[r]&&this.throwArgumentError("invalid log level name","logLevel",e),yc>yf[r]||console.log.apply(console,t)}debug(...e){this._log(yg.levels.DEBUG,e)}info(...e){this._log(yg.levels.INFO,e)}warn(...e){this._log(yg.levels.WARNING,e)}makeError(e,t,r){if(yu)return this.makeError("censored error",t,{});t||(t=yg.errors.UNKNOWN_ERROR),r||(r={});let i=[];Object.keys(r).forEach(e=>{let t=r[e];try{if(t instanceof Uint8Array){let r="";for(let e=0;e<t.length;e++)r+=yp[t[e]>>4],r+=yp[15&t[e]];i.push(e+"=Uint8Array(0x"+r+")")}else i.push(e+"="+JSON.stringify(t))}catch(t){i.push(e+"="+JSON.stringify(r[e].toString()))}}),i.push(`code=${t}`),i.push(`version=${this.version}`);let n=e,s="";switch(t){case IC.NUMERIC_FAULT:{s="NUMERIC_FAULT";let t=e;switch(t){case"overflow":case"underflow":case"division-by-zero":s+="-"+t;break;case"negative-power":case"negative-width":s+="-unsupported";break;case"unbound-bitwise-result":s+="-unbound-result"}break}case IC.CALL_EXCEPTION:case IC.INSUFFICIENT_FUNDS:case IC.MISSING_NEW:case IC.NONCE_EXPIRED:case IC.REPLACEMENT_UNDERPRICED:case IC.TRANSACTION_REPLACED:case IC.UNPREDICTABLE_GAS_LIMIT:s=t}s&&(e+=" [ See: https://links.ethers.org/v5-errors-"+s+" ]"),i.length&&(e+=" ("+i.join(", ")+")");let o=Error(e);return o.reason=n,o.code=t,Object.keys(r).forEach(function(e){o[e]=r[e]}),o}throwError(e,t,r){throw this.makeError(e,t,r)}throwArgumentError(e,t,r){return this.throwError(e,yg.errors.INVALID_ARGUMENT,{argument:t,value:r})}assert(e,t,r,i){e||this.throwError(t,r,i)}assertArgument(e,t,r,i){e||this.throwArgumentError(t,r,i)}checkNormalize(e){null==e&&(e="platform missing String.prototype.normalize"),yd&&this.throwError("platform missing String.prototype.normalize",yg.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:yd})}checkSafeUint53(e,t){"number"==typeof e&&(null==t&&(t="value not safe"),(e<0||e>=0x1fffffffffffff)&&this.throwError(t,yg.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,yg.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,r){r=r?": "+r:"",e<t&&this.throwError("missing argument"+r,yg.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+r,yg.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){(e===Object||null==e)&&this.throwError("missing new",yg.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",yg.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||null==e)&&this.throwError("missing new",yg.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return yl||(yl=new yg("logger/5.8.0")),yl}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",yg.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),yh){if(!e)return;this.globalLogger().throwError("error censorship permanent",yg.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}yu=!!e,yh=!!t}static setLogLevel(e){let t=yf[e.toLowerCase()];if(null==t)return void yg.globalLogger().warn("invalid log level - "+e);yc=t}static from(e){return new yg(e)}}yg.errors=IC,yg.levels=IM;const yb=new yg("bytes/5.8.0");function yy(e){return!!e.toHexString}function ym(e){return e.slice||(e.slice=function(){let t=Array.prototype.slice.call(arguments);return ym(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function yv(e){return"number"==typeof e&&e==e&&e%1==0}function yw(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"==typeof e||!yv(e.length)||e.length<0)return!1;for(let t=0;t<e.length;t++){let r=e[t];if(!yv(r)||r<0||r>=256)return!1}return!0}function yD(e,t){if(t||(t={}),"number"==typeof e){yb.checkSafeUint53(e,"invalid arrayify value");let t=[];for(;e;)t.unshift(255&e),e=parseInt(String(e/256));return 0===t.length&&t.push(0),ym(new Uint8Array(t))}if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),yy(e)&&(e=e.toHexString()),yE(e)){let r=e.substring(2);r.length%2&&("left"===t.hexPad?r="0"+r:"right"===t.hexPad?r+="0":yb.throwArgumentError("hex data is odd-length","value",e));let i=[];for(let e=0;e<r.length;e+=2)i.push(parseInt(r.substring(e,e+2),16));return ym(new Uint8Array(i))}return yw(e)?ym(new Uint8Array(e)):yb.throwArgumentError("invalid arrayify value","value",e)}function yx(e){let t=e.map(e=>yD(e)),r=new Uint8Array(t.reduce((e,t)=>e+t.length,0));return t.reduce((e,t)=>(r.set(t,e),e+t.length),0),ym(r)}function yE(e,t){return"string"==typeof e&&!!e.match(/^0x[0-9A-Fa-f]*$/)&&(!t||e.length===2+2*t)}const y_="0123456789abcdef";function yS(e,t){if(t||(t={}),"number"==typeof e){yb.checkSafeUint53(e,"invalid hexlify value");let t="";for(;e;)t=y_[15&e]+t,e=Math.floor(e/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if("bigint"==typeof e)return(e=e.toString(16)).length%2?"0x0"+e:"0x"+e;if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),yy(e))return e.toHexString();if(yE(e))return e.length%2&&("left"===t.hexPad?e="0x0"+e.substring(2):"right"===t.hexPad?e+="0":yb.throwArgumentError("hex data is odd-length","value",e)),e.toLowerCase();if(yw(e)){let t="0x";for(let r=0;r<e.length;r++){let i=e[r];t+=y_[(240&i)>>4]+y_[15&i]}return t}return yb.throwArgumentError("invalid hexlify value","value",e)}function yI(e,t,r){return("string"!=typeof e?e=yS(e):(!yE(e)||e.length%2)&&yb.throwArgumentError("invalid hexData","value",e),t=2+2*t,null!=r)?"0x"+e.substring(t,2+2*r):"0x"+e.substring(t)}function yA(e,t){for("string"!=typeof e?e=yS(e):yE(e)||yb.throwArgumentError("invalid hex string","value",e),e.length>2*t+2&&yb.throwArgumentError("value out of range","value",arguments[1]);e.length<2*t+2;)e="0x0"+e.substring(2);return e}function yM(e){let t={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(yE(e)&&!(e.length%2)||yw(e)){let r=yD(e);64===r.length?(t.v=27+(r[32]>>7),r[32]&=127,t.r=yS(r.slice(0,32)),t.s=yS(r.slice(32,64))):65===r.length?(t.r=yS(r.slice(0,32)),t.s=yS(r.slice(32,64)),t.v=r[64]):yb.throwArgumentError("invalid signature string","signature",e),t.v<27&&(0===t.v||1===t.v?t.v+=27:yb.throwArgumentError("signature invalid v byte","signature",e)),t.recoveryParam=1-t.v%2,t.recoveryParam&&(r[32]|=128),t._vs=yS(r.slice(32,64))}else{if(t.r=e.r,t.s=e.s,t.v=e.v,t.recoveryParam=e.recoveryParam,t._vs=e._vs,null!=t._vs){let r=function(e,t){(e=yD(e)).length>t&&yb.throwArgumentError("value out of range","value",arguments[0]);let r=new Uint8Array(t);return r.set(e,t-e.length),ym(r)}(yD(t._vs),32);t._vs=yS(r);let i=+(r[0]>=128);null==t.recoveryParam?t.recoveryParam=i:t.recoveryParam!==i&&yb.throwArgumentError("signature recoveryParam mismatch _vs","signature",e),r[0]&=127;let n=yS(r);null==t.s?t.s=n:t.s!==n&&yb.throwArgumentError("signature v mismatch _vs","signature",e)}if(null==t.recoveryParam)null==t.v?yb.throwArgumentError("signature missing v and recoveryParam","signature",e):0===t.v||1===t.v?t.recoveryParam=t.v:t.recoveryParam=1-t.v%2;else if(null==t.v)t.v=27+t.recoveryParam;else{let r=0===t.v||1===t.v?t.v:1-t.v%2;t.recoveryParam!==r&&yb.throwArgumentError("signature recoveryParam mismatch v","signature",e)}null!=t.r&&yE(t.r)?t.r=yA(t.r,32):yb.throwArgumentError("signature missing or invalid r","signature",e),null!=t.s&&yE(t.s)?t.s=yA(t.s,32):yb.throwArgumentError("signature missing or invalid s","signature",e);let r=yD(t.s);r[0]>=128&&yb.throwArgumentError("signature s out of range","signature",e),t.recoveryParam&&(r[0]|=128);let i=yS(r);t._vs&&(yE(t._vs)||yb.throwArgumentError("signature invalid _vs","signature",e),t._vs=yA(t._vs,32)),null==t._vs?t._vs=i:t._vs!==i&&yb.throwArgumentError("signature _vs mismatch v and s","signature",e)}return t.yParityAndS=t._vs,t.compact=t.r+t.yParityAndS.substring(2),t}var yC={};function yO(e){return"0x"+r(yC).keccak_256(yD(e))}!function(){var e="input is invalid type",t="object"==typeof window,r=t?window:{};r.JS_SHA3_NO_WINDOW&&(t=!1);var i=!t&&"object"==typeof self;r.JS_SHA3_NO_NODE_JS,i&&(r=self);var n=!r.JS_SHA3_NO_COMMON_JS&&yC,s="function"==typeof define&&define.amd,o=!r.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,a="0123456789abcdef".split(""),h=[4,1024,262144,0x4000000],u=[0,8,16,24],f=[1,0,32898,0,32906,0x80000000,0x80008000,0x80000000,32907,0,0x80000001,0,0x80008081,0x80000000,32777,0x80000000,138,0,136,0,0x80008009,0,0x8000000a,0,0x8000808b,0,139,0x80000000,32905,0x80000000,32771,0x80000000,32770,0x80000000,128,0x80000000,32778,0,0x8000000a,0x80000000,0x80008081,0x80000000,32896,0x80000000,0x80000001,0,0x80008008,0x80000000],c=[224,256,384,512],l=[128,256],d=["hex","buffer","arrayBuffer","array","digest"],p={128:168,256:136};(r.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),o&&(r.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});for(var g=function(e,t,r){return function(i){return new O(e,t,e).update(i)[r]()}},b=function(e,t,r){return function(i,n){return new O(e,t,n).update(i)[r]()}},y=function(e,t,r){return function(t,i,n,s){return x["cshake"+e].update(t,i,n,s)[r]()}},m=function(e,t,r){return function(t,i,n,s){return x["kmac"+e].update(t,i,n,s)[r]()}},v=function(e,t,r,i){for(var n=0;n<d.length;++n){var s=d[n];e[s]=t(r,i,s)}return e},w=function(e,t){var r=g(e,t,"hex");return r.create=function(){return new O(e,t,e)},r.update=function(e){return r.create().update(e)},v(r,g,e,t)},D=[{name:"keccak",padding:[1,256,65536,0x1000000],bits:c,createMethod:w},{name:"sha3",padding:[6,1536,393216,0x6000000],bits:c,createMethod:w},{name:"shake",padding:[31,7936,2031616,0x1f000000],bits:l,createMethod:function(e,t){var r=b(e,t,"hex");return r.create=function(r){return new O(e,t,r)},r.update=function(e,t){return r.create(t).update(e)},v(r,b,e,t)}},{name:"cshake",padding:h,bits:l,createMethod:function(e,t){var r=p[e],i=y(e,t,"hex");return i.create=function(i,n,s){return n||s?new O(e,t,i).bytepad([n,s],r):x["shake"+e].create(i)},i.update=function(e,t,r,n){return i.create(t,r,n).update(e)},v(i,y,e,t)}},{name:"kmac",padding:h,bits:l,createMethod:function(e,t){var r=p[e],i=m(e,t,"hex");return i.create=function(i,n,s){return new P(e,t,n).bytepad(["KMAC",s],r).bytepad([i],r)},i.update=function(e,t,r,n){return i.create(e,r,n).update(t)},v(i,m,e,t)}}],x={},E=[],_=0;_<D.length;++_)for(var S=D[_],I=S.bits,A=0;A<I.length;++A){var M=S.name+"_"+I[A];if(E.push(M),x[M]=S.createMethod(I[A],S.padding),"sha3"!==S.name){var C=S.name+I[A];E.push(C),x[C]=x[M]}}function O(e,t,r){this.blocks=[],this.s=[],this.padding=t,this.outputBits=r,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(e<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=r>>5,this.extraBytes=(31&r)>>3;for(var i=0;i<50;++i)this.s[i]=0}function P(e,t,r){O.call(this,e,t,r)}O.prototype.update=function(t){if(this.finalized)throw Error("finalize already called");var r,i=typeof t;if("string"!==i){if("object"===i){if(null===t)throw Error(e);else if(o&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!Array.isArray(t)&&(!o||!ArrayBuffer.isView(t)))throw Error(e)}else throw Error(e);r=!0}for(var n,s,a=this.blocks,h=this.byteCount,f=t.length,c=this.blockCount,l=0,d=this.s;l<f;){if(this.reset)for(n=1,this.reset=!1,a[0]=this.block;n<c+1;++n)a[n]=0;if(r)for(n=this.start;l<f&&n<h;++l)a[n>>2]|=t[l]<<u[3&n++];else for(n=this.start;l<f&&n<h;++l)(s=t.charCodeAt(l))<128?a[n>>2]|=s<<u[3&n++]:(s<2048?a[n>>2]|=(192|s>>6)<<u[3&n++]:(s<55296||s>=57344?a[n>>2]|=(224|s>>12)<<u[3&n++]:(s=65536+((1023&s)<<10|1023&t.charCodeAt(++l)),a[n>>2]|=(240|s>>18)<<u[3&n++],a[n>>2]|=(128|s>>12&63)<<u[3&n++]),a[n>>2]|=(128|s>>6&63)<<u[3&n++]),a[n>>2]|=(128|63&s)<<u[3&n++]);if(this.lastByteIndex=n,n>=h){for(this.start=n-h,this.block=a[c],n=0;n<c;++n)d[n]^=a[n];R(d),this.reset=!0}else this.start=n}return this},O.prototype.encode=function(e,t){var r=255&e,i=1,n=[r];for(e>>=8,r=255&e;r>0;)n.unshift(r),e>>=8,r=255&e,++i;return t?n.push(i):n.unshift(i),this.update(n),n.length},O.prototype.encodeString=function(t){var r,i=typeof t;if("string"!==i){if("object"===i){if(null===t)throw Error(e);else if(o&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!Array.isArray(t)&&(!o||!ArrayBuffer.isView(t)))throw Error(e)}else throw Error(e);r=!0}var n=0,s=t.length;if(r)n=s;else for(var a=0;a<t.length;++a){var h=t.charCodeAt(a);h<128?n+=1:h<2048?n+=2:h<55296||h>=57344?n+=3:(h=65536+((1023&h)<<10|1023&t.charCodeAt(++a)),n+=4)}return n+=this.encode(8*n),this.update(t),n},O.prototype.bytepad=function(e,t){for(var r=this.encode(t),i=0;i<e.length;++i)r+=this.encodeString(e[i]);var n=[];return n.length=t-r%t,this.update(n),this},O.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex,r=this.blockCount,i=this.s;if(e[t>>2]|=this.padding[3&t],this.lastByteIndex===this.byteCount)for(t=1,e[0]=e[r];t<r+1;++t)e[t]=0;for(e[r-1]|=0x80000000,t=0;t<r;++t)i[t]^=e[t];R(i)}},O.prototype.toString=O.prototype.hex=function(){this.finalize();for(var e,t=this.blockCount,r=this.s,i=this.outputBlocks,n=this.extraBytes,s=0,o=0,h="";o<i;){for(s=0;s<t&&o<i;++s,++o)h+=a[(e=r[s])>>4&15]+a[15&e]+a[e>>12&15]+a[e>>8&15]+a[e>>20&15]+a[e>>16&15]+a[e>>28&15]+a[e>>24&15];o%t==0&&(R(r),s=0)}return n&&(h+=a[(e=r[s])>>4&15]+a[15&e],n>1&&(h+=a[e>>12&15]+a[e>>8&15]),n>2&&(h+=a[e>>20&15]+a[e>>16&15])),h},O.prototype.arrayBuffer=function(){this.finalize();for(var e,t=this.blockCount,r=this.s,i=this.outputBlocks,n=this.extraBytes,s=0,o=0,a=this.outputBits>>3,h=new Uint32Array(e=new ArrayBuffer(n?i+1<<2:a));o<i;){for(s=0;s<t&&o<i;++s,++o)h[o]=r[s];o%t==0&&R(r)}return n&&(h[s]=r[s],e=e.slice(0,a)),e},O.prototype.buffer=O.prototype.arrayBuffer,O.prototype.digest=O.prototype.array=function(){this.finalize();for(var e,t,r=this.blockCount,i=this.s,n=this.outputBlocks,s=this.extraBytes,o=0,a=0,h=[];a<n;){for(o=0;o<r&&a<n;++o,++a)e=a<<2,t=i[o],h[e]=255&t,h[e+1]=t>>8&255,h[e+2]=t>>16&255,h[e+3]=t>>24&255;a%r==0&&R(i)}return s&&(e=a<<2,t=i[o],h[e]=255&t,s>1&&(h[e+1]=t>>8&255),s>2&&(h[e+2]=t>>16&255)),h},P.prototype=new O,P.prototype.finalize=function(){return this.encode(this.outputBits,!0),O.prototype.finalize.call(this)};var R=function(e){var t,r,i,n,s,o,a,h,u,c,l,d,p,g,b,y,m,v,w,D,x,E,_,S,I,A,M,C,O,P,R,T,N,B,L,k,U,z,j,q,F,H,K,$,V,W,G,Y,Z,J,X,Q,ee,et,er,ei,en,es,eo,ea,eh,eu,ef;for(i=0;i<48;i+=2)n=e[0]^e[10]^e[20]^e[30]^e[40],s=e[1]^e[11]^e[21]^e[31]^e[41],o=e[2]^e[12]^e[22]^e[32]^e[42],a=e[3]^e[13]^e[23]^e[33]^e[43],h=e[4]^e[14]^e[24]^e[34]^e[44],u=e[5]^e[15]^e[25]^e[35]^e[45],c=e[6]^e[16]^e[26]^e[36]^e[46],l=e[7]^e[17]^e[27]^e[37]^e[47],d=e[8]^e[18]^e[28]^e[38]^e[48],p=e[9]^e[19]^e[29]^e[39]^e[49],t=d^(o<<1|a>>>31),r=p^(a<<1|o>>>31),e[0]^=t,e[1]^=r,e[10]^=t,e[11]^=r,e[20]^=t,e[21]^=r,e[30]^=t,e[31]^=r,e[40]^=t,e[41]^=r,t=n^(h<<1|u>>>31),r=s^(u<<1|h>>>31),e[2]^=t,e[3]^=r,e[12]^=t,e[13]^=r,e[22]^=t,e[23]^=r,e[32]^=t,e[33]^=r,e[42]^=t,e[43]^=r,t=o^(c<<1|l>>>31),r=a^(l<<1|c>>>31),e[4]^=t,e[5]^=r,e[14]^=t,e[15]^=r,e[24]^=t,e[25]^=r,e[34]^=t,e[35]^=r,e[44]^=t,e[45]^=r,t=h^(d<<1|p>>>31),r=u^(p<<1|d>>>31),e[6]^=t,e[7]^=r,e[16]^=t,e[17]^=r,e[26]^=t,e[27]^=r,e[36]^=t,e[37]^=r,e[46]^=t,e[47]^=r,t=c^(n<<1|s>>>31),r=l^(s<<1|n>>>31),e[8]^=t,e[9]^=r,e[18]^=t,e[19]^=r,e[28]^=t,e[29]^=r,e[38]^=t,e[39]^=r,e[48]^=t,e[49]^=r,g=e[0],b=e[1],W=e[11]<<4|e[10]>>>28,G=e[10]<<4|e[11]>>>28,C=e[20]<<3|e[21]>>>29,O=e[21]<<3|e[20]>>>29,ea=e[31]<<9|e[30]>>>23,eh=e[30]<<9|e[31]>>>23,H=e[40]<<18|e[41]>>>14,K=e[41]<<18|e[40]>>>14,B=e[2]<<1|e[3]>>>31,L=e[3]<<1|e[2]>>>31,y=e[13]<<12|e[12]>>>20,m=e[12]<<12|e[13]>>>20,Y=e[22]<<10|e[23]>>>22,Z=e[23]<<10|e[22]>>>22,P=e[33]<<13|e[32]>>>19,R=e[32]<<13|e[33]>>>19,eu=e[42]<<2|e[43]>>>30,ef=e[43]<<2|e[42]>>>30,et=e[5]<<30|e[4]>>>2,er=e[4]<<30|e[5]>>>2,k=e[14]<<6|e[15]>>>26,U=e[15]<<6|e[14]>>>26,v=e[25]<<11|e[24]>>>21,w=e[24]<<11|e[25]>>>21,J=e[34]<<15|e[35]>>>17,X=e[35]<<15|e[34]>>>17,T=e[45]<<29|e[44]>>>3,N=e[44]<<29|e[45]>>>3,S=e[6]<<28|e[7]>>>4,I=e[7]<<28|e[6]>>>4,ei=e[17]<<23|e[16]>>>9,en=e[16]<<23|e[17]>>>9,z=e[26]<<25|e[27]>>>7,j=e[27]<<25|e[26]>>>7,D=e[36]<<21|e[37]>>>11,x=e[37]<<21|e[36]>>>11,Q=e[47]<<24|e[46]>>>8,ee=e[46]<<24|e[47]>>>8,$=e[8]<<27|e[9]>>>5,V=e[9]<<27|e[8]>>>5,A=e[18]<<20|e[19]>>>12,M=e[19]<<20|e[18]>>>12,es=e[29]<<7|e[28]>>>25,eo=e[28]<<7|e[29]>>>25,q=e[38]<<8|e[39]>>>24,F=e[39]<<8|e[38]>>>24,E=e[48]<<14|e[49]>>>18,_=e[49]<<14|e[48]>>>18,e[0]=g^~y&v,e[1]=b^~m&w,e[10]=S^~A&C,e[11]=I^~M&O,e[20]=B^~k&z,e[21]=L^~U&j,e[30]=$^~W&Y,e[31]=V^~G&Z,e[40]=et^~ei&es,e[41]=er^~en&eo,e[2]=y^~v&D,e[3]=m^~w&x,e[12]=A^~C&P,e[13]=M^~O&R,e[22]=k^~z&q,e[23]=U^~j&F,e[32]=W^~Y&J,e[33]=G^~Z&X,e[42]=ei^~es&ea,e[43]=en^~eo&eh,e[4]=v^~D&E,e[5]=w^~x&_,e[14]=C^~P&T,e[15]=O^~R&N,e[24]=z^~q&H,e[25]=j^~F&K,e[34]=Y^~J&Q,e[35]=Z^~X&ee,e[44]=es^~ea&eu,e[45]=eo^~eh&ef,e[6]=D^~E&g,e[7]=x^~_&b,e[16]=P^~T&S,e[17]=R^~N&I,e[26]=q^~H&B,e[27]=F^~K&L,e[36]=J^~Q&$,e[37]=X^~ee&V,e[46]=ea^~eu&et,e[47]=eh^~ef&er,e[8]=E^~g&y,e[9]=_^~b&m,e[18]=T^~S&A,e[19]=N^~I&M,e[28]=H^~B&k,e[29]=K^~L&U,e[38]=Q^~$&W,e[39]=ee^~V&G,e[48]=eu^~et&ei,e[49]=ef^~er&en,e[0]^=f[i],e[1]^=f[i+1]};if(n)yC=x;else{for(_=0;_<E.length;++_)r[E[_]]=x[E[_]];s&&define(function(){return x})}}();const yP=new yg("strings/5.8.0");function yR(e,t,r,i,n){if(e===IP.BAD_PREFIX||e===IP.UNEXPECTED_CONTINUE){let e=0;for(let i=t+1;i<r.length&&r[i]>>6==2;i++)e++;return e}return e===IP.OVERRUN?r.length-t-1:0}function yT(e,t=IO.current){t!=IO.current&&(yP.checkNormalize(),e=e.normalize(t));let r=[];for(let t=0;t<e.length;t++){let i=e.charCodeAt(t);if(i<128)r.push(i);else if(i<2048)r.push(i>>6|192),r.push(63&i|128);else if((64512&i)==55296){t++;let n=e.charCodeAt(t);if(t>=e.length||(64512&n)!=56320)throw Error("invalid utf-8 string");let s=65536+((1023&i)<<10)+(1023&n);r.push(s>>18|240),r.push(s>>12&63|128),r.push(s>>6&63|128),r.push(63&s|128)}else r.push(i>>12|224),r.push(i>>6&63|128),r.push(63&i|128)}return yD(r)}function yN(e){return"string"==typeof e&&(e=yT(e)),yO(yx([yT("\x19Ethereum Signed Message:\n"),yT(String(e.length)),e]))}(Ip=IO||(IO={})).current="",Ip.NFC="NFC",Ip.NFD="NFD",Ip.NFKC="NFKC",Ip.NFKD="NFKD",(Ig=IP||(IP={})).UNEXPECTED_CONTINUE="unexpected continuation byte",Ig.BAD_PREFIX="bad codepoint prefix",Ig.OVERRUN="string overrun",Ig.MISSING_CONTINUE="missing continuation byte",Ig.OUT_OF_RANGE="out of UTF-8 range",Ig.UTF16_SURROGATE="UTF-16 surrogate",Ig.OVERLONG="overlong representation",Object.freeze({error:function(e,t,r,i,n){return yP.throwArgumentError(`invalid codepoint at offset ${t}; ${e}`,"bytes",r)},ignore:yR,replace:function(e,t,r,i,n){return e===IP.OVERLONG?(i.push(n),0):(i.push(65533),yR(e,t,r,i,n))}});var yB=s("dEXSZ"),yL=r(yB).BN;const yk=new yg("bignumber/5.8.0"),yU={};let yz=!1;class yj{constructor(e,t){e!==yU&&yk.throwError("cannot call constructor directly; use BigNumber.from",yg.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=t,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return yF(yH(this).fromTwos(e))}toTwos(e){return yF(yH(this).toTwos(e))}abs(){return"-"===this._hex[0]?yj.from(this._hex.substring(1)):this}add(e){return yF(yH(this).add(yH(e)))}sub(e){return yF(yH(this).sub(yH(e)))}div(e){return yj.from(e).isZero()&&yK("division-by-zero","div"),yF(yH(this).div(yH(e)))}mul(e){return yF(yH(this).mul(yH(e)))}mod(e){let t=yH(e);return t.isNeg()&&yK("division-by-zero","mod"),yF(yH(this).umod(t))}pow(e){let t=yH(e);return t.isNeg()&&yK("negative-power","pow"),yF(yH(this).pow(t))}and(e){let t=yH(e);return(this.isNegative()||t.isNeg())&&yK("unbound-bitwise-result","and"),yF(yH(this).and(t))}or(e){let t=yH(e);return(this.isNegative()||t.isNeg())&&yK("unbound-bitwise-result","or"),yF(yH(this).or(t))}xor(e){let t=yH(e);return(this.isNegative()||t.isNeg())&&yK("unbound-bitwise-result","xor"),yF(yH(this).xor(t))}mask(e){return(this.isNegative()||e<0)&&yK("negative-width","mask"),yF(yH(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&yK("negative-width","shl"),yF(yH(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&yK("negative-width","shr"),yF(yH(this).shrn(e))}eq(e){return yH(this).eq(yH(e))}lt(e){return yH(this).lt(yH(e))}lte(e){return yH(this).lte(yH(e))}gt(e){return yH(this).gt(yH(e))}gte(e){return yH(this).gte(yH(e))}isNegative(){return"-"===this._hex[0]}isZero(){return yH(this).isZero()}toNumber(){try{return yH(this).toNumber()}catch(e){yK("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch(e){}return yk.throwError("this platform does not support BigInt",yg.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(10===arguments[0]?yz||(yz=!0,yk.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):16===arguments[0]?yk.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",yg.errors.UNEXPECTED_ARGUMENT,{}):yk.throwError("BigNumber.toString does not accept parameters",yg.errors.UNEXPECTED_ARGUMENT,{})),yH(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof yj)return e;if("string"==typeof e)return e.match(/^-?0x[0-9a-f]+$/i)?new yj(yU,yq(e)):e.match(/^-?[0-9]+$/)?new yj(yU,yq(new yL(e))):yk.throwArgumentError("invalid BigNumber string","value",e);if("number"==typeof e)return e%1&&yK("underflow","BigNumber.from",e),(e>=0x1fffffffffffff||e<=-0x1fffffffffffff)&&yK("overflow","BigNumber.from",e),yj.from(String(e));if("bigint"==typeof e)return yj.from(e.toString());if(yw(e))return yj.from(yS(e));if(e)if(e.toHexString){let t=e.toHexString();if("string"==typeof t)return yj.from(t)}else{let t=e._hex;if(null==t&&"BigNumber"===e.type&&(t=e.hex),"string"==typeof t&&(yE(t)||"-"===t[0]&&yE(t.substring(1))))return yj.from(t)}return yk.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!!(e&&e._isBigNumber)}}function yq(e){if("string"!=typeof e)return yq(e.toString(16));if("-"===e[0])return("-"===(e=e.substring(1))[0]&&yk.throwArgumentError("invalid hex","value",e),"0x00"===(e=yq(e)))?e:"-"+e;if("0x"!==e.substring(0,2)&&(e="0x"+e),"0x"===e)return"0x00";for(e.length%2&&(e="0x0"+e.substring(2));e.length>4&&"0x00"===e.substring(0,4);)e="0x"+e.substring(4);return e}function yF(e){return yj.from(yq(e))}function yH(e){let t=yj.from(e).toHexString();return"-"===t[0]?new yL("-"+t.substring(3),16):new yL(t.substring(2),16)}function yK(e,t,r){let i={fault:e,operation:t};return null!=r&&(i.value=r),yk.throwError(e,yg.errors.NUMERIC_FAULT,i)}new yg("rlp/5.8.0");const y$=new yg("address/5.8.0");function yV(e){yE(e,20)||y$.throwArgumentError("invalid address","address",e);let t=(e=e.toLowerCase()).substring(2).split(""),r=new Uint8Array(40);for(let e=0;e<40;e++)r[e]=t[e].charCodeAt(0);let i=yD(yO(r));for(let e=0;e<40;e+=2)i[e>>1]>>4>=8&&(t[e]=t[e].toUpperCase()),(15&i[e>>1])>=8&&(t[e+1]=t[e+1].toUpperCase());return"0x"+t.join("")}const yW={};for(let e=0;e<10;e++)yW[String(e)]=String(e);for(let e=0;e<26;e++)yW[String.fromCharCode(65+e)]=String(10+e);const yG=Math.floor(Math.log10?Math.log10(0x1fffffffffffff):Math.log(0x1fffffffffffff)/Math.LN10);function yY(e){let t=null;if("string"!=typeof e&&y$.throwArgumentError("invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/))"0x"!==e.substring(0,2)&&(e="0x"+e),t=yV(e),e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&t!==e&&y$.throwArgumentError("bad address checksum","address",e);else if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(e.substring(2,4)!==function(e){let t=(e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00").split("").map(e=>yW[e]).join("");for(;t.length>=yG;){let e=t.substring(0,yG);t=parseInt(e,10)%97+t.substring(e.length)}let r=String(98-parseInt(t,10)%97);for(;r.length<2;)r="0"+r;return r}(e)&&y$.throwArgumentError("bad icap checksum","address",e),t=new yL(e.substring(4),36).toString(16);t.length<40;)t="0"+t;t=yV("0x"+t)}else y$.throwArgumentError("invalid address","address",e);return t}function yZ(e,t,r){Object.defineProperty(e,t,{enumerable:!0,value:r,writable:!1})}yj.from(-1),yj.from(0),yj.from(1),yj.from(2),yj.from("1000000000000000000"),yj.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),yj.from("-0x8000000000000000000000000000000000000000000000000000000000000000"),yj.from("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),new yg("properties/5.8.0");var yB=s("dEXSZ"),yJ=s("kiSKt");function yX(e,t,r){return e(r={path:t,exports:{},require:function(e,t){throw null==t&&r.path,Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}},r.exports),r.exports}"undefined"!=typeof globalThis||("undefined"!=typeof window?window:void 0!==t||"undefined"!=typeof self&&self);var yQ=y0;function y0(e,t){if(!e)throw Error(t||"Assertion failed")}y0.equal=function(e,t,r){if(e!=t)throw Error(r||"Assertion failed: "+e+" != "+t)};var y1=yX(function(e,t){function r(e){return 1===e.length?"0"+e:e}function i(e){for(var t="",i=0;i<e.length;i++)t+=r(e[i].toString(16));return t}t.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"!=typeof e){for(var i=0;i<e.length;i++)r[i]=0|e[i];return r}if("hex"===t){(e=e.replace(/[^a-z0-9]+/ig,"")).length%2!=0&&(e="0"+e);for(var i=0;i<e.length;i+=2)r.push(parseInt(e[i]+e[i+1],16))}else for(var i=0;i<e.length;i++){var n=e.charCodeAt(i),s=n>>8,o=255&n;s?r.push(s,o):r.push(o)}return r},t.zero2=r,t.toHex=i,t.encode=function(e,t){return"hex"===t?i(e):e}}),y3=yX(function(e,t){t.assert=yQ,t.toArray=y1.toArray,t.zero2=y1.zero2,t.toHex=y1.toHex,t.encode=y1.encode,t.getNAF=function(e,t,r){var i=Array(Math.max(e.bitLength(),r)+1);for(o=0;o<i.length;o+=1)i[o]=0;var n=1<<t+1,s=e.clone();for(o=0;o<i.length;o++){var o,a,h=s.andln(n-1);s.isOdd()?(a=h>(n>>1)-1?(n>>1)-h:h,s.isubn(a)):a=0,i[o]=a,s.iushrn(1)}return i},t.getJSF=function(e,t){var r=[[],[]];e=e.clone(),t=t.clone();for(var i=0,n=0;e.cmpn(-i)>0||t.cmpn(-n)>0;){var s,o,a,h=e.andln(3)+i&3,u=t.andln(3)+n&3;3===h&&(h=-1),3===u&&(u=-1),o=(1&h)==0?0:(3==(s=e.andln(7)+i&7)||5===s)&&2===u?-h:h,r[0].push(o),a=(1&u)==0?0:(3==(s=t.andln(7)+n&7)||5===s)&&2===h?-u:u,r[1].push(a),2*i===o+1&&(i=1-i),2*n===a+1&&(n=1-n),e.iushrn(1),t.iushrn(1)}return r},t.cachedProperty=function(e,t,r){var i="_"+t;e.prototype[t]=function(){return void 0!==this[i]?this[i]:this[i]=r.call(this)}},t.parseBytes=function(e){return"string"==typeof e?t.toArray(e,"hex"):e},t.intFromLE=function(e){return new(r(yB))(e,"hex","le")}}),y2=y3.getNAF,y8=y3.getJSF,y6=y3.assert;function y5(e,t){this.type=e,this.p=new(r(yB))(t.p,16),this.red=t.prime?r(yB).red(t.prime):r(yB).mont(this.p),this.zero=new(r(yB))(0).toRed(this.red),this.one=new(r(yB))(1).toRed(this.red),this.two=new(r(yB))(2).toRed(this.red),this.n=t.n&&new(r(yB))(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=[,,,,],this._wnafT2=[,,,,],this._wnafT3=[,,,,],this._wnafT4=[,,,,],this._bitLength=this.n?this.n.bitLength():0;var i=this.n&&this.p.div(this.n);!i||i.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function y4(e,t){this.curve=e,this.type=t,this.precomputed=null}y5.prototype.point=function(){throw Error("Not implemented")},y5.prototype.validate=function(){throw Error("Not implemented")},y5.prototype._fixedNafMul=function(e,t){y6(e.precomputed);var r,i,n=e._getDoubles(),s=y2(t,1,this._bitLength),o=(1<<n.step+1)-(n.step%2==0?2:1);o/=3;var a=[];for(r=0;r<s.length;r+=n.step){i=0;for(var h=r+n.step-1;h>=r;h--)i=(i<<1)+s[h];a.push(i)}for(var u=this.jpoint(null,null,null),f=this.jpoint(null,null,null),c=o;c>0;c--){for(r=0;r<a.length;r++)(i=a[r])===c?f=f.mixedAdd(n.points[r]):i===-c&&(f=f.mixedAdd(n.points[r].neg()));u=u.add(f)}return u.toP()},y5.prototype._wnafMul=function(e,t){var r=4,i=e._getNAFPoints(r);r=i.wnd;for(var n=i.points,s=y2(t,r,this._bitLength),o=this.jpoint(null,null,null),a=s.length-1;a>=0;a--){for(var h=0;a>=0&&0===s[a];a--)h++;if(a>=0&&h++,o=o.dblp(h),a<0)break;var u=s[a];y6(0!==u),o="affine"===e.type?u>0?o.mixedAdd(n[u-1>>1]):o.mixedAdd(n[-u-1>>1].neg()):u>0?o.add(n[u-1>>1]):o.add(n[-u-1>>1].neg())}return"affine"===e.type?o.toP():o},y5.prototype._wnafMulAdd=function(e,t,r,i,n){var s,o,a,h=this._wnafT1,u=this._wnafT2,f=this._wnafT3,c=0;for(s=0;s<i;s++){var l=(a=t[s])._getNAFPoints(e);h[s]=l.wnd,u[s]=l.points}for(s=i-1;s>=1;s-=2){var d=s-1,p=s;if(1!==h[d]||1!==h[p]){f[d]=y2(r[d],h[d],this._bitLength),f[p]=y2(r[p],h[p],this._bitLength),c=Math.max(f[d].length,c),c=Math.max(f[p].length,c);continue}var g=[t[d],null,null,t[p]];0===t[d].y.cmp(t[p].y)?(g[1]=t[d].add(t[p]),g[2]=t[d].toJ().mixedAdd(t[p].neg())):0===t[d].y.cmp(t[p].y.redNeg())?(g[1]=t[d].toJ().mixedAdd(t[p]),g[2]=t[d].add(t[p].neg())):(g[1]=t[d].toJ().mixedAdd(t[p]),g[2]=t[d].toJ().mixedAdd(t[p].neg()));var b=[-3,-1,-5,-7,0,7,5,1,3],y=y8(r[d],r[p]);for(o=0,c=Math.max(y[0].length,c),f[d]=Array(c),f[p]=Array(c);o<c;o++){var m=0|y[0][o],v=0|y[1][o];f[d][o]=b[(m+1)*3+(v+1)],f[p][o]=0,u[d]=g}}var w=this.jpoint(null,null,null),D=this._wnafT4;for(s=c;s>=0;s--){for(var x=0;s>=0;){var E=!0;for(o=0;o<i;o++)D[o]=0|f[o][s],0!==D[o]&&(E=!1);if(!E)break;x++,s--}if(s>=0&&x++,w=w.dblp(x),s<0)break;for(o=0;o<i;o++){var _=D[o];0!==_&&(_>0?a=u[o][_-1>>1]:_<0&&(a=u[o][-_-1>>1].neg()),w="affine"===a.type?w.mixedAdd(a):w.add(a))}}for(s=0;s<i;s++)u[s]=null;return n?w:w.toP()},y5.BasePoint=y4,y4.prototype.eq=function(){throw Error("Not implemented")},y4.prototype.validate=function(){return this.curve.validate(this)},y5.prototype.decodePoint=function(e,t){e=y3.toArray(e,t);var r=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*r)return 6===e[0]?y6(e[e.length-1]%2==0):7===e[0]&&y6(e[e.length-1]%2==1),this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));if((2===e[0]||3===e[0])&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),3===e[0]);throw Error("Unknown point format")},y4.prototype.encodeCompressed=function(e){return this.encode(e,!0)},y4.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))},y4.prototype.encode=function(e,t){return y3.encode(this._encode(t),e)},y4.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},y4.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},y4.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],i=this,n=0;n<t;n+=e){for(var s=0;s<e;s++)i=i.dbl();r.push(i)}return{step:e,points:r}},y4.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,i=1===r?null:this.dbl(),n=1;n<r;n++)t[n]=t[n-1].add(i);return{wnd:e,points:t}},y4.prototype._getBeta=function(){return null},y4.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t};var y9=yX(function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}}),y7=y3.assert;function me(e){y5.call(this,"short",e),this.a=new(r(yB))(e.a,16).toRed(this.red),this.b=new(r(yB))(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=[,,,,],this._endoWnafT2=[,,,,]}function mt(e,t,i,n){y5.BasePoint.call(this,e,"affine"),null===t&&null===i?(this.x=null,this.y=null,this.inf=!0):(this.x=new(r(yB))(t,16),this.y=new(r(yB))(i,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function mr(e,t,i,n){y5.BasePoint.call(this,e,"jacobian"),null===t&&null===i&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new(r(yB))(0)):(this.x=new(r(yB))(t,16),this.y=new(r(yB))(i,16),this.z=new(r(yB))(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}y9(me,y5),me.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){if(e.beta)t=new(r(yB))(e.beta,16).toRed(this.red);else{var t,i,n,s=this._getEndoRoots(this.p);t=(t=0>s[0].cmp(s[1])?s[0]:s[1]).toRed(this.red)}if(e.lambda)i=new(r(yB))(e.lambda,16);else{var o=this._getEndoRoots(this.n);0===this.g.mul(o[0]).x.cmp(this.g.x.redMul(t))?i=o[0]:(i=o[1],y7(0===this.g.mul(i).x.cmp(this.g.x.redMul(t))))}return n=e.basis?e.basis.map(function(e){return{a:new(r(yB))(e.a,16),b:new(r(yB))(e.b,16)}}):this._getEndoBasis(i),{beta:t,lambda:i,basis:n}}},me.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:r(yB).mont(e),i=new(r(yB))(2).toRed(t).redInvm(),n=i.redNeg(),s=new(r(yB))(3).toRed(t).redNeg().redSqrt().redMul(i);return[n.redAdd(s).fromRed(),n.redSub(s).fromRed()]},me.prototype._getEndoBasis=function(e){for(var t,i,n,s,o,a,h,u,f,c=this.n.ushrn(Math.floor(this.n.bitLength()/2)),l=e,d=this.n.clone(),p=new(r(yB))(1),g=new(r(yB))(0),b=new(r(yB))(0),y=new(r(yB))(1),m=0;0!==l.cmpn(0);){var v=d.div(l);u=d.sub(v.mul(l)),f=b.sub(v.mul(p));var w=y.sub(v.mul(g));if(!n&&0>u.cmp(c))t=h.neg(),i=p,n=u.neg(),s=f;else if(n&&2==++m)break;h=u,d=l,l=u,b=p,p=f,y=g,g=w}o=u.neg(),a=f;var D=n.sqr().add(s.sqr());return o.sqr().add(a.sqr()).cmp(D)>=0&&(o=t,a=i),n.negative&&(n=n.neg(),s=s.neg()),o.negative&&(o=o.neg(),a=a.neg()),[{a:n,b:s},{a:o,b:a}]},me.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],i=t[1],n=i.b.mul(e).divRound(this.n),s=r.b.neg().mul(e).divRound(this.n),o=n.mul(r.a),a=s.mul(i.a),h=n.mul(r.b),u=s.mul(i.b);return{k1:e.sub(o).sub(a),k2:h.add(u).neg()}},me.prototype.pointFromX=function(e,t){(e=new(r(yB))(e,16)).red||(e=e.toRed(this.red));var i=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=i.redSqrt();if(0!==n.redSqr().redSub(i).cmp(this.zero))throw Error("invalid point");var s=n.fromRed().isOdd();return(t&&!s||!t&&s)&&(n=n.redNeg()),this.point(e,n)},me.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,i=this.a.redMul(t),n=t.redSqr().redMul(t).redIAdd(i).redIAdd(this.b);return 0===r.redSqr().redISub(n).cmpn(0)},me.prototype._endoWnafMulAdd=function(e,t,r){for(var i=this._endoWnafT1,n=this._endoWnafT2,s=0;s<e.length;s++){var o=this._endoSplit(t[s]),a=e[s],h=a._getBeta();o.k1.negative&&(o.k1.ineg(),a=a.neg(!0)),o.k2.negative&&(o.k2.ineg(),h=h.neg(!0)),i[2*s]=a,i[2*s+1]=h,n[2*s]=o.k1,n[2*s+1]=o.k2}for(var u=this._wnafMulAdd(1,i,n,2*s,r),f=0;f<2*s;f++)i[f]=null,n[f]=null;return u},y9(mt,y5.BasePoint),me.prototype.point=function(e,t,r){return new mt(this,e,t,r)},me.prototype.pointFromJSON=function(e,t){return mt.fromJSON(this,e,t)},mt.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,i=function(e){return r.point(e.x.redMul(r.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return t}},mt.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},mt.fromJSON=function(e,t,r){"string"==typeof t&&(t=JSON.parse(t));var i=e.point(t[0],t[1],r);if(!t[2])return i;function n(t){return e.point(t[0],t[1],r)}var s=t[2];return i.precomputed={beta:null,doubles:s.doubles&&{step:s.doubles.step,points:[i].concat(s.doubles.points.map(n))},naf:s.naf&&{wnd:s.naf.wnd,points:[i].concat(s.naf.points.map(n))}},i},mt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},mt.prototype.isInfinity=function(){return this.inf},mt.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e)||0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),i=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,i)},mt.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),i=e.redInvm(),n=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(i),s=n.redSqr().redISub(this.x.redAdd(this.x)),o=n.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,o)},mt.prototype.getX=function(){return this.x.fromRed()},mt.prototype.getY=function(){return this.y.fromRed()},mt.prototype.mul=function(e){return(e=new(r(yB))(e,16),this.isInfinity())?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},mt.prototype.mulAdd=function(e,t,r){var i=[this,t],n=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(i,n):this.curve._wnafMulAdd(1,i,n,2)},mt.prototype.jmulAdd=function(e,t,r){var i=[this,t],n=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(i,n,!0):this.curve._wnafMulAdd(1,i,n,2,!0)},mt.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},mt.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,i=function(e){return e.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(i)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(i)}}}return t},mt.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},y9(mr,y5.BasePoint),me.prototype.jpoint=function(e,t,r){return new mr(this,e,t,r)},mr.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),i=this.y.redMul(t).redMul(e);return this.curve.point(r,i)},mr.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},mr.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),i=this.x.redMul(t),n=e.x.redMul(r),s=this.y.redMul(t.redMul(e.z)),o=e.y.redMul(r.redMul(this.z)),a=i.redSub(n),h=s.redSub(o);if(0===a.cmpn(0))if(0!==h.cmpn(0))return this.curve.jpoint(null,null,null);else return this.dbl();var u=a.redSqr(),f=u.redMul(a),c=i.redMul(u),l=h.redSqr().redIAdd(f).redISub(c).redISub(c),d=h.redMul(c.redISub(l)).redISub(s.redMul(f)),p=this.z.redMul(e.z).redMul(a);return this.curve.jpoint(l,d,p)},mr.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,i=e.x.redMul(t),n=this.y,s=e.y.redMul(t).redMul(this.z),o=r.redSub(i),a=n.redSub(s);if(0===o.cmpn(0))if(0!==a.cmpn(0))return this.curve.jpoint(null,null,null);else return this.dbl();var h=o.redSqr(),u=h.redMul(o),f=r.redMul(h),c=a.redSqr().redIAdd(u).redISub(f).redISub(f),l=a.redMul(f.redISub(c)).redISub(n.redMul(u)),d=this.z.redMul(o);return this.curve.jpoint(c,l,d)},mr.prototype.dblp=function(e){if(0===e||this.isInfinity())return this;if(!e)return this.dbl();if(this.curve.zeroA||this.curve.threeA){var t,r=this;for(t=0;t<e;t++)r=r.dbl();return r}var i=this.curve.a,n=this.curve.tinv,s=this.x,o=this.y,a=this.z,h=a.redSqr().redSqr(),u=o.redAdd(o);for(t=0;t<e;t++){var f=s.redSqr(),c=u.redSqr(),l=c.redSqr(),d=f.redAdd(f).redIAdd(f).redIAdd(i.redMul(h)),p=s.redMul(c),g=d.redSqr().redISub(p.redAdd(p)),b=p.redISub(g),y=d.redMul(b);y=y.redIAdd(y).redISub(l);var m=u.redMul(a);t+1<e&&(h=h.redMul(l)),s=g,a=m,u=y}return this.curve.jpoint(s,u.redMul(n),a)},mr.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},mr.prototype._zeroDbl=function(){if(this.zOne){var e,t,r,i=this.x.redSqr(),n=this.y.redSqr(),s=n.redSqr(),o=this.x.redAdd(n).redSqr().redISub(i).redISub(s);o=o.redIAdd(o);var a=i.redAdd(i).redIAdd(i),h=a.redSqr().redISub(o).redISub(o),u=s.redIAdd(s);u=(u=u.redIAdd(u)).redIAdd(u),e=h,t=a.redMul(o.redISub(h)).redISub(u),r=this.y.redAdd(this.y)}else{var f=this.x.redSqr(),c=this.y.redSqr(),l=c.redSqr(),d=this.x.redAdd(c).redSqr().redISub(f).redISub(l);d=d.redIAdd(d);var p=f.redAdd(f).redIAdd(f),g=p.redSqr(),b=l.redIAdd(l);b=(b=b.redIAdd(b)).redIAdd(b),e=g.redISub(d).redISub(d),t=p.redMul(d.redISub(e)).redISub(b),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(e,t,r)},mr.prototype._threeDbl=function(){if(this.zOne){var e,t,r,i=this.x.redSqr(),n=this.y.redSqr(),s=n.redSqr(),o=this.x.redAdd(n).redSqr().redISub(i).redISub(s);o=o.redIAdd(o);var a=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),h=a.redSqr().redISub(o).redISub(o);e=h;var u=s.redIAdd(s);u=(u=u.redIAdd(u)).redIAdd(u),t=a.redMul(o.redISub(h)).redISub(u),r=this.y.redAdd(this.y)}else{var f=this.z.redSqr(),c=this.y.redSqr(),l=this.x.redMul(c),d=this.x.redSub(f).redMul(this.x.redAdd(f));d=d.redAdd(d).redIAdd(d);var p=l.redIAdd(l),g=(p=p.redIAdd(p)).redAdd(p);e=d.redSqr().redISub(g),r=this.y.redAdd(this.z).redSqr().redISub(c).redISub(f);var b=c.redSqr();b=(b=(b=b.redIAdd(b)).redIAdd(b)).redIAdd(b),t=d.redMul(p.redISub(e)).redISub(b)}return this.curve.jpoint(e,t,r)},mr.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,i=this.z,n=i.redSqr().redSqr(),s=t.redSqr(),o=r.redSqr(),a=s.redAdd(s).redIAdd(s).redIAdd(e.redMul(n)),h=t.redAdd(t),u=(h=h.redIAdd(h)).redMul(o),f=a.redSqr().redISub(u.redAdd(u)),c=u.redISub(f),l=o.redSqr();l=(l=(l=l.redIAdd(l)).redIAdd(l)).redIAdd(l);var d=a.redMul(c).redISub(l),p=r.redAdd(r).redMul(i);return this.curve.jpoint(f,d,p)},mr.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),i=t.redSqr(),n=e.redAdd(e).redIAdd(e),s=n.redSqr(),o=this.x.redAdd(t).redSqr().redISub(e).redISub(i),a=(o=(o=(o=o.redIAdd(o)).redAdd(o).redIAdd(o)).redISub(s)).redSqr(),h=i.redIAdd(i);h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var u=n.redIAdd(o).redSqr().redISub(s).redISub(a).redISub(h),f=t.redMul(u);f=(f=f.redIAdd(f)).redIAdd(f);var c=this.x.redMul(a).redISub(f);c=(c=c.redIAdd(c)).redIAdd(c);var l=this.y.redMul(u.redMul(h.redISub(u)).redISub(o.redMul(a)));l=(l=(l=l.redIAdd(l)).redIAdd(l)).redIAdd(l);var d=this.z.redAdd(o).redSqr().redISub(r).redISub(a);return this.curve.jpoint(c,l,d)},mr.prototype.mul=function(e,t){return e=new(r(yB))(e,t),this.curve._wnafMul(this,e)},mr.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(0!==this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0))return!1;var i=t.redMul(this.z),n=r.redMul(e.z);return 0===this.y.redMul(n).redISub(e.y.redMul(i)).cmpn(0)},mr.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(r))return!0;for(var i=e.clone(),n=this.curve.redN.redMul(t);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(n),0===this.x.cmp(r))return!0}},mr.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},mr.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var mi=yX(function(e,t){t.base=y5,t.short=me,t.mont=null,t.edwards=null}),mn=yX(function(e,t){var i,n=y3.assert;function s(e){"short"===e.type?this.curve=new mi.short(e):"edwards"===e.type?this.curve=new mi.edwards(e):this.curve=new mi.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,n(this.g.validate(),"Invalid curve"),n(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function o(e,r){Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){var i=new s(r);return Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:i}),i}})}t.PresetCurve=s,o("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:r(yJ).sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),o("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:r(yJ).sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),o("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:r(yJ).sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),o("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:r(yJ).sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),o("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:r(yJ).sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),o("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r(yJ).sha256,gRed:!1,g:["9"]}),o("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r(yJ).sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{i=null.crash()}catch(e){i=void 0}o("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:r(yJ).sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",i]})});function ms(e){if(!(this instanceof ms))return new ms(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=y1.toArray(e.entropy,e.entropyEnc||"hex"),r=y1.toArray(e.nonce,e.nonceEnc||"hex"),i=y1.toArray(e.pers,e.persEnc||"hex");yQ(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,i)}ms.prototype._init=function(e,t,r){var i=e.concat(t).concat(r);this.K=Array(this.outLen/8),this.V=Array(this.outLen/8);for(var n=0;n<this.V.length;n++)this.K[n]=0,this.V[n]=1;this._update(i),this._reseed=1,this.reseedInterval=0x1000000000000},ms.prototype._hmac=function(){return new(r(yJ)).hmac(this.hash,this.K)},ms.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},ms.prototype.reseed=function(e,t,r,i){"string"!=typeof t&&(i=r,r=t,t=null),e=y1.toArray(e,t),r=y1.toArray(r,i),yQ(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1},ms.prototype.generate=function(e,t,r,i){if(this._reseed>this.reseedInterval)throw Error("Reseed is required");"string"!=typeof t&&(i=r,r=t,t=null),r&&(r=y1.toArray(r,i||"hex"),this._update(r));for(var n=[];n.length<e;)this.V=this._hmac().update(this.V).digest(),n=n.concat(this.V);var s=n.slice(0,e);return this._update(r),this._reseed++,y1.encode(s,t)};var mo=y3.assert;function ma(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}ma.fromPublic=function(e,t,r){return t instanceof ma?t:new ma(e,{pub:t,pubEnc:r})},ma.fromPrivate=function(e,t,r){return t instanceof ma?t:new ma(e,{priv:t,privEnc:r})},ma.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},ma.prototype.getPublic=function(e,t){return("string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t)?this.pub.encode(t,e):this.pub},ma.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},ma.prototype._importPrivate=function(e,t){this.priv=new(r(yB))(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},ma.prototype._importPublic=function(e,t){if(e.x||e.y){"mont"===this.ec.curve.type?mo(e.x,"Need x coordinate"):("short"===this.ec.curve.type||"edwards"===this.ec.curve.type)&&mo(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,t)},ma.prototype.derive=function(e){return e.validate()||mo(e.validate(),"public point not validated"),e.mul(this.priv).getX()},ma.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)},ma.prototype.verify=function(e,t,r){return this.ec.verify(e,t,this,void 0,r)},ma.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var mh=y3.assert;function mu(e,t){if(e instanceof mu)return e;this._importDER(e,t)||(mh(e.r&&e.s,"Signature without r or s"),this.r=new(r(yB))(e.r,16),this.s=new(r(yB))(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}function mf(){this.place=0}function mc(e,t){var r=e[t.place++];if(!(128&r))return r;var i=15&r;if(0===i||i>4||0===e[t.place])return!1;for(var n=0,s=0,o=t.place;s<i;s++,o++)n<<=8,n|=e[o],n>>>=0;return!(n<=127)&&(t.place=o,n)}function ml(e){for(var t=0,r=e.length-1;!e[t]&&!(128&e[t+1])&&t<r;)t++;return 0===t?e:e.slice(t)}function md(e,t){if(t<128)return void e.push(t);var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|r);--r;)e.push(t>>>(r<<3)&255);e.push(t)}mu.prototype._importDER=function(e,t){e=y3.toArray(e,t);var i=new mf;if(48!==e[i.place++])return!1;var n=mc(e,i);if(!1===n||n+i.place!==e.length||2!==e[i.place++])return!1;var s=mc(e,i);if(!1===s||(128&e[i.place])!=0)return!1;var o=e.slice(i.place,s+i.place);if(i.place+=s,2!==e[i.place++])return!1;var a=mc(e,i);if(!1===a||e.length!==a+i.place||(128&e[i.place])!=0)return!1;var h=e.slice(i.place,a+i.place);if(0===o[0])if(!(128&o[1]))return!1;else o=o.slice(1);if(0===h[0])if(!(128&h[1]))return!1;else h=h.slice(1);return this.r=new(r(yB))(o),this.s=new(r(yB))(h),this.recoveryParam=null,!0},mu.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&r[0]&&(r=[0].concat(r)),t=ml(t),r=ml(r);!r[0]&&!(128&r[1]);)r=r.slice(1);var i=[2];md(i,t.length),(i=i.concat(t)).push(2),md(i,r.length);var n=i.concat(r),s=[48];return md(s,n.length),s=s.concat(n),y3.encode(s,e)};var mp=function(){throw Error("unsupported")},mg=y3.assert;function mb(e){if(!(this instanceof mb))return new mb(e);"string"==typeof e&&(mg(Object.prototype.hasOwnProperty.call(mn,e),"Unknown curve "+e),e=mn[e]),e instanceof mn.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}mb.prototype.keyPair=function(e){return new ma(this,e)},mb.prototype.keyFromPrivate=function(e,t){return ma.fromPrivate(this,e,t)},mb.prototype.keyFromPublic=function(e,t){return ma.fromPublic(this,e,t)},mb.prototype.genKeyPair=function(e){e||(e={});for(var t=new ms({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||mp(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),i=this.n.byteLength(),n=this.n.sub(new(r(yB))(2));;){var s=new(r(yB))(t.generate(i));if(!(s.cmp(n)>0))return s.iaddn(1),this.keyFromPrivate(s)}},mb.prototype._truncateToN=function(e,t,i){if(r(yB).isBN(e)||"number"==typeof e)n=(e=new(r(yB))(e,16)).byteLength();else if("object"==typeof e)n=e.length,e=new(r(yB))(e,16);else{var n,s=e.toString();n=s.length+1>>>1,e=new(r(yB))(s,16)}"number"!=typeof i&&(i=8*n);var o=i-this.n.bitLength();return(o>0&&(e=e.ushrn(o)),!t&&e.cmp(this.n)>=0)?e.sub(this.n):e},mb.prototype.sign=function(e,t,i,n){if("object"==typeof i&&(n=i,i=null),n||(n={}),"string"!=typeof e&&"number"!=typeof e&&!r(yB).isBN(e)){mg("object"==typeof e&&e&&"number"==typeof e.length,"Expected message to be an array-like, a hex string, or a BN instance"),mg(e.length>>>0===e.length);for(var s=0;s<e.length;s++)mg((255&e[s])===e[s])}t=this.keyFromPrivate(t,i),mg(!(e=this._truncateToN(e,!1,n.msgBitLength)).isNeg(),"Can not sign a negative message");var o=this.n.byteLength(),a=t.getPrivate().toArray("be",o),h=e.toArray("be",o);mg(new(r(yB))(h).eq(e),"Can not sign message");for(var u=new ms({hash:this.hash,entropy:a,nonce:h,pers:n.pers,persEnc:n.persEnc||"utf8"}),f=this.n.sub(new(r(yB))(1)),c=0;;c++){var l=n.k?n.k(c):new(r(yB))(u.generate(this.n.byteLength()));if(0>=(l=this._truncateToN(l,!0)).cmpn(1)||l.cmp(f)>=0)continue;var d=this.g.mul(l);if(!d.isInfinity()){var p=d.getX(),g=p.umod(this.n);if(0!==g.cmpn(0)){var b=l.invm(this.n).mul(g.mul(t.getPrivate()).iadd(e));if(0!==(b=b.umod(this.n)).cmpn(0)){var y=!!d.getY().isOdd()|2*(0!==p.cmp(g));return n.canonical&&b.cmp(this.nh)>0&&(b=this.n.sub(b),y^=1),new mu({r:g,s:b,recoveryParam:y})}}}}},mb.prototype.verify=function(e,t,r,i,n){n||(n={}),e=this._truncateToN(e,!1,n.msgBitLength),r=this.keyFromPublic(r,i);var s,o=(t=new mu(t,"hex")).r,a=t.s;if(0>o.cmpn(1)||o.cmp(this.n)>=0||0>a.cmpn(1)||a.cmp(this.n)>=0)return!1;var h=a.invm(this.n),u=h.mul(e).umod(this.n),f=h.mul(o).umod(this.n);return this.curve._maxwellTrick?!(s=this.g.jmulAdd(u,r.getPublic(),f)).isInfinity()&&s.eqXToP(o):!(s=this.g.mulAdd(u,r.getPublic(),f)).isInfinity()&&0===s.getX().umod(this.n).cmp(o)},mb.prototype.recoverPubKey=function(e,t,i,n){mg((3&i)===i,"The recovery param is more than two bits"),t=new mu(t,n);var s=this.n,o=new(r(yB))(e),a=t.r,h=t.s,u=1&i,f=i>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&f)throw Error("Unable to find sencond key candinate");a=f?this.curve.pointFromX(a.add(this.curve.n),u):this.curve.pointFromX(a,u);var c=t.r.invm(s),l=s.sub(o).mul(c).umod(s),d=h.mul(c).umod(s);return this.g.mulAdd(l,a,d)},mb.prototype.getKeyRecoveryParam=function(e,t,r,i){if(null!==(t=new mu(t,i)).recoveryParam)return t.recoveryParam;for(var n,s=0;s<4;s++){try{n=this.recoverPubKey(e,t,s)}catch(e){continue}if(n.eq(r))return s}throw Error("Unable to find valid recovery factor")};var my=yX(function(e,t){t.version="6.6.1",t.utils=y3,t.rand=function(){throw Error("unsupported")},t.curve=mi,t.curves=mn,t.ec=mb,t.eddsa=null}).ec;const mm=new yg("signing-key/5.8.0");let mv=null;function mw(){return mv||(mv=new my("secp256k1")),mv}class mD{constructor(e){yZ(this,"curve","secp256k1"),yZ(this,"privateKey",yS(e)),32!==function(e){if("string"!=typeof e)e=yS(e);else if(!yE(e)||e.length%2)return null;return(e.length-2)/2}(this.privateKey)&&mm.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");let t=mw().keyFromPrivate(yD(this.privateKey));yZ(this,"publicKey","0x"+t.getPublic(!1,"hex")),yZ(this,"compressedPublicKey","0x"+t.getPublic(!0,"hex")),yZ(this,"_isSigningKey",!0)}_addPoint(e){let t=mw().keyFromPublic(yD(this.publicKey)),r=mw().keyFromPublic(yD(e));return"0x"+t.pub.add(r.pub).encodeCompressed("hex")}signDigest(e){let t=mw().keyFromPrivate(yD(this.privateKey)),r=yD(e);32!==r.length&&mm.throwArgumentError("bad digest length","digest",e);let i=t.sign(r,{canonical:!0});return yM({recoveryParam:i.recoveryParam,r:yA("0x"+i.r.toString(16),32),s:yA("0x"+i.s.toString(16),32)})}computeSharedSecret(e){let t=mw().keyFromPrivate(yD(this.privateKey)),r=mw().keyFromPublic(yD(mE(e)));return yA("0x"+t.derive(r.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}}function mx(e,t){let r=yM(t),i={r:yD(r.r),s:yD(r.s)};return"0x"+mw().recoverPubKey(yD(e),i,r.recoveryParam).encode("hex",!1)}function mE(e,t){let r=yD(e);if(32===r.length){let e=new mD(r);return t?"0x"+mw().keyFromPrivate(r).getPublic(!0,"hex"):e.publicKey}return 33===r.length?t?yS(r):"0x"+mw().keyFromPublic(r).getPublic(!1,"hex"):65===r.length?t?"0x"+mw().keyFromPublic(r).getPublic(!0,"hex"):yS(r):mm.throwArgumentError("invalid public or private key","key","[REDACTED]")}new yg("transactions/5.8.0"),(Ib=IR||(IR={}))[Ib.legacy=0]="legacy",Ib[Ib.eip2930=1]="eip2930",Ib[Ib.eip1559=2]="eip1559";var m_={};m_=self.fetch||(self.fetch=s("laOt8").default||s("laOt8"));var mS={};Object.defineProperty(mS,"__esModule",{value:!0}),mS.randomStringForEntropy=mS.randomString=mS.randomUint32=mS.randomBytes=mS.defaultRandomSource=void 0;var mI={};Object.defineProperty(mI,"__esModule",{value:!0}),mI.SystemRandomSource=void 0;var mA={};Object.defineProperty(mA,"__esModule",{value:!0}),mA.BrowserRandomSource=void 0,mA.BrowserRandomSource=class{constructor(){this.isAvailable=!1,this.isInstantiated=!1;let e="undefined"!=typeof self?self.crypto||self.msCrypto:null;e&&void 0!==e.getRandomValues&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw Error("Browser random byte generator is not available.");let t=new Uint8Array(e);for(let e=0;e<t.length;e+=65536)this._crypto.getRandomValues(t.subarray(e,e+Math.min(t.length-e,65536)));return t}};var mM={};Object.defineProperty(mM,"__esModule",{value:!0}),mM.NodeRandomSource=void 0;var mC={};Object.defineProperty(mC,"__esModule",{value:!0}),mC.wipe=function(e){for(var t=0;t<e.length;t++)e[t]=0;return e},mM.NodeRandomSource=class{constructor(){this.isAvailable=!1,this.isInstantiated=!1;{let e=s("kjyEk");e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw Error("Node.js random byte generator is not available.");let t=this._crypto.randomBytes(e);if(t.length!==e)throw Error("NodeRandomSource: got fewer bytes than requested");let r=new Uint8Array(e);for(let e=0;e<r.length;e++)r[e]=t[e];return(0,mC.wipe)(t),r}},mI.SystemRandomSource=class{constructor(){if(this.isAvailable=!1,this.name="",this._source=new mA.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new mM.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw Error("System random byte generator is not available.");return this._source.randomBytes(e)}};var mO={};Object.defineProperty(mO,"__esModule",{value:!0});var mP={};function mR(e,t,r){return void 0===t&&(t=new Uint8Array(2)),void 0===r&&(r=0),t[r+0]=e>>>8,t[r+1]=e>>>0,t}function mT(e,t,r){return void 0===t&&(t=new Uint8Array(2)),void 0===r&&(r=0),t[r+0]=e>>>0,t[r+1]=e>>>8,t}function mN(e,t){return void 0===t&&(t=0),e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function mB(e,t){return void 0===t&&(t=0),(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}function mL(e,t){return void 0===t&&(t=0),e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}function mk(e,t){return void 0===t&&(t=0),(e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t])>>>0}function mU(e,t,r){return void 0===t&&(t=new Uint8Array(4)),void 0===r&&(r=0),t[r+0]=e>>>24,t[r+1]=e>>>16,t[r+2]=e>>>8,t[r+3]=e>>>0,t}function mz(e,t,r){return void 0===t&&(t=new Uint8Array(4)),void 0===r&&(r=0),t[r+0]=e>>>0,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24,t}function mj(e,t,r){return void 0===t&&(t=new Uint8Array(8)),void 0===r&&(r=0),mU(e/0x100000000>>>0,t,r),mU(e>>>0,t,r+4),t}function mq(e,t,r){return void 0===t&&(t=new Uint8Array(8)),void 0===r&&(r=0),mz(e>>>0,t,r),mz(e/0x100000000>>>0,t,r+4),t}function mF(e,t=mS.defaultRandomSource){return t.randomBytes(e)}Object.defineProperty(mP,"__esModule",{value:!0}),mP.mul=Math.imul||function(e,t){var r=65535&e,i=65535&t;return r*i+((e>>>16&65535)*i+r*(t>>>16&65535)<<16>>>0)|0},mP.add=function(e,t){return e+t|0},mP.sub=function(e,t){return e-t|0},mP.rotl=function(e,t){return e<<t|e>>>32-t},mP.rotr=function(e,t){return e<<32-t|e>>>t},mP.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},mP.MAX_SAFE_INTEGER=0x1fffffffffffff,mP.isSafeInteger=function(e){return mP.isInteger(e)&&e>=-mP.MAX_SAFE_INTEGER&&e<=mP.MAX_SAFE_INTEGER},mO.readInt16BE=function(e,t){return void 0===t&&(t=0),(e[t+0]<<8|e[t+1])<<16>>16},mO.readUint16BE=function(e,t){return void 0===t&&(t=0),(e[t+0]<<8|e[t+1])>>>0},mO.readInt16LE=function(e,t){return void 0===t&&(t=0),(e[t+1]<<8|e[t])<<16>>16},mO.readUint16LE=function(e,t){return void 0===t&&(t=0),(e[t+1]<<8|e[t])>>>0},mO.writeUint16BE=mR,mO.writeInt16BE=mR,mO.writeUint16LE=mT,mO.writeInt16LE=mT,mO.readInt32BE=mN,mO.readUint32BE=mB,mO.readInt32LE=mL,mO.readUint32LE=mk,mO.writeUint32BE=mU,mO.writeInt32BE=mU,mO.writeUint32LE=mz,mO.writeInt32LE=mz,mO.readInt64BE=function(e,t){void 0===t&&(t=0);var r=mN(e,t),i=mN(e,t+4);return 0x100000000*r+i-(i>>31)*0x100000000},mO.readUint64BE=function(e,t){return void 0===t&&(t=0),0x100000000*mB(e,t)+mB(e,t+4)},mO.readInt64LE=function(e,t){void 0===t&&(t=0);var r=mL(e,t);return 0x100000000*mL(e,t+4)+r-(r>>31)*0x100000000},mO.readUint64LE=function(e,t){void 0===t&&(t=0);var r=mk(e,t);return 0x100000000*mk(e,t+4)+r},mO.writeUint64BE=mj,mO.writeInt64BE=mj,mO.writeUint64LE=mq,mO.writeInt64LE=mq,mO.readUintBE=function(e,t,r){if(void 0===r&&(r=0),e%8!=0)throw Error("readUintBE supports only bitLengths divisible by 8");if(e/8>t.length-r)throw Error("readUintBE: array is too short for the given bitLength");for(var i=0,n=1,s=e/8+r-1;s>=r;s--)i+=t[s]*n,n*=256;return i},mO.readUintLE=function(e,t,r){if(void 0===r&&(r=0),e%8!=0)throw Error("readUintLE supports only bitLengths divisible by 8");if(e/8>t.length-r)throw Error("readUintLE: array is too short for the given bitLength");for(var i=0,n=1,s=r;s<r+e/8;s++)i+=t[s]*n,n*=256;return i},mO.writeUintBE=function(e,t,r,i){if(void 0===r&&(r=new Uint8Array(e/8)),void 0===i&&(i=0),e%8!=0)throw Error("writeUintBE supports only bitLengths divisible by 8");if(!mP.isSafeInteger(t))throw Error("writeUintBE value must be an integer");for(var n=1,s=e/8+i-1;s>=i;s--)r[s]=t/n&255,n*=256;return r},mO.writeUintLE=function(e,t,r,i){if(void 0===r&&(r=new Uint8Array(e/8)),void 0===i&&(i=0),e%8!=0)throw Error("writeUintLE supports only bitLengths divisible by 8");if(!mP.isSafeInteger(t))throw Error("writeUintLE value must be an integer");for(var n=1,s=i;s<i+e/8;s++)r[s]=t/n&255,n*=256;return r},mO.readFloat32BE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat32(t)},mO.readFloat32LE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat32(t,!0)},mO.readFloat64BE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat64(t)},mO.readFloat64LE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat64(t,!0)},mO.writeFloat32BE=function(e,t,r){return void 0===t&&(t=new Uint8Array(4)),void 0===r&&(r=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat32(r,e),t},mO.writeFloat32LE=function(e,t,r){return void 0===t&&(t=new Uint8Array(4)),void 0===r&&(r=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat32(r,e,!0),t},mO.writeFloat64BE=function(e,t,r){return void 0===t&&(t=new Uint8Array(8)),void 0===r&&(r=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat64(r,e),t},mO.writeFloat64LE=function(e,t,r){return void 0===t&&(t=new Uint8Array(8)),void 0===r&&(r=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat64(r,e,!0),t},mS.defaultRandomSource=new mI.SystemRandomSource,mS.randomBytes=mF,mS.randomUint32=function(e=mS.defaultRandomSource){let t=mF(4,e),r=(0,mO.readUint32LE)(t);return(0,mC.wipe)(t),r};const mH="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function mK(e,t=mH,r=mS.defaultRandomSource){if(t.length<2)throw Error("randomString charset is too short");if(t.length>256)throw Error("randomString charset is too long");let i="",n=t.length,s=256-256%n;for(;e>0;){let o=mF(Math.ceil(256*e/s),r);for(let r=0;r<o.length&&e>0;r++){let a=o[r];a<s&&(i+=t.charAt(a%n),e--)}(0,mC.wipe)(o)}return i}mS.randomString=mK,mS.randomStringForEntropy=function(e,t=mH,r=mS.defaultRandomSource){return mK(Math.ceil(e/(Math.log(t.length)/Math.LN2)),t,r)};var m$={};Object.defineProperty(m$,"__esModule",{value:!0}),m$.DIGEST_LENGTH=32,m$.BLOCK_SIZE=64;var mV=function(){function e(){this.digestLength=m$.DIGEST_LENGTH,this.blockSize=m$.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return e.prototype._initState=function(){this._state[0]=0x6a09e667,this._state[1]=0xbb67ae85,this._state[2]=0x3c6ef372,this._state[3]=0xa54ff53a,this._state[4]=0x510e527f,this._state[5]=0x9b05688c,this._state[6]=0x1f83d9ab,this._state[7]=0x5be0cd19},e.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},e.prototype.clean=function(){mC.wipe(this._buffer),mC.wipe(this._temp),this.reset()},e.prototype.update=function(e,t){if(void 0===t&&(t=e.length),this._finished)throw Error("SHA256: can't update because hash was finished.");var r=0;if(this._bytesHashed+=t,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&t>0;)this._buffer[this._bufferLength++]=e[r++],t--;this._bufferLength===this.blockSize&&(mG(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(t>=this.blockSize&&(r=mG(this._temp,this._state,e,r,t),t%=this.blockSize);t>0;)this._buffer[this._bufferLength++]=e[r++],t--;return this},e.prototype.finish=function(e){if(!this._finished){var t=this._bytesHashed,r=this._bufferLength,i=t%64<56?64:128;this._buffer[r]=128;for(var n=r+1;n<i-8;n++)this._buffer[n]=0;mO.writeUint32BE(t/0x20000000|0,this._buffer,i-8),mO.writeUint32BE(t<<3,this._buffer,i-4),mG(this._temp,this._state,this._buffer,0,i),this._finished=!0}for(var n=0;n<this.digestLength/4;n++)mO.writeUint32BE(this._state[n],e,4*n);return this},e.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},e.prototype.saveState=function(){if(this._finished)throw Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},e.prototype.restoreState=function(e){return this._state.set(e.state),this._bufferLength=e.bufferLength,e.buffer&&this._buffer.set(e.buffer),this._bytesHashed=e.bytesHashed,this._finished=!1,this},e.prototype.cleanSavedState=function(e){mC.wipe(e.state),e.buffer&&mC.wipe(e.buffer),e.bufferLength=0,e.bytesHashed=0},e}();m$.SHA256=mV;var mW=new Int32Array([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]);function mG(e,t,r,i,n){for(;n>=64;){for(var s=t[0],o=t[1],a=t[2],h=t[3],u=t[4],f=t[5],c=t[6],l=t[7],d=0;d<16;d++){var p=i+4*d;e[d]=mO.readUint32BE(r,p)}for(var d=16;d<64;d++){var g=e[d-2],b=(g>>>17|g<<15)^(g>>>19|g<<13)^g>>>10,y=((g=e[d-15])>>>7|g<<25)^(g>>>18|g<<14)^g>>>3;e[d]=(b+e[d-7]|0)+(y+e[d-16]|0)}for(var d=0;d<64;d++){var b=(((u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7))+(u&f^~u&c)|0)+(l+(mW[d]+e[d]|0)|0)|0,y=((s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10))+(s&o^s&a^o&a)|0;l=c,c=f,f=u,u=h+b|0,h=a,a=o,o=s,s=b+y|0}t[0]+=s,t[1]+=o,t[2]+=a,t[3]+=h,t[4]+=u,t[5]+=f,t[6]+=c,t[7]+=l,i+=64,n-=64}return i}m$.hash=function(e){var t=new mV;t.update(e);var r=t.digest();return t.clean(),r};class mY{constructor(e){this.client=e}}class mZ{constructor(e){this.opts=e}}const mJ={wc_authRequest:{req:{ttl:x.ONE_DAY,prompt:!0,tag:3e3},res:{ttl:x.ONE_DAY,prompt:!1,tag:3001}}},mX={min:x.FIVE_MINUTES,max:x.SEVEN_DAYS},mQ="authClient",m0="wc@1:auth:",m1=`${m0}:PUB_KEY`;function m3(e){return e?.split(":")}function m2(e){let t=e&&m3(e);if(t)return t.pop()}async function m8(e,t,r,i,n){switch(r.t){case"eip191":var s,o,a,h,u;return s=e,o=t,a=r.s,(h=yN(o),u=a,yY(yI(yO(yI(mE(mx(yD(h),u)),1)),12))).toLowerCase()===s.toLowerCase();case"eip1271":return await m6(e,t,r.s,i,n);default:throw Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${r.t}`)}}async function m6(e,t,i,n,s){try{let o="0x1626ba7e",a=i.substring(2),h=yN(t).substring(2),u=o+h+"00000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000041"+a,f=await r(m_)(`https://rpc.walletconnect.com/v1/?chainId=${n}&projectId=${s}`,{method:"POST",body:JSON.stringify({id:Date.now()+Math.floor(1e3*Math.random()),jsonrpc:"2.0",method:"eth_call",params:[{to:e,data:u},"latest"]})}),{result:c}=await f.json();return!!c&&c.slice(0,o.length).toLowerCase()===o.toLowerCase()}catch(e){return console.error("isValidEip1271Signature: ",e),!1}}function m5(e){return e.getAll().filter(e=>"requester"in e)}function m4(e,t){return m5(e).find(e=>e.id===t)}x.ONE_DAY;var m9=function(e,t){if(e.length>=255)throw TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<e.length;n++){var s=e.charAt(n),o=s.charCodeAt(0);if(255!==r[o])throw TypeError(s+" is ambiguous");r[o]=n}var a=e.length,h=e.charAt(0),u=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function c(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[0]){for(var i=0,n=0;e[t]===h;)i++,t++;for(var s=(e.length-t)*u+1>>>0,o=new Uint8Array(s);e[t];){var f=r[e.charCodeAt(t)];if(255===f)return;for(var c=0,l=s-1;(0!==f||c<n)&&-1!==l;l--,c++)f+=a*o[l]>>>0,o[l]=f%256>>>0,f=f/256>>>0;if(0!==f)throw Error("Non-zero carry");n=c,t++}if(" "!==e[t]){for(var d=s-n;d!==s&&0===o[d];)d++;for(var p=new Uint8Array(i+(s-d)),g=i;d!==s;)p[g++]=o[d++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,i=0,n=0,s=t.length;n!==s&&0===t[n];)n++,r++;for(var o=(s-n)*f+1>>>0,u=new Uint8Array(o);n!==s;){for(var c=t[n],l=0,d=o-1;(0!==c||l<i)&&-1!==d;d--,l++)c+=256*u[d]>>>0,u[d]=c%a>>>0,c=c/a>>>0;if(0!==c)throw Error("Non-zero carry");i=l,n++}for(var p=o-i;p!==o&&0===u[p];)p++;for(var g=h.repeat(r);p<o;++p)g+=e.charAt(u[p]);return g},decodeUnsafe:c,decode:function(e){var r=c(e);if(r)return r;throw Error(`Non-${t} character`)}}};const m7=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw Error("Unknown type, must be binary type")};class ve{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class vt{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return vi(this,e)}}class vr{constructor(e){this.decoders=e}or(e){return vi(this,e)}decode(e){let t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const vi=(e,t)=>new vr({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class vn{constructor(e,t,r,i){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=i,this.encoder=new ve(e,t,r),this.decoder=new vt(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const vs=({name:e,prefix:t,encode:r,decode:i})=>new vn(e,t,r,i),vo=({prefix:e,name:t,alphabet:r})=>{let{encode:i,decode:n}=m9(r,t);return vs({prefix:e,name:t,encode:i,decode:e=>m7(n(e))})},va=({name:e,prefix:t,bitsPerChar:r,alphabet:i})=>vs({prefix:t,name:e,encode:e=>((e,t,r)=>{let i="="===t[t.length-1],n=(1<<r)-1,s="",o=0,a=0;for(let i=0;i<e.length;++i)for(a=a<<8|e[i],o+=8;o>r;)o-=r,s+=t[n&a>>o];if(o&&(s+=t[n&a<<r-o]),i)for(;s.length*r&7;)s+="=";return s})(e,i,r),decode:t=>((e,t,r,i)=>{let n={};for(let e=0;e<t.length;++e)n[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;let o=new Uint8Array(s*r/8|0),a=0,h=0,u=0;for(let t=0;t<s;++t){let s=n[e[t]];if(void 0===s)throw SyntaxError(`Non-${i} character`);h=h<<r|s,(a+=r)>=8&&(a-=8,o[u++]=255&h>>a)}if(a>=r||255&h<<8-a)throw SyntaxError("Unexpected end of data");return o})(t,i,r,e)});var vh=Object.freeze({__proto__:null,identity:vs({prefix:"\0",name:"identity",encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)})}),vu=Object.freeze({__proto__:null,base2:va({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})}),vf=Object.freeze({__proto__:null,base8:va({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})}),vc=Object.freeze({__proto__:null,base10:vo({prefix:"9",name:"base10",alphabet:"0123456789"})}),vl=Object.freeze({__proto__:null,base16:va({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper:va({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})});const vd=va({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),vp=va({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),vg=va({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),vb=va({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),vy=va({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),vm=va({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),vv=va({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});var vw=Object.freeze({__proto__:null,base32:vd,base32upper:vp,base32pad:vg,base32padupper:vb,base32hex:vy,base32hexupper:vm,base32hexpad:vv,base32hexpadupper:va({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z:va({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})}),vD=Object.freeze({__proto__:null,base36:vo({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper:vo({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})}),vx=Object.freeze({__proto__:null,base58btc:vo({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr:vo({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})});const vE=va({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),v_=va({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});var vS=Object.freeze({__proto__:null,base64:vE,base64pad:v_,base64url:va({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad:va({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})});const vI=Array.from("\uD83D\uDE80\uD83E\uDE90\uD83D\uDEF0\uD83C\uDF0C\uD83C\uDF11\uD83C\uDF12\uD83C\uDF13\uD83C\uDF14\uD83C\uDF15\uD83C\uDF16\uD83C\uDF17\uD83C\uDF18\uD83C\uDF0D\uD83C\uDF0F\uD83C\uDF0E\uD83D\uDC09\uD83D\uDCBB\uD83D\uDDA5\uD83D\uDCBE\uD83D\uDCBF\uD83D\uDE02\uD83D\uDE0D\uD83E\uDD23\uD83D\uDE0A\uD83D\uDE4F\uD83D\uDC95\uD83D\uDE2D\uD83D\uDE18\uD83D\uDC4D\uD83D\uDE05\uD83D\uDC4F\uD83D\uDE01\uD83D\uDD25\uD83E\uDD70\uD83D\uDC94\uD83D\uDC96\uD83D\uDC99\uD83D\uDE22\uD83E\uDD14\uD83D\uDE06\uD83D\uDE44\uD83D\uDCAA\uD83D\uDE09\uD83D\uDC4C\uD83E\uDD17\uD83D\uDC9C\uD83D\uDE14\uD83D\uDE0E\uD83D\uDE07\uD83C\uDF39\uD83E\uDD26\uD83C\uDF89\uD83D\uDC9E\uD83E\uDD37\uD83D\uDE31\uD83D\uDE0C\uD83C\uDF38\uD83D\uDE4C\uD83D\uDE0B\uD83D\uDC97\uD83D\uDC9A\uD83D\uDE0F\uD83D\uDC9B\uD83D\uDE42\uD83D\uDC93\uD83E\uDD29\uD83D\uDE04\uD83D\uDE00\uD83D\uDDA4\uD83D\uDE03\uD83D\uDCAF\uD83D\uDE48\uD83D\uDC47\uD83C\uDFB6\uD83D\uDE12\uD83E\uDD2D\uD83D\uDE1C\uD83D\uDC8B\uD83D\uDC40\uD83D\uDE2A\uD83D\uDE11\uD83D\uDCA5\uD83D\uDE4B\uD83D\uDE1E\uD83D\uDE29\uD83D\uDE21\uD83E\uDD2A\uD83D\uDC4A\uD83E\uDD73\uD83D\uDE25\uD83E\uDD24\uD83D\uDC49\uD83D\uDC83\uD83D\uDE33\uD83D\uDE1A\uD83D\uDE1D\uD83D\uDE34\uD83C\uDF1F\uD83D\uDE2C\uD83D\uDE43\uD83C\uDF40\uD83C\uDF37\uD83D\uDE3B\uD83D\uDE13\uD83E\uDD7A\uD83C\uDF08\uD83D\uDE08\uD83E\uDD18\uD83D\uDCA6\uD83D\uDE23\uD83C\uDFC3\uD83D\uDC90\uD83C\uDF8A\uD83D\uDC98\uD83D\uDE20\uD83D\uDE15\uD83C\uDF3A\uD83C\uDF82\uD83C\uDF3B\uD83D\uDE10\uD83D\uDD95\uD83D\uDC9D\uD83D\uDE4A\uD83D\uDE39\uD83D\uDDE3\uD83D\uDCAB\uD83D\uDC80\uD83D\uDC51\uD83C\uDFB5\uD83E\uDD1E\uD83D\uDE1B\uD83D\uDD34\uD83D\uDE24\uD83C\uDF3C\uD83D\uDE2B\uD83E\uDD19\uD83C\uDFC6\uD83E\uDD2B\uD83D\uDC48\uD83D\uDE2E\uD83D\uDE46\uD83C\uDF7B\uD83C\uDF43\uD83D\uDC36\uD83D\uDC81\uD83D\uDE32\uD83C\uDF3F\uD83E\uDDE1\uD83C\uDF81\uD83C\uDF1E\uD83C\uDF88\uD83D\uDC4B\uD83D\uDE30\uD83E\uDD28\uD83D\uDE36\uD83E\uDD1D\uD83D\uDEB6\uD83D\uDCB0\uD83C\uDF53\uD83D\uDCA2\uD83E\uDD1F\uD83D\uDE41\uD83D\uDEA8\uD83D\uDCA8\uD83E\uDD2C\uD83C\uDF80\uD83C\uDF7A\uD83E\uDD13\uD83D\uDE19\uD83D\uDC9F\uD83C\uDF31\uD83D\uDE16\uD83D\uDC76\uD83E\uDD74\uD83D\uDC8E\uD83D\uDCB8\uD83D\uDE28\uD83C\uDF1A\uD83E\uDD8B\uD83D\uDE37\uD83D\uDD7A\uD83D\uDE45\uD83D\uDE1F\uD83D\uDE35\uD83D\uDC4E\uD83E\uDD32\uD83E\uDD20\uD83E\uDD27\uD83D\uDCCC\uD83D\uDD35\uD83D\uDC85\uD83E\uDDD0\uD83D\uDC3E\uD83C\uDF52\uD83D\uDE17\uD83E\uDD11\uD83C\uDF0A\uD83E\uDD2F\uD83D\uDC37\uD83D\uDCA7\uD83D\uDE2F\uD83D\uDC86\uD83D\uDC46\uD83C\uDFA4\uD83D\uDE47\uD83C\uDF51\uD83C\uDF34\uD83D\uDCA3\uD83D\uDC38\uD83D\uDC8C\uD83D\uDCCD\uD83E\uDD40\uD83E\uDD22\uD83D\uDC45\uD83D\uDCA1\uD83D\uDCA9\uD83D\uDC50\uD83D\uDCF8\uD83D\uDC7B\uD83E\uDD10\uD83E\uDD2E\uD83C\uDFBC\uD83E\uDD75\uD83D\uDEA9\uD83C\uDF4E\uD83C\uDF4A\uD83D\uDC7C\uD83D\uDC8D\uD83D\uDCE3\uD83E\uDD42"),vA=vI.reduce((e,t,r)=>(e[r]=t,e),[]),vM=vI.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]);var vC=Object.freeze({__proto__:null,base256emoji:vs({prefix:"\uD83D\uDE80",name:"base256emoji",encode:function(e){return e.reduce((e,t)=>e+=vA[t],"")},decode:function(e){let t=[];for(let r of e){let e=vM[r.codePointAt(0)];if(void 0===e)throw Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}})});function vO(e,t,r){t=t||[],r=r||0;for(var i=r;e>=0x80000000;)t[r++]=255&e|128,e/=128;for(;-128&e;)t[r++]=255&e|128,e>>>=7;return t[r]=0|e,vO.bytes=r-i+1,t}const vP=(e,t,r=0)=>(vO(e,t,r),t),vR=e=>{var t;return(t=e)<128?1:t<16384?2:t<2097152?3:t<0x10000000?4:t<0x800000000?5:t<0x40000000000?6:t<0x2000000000000?7:t<0x100000000000000?8:t<0x8000000000000000?9:10},vT=(e,t)=>{let r=t.byteLength,i=vR(e),n=i+vR(r),s=new Uint8Array(n+r);return vP(e,s,0),vP(r,s,i),s.set(t,n),new vN(e,r,t,s)};class vN{constructor(e,t,r,i){this.code=e,this.size=t,this.digest=r,this.bytes=i}}const vB=({name:e,code:t,encode:r})=>new vL(e,t,r);class vL{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?vT(this.code,t):t.then(e=>vT(this.code,e))}throw Error("Unknown type, must be binary type")}}const vk=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t));var vU=Object.freeze({__proto__:null,sha256:vB({name:"sha2-256",code:18,encode:vk("SHA-256")}),sha512:vB({name:"sha2-512",code:19,encode:vk("SHA-512")})}),vz=Object.freeze({__proto__:null,identity:{code:0,name:"identity",encode:m7,digest:e=>vT(0,m7(e))}});new TextEncoder,new TextDecoder;const vj={...vh,...vu,...vf,...vc,...vl,...vw,...vD,...vx,...vS,...vC};function vq(e,t,r,i){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:i}}}({...vU,...vz});const vF=vq("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),vH=vq("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{let t=function(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),vK={utf8:vF,"utf-8":vF,hex:vj.base16,latin1:vH,ascii:vH,binary:vH,...vj};function v$(e){return function(e,t="utf8"){let r=vK[t];if(!r)throw Error(`Unsupported encoding "${t}"`);return("utf8"===t||"utf-8"===t)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):r.encoder.encode(e).substring(1)}((0,m$.hash)(function(e,t="utf8"){let r=vK[t];if(!r)throw Error(`Unsupported encoding "${t}"`);return("utf8"===t||"utf-8"===t)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?globalThis.Buffer.from(e,"utf8"):r.decoder.decode(`${r.prefix}${e}`)}(e,"utf8")),"base16")}var vV=Object.defineProperty,vW=Object.defineProperties,vG=Object.getOwnPropertyDescriptors,vY=Object.getOwnPropertySymbols,vZ=Object.prototype.hasOwnProperty,vJ=Object.prototype.propertyIsEnumerable,vX=(e,t,r)=>t in e?vV(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,vQ=(e,t)=>{for(var r in t||(t={}))vZ.call(t,r)&&vX(e,r,t[r]);if(vY)for(var r of vY(t))vJ.call(t,r)&&vX(e,r,t[r]);return e},v0=(e,t)=>vW(e,vG(t));class v1 extends mY{constructor(e){super(e),this.initialized=!1,this.name="authEngine",this.init=()=>{this.initialized||(this.registerRelayerEvents(),this.registerPairingEvents(),this.client.core.pairing.register({methods:Object.keys(mJ)}),this.initialized=!0)},this.request=async(e,t)=>{if(this.isInitialized(),!function(e){let t=dB(e.aud),r=RegExp(`${e.domain}`).test(e.aud),i=!!e.nonce,n=!e.type||"eip4361"===e.type,s=e.expiry;if(s&&("number"!=typeof s||isNaN(s)||!(s<=mX.max)||!(s>=mX.min))){let{message:e}=dP("MISSING_OR_INVALID",`request() expiry: ${s}. Expiry must be a number (in seconds) between ${mX.min} and ${mX.max}`);throw Error(e)}return!!(t&&r&&i&&n)}(e))throw Error("Invalid request");if(null!=t&&t.topic)return await this.requestOnKnownPairing(t.topic,e);let{chainId:r,statement:i,aud:n,domain:s,nonce:o,type:a,exp:h,nbf:u}=e,{topic:f,uri:c}=await this.client.core.pairing.create();this.client.logger.info({message:"Generated new pairing",pairing:{topic:f,uri:c}});let l=await this.client.core.crypto.generateKeyPair(),d=da(l);await this.client.authKeys.set(m1,{responseTopic:d,publicKey:l}),await this.client.pairingTopics.set(d,{topic:d,pairingTopic:f}),await this.client.core.relayer.subscribe(d),this.client.logger.info(`sending request to new pairing topic: ${f}`);let p=await this.sendRequest(f,"wc_authRequest",{payloadParams:{type:a??"eip4361",chainId:r,statement:i,aud:n,domain:s,version:"1",nonce:o,iat:new Date().toISOString(),exp:h,nbf:u},requester:{publicKey:l,metadata:this.client.metadata}},{},e.expiry);return this.client.logger.info(`sent request to new pairing topic: ${f}`),{uri:c,id:p}},this.respond=async(e,t)=>{if(this.isInitialized(),!m4(this.client.requests,e.id))throw Error("Invalid response");let r=m4(this.client.requests,e.id);if(!r)throw Error(`Could not find pending auth request with id ${e.id}`);let i=r.requester.publicKey,n=await this.client.core.crypto.generateKeyPair(),s=da(i),o={type:1,receiverPublicKey:i,senderPublicKey:n};if("error"in e)return void await this.sendError(r.id,s,e,o);let a={h:{t:"eip4361"},p:v0(vQ({},r.cacaoPayload),{iss:t}),s:e.signature};await this.sendResult(r.id,s,a,o),await this.client.core.pairing.activate({topic:r.pairingTopic}),await this.client.requests.update(r.id,vQ({},a))},this.getPendingRequests=()=>m5(this.client.requests),this.formatMessage=(e,t)=>{this.client.logger.debug(`formatMessage, cacao is: ${JSON.stringify(e)}`);let r=`${e.domain} wants you to sign in with your Ethereum account:`,i=m2(t),n=e.statement,s=`URI: ${e.aud}`,o=`Version: ${e.version}`,a=`Chain ID: ${function(e){let t=e&&m3(e);if(t)return t[3]}(t)}`,h=`Nonce: ${e.nonce}`,u=`Issued At: ${e.iat}`;return[r,i,"",n,"",s,o,a,h,u,e.exp?`Expiry: ${e.exp}`:void 0,e.resources&&e.resources.length>0?`Resources:
${e.resources.map(e=>`- ${e}`).join(`
`)}`:void 0].filter(e=>null!=e).join(`
`)},this.setExpiry=async(e,t)=>{this.client.core.pairing.pairings.keys.includes(e)&&await this.client.core.pairing.updateExpiry({topic:e,expiry:t}),this.client.core.expirer.set(e,t)},this.sendRequest=async(e,t,r,i,n)=>{let s=dZ(t,r),o=await this.client.core.crypto.encode(e,s,i),a=mJ[t].req;if(n&&(a.ttl=n),this.client.core.history.set(e,s),uj()){let e=v$(JSON.stringify(s));this.client.core.verify.register({attestationId:e})}return await this.client.core.relayer.publish(e,o,v0(vQ({},a),{internal:{throwOnFailedPublish:!0}})),s.id},this.sendResult=async(e,t,r,i)=>{let n=dJ(e,r),s=await this.client.core.crypto.encode(t,n,i),o=mJ[(await this.client.core.history.get(t,e)).request.method].res;return await this.client.core.relayer.publish(t,s,v0(vQ({},o),{internal:{throwOnFailedPublish:!0}})),await this.client.core.history.resolve(n),n.id},this.sendError=async(e,t,r,i)=>{let n=dX(e,r.error),s=await this.client.core.crypto.encode(t,n,i),o=mJ[(await this.client.core.history.get(t,e)).request.method].res;return await this.client.core.relayer.publish(t,s,o),await this.client.core.history.resolve(n),n.id},this.requestOnKnownPairing=async(e,t)=>{let r=this.client.core.pairing.pairings.getAll({active:!0}).find(t=>t.topic===e);if(!r)throw Error(`Could not find pairing for provided topic ${e}`);let{publicKey:i}=this.client.authKeys.get(m1),{chainId:n,statement:s,aud:o,domain:a,nonce:h,type:u}=t,f=await this.sendRequest(r.topic,"wc_authRequest",{payloadParams:{type:u??"eip4361",chainId:n,statement:s,aud:o,domain:a,version:"1",nonce:h,iat:new Date().toISOString()},requester:{publicKey:i,metadata:this.client.metadata}},{},t.expiry);return this.client.logger.info(`sent request to known pairing topic: ${r.topic}`),{id:f}},this.onPairingCreated=e=>{let t=this.getPendingRequests();if(t){let r=Object.values(t).find(t=>t.pairingTopic===e.topic);r&&this.handleAuthRequest(r)}},this.onRelayEventRequest=e=>{let{topic:t,payload:r}=e,i=r.method;return"wc_authRequest"===i?this.onAuthRequest(t,r):this.client.logger.info(`Unsupported request method ${i}`)},this.onRelayEventResponse=async e=>{let{topic:t,payload:r}=e,i=(await this.client.core.history.get(t,r.id)).request.method;return"wc_authRequest"===i?this.onAuthResponse(t,r):this.client.logger.info(`Unsupported response method ${i}`)},this.onAuthRequest=async(e,t)=>{let{requester:r,payloadParams:i}=t.params;this.client.logger.info({type:"onAuthRequest",topic:e,payload:t});let n=v$(JSON.stringify(t)),s=await this.getVerifyContext(n,this.client.metadata),o={requester:r,pairingTopic:e,id:t.id,cacaoPayload:i,verifyContext:s};await this.client.requests.set(t.id,o),this.handleAuthRequest(o)},this.handleAuthRequest=async e=>{let{id:t,pairingTopic:r,requester:i,cacaoPayload:n,verifyContext:s}=e;try{this.client.emit("auth_request",{id:t,topic:r,params:{requester:i,cacaoPayload:n},verifyContext:s})}catch(t){await this.sendError(e.id,e.pairingTopic,t),this.client.logger.error(t)}},this.onAuthResponse=async(e,t)=>{let{id:r}=t;if(this.client.logger.info({type:"onAuthResponse",topic:e,response:t}),d4(t)){let{pairingTopic:i}=this.client.pairingTopics.get(e);await this.client.core.pairing.activate({topic:i});let{s:n,p:s}=t.result;await this.client.requests.set(r,vQ({id:r,pairingTopic:i},t.result));let o=this.formatMessage(s,s.iss);this.client.logger.debug(`reconstructed message:
`,JSON.stringify(o)),this.client.logger.debug("payload.iss:",s.iss),this.client.logger.debug("signature:",n);let a=m2(s.iss),h=function(e){let t=e&&m3(e);if(t)return t[2]+":"+t[3]}(s.iss);if(!a)throw Error("Could not derive address from `payload.iss`");if(!h)throw Error("Could not derive chainId from `payload.iss`");this.client.logger.debug("walletAddress extracted from `payload.iss`:",a),await m8(a,o,n,h,this.client.projectId)?this.client.emit("auth_response",{id:r,topic:e,params:t}):this.client.emit("auth_response",{id:r,topic:e,params:{message:"Invalid signature",code:-1}})}else d9(t)&&this.client.emit("auth_response",{id:r,topic:e,params:t})},this.getVerifyContext=async(e,t)=>{let r={verified:{verifyUrl:t.verifyUrl||"",validation:"UNKNOWN",origin:t.url||""}};try{let i=await this.client.core.verify.resolve({attestationId:e,verifyUrl:t.verifyUrl});i&&(r.verified.origin=i.origin,r.verified.isScam=i.isScam,r.verified.validation=origin===new URL(t.url).origin?"VALID":"INVALID")}catch(e){this.client.logger.error(e)}return this.client.logger.info(`Verify context: ${JSON.stringify(r)}`),r}}isInitialized(){if(!this.initialized){let{message:e}=dP("NOT_INITIALIZED",this.name);throw Error(e)}}registerRelayerEvents(){this.client.core.relayer.on(pf,async e=>{let{topic:t,message:r}=e,{responseTopic:i,publicKey:n}=this.client.authKeys.keys.includes(m1)?this.client.authKeys.get(m1):{responseTopic:void 0,publicKey:void 0};if(i&&t!==i)return void this.client.logger.debug("[Auth] Ignoring message from unknown topic",t);let s=await this.client.core.crypto.decode(t,r,{receiverPublicKey:n});d6(s)?(this.client.core.history.set(t,s),this.onRelayEventRequest({topic:t,payload:s})):d5(s)&&(await this.client.core.history.resolve(s),this.onRelayEventResponse({topic:t,payload:s}))})}registerPairingEvents(){this.client.core.pairing.events.on(pI,e=>this.onPairingCreated(e))}}class v3 extends mZ{constructor(e){var t;super(e),this.protocol="wc",this.version=1,this.name=mQ,this.events=new(0,a.EventEmitter),this.emit=(e,t)=>this.events.emit(e,t),this.on=(e,t)=>this.events.on(e,t),this.once=(e,t)=>this.events.once(e,t),this.off=(e,t)=>this.events.off(e,t),this.removeListener=(e,t)=>this.events.removeListener(e,t),this.request=async(e,t)=>{try{return await this.engine.request(e,t)}catch(e){throw this.logger.error(e.message),e}},this.respond=async(e,t)=>{try{return await this.engine.respond(e,t)}catch(e){throw this.logger.error(e.message),e}},this.getPendingRequests=()=>{try{return this.engine.getPendingRequests()}catch(e){throw this.logger.error(e.message),e}},this.formatMessage=(e,t)=>{try{return this.engine.formatMessage(e,t)}catch(e){throw this.logger.error(e.message),e}};let r="u">typeof e.logger&&"string"!=typeof e.logger?e.logger:ya(ye(((e,t)=>{for(var r in t||(t={}))yi.call(t,r)&&ys(e,r,t[r]);if(yr)for(var r of yr(t))yn.call(t,r)&&ys(e,r,t[r]);return e})({},t={level:e.logger||"error"}),yt({level:t?.level||"info"})));this.name=e?.name||mQ,this.metadata=e.metadata,this.projectId=e.projectId,this.core=e.core||new bY(e),this.logger=function(e,t,r=b9){let i=function(e,t,r=b9){let i=yo(e,r);return i.trim()?`${i}/${t}`:t}(e,t,r);return function(e,t,r=b9){return e[r]=t,e}(e.child({context:i}),i,r)}(r,this.name),this.authKeys=new bm(this.core,this.logger,"authKeys",m0,()=>m1),this.pairingTopics=new bm(this.core,this.logger,"pairingTopics",m0),this.requests=new bm(this.core,this.logger,"requests",m0,e=>e.id),this.engine=new v1(this)}static async init(e){let t=new v3(e);return await t.initialize(),t}get context(){return yo(this.logger)}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.authKeys.init(),await this.requests.init(),await this.pairingTopics.init(),await this.engine.init(),this.logger.info("AuthClient Initialization Success"),this.logger.info({authClient:this})}catch(e){throw this.logger.info("AuthClient Initialization Failure"),this.logger.error(e.message),e}}}var v2={};v2=v6;const v8=function(){function e(e){return void 0!==e&&e}try{if("undefined"!=typeof globalThis)return globalThis;return Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch(t){return e(self)||e(window)||e(this)||{}}}().console||{};function v6(e){var t,r;(e=e||{}).browser=e.browser||{};let i=e.browser.transmit;if(i&&"function"!=typeof i.send)throw Error("pino: transmit option must have a send function");let n=e.browser.write||v8;e.browser.write&&(e.browser.asObject=!0);let s=e.serializers||{},o=(t=e.browser.serialize,Array.isArray(t)?t.filter(function(e){return"!stdSerializers.err"!==e}):!0===t&&Object.keys(s)),a=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(a=!1),"function"==typeof n&&(n.error=n.fatal=n.warn=n.info=n.debug=n.trace=n),!1===e.enabled&&(e.level="silent");let h=e.level||"info",u=Object.create(n);u.log||(u.log=wr),Object.defineProperty(u,"levelVal",{get:function(){return"silent"===this.level?1/0:this.levels.values[this.level]}}),Object.defineProperty(u,"level",{get:function(){return this._level},set:function(e){if("silent"!==e&&!this.levels.values[e])throw Error("unknown level "+e);this._level=e,v5(f,u,"error","log"),v5(f,u,"fatal","error"),v5(f,u,"warn","error"),v5(f,u,"info","log"),v5(f,u,"debug","log"),v5(f,u,"trace","log")}});let f={transmit:i,serialize:o,asObject:e.browser.asObject,levels:["error","fatal","warn","info","debug","trace"],timestamp:"function"==typeof(r=e).timestamp?r.timestamp:!1===r.timestamp?wi:wn};return u.levels=v6.levels,u.level=h,u.setMaxListeners=u.getMaxListeners=u.emit=u.addListener=u.on=u.prependListener=u.once=u.prependOnceListener=u.removeListener=u.removeAllListeners=u.listeners=u.listenerCount=u.eventNames=u.write=u.flush=wr,u.serializers=s,u._serialize=o,u._stdErrSerialize=a,u.child=function(t,r){if(!t)throw Error("missing bindings for child Pino");r=r||{},o&&t.serializers&&(r.serializers=t.serializers);let n=r.serializers;if(o&&n){var a=Object.assign({},s,n),h=!0===e.browser.serialize?Object.keys(a):o;delete t.serializers,v4([t],h,a,this._stdErrSerialize)}function u(e){this._childLevel=(0|e._childLevel)+1,this.error=v9(e,t,"error"),this.fatal=v9(e,t,"fatal"),this.warn=v9(e,t,"warn"),this.info=v9(e,t,"info"),this.debug=v9(e,t,"debug"),this.trace=v9(e,t,"trace"),a&&(this.serializers=a,this._serialize=h),i&&(this._logEvent=v7([].concat(e._logEvent.bindings,t)))}return u.prototype=this,new u(this)},i&&(u._logEvent=v7()),u}function v5(e,t,r,i){let n=Object.getPrototypeOf(t);t[r]=t.levelVal>t.levels.values[r]?wr:n[r]?n[r]:v8[r]||v8[i]||wr,function(e,t,r){if(e.transmit||t[r]!==wr){var i;t[r]=(i=t[r],function(){let n=e.timestamp(),s=Array(arguments.length),o=Object.getPrototypeOf&&Object.getPrototypeOf(this)===v8?v8:this;for(var a=0;a<s.length;a++)s[a]=arguments[a];if(e.serialize&&!e.asObject&&v4(s,this._serialize,this.serializers,this._stdErrSerialize),e.asObject?i.call(o,function(e,t,r,i){e._serialize&&v4(r,e._serialize,e.serializers,e._stdErrSerialize);let n=r.slice(),s=n[0],o={};i&&(o.time=i),o.level=v6.levels.values[t];let a=(0|e._childLevel)+1;if(a<1&&(a=1),null!==s&&"object"==typeof s){for(;a--&&"object"==typeof n[0];)Object.assign(o,n.shift());s=n.length?eB(n.shift(),n):void 0}else"string"==typeof s&&(s=eB(n.shift(),n));return void 0!==s&&(o.msg=s),o}(this,r,s,n)):i.apply(o,s),e.transmit){let i=e.transmit.level||t.level,o=v6.levels.values[i],a=v6.levels.values[r];if(a<o)return;!function(e,t,r){let i=t.send,n=t.ts,s=t.methodLevel,o=t.methodValue,a=t.val,h=e._logEvent.bindings;v4(r,e._serialize||Object.keys(e.serializers),e.serializers,void 0===e._stdErrSerialize||e._stdErrSerialize),e._logEvent.ts=n,e._logEvent.messages=r.filter(function(e){return -1===h.indexOf(e)}),e._logEvent.level.label=s,e._logEvent.level.value=o,i(s,e._logEvent,a),e._logEvent=v7(h)}(this,{ts:n,methodLevel:r,methodValue:a,transmitLevel:i,transmitValue:v6.levels.values[e.transmit.level||t.level],send:e.transmit.send,val:t.levelVal},s)}})}}(e,t,r)}function v4(e,t,r,i){for(let n in e)if(i&&e[n]instanceof Error)e[n]=v6.stdSerializers.err(e[n]);else if("object"==typeof e[n]&&!Array.isArray(e[n]))for(let i in e[n])t&&t.indexOf(i)>-1&&i in r&&(e[n][i]=r[i](e[n][i]))}function v9(e,t,r){return function(){let i=Array(1+arguments.length);i[0]=t;for(var n=1;n<i.length;n++)i[n]=arguments[n-1];return e[r].apply(this,i)}}function v7(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function we(){return{}}function wt(e){return e}function wr(){}function wi(){return!1}function wn(){return Date.now()}v6.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},v6.stdSerializers={mapHttpRequest:we,mapHttpResponse:we,wrapRequestSerializer:wt,wrapResponseSerializer:wt,wrapErrorSerializer:wt,req:we,res:we,err:function(e){let t={type:e.constructor.name,msg:e.message,stack:e.stack};for(let r in e)void 0===t[r]&&(t[r]=e[r]);return t}},v6.stdTimeFunctions=Object.assign({},{nullTime:wi,epochTime:wn,unixTime:function(){return Math.round(Date.now()/1e3)},isoTime:function(){return new Date(Date.now()).toISOString()}});const ws="custom_context";class wo{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}}class wa{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){let t=new wo(e);if(t.size>this.maxSizeInBytes)throw Error(`[LinkedList] Value too big to insert into list: ${e} with size ${t.size}`);for(;this.size+t.size>this.maxSizeInBytes;)this.shift();this.head?this.tail&&(this.tail.next=t):this.head=t,this.tail=t,this.lengthInNodes++,this.sizeInBytes+=t.size}shift(){if(!this.head)return;let e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){let e=[],t=this.head;for(;null!==t;)e.push(t.value),t=t.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};let t=e.value;return e=e.next,{done:!1,value:t}}}}}class wh{constructor(e,t=1024e3){this.level=e??"error",this.levelValue=v2.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=t,this.logs=new wa(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,t){t===v2.levels.values.error?console.error(e):t===v2.levels.values.warn?console.warn(e):t===v2.levels.values.debug?console.debug(e):t===v2.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(e_({timestamp:new Date().toISOString(),log:e}));let t="string"==typeof e?JSON.parse(e).level:e.level;t>=this.levelValue&&this.forwardToConsole(e,t)}getLogs(){return this.logs}clearLogs(){this.logs=new wa(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){let t=this.getLogArray();return t.push(e_({extraMetadata:e})),new Blob(t,{type:"application/json"})}}class wu{constructor(e,t=1024e3){this.baseChunkLogger=new wh(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){let t=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=t,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t)}}class wf{constructor(e,t=1024e3){this.baseChunkLogger=new wh(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}}var wc=Object.defineProperty,wl=Object.defineProperties,wd=Object.getOwnPropertyDescriptors,wp=Object.getOwnPropertySymbols,wg=Object.prototype.hasOwnProperty,wb=Object.prototype.propertyIsEnumerable,wy=(e,t,r)=>t in e?wc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,wm=(e,t)=>{for(var r in t||(t={}))wg.call(t,r)&&wy(e,r,t[r]);if(wp)for(var r of wp(t))wb.call(t,r)&&wy(e,r,t[r]);return e},wv=(e,t)=>wl(e,wd(t));function ww(e){return wv(wm({},e),{level:e?.level||"info"})}function wD(e,t=ws){return typeof e.bindings>"u"?function(e,t=ws){return e[t]||""}(e,t):e.bindings().context||""}function wx(e,t,r=ws){let i=function(e,t,r=ws){let i=wD(e,r);return i.trim()?`${i}/${t}`:t}(e,t,r);return function(e,t,r=ws){return e[r]=t,e}(e.child({context:i}),i,r)}class wE extends _{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}class w_ extends _{constructor(e,t){super(),this.core=e,this.logger=t,this.records=new Map}}class wS{constructor(e,t){this.logger=e,this.core=t}}class wI extends _{constructor(e,t){super(),this.relayer=e,this.logger=t}}class wA extends _{constructor(e){super()}}class wM{constructor(e,t,r,i){this.core=e,this.logger=t,this.name=r}}class wC extends _{constructor(e,t){super(),this.relayer=e,this.logger=t}}class wO extends _{constructor(e,t){super(),this.core=e,this.logger=t}}class wP{constructor(e,t,r){this.core=e,this.logger=t,this.store=r}}class wR{constructor(e,t){this.projectId=e,this.logger=t}}class wT{constructor(e,t,r){this.core=e,this.logger=t,this.telemetryEnabled=r}}class wN{constructor(e){this.opts=e,this.protocol="wc",this.version=2}}a.EventEmitter;class wB{constructor(e){this.client=e}}var wL={};e(wL,"generateKeyPair",()=>DE),e(wL,"signJWT",()=>D_),e(wL,"decodeJWT",()=>Dx),e(wL,"encodeIss",()=>DD);var wk={};Object.defineProperty(wk,"__esModule",{value:!0}),wk.convertSecretKeyToX25519=wk.convertPublicKeyToX25519=wk.verify=wk.sign=wk.extractPublicKeyFromSecretKey=wk.generateKeyPair=wk.generateKeyPairFromSeed=wk.SEED_LENGTH=wk.SECRET_KEY_LENGTH=wk.PUBLIC_KEY_LENGTH=wk.SIGNATURE_LENGTH=void 0;var wU={};Object.defineProperty(wU,"__esModule",{value:!0}),wU.DIGEST_LENGTH=64,wU.BLOCK_SIZE=128;var wz=function(){function e(){this.digestLength=wU.DIGEST_LENGTH,this.blockSize=wU.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return e.prototype._initState=function(){this._stateHi[0]=0x6a09e667,this._stateHi[1]=0xbb67ae85,this._stateHi[2]=0x3c6ef372,this._stateHi[3]=0xa54ff53a,this._stateHi[4]=0x510e527f,this._stateHi[5]=0x9b05688c,this._stateHi[6]=0x1f83d9ab,this._stateHi[7]=0x5be0cd19,this._stateLo[0]=0xf3bcc908,this._stateLo[1]=0x84caa73b,this._stateLo[2]=0xfe94f82b,this._stateLo[3]=0x5f1d36f1,this._stateLo[4]=0xade682d1,this._stateLo[5]=0x2b3e6c1f,this._stateLo[6]=0xfb41bd6b,this._stateLo[7]=0x137e2179},e.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},e.prototype.clean=function(){mC.wipe(this._buffer),mC.wipe(this._tempHi),mC.wipe(this._tempLo),this.reset()},e.prototype.update=function(e,t){if(void 0===t&&(t=e.length),this._finished)throw Error("SHA512: can't update because hash was finished.");var r=0;if(this._bytesHashed+=t,this._bufferLength>0){for(;this._bufferLength<wU.BLOCK_SIZE&&t>0;)this._buffer[this._bufferLength++]=e[r++],t--;this._bufferLength===this.blockSize&&(wq(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(t>=this.blockSize&&(r=wq(this._tempHi,this._tempLo,this._stateHi,this._stateLo,e,r,t),t%=this.blockSize);t>0;)this._buffer[this._bufferLength++]=e[r++],t--;return this},e.prototype.finish=function(e){if(!this._finished){var t=this._bytesHashed,r=this._bufferLength,i=t%128<112?128:256;this._buffer[r]=128;for(var n=r+1;n<i-8;n++)this._buffer[n]=0;mO.writeUint32BE(t/0x20000000|0,this._buffer,i-8),mO.writeUint32BE(t<<3,this._buffer,i-4),wq(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,i),this._finished=!0}for(var n=0;n<this.digestLength/8;n++)mO.writeUint32BE(this._stateHi[n],e,8*n),mO.writeUint32BE(this._stateLo[n],e,8*n+4);return this},e.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},e.prototype.saveState=function(){if(this._finished)throw Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},e.prototype.restoreState=function(e){return this._stateHi.set(e.stateHi),this._stateLo.set(e.stateLo),this._bufferLength=e.bufferLength,e.buffer&&this._buffer.set(e.buffer),this._bytesHashed=e.bytesHashed,this._finished=!1,this},e.prototype.cleanSavedState=function(e){mC.wipe(e.stateHi),mC.wipe(e.stateLo),e.buffer&&mC.wipe(e.buffer),e.bufferLength=0,e.bytesHashed=0},e}();wU.SHA512=wz;var wj=new Int32Array([0x428a2f98,0xd728ae22,0x71374491,0x23ef65cd,0xb5c0fbcf,0xec4d3b2f,0xe9b5dba5,0x8189dbbc,0x3956c25b,0xf348b538,0x59f111f1,0xb605d019,0x923f82a4,0xaf194f9b,0xab1c5ed5,0xda6d8118,0xd807aa98,0xa3030242,0x12835b01,0x45706fbe,0x243185be,0x4ee4b28c,0x550c7dc3,0xd5ffb4e2,0x72be5d74,0xf27b896f,0x80deb1fe,0x3b1696b1,0x9bdc06a7,0x25c71235,0xc19bf174,0xcf692694,0xe49b69c1,0x9ef14ad2,0xefbe4786,0x384f25e3,0xfc19dc6,0x8b8cd5b5,0x240ca1cc,0x77ac9c65,0x2de92c6f,0x592b0275,0x4a7484aa,0x6ea6e483,0x5cb0a9dc,0xbd41fbd4,0x76f988da,0x831153b5,0x983e5152,0xee66dfab,0xa831c66d,0x2db43210,0xb00327c8,0x98fb213f,0xbf597fc7,0xbeef0ee4,0xc6e00bf3,0x3da88fc2,0xd5a79147,0x930aa725,0x6ca6351,0xe003826f,0x14292967,0xa0e6e70,0x27b70a85,0x46d22ffc,0x2e1b2138,0x5c26c926,0x4d2c6dfc,0x5ac42aed,0x53380d13,0x9d95b3df,0x650a7354,0x8baf63de,0x766a0abb,0x3c77b2a8,0x81c2c92e,0x47edaee6,0x92722c85,0x1482353b,0xa2bfe8a1,0x4cf10364,0xa81a664b,0xbc423001,0xc24b8b70,0xd0f89791,0xc76c51a3,0x654be30,0xd192e819,0xd6ef5218,0xd6990624,0x5565a910,0xf40e3585,0x5771202a,0x106aa070,0x32bbd1b8,0x19a4c116,0xb8d2d0c8,0x1e376c08,0x5141ab53,0x2748774c,0xdf8eeb99,0x34b0bcb5,0xe19b48a8,0x391c0cb3,0xc5c95a63,0x4ed8aa4a,0xe3418acb,0x5b9cca4f,0x7763e373,0x682e6ff3,0xd6b2b8a3,0x748f82ee,0x5defb2fc,0x78a5636f,0x43172f60,0x84c87814,0xa1f0ab72,0x8cc70208,0x1a6439ec,0x90befffa,0x23631e28,0xa4506ceb,0xde82bde9,0xbef9a3f7,0xb2c67915,0xc67178f2,0xe372532b,0xca273ece,0xea26619c,0xd186b8c7,0x21c0c207,0xeada7dd6,0xcde0eb1e,0xf57d4f7f,0xee6ed178,0x6f067aa,0x72176fba,0xa637dc5,0xa2c898a6,0x113f9804,0xbef90dae,0x1b710b35,0x131c471b,0x28db77f5,0x23047d84,0x32caab7b,0x40c72493,0x3c9ebe0a,0x15c9bebc,0x431d67c4,0x9c100d4c,0x4cc5d4be,0xcb3e42b6,0x597f299c,0xfc657e2a,0x5fcb6fab,0x3ad6faec,0x6c44198c,0x4a475817]);function wq(e,t,r,i,n,s,o){for(var a,h,u,f,c,l,d,p,g=r[0],b=r[1],y=r[2],m=r[3],v=r[4],w=r[5],D=r[6],x=r[7],E=i[0],_=i[1],S=i[2],I=i[3],A=i[4],M=i[5],C=i[6],O=i[7];o>=128;){for(var P=0;P<16;P++){var R=8*P+s;e[P]=mO.readUint32BE(n,R),t[P]=mO.readUint32BE(n,R+4)}for(var P=0;P<80;P++){var T=g,N=b,B=y,L=m,k=v,U=w,z=D,j=x,q=E,F=_,H=S,K=I,$=A,V=M,W=C,G=O;if(a=x,c=65535&(h=O),l=h>>>16,d=65535&a,p=a>>>16,a=(v>>>14|A<<18)^(v>>>18|A<<14)^(A>>>9|v<<23),c+=65535&(h=(A>>>14|v<<18)^(A>>>18|v<<14)^(v>>>9|A<<23)),l+=h>>>16,d+=65535&a,p+=a>>>16,a=v&w^~v&D,c+=65535&(h=A&M^~A&C),l+=h>>>16,d+=65535&a,p+=a>>>16,a=wj[2*P],c+=65535&(h=wj[2*P+1]),l+=h>>>16,d+=65535&a,p+=a>>>16,a=e[P%16],c+=65535&(h=t[P%16]),l+=h>>>16,d+=65535&a,p+=a>>>16,l+=c>>>16,d+=l>>>16,p+=d>>>16,u=65535&d|p<<16,f=65535&c|l<<16,a=u,c=65535&(h=f),l=h>>>16,d=65535&a,p=a>>>16,a=(g>>>28|E<<4)^(E>>>2|g<<30)^(E>>>7|g<<25),c+=65535&(h=(E>>>28|g<<4)^(g>>>2|E<<30)^(g>>>7|E<<25)),l+=h>>>16,d+=65535&a,p+=a>>>16,a=g&b^g&y^b&y,c+=65535&(h=E&_^E&S^_&S),l+=h>>>16,d+=65535&a,p+=a>>>16,l+=c>>>16,d+=l>>>16,p+=d>>>16,j=65535&d|p<<16,G=65535&c|l<<16,a=L,c=65535&(h=K),l=h>>>16,d=65535&a,p=a>>>16,a=u,c+=65535&(h=f),l+=h>>>16,d+=65535&a,p+=a>>>16,l+=c>>>16,d+=l>>>16,p+=d>>>16,L=65535&d|p<<16,K=65535&c|l<<16,b=T,y=N,m=B,v=L,w=k,D=U,x=z,g=j,_=q,S=F,I=H,A=K,M=$,C=V,O=W,E=G,P%16==15)for(var R=0;R<16;R++)a=e[R],c=65535&(h=t[R]),l=h>>>16,d=65535&a,p=a>>>16,a=e[(R+9)%16],c+=65535&(h=t[(R+9)%16]),l+=h>>>16,d+=65535&a,p+=a>>>16,a=((u=e[(R+1)%16])>>>1|(f=t[(R+1)%16])<<31)^(u>>>8|f<<24)^u>>>7,c+=65535&(h=(f>>>1|u<<31)^(f>>>8|u<<24)^(f>>>7|u<<25)),l+=h>>>16,d+=65535&a,p+=a>>>16,a=((u=e[(R+14)%16])>>>19|(f=t[(R+14)%16])<<13)^(f>>>29|u<<3)^u>>>6,c+=65535&(h=(f>>>19|u<<13)^(u>>>29|f<<3)^(f>>>6|u<<26)),l+=h>>>16,d+=65535&a,p+=a>>>16,l+=c>>>16,d+=l>>>16,p+=d>>>16,e[R]=65535&d|p<<16,t[R]=65535&c|l<<16}a=g,c=65535&(h=E),l=h>>>16,d=65535&a,p=a>>>16,a=r[0],c+=65535&(h=i[0]),l+=h>>>16,d+=65535&a,p+=a>>>16,l+=c>>>16,d+=l>>>16,p+=d>>>16,r[0]=g=65535&d|p<<16,i[0]=E=65535&c|l<<16,a=b,c=65535&(h=_),l=h>>>16,d=65535&a,p=a>>>16,a=r[1],c+=65535&(h=i[1]),l+=h>>>16,d+=65535&a,p+=a>>>16,l+=c>>>16,d+=l>>>16,p+=d>>>16,r[1]=b=65535&d|p<<16,i[1]=_=65535&c|l<<16,a=y,c=65535&(h=S),l=h>>>16,d=65535&a,p=a>>>16,a=r[2],c+=65535&(h=i[2]),l+=h>>>16,d+=65535&a,p+=a>>>16,l+=c>>>16,d+=l>>>16,p+=d>>>16,r[2]=y=65535&d|p<<16,i[2]=S=65535&c|l<<16,a=m,c=65535&(h=I),l=h>>>16,d=65535&a,p=a>>>16,a=r[3],c+=65535&(h=i[3]),l+=h>>>16,d+=65535&a,p+=a>>>16,l+=c>>>16,d+=l>>>16,p+=d>>>16,r[3]=m=65535&d|p<<16,i[3]=I=65535&c|l<<16,a=v,c=65535&(h=A),l=h>>>16,d=65535&a,p=a>>>16,a=r[4],c+=65535&(h=i[4]),l+=h>>>16,d+=65535&a,p+=a>>>16,l+=c>>>16,d+=l>>>16,p+=d>>>16,r[4]=v=65535&d|p<<16,i[4]=A=65535&c|l<<16,a=w,c=65535&(h=M),l=h>>>16,d=65535&a,p=a>>>16,a=r[5],c+=65535&(h=i[5]),l+=h>>>16,d+=65535&a,p+=a>>>16,l+=c>>>16,d+=l>>>16,p+=d>>>16,r[5]=w=65535&d|p<<16,i[5]=M=65535&c|l<<16,a=D,c=65535&(h=C),l=h>>>16,d=65535&a,p=a>>>16,a=r[6],c+=65535&(h=i[6]),l+=h>>>16,d+=65535&a,p+=a>>>16,l+=c>>>16,d+=l>>>16,p+=d>>>16,r[6]=D=65535&d|p<<16,i[6]=C=65535&c|l<<16,a=x,c=65535&(h=O),l=h>>>16,d=65535&a,p=a>>>16,a=r[7],c+=65535&(h=i[7]),l+=h>>>16,d+=65535&a,p+=a>>>16,l+=c>>>16,d+=l>>>16,p+=d>>>16,r[7]=x=65535&d|p<<16,i[7]=O=65535&c|l<<16,s+=128,o-=128}return s}function wF(e){let t=new Float64Array(16);if(e)for(let r=0;r<e.length;r++)t[r]=e[r];return t}wU.hash=function(e){var t=new wz;t.update(e);var r=t.digest();return t.clean(),r},wk.SIGNATURE_LENGTH=64,wk.PUBLIC_KEY_LENGTH=32,wk.SECRET_KEY_LENGTH=64,wk.SEED_LENGTH=32,new Uint8Array(32)[0]=9;const wH=wF(),wK=wF([1]),w$=wF([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),wV=wF([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),wW=wF([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),wG=wF([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),wY=wF([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function wZ(e,t){for(let r=0;r<16;r++)e[r]=0|t[r]}function wJ(e){let t=1;for(let r=0;r<16;r++){let i=e[r]+t+65535;t=Math.floor(i/65536),e[r]=i-65536*t}e[0]+=t-1+37*(t-1)}function wX(e,t,r){let i=~(r-1);for(let r=0;r<16;r++){let n=i&(e[r]^t[r]);e[r]^=n,t[r]^=n}}function wQ(e,t){let r=wF(),i=wF();for(let e=0;e<16;e++)i[e]=t[e];wJ(i),wJ(i),wJ(i);for(let e=0;e<2;e++){r[0]=i[0]-65517;for(let e=1;e<15;e++)r[e]=i[e]-65535-(r[e-1]>>16&1),r[e-1]&=65535;r[15]=i[15]-32767-(r[14]>>16&1);let e=r[15]>>16&1;r[14]&=65535,wX(i,r,1-e)}for(let t=0;t<16;t++)e[2*t]=255&i[t],e[2*t+1]=i[t]>>8}function w0(e,t){let r=0;for(let i=0;i<32;i++)r|=e[i]^t[i];return(1&r-1>>>8)-1}function w1(e,t){let r=new Uint8Array(32),i=new Uint8Array(32);return wQ(r,e),wQ(i,t),w0(r,i)}function w3(e){let t=new Uint8Array(32);return wQ(t,e),1&t[0]}function w2(e,t,r){for(let i=0;i<16;i++)e[i]=t[i]+r[i]}function w8(e,t,r){for(let i=0;i<16;i++)e[i]=t[i]-r[i]}function w6(e,t,r){let i,n,s=0,o=0,a=0,h=0,u=0,f=0,c=0,l=0,d=0,p=0,g=0,b=0,y=0,m=0,v=0,w=0,D=0,x=0,E=0,_=0,S=0,I=0,A=0,M=0,C=0,O=0,P=0,R=0,T=0,N=0,B=0,L=r[0],k=r[1],U=r[2],z=r[3],j=r[4],q=r[5],F=r[6],H=r[7],K=r[8],$=r[9],V=r[10],W=r[11],G=r[12],Y=r[13],Z=r[14],J=r[15];s+=(i=t[0])*L,o+=i*k,a+=i*U,h+=i*z,u+=i*j,f+=i*q,c+=i*F,l+=i*H,d+=i*K,p+=i*$,g+=i*V,b+=i*W,y+=i*G,m+=i*Y,v+=i*Z,w+=i*J,o+=(i=t[1])*L,a+=i*k,h+=i*U,u+=i*z,f+=i*j,c+=i*q,l+=i*F,d+=i*H,p+=i*K,g+=i*$,b+=i*V,y+=i*W,m+=i*G,v+=i*Y,w+=i*Z,D+=i*J,a+=(i=t[2])*L,h+=i*k,u+=i*U,f+=i*z,c+=i*j,l+=i*q,d+=i*F,p+=i*H,g+=i*K,b+=i*$,y+=i*V,m+=i*W,v+=i*G,w+=i*Y,D+=i*Z,x+=i*J,h+=(i=t[3])*L,u+=i*k,f+=i*U,c+=i*z,l+=i*j,d+=i*q,p+=i*F,g+=i*H,b+=i*K,y+=i*$,m+=i*V,v+=i*W,w+=i*G,D+=i*Y,x+=i*Z,E+=i*J,u+=(i=t[4])*L,f+=i*k,c+=i*U,l+=i*z,d+=i*j,p+=i*q,g+=i*F,b+=i*H,y+=i*K,m+=i*$,v+=i*V,w+=i*W,D+=i*G,x+=i*Y,E+=i*Z,_+=i*J,f+=(i=t[5])*L,c+=i*k,l+=i*U,d+=i*z,p+=i*j,g+=i*q,b+=i*F,y+=i*H,m+=i*K,v+=i*$,w+=i*V,D+=i*W,x+=i*G,E+=i*Y,_+=i*Z,S+=i*J,c+=(i=t[6])*L,l+=i*k,d+=i*U,p+=i*z,g+=i*j,b+=i*q,y+=i*F,m+=i*H,v+=i*K,w+=i*$,D+=i*V,x+=i*W,E+=i*G,_+=i*Y,S+=i*Z,I+=i*J,l+=(i=t[7])*L,d+=i*k,p+=i*U,g+=i*z,b+=i*j,y+=i*q,m+=i*F,v+=i*H,w+=i*K,D+=i*$,x+=i*V,E+=i*W,_+=i*G,S+=i*Y,I+=i*Z,A+=i*J,d+=(i=t[8])*L,p+=i*k,g+=i*U,b+=i*z,y+=i*j,m+=i*q,v+=i*F,w+=i*H,D+=i*K,x+=i*$,E+=i*V,_+=i*W,S+=i*G,I+=i*Y,A+=i*Z,M+=i*J,p+=(i=t[9])*L,g+=i*k,b+=i*U,y+=i*z,m+=i*j,v+=i*q,w+=i*F,D+=i*H,x+=i*K,E+=i*$,_+=i*V,S+=i*W,I+=i*G,A+=i*Y,M+=i*Z,C+=i*J,g+=(i=t[10])*L,b+=i*k,y+=i*U,m+=i*z,v+=i*j,w+=i*q,D+=i*F,x+=i*H,E+=i*K,_+=i*$,S+=i*V,I+=i*W,A+=i*G,M+=i*Y,C+=i*Z,O+=i*J,b+=(i=t[11])*L,y+=i*k,m+=i*U,v+=i*z,w+=i*j,D+=i*q,x+=i*F,E+=i*H,_+=i*K,S+=i*$,I+=i*V,A+=i*W,M+=i*G,C+=i*Y,O+=i*Z,P+=i*J,y+=(i=t[12])*L,m+=i*k,v+=i*U,w+=i*z,D+=i*j,x+=i*q,E+=i*F,_+=i*H,S+=i*K,I+=i*$,A+=i*V,M+=i*W,C+=i*G,O+=i*Y,P+=i*Z,R+=i*J,m+=(i=t[13])*L,v+=i*k,w+=i*U,D+=i*z,x+=i*j,E+=i*q,_+=i*F,S+=i*H,I+=i*K,A+=i*$,M+=i*V,C+=i*W,O+=i*G,P+=i*Y,R+=i*Z,T+=i*J,v+=(i=t[14])*L,w+=i*k,D+=i*U,x+=i*z,E+=i*j,_+=i*q,S+=i*F,I+=i*H,A+=i*K,M+=i*$,C+=i*V,O+=i*W,P+=i*G,R+=i*Y,T+=i*Z,N+=i*J,w+=(i=t[15])*L,D+=i*k,x+=i*U,E+=i*z,_+=i*j,S+=i*q,I+=i*F,A+=i*H,M+=i*K,C+=i*$,O+=i*V,P+=i*W,R+=i*G,T+=i*Y,N+=i*Z,B+=i*J,s+=38*D,o+=38*x,a+=38*E,h+=38*_,u+=38*S,f+=38*I,c+=38*A,l+=38*M,d+=38*C,p+=38*O,g+=38*P,b+=38*R,y+=38*T,m+=38*N,v+=38*B,n=Math.floor((i=s+(n=1)+65535)/65536),s=i-65536*n,n=Math.floor((i=o+n+65535)/65536),o=i-65536*n,n=Math.floor((i=a+n+65535)/65536),a=i-65536*n,n=Math.floor((i=h+n+65535)/65536),h=i-65536*n,n=Math.floor((i=u+n+65535)/65536),u=i-65536*n,n=Math.floor((i=f+n+65535)/65536),f=i-65536*n,n=Math.floor((i=c+n+65535)/65536),c=i-65536*n,n=Math.floor((i=l+n+65535)/65536),l=i-65536*n,n=Math.floor((i=d+n+65535)/65536),d=i-65536*n,n=Math.floor((i=p+n+65535)/65536),p=i-65536*n,n=Math.floor((i=g+n+65535)/65536),g=i-65536*n,n=Math.floor((i=b+n+65535)/65536),b=i-65536*n,n=Math.floor((i=y+n+65535)/65536),y=i-65536*n,n=Math.floor((i=m+n+65535)/65536),m=i-65536*n,n=Math.floor((i=v+n+65535)/65536),v=i-65536*n,n=Math.floor((i=w+n+65535)/65536),w=i-65536*n,s+=n-1+37*(n-1),n=Math.floor((i=s+(n=1)+65535)/65536),s=i-65536*n,n=Math.floor((i=o+n+65535)/65536),o=i-65536*n,n=Math.floor((i=a+n+65535)/65536),a=i-65536*n,n=Math.floor((i=h+n+65535)/65536),h=i-65536*n,n=Math.floor((i=u+n+65535)/65536),u=i-65536*n,n=Math.floor((i=f+n+65535)/65536),f=i-65536*n,n=Math.floor((i=c+n+65535)/65536),c=i-65536*n,n=Math.floor((i=l+n+65535)/65536),l=i-65536*n,n=Math.floor((i=d+n+65535)/65536),d=i-65536*n,n=Math.floor((i=p+n+65535)/65536),p=i-65536*n,n=Math.floor((i=g+n+65535)/65536),g=i-65536*n,n=Math.floor((i=b+n+65535)/65536),b=i-65536*n,n=Math.floor((i=y+n+65535)/65536),y=i-65536*n,n=Math.floor((i=m+n+65535)/65536),m=i-65536*n,n=Math.floor((i=v+n+65535)/65536),v=i-65536*n,n=Math.floor((i=w+n+65535)/65536),w=i-65536*n,s+=n-1+37*(n-1),e[0]=s,e[1]=o,e[2]=a,e[3]=h,e[4]=u,e[5]=f,e[6]=c,e[7]=l,e[8]=d,e[9]=p,e[10]=g,e[11]=b,e[12]=y,e[13]=m,e[14]=v,e[15]=w}function w5(e,t){let r,i=wF();for(r=0;r<16;r++)i[r]=t[r];for(r=253;r>=0;r--)w6(i,i,i),2!==r&&4!==r&&w6(i,i,t);for(r=0;r<16;r++)e[r]=i[r]}function w4(e,t){let r=wF(),i=wF(),n=wF(),s=wF(),o=wF(),a=wF(),h=wF(),u=wF(),f=wF();w8(r,e[1],e[0]),w8(f,t[1],t[0]),w6(r,r,f),w2(i,e[0],e[1]),w2(f,t[0],t[1]),w6(i,i,f),w6(n,e[3],t[3]),w6(n,n,wV),w6(s,e[2],t[2]),w2(s,s,s),w8(o,i,r),w8(a,s,n),w2(h,s,n),w2(u,i,r),w6(e[0],o,a),w6(e[1],u,h),w6(e[2],h,a),w6(e[3],o,u)}function w9(e,t,r){for(let i=0;i<4;i++)wX(e[i],t[i],r)}function w7(e,t){let r=wF(),i=wF(),n=wF();w5(n,t[2]),w6(r,t[0],n),w6(i,t[1],n),wQ(e,i),e[31]^=w3(r)<<7}function De(e,t,r){wZ(e[0],wH),wZ(e[1],wK),wZ(e[2],wK),wZ(e[3],wH);for(let i=255;i>=0;--i){let n=r[i/8|0]>>(7&i)&1;w9(e,t,n),w4(t,e),w4(e,e),w9(e,t,n)}}function Dt(e,t){let r=[wF(),wF(),wF(),wF()];wZ(r[0],wW),wZ(r[1],wG),wZ(r[2],wK),w6(r[3],wW,wG),De(e,r,t)}function Dr(e){if(e.length!==wk.SEED_LENGTH)throw Error(`ed25519: seed must be ${wk.SEED_LENGTH} bytes`);let t=(0,wU.hash)(e);t[0]&=248,t[31]&=127,t[31]|=64;let r=new Uint8Array(32),i=[wF(),wF(),wF(),wF()];Dt(i,t),w7(r,i);let n=new Uint8Array(64);return n.set(e),n.set(r,32),{publicKey:r,secretKey:n}}wk.generateKeyPairFromSeed=Dr,wk.generateKeyPair=function(e){let t=(0,mS.randomBytes)(32,e),r=Dr(t);return(0,mC.wipe)(t),r},wk.extractPublicKeyFromSecretKey=function(e){if(e.length!==wk.SECRET_KEY_LENGTH)throw Error(`ed25519: secret key must be ${wk.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(e.subarray(32))};const Di=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function Dn(e,t){let r,i,n,s;for(i=63;i>=32;--i){for(r=0,n=i-32,s=i-12;n<s;++n)t[n]+=r-16*t[i]*Di[n-(i-32)],r=Math.floor((t[n]+128)/256),t[n]-=256*r;t[n]+=r,t[i]=0}for(n=0,r=0;n<32;n++)t[n]+=r-(t[31]>>4)*Di[n],r=t[n]>>8,t[n]&=255;for(n=0;n<32;n++)t[n]-=r*Di[n];for(i=0;i<32;i++)t[i+1]+=t[i]>>8,e[i]=255&t[i]}function Ds(e){let t=new Float64Array(64);for(let r=0;r<64;r++)t[r]=e[r];for(let t=0;t<64;t++)e[t]=0;Dn(e,t)}function Do(e,t){let r,i=wF(),n=wF(),s=wF(),o=wF(),a=wF(),h=wF(),u=wF();wZ(e[2],wK);var f,c,l,d=e[1];for(let e=0;e<16;e++)d[e]=t[2*e]+(t[2*e+1]<<8);d[15]&=32767,w6(s,f=e[1],f),w6(o,s,w$),w8(s,s,e[2]),w2(o,e[2],o),w6(a,o,o),w6(h,a,a),w6(u,h,a),w6(i,u,s),w6(i,i,o);let p=wF();for(r=0;r<16;r++)p[r]=i[r];for(r=250;r>=0;r--)w6(p,p,p),1!==r&&w6(p,p,i);for(r=0;r<16;r++)i[r]=p[r];return(w6(i,i,s),w6(i,i,o),w6(i,i,o),w6(e[0],i,o),w6(n,c=e[0],c),w6(n,n,o),w1(n,s)&&w6(e[0],e[0],wY),w6(n,l=e[0],l),w6(n,n,o),w1(n,s))?-1:(w3(e[0])===t[31]>>7&&w8(e[0],wH,e[0]),w6(e[3],e[0],e[1]),0)}wk.sign=function(e,t){let r=new Float64Array(64),i=[wF(),wF(),wF(),wF()],n=(0,wU.hash)(e.subarray(0,32));n[0]&=248,n[31]&=127,n[31]|=64;let s=new Uint8Array(64);s.set(n.subarray(32),32);let o=new wU.SHA512;o.update(s.subarray(32)),o.update(t);let a=o.digest();o.clean(),Ds(a),Dt(i,a),w7(s,i),o.reset(),o.update(s.subarray(0,32)),o.update(e.subarray(32)),o.update(t);let h=o.digest();Ds(h);for(let e=0;e<32;e++)r[e]=a[e];for(let e=0;e<32;e++)for(let t=0;t<32;t++)r[e+t]+=h[e]*n[t];return Dn(s.subarray(32),r),s},wk.verify=function(e,t,r){let i=new Uint8Array(32),n=[wF(),wF(),wF(),wF()],s=[wF(),wF(),wF(),wF()];if(r.length!==wk.SIGNATURE_LENGTH)throw Error(`ed25519: signature must be ${wk.SIGNATURE_LENGTH} bytes`);if(Do(s,e))return!1;let o=new wU.SHA512;o.update(r.subarray(0,32)),o.update(e),o.update(t);let a=o.digest();return Ds(a),De(n,s,a),Dt(s,r.subarray(32)),w4(n,s),w7(i,n),!w0(r,i)},wk.convertPublicKeyToX25519=function(e){let t=[wF(),wF(),wF(),wF()];if(Do(t,e))throw Error("Ed25519: invalid public key");let r=wF(),i=wF(),n=t[1];w2(r,wK,n),w8(i,wK,n),w5(i,i),w6(r,r,i);let s=new Uint8Array(32);return wQ(s,r),s},wk.convertSecretKeyToX25519=function(e){let t=(0,wU.hash)(e.subarray(0,32));t[0]&=248,t[31]&=127,t[31]|=64;let r=new Uint8Array(t.subarray(0,32));return(0,mC.wipe)(t),r};const Da="base64url",Dh="utf8",Du="utf8",Df="base58btc";var Dc={};Object.defineProperty(Dc,"__esModule",{value:!0});var Dl={};Object.defineProperty(Dl,"__esModule",{value:!0}),Dl.alloc=function(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.alloc?globalThis.Buffer.alloc(e):new Uint8Array(e)},Dl.allocUnsafe=function(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)},Dc.concat=function(e,t){t||(t=e.reduce((e,t)=>e+t.length,0));let r=Dl.allocUnsafe(t),i=0;for(let t of e)r.set(t,i),i+=t.length;return r};var Dd={};Object.defineProperty(Dd,"__esModule",{value:!0});var Dp={};function Dg(e,t,r,i){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:i}}}const Db=Dg("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),Dy=Dg("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);let t=Dl.allocUnsafe(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t});Dp={utf8:Db,"utf-8":Db,hex:aQ.bases.base16,latin1:Dy,ascii:Dy,binary:Dy,...aQ.bases},Dd.toString=function(e,t="utf8"){let r=Dp[t];if(!r)throw Error(`Unsupported encoding "${t}"`);return("utf8"===t||"utf-8"===t)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):r.encoder.encode(e).substring(1)};var Dm={};function Dv(e){return eE((0,Dd.toString)((0,Dm.fromString)(e,Da),Dh))}function Dw(e){return(0,Dd.toString)((0,Dm.fromString)(e_(e),Dh),Da)}function DD(e){let t=(0,Dm.fromString)("K36",Df);return["did:key","z"+(0,Dd.toString)((0,Dc.concat)([t,e]),Df)].join(":")}function Dx(e){var t;let r=e.split("."),i=Dv(r[0]),n=Dv(r[1]);return{header:i,payload:n,signature:(t=r[2],(0,Dm.fromString)(t,Da)),data:(0,Dm.fromString)(r.slice(0,2).join("."),Du)}}function DE(e=(0,mS.randomBytes)(32)){return wk.generateKeyPairFromSeed(e)}async function D_(e,t,r,i,n=(0,x.fromMiliseconds)(Date.now())){var s,o,a;let h={alg:"EdDSA",typ:"JWT"},u={iss:DD(i.publicKey),sub:e,aud:t,iat:n,exp:n+r},f=(s={header:h,payload:u},(0,Dm.fromString)([Dw(s.header),Dw(s.payload)].join("."),Du));return[Dw((o={header:h,payload:u,signature:wk.sign(i.secretKey,f)}).header),Dw(o.payload),(a=o.signature,(0,Dd.toString)(a,Da))].join(".")}Object.defineProperty(Dm,"__esModule",{value:!0}),Dm.fromString=function(e,t="utf8"){let r=Dp[t];if(!r)throw Error(`Unsupported encoding "${t}"`);return("utf8"===t||"utf-8"===t)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?globalThis.Buffer.from(e,"utf8"):r.decoder.decode(`${r.prefix}${e}`)},Object.keys(Iy={}).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(wL,e)||Object.defineProperty(wL,e,{enumerable:!0,get:function(){return Iy[e]}})});var DS={};DS=e=>encodeURIComponent(e).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`);var DI={},DA="%[a-f0-9]{2}",DM=RegExp("("+DA+")|([^%]+?)","gi"),DC=RegExp("("+DA+")+","gi");DI=function(e){if("string"!=typeof e)throw TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"","%FF%FE":""},r=DC.exec(e);r;){try{t[r[0]]=decodeURIComponent(r[0])}catch(e){var i=function(e){try{return decodeURIComponent(e)}catch(i){for(var t=e.match(DM)||[],r=1;r<t.length;r++)t=(e=(function e(t,r){try{return[decodeURIComponent(t.join(""))]}catch(e){}if(1===t.length)return t;r=r||1;var i=t.slice(0,r),n=t.slice(r);return Array.prototype.concat.call([],e(i),e(n))})(t,r).join("")).match(DM)||[];return e}}(r[0]);i!==r[0]&&(t[r[0]]=i)}r=DC.exec(e)}t["%C2"]="";for(var n=Object.keys(t),s=0;s<n.length;s++){var o=n[s];e=e.replace(RegExp(o,"g"),t[o])}return e}(e)}};var DO={};DO=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];let r=e.indexOf(t);return -1===r?[e]:[e.slice(0,r),e.slice(r+t.length)]};function DP(e){if("string"!=typeof e||1!==e.length)throw TypeError("arrayFormatSeparator must be single character string")}function DR(e,t){return t.encode?t.strict?DS(e):encodeURIComponent(e):e}function DT(e,t){return t.decode?DI(e):e}Symbol("encodeFragmentIdentifier");function DN(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):t.parseBooleans&&null!==e&&("true"===e.toLowerCase()||"false"===e.toLowerCase())&&(e="true"===e.toLowerCase()),e}function DB(e,t){DP((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);let r=function(e){let t;switch(e.arrayFormat){case"index":return(e,r,i)=>{if(t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),!t){i[e]=r;return}void 0===i[e]&&(i[e]={}),i[e][t[1]]=r};case"bracket":return(e,r,i)=>{if(t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),!t){i[e]=r;return}if(void 0===i[e]){i[e]=[r];return}i[e]=[].concat(i[e],r)};case"colon-list-separator":return(e,r,i)=>{if(t=/(:list)$/.exec(e),e=e.replace(/:list$/,""),!t){i[e]=r;return}if(void 0===i[e]){i[e]=[r];return}i[e]=[].concat(i[e],r)};case"comma":case"separator":return(t,r,i)=>{let n="string"==typeof r&&r.includes(e.arrayFormatSeparator),s="string"==typeof r&&!n&&DT(r,e).includes(e.arrayFormatSeparator);r=s?DT(r,e):r;let o=n||s?r.split(e.arrayFormatSeparator).map(t=>DT(t,e)):null===r?r:DT(r,e);i[t]=o};case"bracket-separator":return(t,r,i)=>{let n=/(\[\])$/.test(t);if(t=t.replace(/\[\]$/,""),!n){i[t]=r?DT(r,e):r;return}let s=null===r?[]:r.split(e.arrayFormatSeparator).map(t=>DT(t,e));if(void 0===i[t]){i[t]=s;return}i[t]=[].concat(i[t],s)};default:return(e,t,r)=>{if(void 0===r[e]){r[e]=t;return}r[e]=[].concat(r[e],t)}}}(t),i=Object.create(null);if("string"!=typeof e||!(e=e.trim().replace(/^[?#&]/,"")))return i;for(let n of e.split("&")){if(""===n)continue;let[e,s]=DO(t.decode?n.replace(/\+/g," "):n,"=");s=void 0===s?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?s:DT(s,t),r(DT(e,t),s,i)}for(let e of Object.keys(i)){let r=i[e];if("object"==typeof r&&null!==r)for(let e of Object.keys(r))r[e]=DN(r[e],t);else i[e]=DN(r,t)}return!1===t.sort?i:(!0===t.sort?Object.keys(i).sort():Object.keys(i).sort(t.sort)).reduce((e,t)=>{let r=i[t];return r&&"object"==typeof r&&!Array.isArray(r)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort((e,t)=>Number(e)-Number(t)).map(e=>t[e]):t}(r):e[t]=r,e},Object.create(null))}function DL(e){return"string"==typeof e&&(e=yT(e)),yO(yx([yT("\x19Ethereum Signed Message:\n"),yT(String(e.length)),e]))}IT=(e,t)=>{if(!e)return"";DP((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);let r=r=>t.skipNull&&null==e[r]||t.skipEmptyString&&""===e[r],i=function(e){switch(e.arrayFormat){case"index":return t=>(r,i)=>{let n=r.length;return void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?r:null===i?[...r,DR(t,e)+"["+n+"]"]:[...r,DR(t,e)+"["+DR(n,e)+"]="+DR(i,e)]};case"bracket":return t=>(r,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?r:null===i?[...r,DR(t,e)+"[]"]:[...r,DR(t,e)+"[]="+DR(i,e)];case"colon-list-separator":return t=>(r,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?r:null===i?[...r,DR(t,e)+":list="]:[...r,DR(t,e)+":list="+DR(i,e)];case"comma":case"separator":case"bracket-separator":{let t="bracket-separator"===e.arrayFormat?"[]=":"=";return r=>(i,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?i:(n=null===n?"":n,0===i.length)?[[DR(r,e),t,DR(n,e)].join("")]:[[i,DR(n,e)].join(e.arrayFormatSeparator)]}default:return t=>(r,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?r:null===i?[...r,DR(t,e)]:[...r,DR(t,e)+"="+DR(i,e)]}}(t),n={};for(let t of Object.keys(e))r(t)||(n[t]=e[t]);let s=Object.keys(n);return!1!==t.sort&&s.sort(t.sort),s.map(r=>{let n=e[r];return void 0===n?"":null===n?DR(r,t):Array.isArray(n)?0===n.length&&"bracket-separator"===t.arrayFormat?DR(r,t)+"[]":n.reduce(i(r),[]).join("&"):DR(r,t)+"="+DR(n,t)}).filter(e=>e.length>0).join("&")},new yg("transactions/5.7.0"),(Im=IN||(IN={}))[Im.legacy=0]="legacy",Im[Im.eip2930=1]="eip2930",Im[Im.eip1559=2]="eip1559";var Dk={};Object.defineProperty(Dk,"__esModule",{value:!0});var DU={};function Dz(e,t,r,i,n){if(void 0===n&&(n=0),32!==e.length)throw Error("ChaCha: key size must be 32 bytes");if(i.length<r.length)throw Error("ChaCha: destination is shorter than source");if(0===n){if(8!==t.length&&12!==t.length)throw Error("ChaCha nonce must be 8 or 12 bytes");o=(s=new Uint8Array(16)).length-t.length,s.set(t,o)}else{if(16!==t.length)throw Error("ChaCha nonce with counter must be 16 bytes");s=t,o=n}for(var s,o,a=new Uint8Array(64),h=0;h<r.length;h+=64){!function(e,t,r){for(var i=r[3]<<24|r[2]<<16|r[1]<<8|r[0],n=r[7]<<24|r[6]<<16|r[5]<<8|r[4],s=r[11]<<24|r[10]<<16|r[9]<<8|r[8],o=r[15]<<24|r[14]<<16|r[13]<<8|r[12],a=r[19]<<24|r[18]<<16|r[17]<<8|r[16],h=r[23]<<24|r[22]<<16|r[21]<<8|r[20],u=r[27]<<24|r[26]<<16|r[25]<<8|r[24],f=r[31]<<24|r[30]<<16|r[29]<<8|r[28],c=t[3]<<24|t[2]<<16|t[1]<<8|t[0],l=t[7]<<24|t[6]<<16|t[5]<<8|t[4],d=t[11]<<24|t[10]<<16|t[9]<<8|t[8],p=t[15]<<24|t[14]<<16|t[13]<<8|t[12],g=0x61707865,b=0x3320646e,y=0x79622d32,m=0x6b206574,v=i,w=n,D=s,x=o,E=a,_=h,S=u,I=f,A=c,M=l,C=d,O=p,P=0;P<20;P+=2)A^=g=g+v|0,v^=E=E+(A=A>>>16|A<<16)|0,v=v>>>20|v<<12,M^=b=b+w|0,w^=_=_+(M=M>>>16|M<<16)|0,w=w>>>20|w<<12,C^=y=y+D|0,D^=S=S+(C=C>>>16|C<<16)|0,D=D>>>20|D<<12,O^=m=m+x|0,x^=I=I+(O=O>>>16|O<<16)|0,x=x>>>20|x<<12,C^=y=y+D|0,D^=S=S+(C=C>>>24|C<<8)|0,D=D>>>25|D<<7,O^=m=m+x|0,x^=I=I+(O=O>>>24|O<<8)|0,x=x>>>25|x<<7,M^=b=b+w|0,w^=_=_+(M=M>>>24|M<<8)|0,w=w>>>25|w<<7,A^=g=g+v|0,v^=E=E+(A=A>>>24|A<<8)|0,v=v>>>25|v<<7,O^=g=g+w|0,w^=S=S+(O=O>>>16|O<<16)|0,w=w>>>20|w<<12,A^=b=b+D|0,D^=I=I+(A=A>>>16|A<<16)|0,D=D>>>20|D<<12,M^=y=y+x|0,x^=E=E+(M=M>>>16|M<<16)|0,x=x>>>20|x<<12,C^=m=m+v|0,v^=_=_+(C=C>>>16|C<<16)|0,v=v>>>20|v<<12,M^=y=y+x|0,x^=E=E+(M=M>>>24|M<<8)|0,x=x>>>25|x<<7,C^=m=m+v|0,v^=_=_+(C=C>>>24|C<<8)|0,v=v>>>25|v<<7,A^=b=b+D|0,D^=I=I+(A=A>>>24|A<<8)|0,D=D>>>25|D<<7,O^=g=g+w|0,w^=S=S+(O=O>>>24|O<<8)|0,w=w>>>25|w<<7;mO.writeUint32LE(g+0x61707865|0,e,0),mO.writeUint32LE(b+0x3320646e|0,e,4),mO.writeUint32LE(y+0x79622d32|0,e,8),mO.writeUint32LE(m+0x6b206574|0,e,12),mO.writeUint32LE(v+i|0,e,16),mO.writeUint32LE(w+n|0,e,20),mO.writeUint32LE(D+s|0,e,24),mO.writeUint32LE(x+o|0,e,28),mO.writeUint32LE(E+a|0,e,32),mO.writeUint32LE(_+h|0,e,36),mO.writeUint32LE(S+u|0,e,40),mO.writeUint32LE(I+f|0,e,44),mO.writeUint32LE(A+c|0,e,48),mO.writeUint32LE(M+l|0,e,52),mO.writeUint32LE(C+d|0,e,56),mO.writeUint32LE(O+p|0,e,60)}(a,s,e);for(var u=h;u<h+64&&u<r.length;u++)i[u]=r[u]^a[u-h];for(var f=s,c=0,l=o,d=1;l--;)d=d+(255&f[c])|0,f[c]=255&d,d>>>=8,c++;if(d>0)throw Error("ChaCha: counter overflow")}return mC.wipe(a),0===n&&mC.wipe(s),i}Object.defineProperty(DU,"__esModule",{value:!0}),DU.streamXOR=Dz,DU.stream=function(e,t,r,i){return void 0===i&&(i=0),mC.wipe(r),Dz(e,t,r,r,i)};var Dj={};Object.defineProperty(Dj,"__esModule",{value:!0});var Dq={};function DF(e,t){if(e.length!==t.length)return 0;for(var r=0,i=0;i<e.length;i++)r|=e[i]^t[i];return 1&r-1>>>8}Object.defineProperty(Dq,"__esModule",{value:!0}),Dq.select=function(e,t,r){return~(e-1)&t|e-1&r},Dq.lessOrEqual=function(e,t){return(0|e)-(0|t)-1>>>31&1},Dq.compare=DF,Dq.equal=function(e,t){return 0!==e.length&&0!==t.length&&0!==DF(e,t)},Dj.DIGEST_LENGTH=16;var DH=function(){function e(e){this.digestLength=Dj.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var t=e[0]|e[1]<<8;this._r[0]=8191&t;var r=e[2]|e[3]<<8;this._r[1]=(t>>>13|r<<3)&8191;var i=e[4]|e[5]<<8;this._r[2]=(r>>>10|i<<6)&7939;var n=e[6]|e[7]<<8;this._r[3]=(i>>>7|n<<9)&8191;var s=e[8]|e[9]<<8;this._r[4]=(n>>>4|s<<12)&255,this._r[5]=s>>>1&8190;var o=e[10]|e[11]<<8;this._r[6]=(s>>>14|o<<2)&8191;var a=e[12]|e[13]<<8;this._r[7]=(o>>>11|a<<5)&8065;var h=e[14]|e[15]<<8;this._r[8]=(a>>>8|h<<8)&8191,this._r[9]=h>>>5&127,this._pad[0]=e[16]|e[17]<<8,this._pad[1]=e[18]|e[19]<<8,this._pad[2]=e[20]|e[21]<<8,this._pad[3]=e[22]|e[23]<<8,this._pad[4]=e[24]|e[25]<<8,this._pad[5]=e[26]|e[27]<<8,this._pad[6]=e[28]|e[29]<<8,this._pad[7]=e[30]|e[31]<<8}return e.prototype._blocks=function(e,t,r){for(var i=2048*!this._fin,n=this._h[0],s=this._h[1],o=this._h[2],a=this._h[3],h=this._h[4],u=this._h[5],f=this._h[6],c=this._h[7],l=this._h[8],d=this._h[9],p=this._r[0],g=this._r[1],b=this._r[2],y=this._r[3],m=this._r[4],v=this._r[5],w=this._r[6],D=this._r[7],x=this._r[8],E=this._r[9];r>=16;){var _,S=e[t+0]|e[t+1]<<8;n+=8191&S;var I=e[t+2]|e[t+3]<<8;s+=(S>>>13|I<<3)&8191;var A=e[t+4]|e[t+5]<<8;o+=(I>>>10|A<<6)&8191;var M=e[t+6]|e[t+7]<<8;a+=(A>>>7|M<<9)&8191;var C=e[t+8]|e[t+9]<<8;h+=(M>>>4|C<<12)&8191,u+=C>>>1&8191;var O=e[t+10]|e[t+11]<<8;f+=(C>>>14|O<<2)&8191;var P=e[t+12]|e[t+13]<<8;c+=(O>>>11|P<<5)&8191;var R=e[t+14]|e[t+15]<<8;l+=(P>>>8|R<<8)&8191,d+=R>>>5|i;var T=0;T=(_=0+n*p+5*E*s+5*x*o+5*D*a+5*w*h)>>>13,_&=8191,_+=5*v*u,_+=5*m*f,_+=5*y*c,_+=5*b*l,_+=5*g*d,T+=_>>>13,_&=8191;var N=T;N+=n*g,N+=s*p,N+=5*E*o,N+=5*x*a,N+=5*D*h,T=N>>>13,N&=8191,N+=5*w*u,N+=5*v*f,N+=5*m*c,N+=5*y*l,N+=5*b*d,T+=N>>>13,N&=8191;var B=T;B+=n*b,B+=s*g,B+=o*p,B+=5*E*a,B+=5*x*h,T=B>>>13,B&=8191,B+=5*D*u,B+=5*w*f,B+=5*v*c,B+=5*m*l,B+=5*y*d,T+=B>>>13,B&=8191;var L=T;L+=n*y,L+=s*b,L+=o*g,L+=a*p,L+=5*E*h,T=L>>>13,L&=8191,L+=5*x*u,L+=5*D*f,L+=5*w*c,L+=5*v*l,L+=5*m*d,T+=L>>>13,L&=8191;var k=T;k+=n*m,k+=s*y,k+=o*b,k+=a*g,k+=h*p,T=k>>>13,k&=8191,k+=5*E*u,k+=5*x*f,k+=5*D*c,k+=5*w*l,k+=5*v*d,T+=k>>>13,k&=8191;var U=T;U+=n*v,U+=s*m,U+=o*y,U+=a*b,U+=h*g,T=U>>>13,U&=8191,U+=u*p,U+=5*E*f,U+=5*x*c,U+=5*D*l,U+=5*w*d,T+=U>>>13,U&=8191;var z=T;z+=n*w,z+=s*v,z+=o*m,z+=a*y,z+=h*b,T=z>>>13,z&=8191,z+=u*g,z+=f*p,z+=5*E*c,z+=5*x*l,z+=5*D*d,T+=z>>>13,z&=8191;var j=T;j+=n*D,j+=s*w,j+=o*v,j+=a*m,j+=h*y,T=j>>>13,j&=8191,j+=u*b,j+=f*g,j+=c*p,j+=5*E*l,j+=5*x*d,T+=j>>>13,j&=8191;var q=T;q+=n*x,q+=s*D,q+=o*w,q+=a*v,q+=h*m,T=q>>>13,q&=8191,q+=u*y,q+=f*b,q+=c*g,q+=l*p,q+=5*E*d,T+=q>>>13,q&=8191;var F=T;F+=n*E,F+=s*x,F+=o*D,F+=a*w,F+=h*v,T=F>>>13,F&=8191,F+=u*m,F+=f*y,F+=c*b,F+=l*g,F+=d*p,T+=F>>>13,F&=8191,_=8191&(T=(T=(T<<2)+T|0)+_|0),T>>>=13,N+=T,n=_,s=N,o=B,a=L,h=k,u=U,f=z,c=j,l=q,d=F,t+=16,r-=16}this._h[0]=n,this._h[1]=s,this._h[2]=o,this._h[3]=a,this._h[4]=h,this._h[5]=u,this._h[6]=f,this._h[7]=c,this._h[8]=l,this._h[9]=d},e.prototype.finish=function(e,t){void 0===t&&(t=0);var r,i,n,s,o=new Uint16Array(10);if(this._leftover){for(s=this._leftover,this._buffer[s++]=1;s<16;s++)this._buffer[s]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(r=this._h[1]>>>13,this._h[1]&=8191,s=2;s<10;s++)this._h[s]+=r,r=this._h[s]>>>13,this._h[s]&=8191;for(this._h[0]+=5*r,r=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=r,r=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=r,o[0]=this._h[0]+5,r=o[0]>>>13,o[0]&=8191,s=1;s<10;s++)o[s]=this._h[s]+r,r=o[s]>>>13,o[s]&=8191;for(o[9]-=8192,i=(1^r)-1,s=0;s<10;s++)o[s]&=i;for(s=0,i=~i;s<10;s++)this._h[s]=this._h[s]&i|o[s];for(s=1,this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,n=this._h[0]+this._pad[0],this._h[0]=65535&n;s<8;s++)n=(this._h[s]+this._pad[s]|0)+(n>>>16)|0,this._h[s]=65535&n;return e[t+0]=this._h[0]>>>0,e[t+1]=this._h[0]>>>8,e[t+2]=this._h[1]>>>0,e[t+3]=this._h[1]>>>8,e[t+4]=this._h[2]>>>0,e[t+5]=this._h[2]>>>8,e[t+6]=this._h[3]>>>0,e[t+7]=this._h[3]>>>8,e[t+8]=this._h[4]>>>0,e[t+9]=this._h[4]>>>8,e[t+10]=this._h[5]>>>0,e[t+11]=this._h[5]>>>8,e[t+12]=this._h[6]>>>0,e[t+13]=this._h[6]>>>8,e[t+14]=this._h[7]>>>0,e[t+15]=this._h[7]>>>8,this._finished=!0,this},e.prototype.update=function(e){var t,r=0,i=e.length;if(this._leftover){(t=16-this._leftover)>i&&(t=i);for(var n=0;n<t;n++)this._buffer[this._leftover+n]=e[r+n];if(i-=t,r+=t,this._leftover+=t,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(i>=16&&(t=i-i%16,this._blocks(e,r,t),r+=t,i-=t),i){for(var n=0;n<i;n++)this._buffer[this._leftover+n]=e[r+n];this._leftover+=i}return this},e.prototype.digest=function(){if(this._finished)throw Error("Poly1305 was finished");var e=new Uint8Array(16);return this.finish(e),e},e.prototype.clean=function(){return mC.wipe(this._buffer),mC.wipe(this._r),mC.wipe(this._h),mC.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},e}();Dj.Poly1305=DH,Dj.oneTimeAuth=function(e,t){var r=new DH(e);r.update(t);var i=r.digest();return r.clean(),i},Dj.equal=function(e,t){return e.length===Dj.DIGEST_LENGTH&&t.length===Dj.DIGEST_LENGTH&&Dq.equal(e,t)},Dk.KEY_LENGTH=32,Dk.NONCE_LENGTH=12,Dk.TAG_LENGTH=16;var DK=new Uint8Array(16),D$=function(){function e(e){if(this.nonceLength=Dk.NONCE_LENGTH,this.tagLength=Dk.TAG_LENGTH,e.length!==Dk.KEY_LENGTH)throw Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(e)}return e.prototype.seal=function(e,t,r,i){if(e.length>16)throw Error("ChaCha20Poly1305: incorrect nonce length");var n,s=new Uint8Array(16);s.set(e,s.length-e.length);var o=new Uint8Array(32);DU.stream(this._key,s,o,4);var a=t.length+this.tagLength;if(i){if(i.length!==a)throw Error("ChaCha20Poly1305: incorrect destination length");n=i}else n=new Uint8Array(a);return DU.streamXOR(this._key,s,t,n,4),this._authenticate(n.subarray(n.length-this.tagLength,n.length),o,n.subarray(0,n.length-this.tagLength),r),mC.wipe(s),n},e.prototype.open=function(e,t,r,i){if(e.length>16)throw Error("ChaCha20Poly1305: incorrect nonce length");if(t.length<this.tagLength)return null;var n,s=new Uint8Array(16);s.set(e,s.length-e.length);var o=new Uint8Array(32);DU.stream(this._key,s,o,4);var a=new Uint8Array(this.tagLength);if(this._authenticate(a,o,t.subarray(0,t.length-this.tagLength),r),!Dq.equal(a,t.subarray(t.length-this.tagLength,t.length)))return null;var h=t.length-this.tagLength;if(i){if(i.length!==h)throw Error("ChaCha20Poly1305: incorrect destination length");n=i}else n=new Uint8Array(h);return DU.streamXOR(this._key,s,t.subarray(0,t.length-this.tagLength),n,4),mC.wipe(s),n},e.prototype.clean=function(){return mC.wipe(this._key),this},e.prototype._authenticate=function(e,t,r,i){var n=new Dj.Poly1305(t);i&&(n.update(i),i.length%16>0&&n.update(DK.subarray(i.length%16))),n.update(r),r.length%16>0&&n.update(DK.subarray(r.length%16));var s=new Uint8Array(8);i&&mO.writeUint64LE(i.length,s),n.update(s),mO.writeUint64LE(r.length,s),n.update(s);for(var o=n.digest(),a=0;a<o.length;a++)e[a]=o[a];n.clean(),mC.wipe(o),mC.wipe(s)},e}();Dk.ChaCha20Poly1305=D$;var DV={};Object.defineProperty(DV,"__esModule",{value:!0});var DW={};Object.defineProperty(DW,"__esModule",{value:!0});var DG={};Object.defineProperty(DG,"__esModule",{value:!0}),DG.isSerializableHash=function(e){return void 0!==e.saveState&&void 0!==e.restoreState&&void 0!==e.cleanSavedState};var DY=function(){function e(e,t){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var r=new Uint8Array(this.blockSize);t.length>this.blockSize?this._inner.update(t).finish(r).clean():r.set(t);for(var i=0;i<r.length;i++)r[i]^=54;this._inner.update(r);for(var i=0;i<r.length;i++)r[i]^=106;this._outer.update(r),DG.isSerializableHash(this._inner)&&DG.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),mC.wipe(r)}return e.prototype.reset=function(){if(!DG.isSerializableHash(this._inner)||!DG.isSerializableHash(this._outer))throw Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},e.prototype.clean=function(){DG.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),DG.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},e.prototype.update=function(e){return this._inner.update(e),this},e.prototype.finish=function(e){return this._finished?this._outer.finish(e):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0),this},e.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},e.prototype.saveState=function(){if(!DG.isSerializableHash(this._inner))throw Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},e.prototype.restoreState=function(e){if(!DG.isSerializableHash(this._inner)||!DG.isSerializableHash(this._outer))throw Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},e.prototype.cleanSavedState=function(e){if(!DG.isSerializableHash(this._inner))throw Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},e}();DW.HMAC=DY,DW.hmac=function(e,t,r){var i=new DY(e,t);i.update(r);var n=i.digest();return i.clean(),n},DW.equal=Dq.equal,DV.HKDF=function(){function e(e,t,r,i){void 0===r&&(r=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=i;var n=DW.hmac(this._hash,r,t);this._hmac=new DW.HMAC(e,n),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return e.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(0===e)throw Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},e.prototype.expand=function(e){for(var t=new Uint8Array(e),r=0;r<t.length;r++)this._bufpos===this._buffer.length&&this._fillBuffer(),t[r]=this._buffer[this._bufpos++];return t},e.prototype.clean=function(){this._hmac.clean(),mC.wipe(this._buffer),mC.wipe(this._counter),this._bufpos=0},e}();var DZ={};function DJ(e){let t=new Float64Array(16);if(e)for(let r=0;r<e.length;r++)t[r]=e[r];return t}Object.defineProperty(DZ,"__esModule",{value:!0}),DZ.sharedKey=DZ.generateKeyPair=DZ.generateKeyPairFromSeed=DZ.scalarMultBase=DZ.scalarMult=DZ.SHARED_KEY_LENGTH=DZ.SECRET_KEY_LENGTH=DZ.PUBLIC_KEY_LENGTH=void 0,DZ.PUBLIC_KEY_LENGTH=32,DZ.SECRET_KEY_LENGTH=32,DZ.SHARED_KEY_LENGTH=32;const DX=new Uint8Array(32);DX[0]=9;const DQ=DJ([56129,1]);function D0(e){let t=1;for(let r=0;r<16;r++){let i=e[r]+t+65535;t=Math.floor(i/65536),e[r]=i-65536*t}e[0]+=t-1+37*(t-1)}function D1(e,t,r){let i=~(r-1);for(let r=0;r<16;r++){let n=i&(e[r]^t[r]);e[r]^=n,t[r]^=n}}function D3(e,t,r){for(let i=0;i<16;i++)e[i]=t[i]+r[i]}function D2(e,t,r){for(let i=0;i<16;i++)e[i]=t[i]-r[i]}function D8(e,t,r){let i,n,s=0,o=0,a=0,h=0,u=0,f=0,c=0,l=0,d=0,p=0,g=0,b=0,y=0,m=0,v=0,w=0,D=0,x=0,E=0,_=0,S=0,I=0,A=0,M=0,C=0,O=0,P=0,R=0,T=0,N=0,B=0,L=r[0],k=r[1],U=r[2],z=r[3],j=r[4],q=r[5],F=r[6],H=r[7],K=r[8],$=r[9],V=r[10],W=r[11],G=r[12],Y=r[13],Z=r[14],J=r[15];s+=(i=t[0])*L,o+=i*k,a+=i*U,h+=i*z,u+=i*j,f+=i*q,c+=i*F,l+=i*H,d+=i*K,p+=i*$,g+=i*V,b+=i*W,y+=i*G,m+=i*Y,v+=i*Z,w+=i*J,o+=(i=t[1])*L,a+=i*k,h+=i*U,u+=i*z,f+=i*j,c+=i*q,l+=i*F,d+=i*H,p+=i*K,g+=i*$,b+=i*V,y+=i*W,m+=i*G,v+=i*Y,w+=i*Z,D+=i*J,a+=(i=t[2])*L,h+=i*k,u+=i*U,f+=i*z,c+=i*j,l+=i*q,d+=i*F,p+=i*H,g+=i*K,b+=i*$,y+=i*V,m+=i*W,v+=i*G,w+=i*Y,D+=i*Z,x+=i*J,h+=(i=t[3])*L,u+=i*k,f+=i*U,c+=i*z,l+=i*j,d+=i*q,p+=i*F,g+=i*H,b+=i*K,y+=i*$,m+=i*V,v+=i*W,w+=i*G,D+=i*Y,x+=i*Z,E+=i*J,u+=(i=t[4])*L,f+=i*k,c+=i*U,l+=i*z,d+=i*j,p+=i*q,g+=i*F,b+=i*H,y+=i*K,m+=i*$,v+=i*V,w+=i*W,D+=i*G,x+=i*Y,E+=i*Z,_+=i*J,f+=(i=t[5])*L,c+=i*k,l+=i*U,d+=i*z,p+=i*j,g+=i*q,b+=i*F,y+=i*H,m+=i*K,v+=i*$,w+=i*V,D+=i*W,x+=i*G,E+=i*Y,_+=i*Z,S+=i*J,c+=(i=t[6])*L,l+=i*k,d+=i*U,p+=i*z,g+=i*j,b+=i*q,y+=i*F,m+=i*H,v+=i*K,w+=i*$,D+=i*V,x+=i*W,E+=i*G,_+=i*Y,S+=i*Z,I+=i*J,l+=(i=t[7])*L,d+=i*k,p+=i*U,g+=i*z,b+=i*j,y+=i*q,m+=i*F,v+=i*H,w+=i*K,D+=i*$,x+=i*V,E+=i*W,_+=i*G,S+=i*Y,I+=i*Z,A+=i*J,d+=(i=t[8])*L,p+=i*k,g+=i*U,b+=i*z,y+=i*j,m+=i*q,v+=i*F,w+=i*H,D+=i*K,x+=i*$,E+=i*V,_+=i*W,S+=i*G,I+=i*Y,A+=i*Z,M+=i*J,p+=(i=t[9])*L,g+=i*k,b+=i*U,y+=i*z,m+=i*j,v+=i*q,w+=i*F,D+=i*H,x+=i*K,E+=i*$,_+=i*V,S+=i*W,I+=i*G,A+=i*Y,M+=i*Z,C+=i*J,g+=(i=t[10])*L,b+=i*k,y+=i*U,m+=i*z,v+=i*j,w+=i*q,D+=i*F,x+=i*H,E+=i*K,_+=i*$,S+=i*V,I+=i*W,A+=i*G,M+=i*Y,C+=i*Z,O+=i*J,b+=(i=t[11])*L,y+=i*k,m+=i*U,v+=i*z,w+=i*j,D+=i*q,x+=i*F,E+=i*H,_+=i*K,S+=i*$,I+=i*V,A+=i*W,M+=i*G,C+=i*Y,O+=i*Z,P+=i*J,y+=(i=t[12])*L,m+=i*k,v+=i*U,w+=i*z,D+=i*j,x+=i*q,E+=i*F,_+=i*H,S+=i*K,I+=i*$,A+=i*V,M+=i*W,C+=i*G,O+=i*Y,P+=i*Z,R+=i*J,m+=(i=t[13])*L,v+=i*k,w+=i*U,D+=i*z,x+=i*j,E+=i*q,_+=i*F,S+=i*H,I+=i*K,A+=i*$,M+=i*V,C+=i*W,O+=i*G,P+=i*Y,R+=i*Z,T+=i*J,v+=(i=t[14])*L,w+=i*k,D+=i*U,x+=i*z,E+=i*j,_+=i*q,S+=i*F,I+=i*H,A+=i*K,M+=i*$,C+=i*V,O+=i*W,P+=i*G,R+=i*Y,T+=i*Z,N+=i*J,w+=(i=t[15])*L,D+=i*k,x+=i*U,E+=i*z,_+=i*j,S+=i*q,I+=i*F,A+=i*H,M+=i*K,C+=i*$,O+=i*V,P+=i*W,R+=i*G,T+=i*Y,N+=i*Z,B+=i*J,s+=38*D,o+=38*x,a+=38*E,h+=38*_,u+=38*S,f+=38*I,c+=38*A,l+=38*M,d+=38*C,p+=38*O,g+=38*P,b+=38*R,y+=38*T,m+=38*N,v+=38*B,n=Math.floor((i=s+(n=1)+65535)/65536),s=i-65536*n,n=Math.floor((i=o+n+65535)/65536),o=i-65536*n,n=Math.floor((i=a+n+65535)/65536),a=i-65536*n,n=Math.floor((i=h+n+65535)/65536),h=i-65536*n,n=Math.floor((i=u+n+65535)/65536),u=i-65536*n,n=Math.floor((i=f+n+65535)/65536),f=i-65536*n,n=Math.floor((i=c+n+65535)/65536),c=i-65536*n,n=Math.floor((i=l+n+65535)/65536),l=i-65536*n,n=Math.floor((i=d+n+65535)/65536),d=i-65536*n,n=Math.floor((i=p+n+65535)/65536),p=i-65536*n,n=Math.floor((i=g+n+65535)/65536),g=i-65536*n,n=Math.floor((i=b+n+65535)/65536),b=i-65536*n,n=Math.floor((i=y+n+65535)/65536),y=i-65536*n,n=Math.floor((i=m+n+65535)/65536),m=i-65536*n,n=Math.floor((i=v+n+65535)/65536),v=i-65536*n,n=Math.floor((i=w+n+65535)/65536),w=i-65536*n,s+=n-1+37*(n-1),n=Math.floor((i=s+(n=1)+65535)/65536),s=i-65536*n,n=Math.floor((i=o+n+65535)/65536),o=i-65536*n,n=Math.floor((i=a+n+65535)/65536),a=i-65536*n,n=Math.floor((i=h+n+65535)/65536),h=i-65536*n,n=Math.floor((i=u+n+65535)/65536),u=i-65536*n,n=Math.floor((i=f+n+65535)/65536),f=i-65536*n,n=Math.floor((i=c+n+65535)/65536),c=i-65536*n,n=Math.floor((i=l+n+65535)/65536),l=i-65536*n,n=Math.floor((i=d+n+65535)/65536),d=i-65536*n,n=Math.floor((i=p+n+65535)/65536),p=i-65536*n,n=Math.floor((i=g+n+65535)/65536),g=i-65536*n,n=Math.floor((i=b+n+65535)/65536),b=i-65536*n,n=Math.floor((i=y+n+65535)/65536),y=i-65536*n,n=Math.floor((i=m+n+65535)/65536),m=i-65536*n,n=Math.floor((i=v+n+65535)/65536),v=i-65536*n,n=Math.floor((i=w+n+65535)/65536),w=i-65536*n,s+=n-1+37*(n-1),e[0]=s,e[1]=o,e[2]=a,e[3]=h,e[4]=u,e[5]=f,e[6]=c,e[7]=l,e[8]=d,e[9]=p,e[10]=g,e[11]=b,e[12]=y,e[13]=m,e[14]=v,e[15]=w}function D6(e,t){let r=new Uint8Array(32),i=new Float64Array(80),n=DJ(),s=DJ(),o=DJ(),a=DJ(),h=DJ(),u=DJ();for(let t=0;t<31;t++)r[t]=e[t];r[31]=127&e[31]|64,r[0]&=248;for(let e=0;e<16;e++)i[e]=t[2*e]+(t[2*e+1]<<8);i[15]&=32767;for(let e=0;e<16;e++)s[e]=i[e];n[0]=a[0]=1;for(let e=254;e>=0;--e){let t=r[e>>>3]>>>(7&e)&1;D1(n,s,t),D1(o,a,t),D3(h,n,o),D2(n,n,o),D3(o,s,a),D2(s,s,a),D8(a,h,h),D8(u,n,n),D8(n,o,n),D8(o,s,h),D3(h,n,o),D2(n,n,o),D8(s,n,n),D2(o,a,u),D8(n,o,DQ),D3(n,n,a),D8(o,o,n),D8(n,a,u),D8(a,s,i),D8(s,h,h),D1(n,s,t),D1(o,a,t)}for(let e=0;e<16;e++)i[e+16]=n[e],i[e+32]=o[e],i[e+48]=s[e],i[e+64]=a[e];let f=i.subarray(32),c=i.subarray(16);!function(e,t){let r=DJ();for(let e=0;e<16;e++)r[e]=t[e];for(let e=253;e>=0;e--)D8(r,r,r),2!==e&&4!==e&&D8(r,r,t);for(let t=0;t<16;t++)e[t]=r[t]}(f,f),D8(c,c,f);let l=new Uint8Array(32);return!function(e,t){let r=DJ(),i=DJ();for(let e=0;e<16;e++)i[e]=t[e];D0(i),D0(i),D0(i);for(let e=0;e<2;e++){r[0]=i[0]-65517;for(let e=1;e<15;e++)r[e]=i[e]-65535-(r[e-1]>>16&1),r[e-1]&=65535;r[15]=i[15]-32767-(r[14]>>16&1);let e=r[15]>>16&1;r[14]&=65535,D1(i,r,1-e)}for(let t=0;t<16;t++)e[2*t]=255&i[t],e[2*t+1]=i[t]>>8}(l,c),l}function D5(e){return D6(e,DX)}function D4(e){if(e.length!==DZ.SECRET_KEY_LENGTH)throw Error(`x25519: seed must be ${DZ.SECRET_KEY_LENGTH} bytes`);let t=new Uint8Array(e);return{publicKey:D5(t),secretKey:t}}DZ.scalarMult=D6,DZ.scalarMultBase=D5,DZ.generateKeyPairFromSeed=D4,DZ.generateKeyPair=function(e){let t=(0,mS.randomBytes)(32,e),r=D4(t);return(0,mC.wipe)(t),r},DZ.sharedKey=function(e,t,r=!1){if(e.length!==DZ.PUBLIC_KEY_LENGTH)throw Error("X25519: incorrect secret key length");if(t.length!==DZ.PUBLIC_KEY_LENGTH)throw Error("X25519: incorrect public key length");let i=D6(e,t);if(r){let e=0;for(let t=0;t<i.length;t++)e|=i[t];if(0===e)throw Error("X25519: invalid shared key")}return i};var D9={};Object.defineProperty(D9,"__esModule",{value:!0});var D7={};Object.defineProperty(D7,"__esModule",{value:!0}),D7.compare=function(e,t){for(let r=0;r<e.byteLength;r++){if(e[r]<t[r])return -1;if(e[r]>t[r])return 1}return e.byteLength>t.byteLength?1:e.byteLength<t.byteLength?-1:0};var xe={};Object.defineProperty(xe,"__esModule",{value:!0}),xe.equals=function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0};var xt={};Object.defineProperty(xt,"__esModule",{value:!0}),xt.xor=function(e,t){if(e.length!==t.length)throw Error("Inputs should have the same length");let r=Dl.allocUnsafe(e.length);for(let i=0;i<e.length;i++)r[i]=e[i]^t[i];return r},D9.compare=D7.compare,D9.concat=Dc.concat,D9.equals=xe.equals,D9.fromString=Dm.fromString,D9.toString=Dd.toString,D9.xor=xt.xor;var xr={};function xi(e){let[t,r]=e.split(":");return{namespace:t,reference:r}}function xn(e,t){return e.includes(":")?[e]:t.chains||[]}xr.version=s("5Jl2z").version,xr.utils=s("85hQD"),xr.rand=s("7JHF0"),xr.curve=s("eOn6d"),xr.curves=s("3HkkL"),xr.ec=s("hkMcO"),xr.eddsa=s("4kGlE");var xs=Object.defineProperty,xo=Object.getOwnPropertySymbols,xa=Object.prototype.hasOwnProperty,xh=Object.prototype.propertyIsEnumerable,xu=(e,t,r)=>t in e?xs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,xf=(e,t)=>{for(var r in t||(t={}))xa.call(t,r)&&xu(e,r,t[r]);if(xo)for(var r of xo(t))xh.call(t,r)&&xu(e,r,t[r]);return e};const xc="react-native",xl="browser";function xd(){return!(0,nn.getDocument)()&&!!(0,nn.getNavigator)()&&"ReactNative"===navigator.product}function xp(){return!!(0,nn.getNavigator)()&&!!(0,nn.getDocument)()}function xg(){return xd()?xc:xp()?xl:"unknown"}function xb(){return(0,na.getWindowMetadata)()||{name:"",description:"",url:"",icons:[""]}}function xy(e,r,i){let n=function(){if(xg()===xc&&"u">typeof t&&"u">typeof(null==t?void 0:t.Platform)){let{OS:e,Version:r}=t.Platform;return[e,r].join("-")}let e=nr();if(null===e)return"unknown";let r=e.os?e.os.replace(" ","").toLowerCase():"unknown";return"browser"===e.type?[r,e.name,e.version].join("-"):[r,e.version].join("-")}(),s=function(){var e;let t=xg();return t===xl?[t,(null==(e=(0,nn.getLocation)())?void 0:e.host)||"unknown"].join(":"):t}();return[[e,r].join("-"),["js",i].join("-"),n,s].join("/")}function xm(e,t){return e.filter(e=>t.includes(e)).length===e.length}function xv(e){return Object.fromEntries(e.entries())}function xw(e){return new Map(Object.entries(e))}function xD(e=x.FIVE_MINUTES,t){let r,i,n,s=(0,x.toMiliseconds)(e||x.FIVE_MINUTES);return{resolve:e=>{n&&r&&(clearTimeout(n),r(e))},reject:e=>{n&&i&&(clearTimeout(n),i(e))},done:()=>new Promise((e,o)=>{n=setTimeout(()=>{o(Error(t))},s),r=e,i=o})}}function xx(e,t,r){return new Promise(async(i,n)=>{let s=setTimeout(()=>n(Error(r)),t);try{let t=await e;i(t)}catch(e){n(e)}clearTimeout(s)})}function xE(e,t){if("string"==typeof t&&t.startsWith(`${e}:`))return t;if("topic"===e.toLowerCase()){if("string"!=typeof t)throw Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}if("id"===e.toLowerCase()){if("number"!=typeof t)throw Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw Error(`Unknown expirer target type: ${e}`)}function x_(e){let[t,r]=e.split(":"),i={id:void 0,topic:void 0};if("topic"===t&&"string"==typeof r)i.topic=r;else if("id"===t&&Number.isInteger(Number(r)))i.id=Number(r);else throw Error(`Invalid target, expected id:number or topic:string, got ${t}:${r}`);return i}function xS(e,t){return(0,x.fromMiliseconds)((t||Date.now())+(0,x.toMiliseconds)(e))}function xI(e){return Date.now()>=(0,x.toMiliseconds)(e)}function xA(e,t){return`${e}${t?`:${t}`:""}`}async function xM({id:e,topic:r,wcDeepLink:i}){var n;try{if(!i)return;let s="string"==typeof i?JSON.parse(i):i,o=s?.href;if("string"!=typeof o)return;let a=function(e,t,r){let i=`requestId=${t}&sessionTopic=${r}`;e.endsWith("/")&&(e=e.slice(0,-1));let n=`${e}`;if(e.startsWith("https://t.me")){let t=e.includes("?")?"&startapp=":"?startapp=";n=`${n}${t}${function(e,t=!1){let r=F.from(e).toString("base64");return t?r.replace(/[=]/g,""):r}(i,!0)}`}else n=`${n}/wc?${i}`;return n}(o,e,r),h=xg();if(h===xl){if(!(null!=(n=(0,nn.getDocument)())&&n.hasFocus()))return void console.warn("Document does not have focus, skipping deeplink.");a.startsWith("https://")||a.startsWith("http://")?window.open(a,"_blank","noreferrer noopener"):window.open(a,"u">typeof window&&(window.TelegramWebviewProxy||window.Telegram||window.TelegramWebviewProxyProto)?"_blank":"_self","noreferrer noopener")}else h===xc&&"u">typeof(null==t?void 0:t.Linking)&&await t.Linking.openURL(a)}catch(e){console.error(e)}}async function xC(e,t){let r="";try{if(xp()&&(r=localStorage.getItem(t)))return r;r=await e.getItem(t)}catch(e){console.error(e)}return r}function xO(e,t){if(!e.includes(t))return null;let r=e.split(/([&,?,=])/),i=r.indexOf(t);return r[i+2]}function xP(){return"u">typeof crypto&&null!=crypto&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,e=>{let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}function xR(e){return F.from(e,"base64").toString("utf-8")}async function xT(e,t,r,i,n,s){switch(r.t){case"eip191":var o,a,h,u,f;return o=e,a=t,h=r.s,(u=DL(a),f=h,yY(yI(yO(yI(mE(mx(yD(u),f)),1)),12))).toLowerCase()===o.toLowerCase();case"eip1271":return await xN(e,t,r.s,i,n,s);default:throw Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${r.t}`)}}async function xN(e,t,r,i,n,s){let o=xi(i);if(!o.namespace||!o.reference)throw Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${i}`);try{let o="0x1626ba7e",a=r.substring(2),h=DL(t).substring(2),u=o+h+"00000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000041"+a,f=await fetch(`${s||"https://rpc.walletconnect.org/v1"}/?chainId=${i}&projectId=${n}`,{method:"POST",body:JSON.stringify({id:Date.now()+Math.floor(1e3*Math.random()),jsonrpc:"2.0",method:"eth_call",params:[{to:e,data:u},"latest"]})}),{result:c}=await f.json();return!!c&&c.slice(0,o.length).toLowerCase()===o.toLowerCase()}catch(e){return console.error("isValidEip1271Signature: ",e),!1}}var xB=Object.defineProperty,xL=Object.defineProperties,xk=Object.getOwnPropertyDescriptors,xU=Object.getOwnPropertySymbols,xz=Object.prototype.hasOwnProperty,xj=Object.prototype.propertyIsEnumerable,xq=(e,t,r)=>t in e?xB(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const xF=e=>e?.split(":"),xH=e=>{let t=e&&xF(e);if(t)return t[2]+":"+t[3]},xK=e=>{let t=e&&xF(e);if(t)return t.pop()};async function x$(e){let{cacao:t,projectId:r}=e,{s:i,p:n}=t,s=xV(n,n.iss),o=xK(n.iss);return await xT(o,s,i,xH(n.iss),r)}const xV=(e,t)=>{let r=`${e.domain} wants you to sign in with your Ethereum account:`,i=xK(t);if(!e.aud&&!e.uri)throw Error("Either `aud` or `uri` is required to construct the message");let n=e.statement||void 0,s=`URI: ${e.aud||e.uri}`,o=`Version: ${e.version}`,a=`Chain ID: ${(e=>{let t=e&&xF(e);if(t)return e.includes("did:pkh:")?t[3]:t[1]})(t)}`,h=`Nonce: ${e.nonce}`,u=`Issued At: ${e.iat}`,f=e.exp?`Expiration Time: ${e.exp}`:void 0,c=e.nbf?`Not Before: ${e.nbf}`:void 0,l=e.requestId?`Request ID: ${e.requestId}`:void 0,d=e.resources?`Resources:${e.resources.map(e=>`
- ${e}`).join("")}`:void 0,p=xX(e.resources);return p&&(n=function(e="",t){xW(t);let r="I further authorize the stated URI to perform the following actions on my behalf: ";if(e.includes(r))return e;let i=[],n=0;Object.keys(t.att).forEach(e=>{let r=Object.keys(t.att[e]).map(e=>({ability:e.split("/")[0],action:e.split("/")[1]}));r.sort((e,t)=>e.action.localeCompare(t.action));let s={};r.forEach(e=>{s[e.ability]||(s[e.ability]=[]),s[e.ability].push(e.action)});let o=Object.keys(s).map(t=>(n++,`(${n}) '${t}': '${s[t].join("', '")}' for '${e}'.`));i.push(o.join(", ").replace(".,","."))});let s=i.join(" "),o=`${r}${s}`;return`${e?e+" ":""}${o}`}(n,xY(p))),[r,i,"",n,"",s,o,a,h,u,f,c,l,d].filter(e=>null!=e).join(`
`)};function xW(e){if(!e)throw Error("No recap provided, value is undefined");if(!e.att)throw Error("No `att` property found");let t=Object.keys(e.att);if(!(null!=t&&t.length))throw Error("No resources found in `att` property");t.forEach(t=>{let r=e.att[t];if(Array.isArray(r)||"object"!=typeof r)throw Error(`Resource must be an object: ${t}`);if(!Object.keys(r).length)throw Error(`Resource object is empty: ${t}`);Object.keys(r).forEach(e=>{let t=r[e];if(!Array.isArray(t))throw Error(`Ability limits ${e} must be an array of objects, found: ${t}`);if(!t.length)throw Error(`Value of ${e} is empty array, must be an array with objects`);t.forEach(t=>{if("object"!=typeof t)throw Error(`Ability limits (${e}) must be an array of objects, found: ${t}`)})})})}function xG(e){return xW(e),`urn:recap:${F.from(JSON.stringify(e)).toString("base64").replace(/=/g,"")}`}function xY(e){var t;let r=(t=e.replace("urn:recap:",""),JSON.parse(F.from(t,"base64").toString("utf-8")));return xW(r),r}function xZ(e){var t;let r=xY(e);xW(r);let i=null==(t=r.att)?void 0:t.eip155;return i?Object.keys(i).map(e=>e.split("/")[1]):[]}function xJ(e){let t=xY(e);xW(t);let r=[];return Object.values(t.att).forEach(e=>{Object.values(e).forEach(e=>{var t;null!=(t=e?.[0])&&t.chains&&r.push(e[0].chains)})}),[...new Set(r.flat())]}function xX(e){if(!e)return;let t=e?.[e.length-1];return t&&t.includes("urn:recap:")?t:void 0}const xQ="base10",x0="base16",x1="base64pad",x3="base64url",x2="utf8";function x8(){let e=(0,mS.randomBytes)(32);return(0,D9.toString)(e,x0)}function x6(e){let t=(0,m$.hash)((0,D9.fromString)(e,x0));return(0,D9.toString)(t,x0)}function x5(e){let t=(0,m$.hash)((0,D9.fromString)(e,x2));return(0,D9.toString)(t,x0)}function x4(e){return(0,D9.fromString)(`${e}`,xQ)}function x9(e){return Number((0,D9.toString)(e,xQ))}function x7(e){let{encoding:t=x1}=e;if(2===x9(e.type))return(0,D9.toString)((0,D9.concat)([e.type,e.sealed]),t);if(1===x9(e.type)){if(typeof e.senderPublicKey>"u")throw Error("Missing sender public key for type 1 envelope");return(0,D9.toString)((0,D9.concat)([e.type,e.senderPublicKey,e.iv,e.sealed]),t)}return(0,D9.toString)((0,D9.concat)([e.type,e.iv,e.sealed]),t)}function Ee(e){let{encoded:t,encoding:r=x1}=e,i=(0,D9.fromString)(t,r),n=i.slice(0,1);if(1===x9(n)){let e=i.slice(1,33),t=i.slice(33,45);return{type:n,sealed:i.slice(45),iv:t,senderPublicKey:e}}if(2===x9(n))return{type:n,sealed:i.slice(1),iv:(0,mS.randomBytes)(12)};let s=i.slice(1,13);return{type:n,sealed:i.slice(13),iv:s}}function Et(e){let t=e?.type||0;if(1===t){if(typeof e?.senderPublicKey>"u")throw Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw Error("missing receiver public key")}return{type:t,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function Er(e){return 1===e.type&&"string"==typeof e.senderPublicKey&&"string"==typeof e.receiverPublicKey}function Ei(e){return e?.relay||{protocol:"irn"}}function En(e){let t=ua[e];if(typeof t>"u")throw Error(`Relay Protocol not supported: ${e}`);return t}var Es=Object.defineProperty,Eo=Object.defineProperties,Ea=Object.getOwnPropertyDescriptors,Eh=Object.getOwnPropertySymbols,Eu=Object.prototype.hasOwnProperty,Ef=Object.prototype.propertyIsEnumerable,Ec=(e,t,r)=>t in e?Es(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,El=(e,t)=>{for(var r in t||(t={}))Eu.call(t,r)&&Ec(e,r,t[r]);if(Eh)for(var r of Eh(t))Ef.call(t,r)&&Ec(e,r,t[r]);return e};function Ed(e){var t;if(!e.includes("wc:")){let t=xR(e);null!=t&&t.includes("wc:")&&(e=t)}let r=(e=(e=e.includes("wc://")?e.replace("wc://",""):e).includes("wc:")?e.replace("wc:",""):e).indexOf(":"),i=-1!==e.indexOf("?")?e.indexOf("?"):void 0,n=e.substring(0,r),s=e.substring(r+1,i).split("@"),o=DB("u">typeof i?e.substring(i):""),a="string"==typeof o.methods?o.methods.split(","):void 0;return{protocol:n,topic:(t=s[0]).startsWith("//")?t.substring(2):t,version:parseInt(s[1],10),symKey:o.symKey,relay:function(e,t="-"){let r={},i="relay"+t;return Object.keys(e).forEach(t=>{if(t.startsWith(i)){let n=t.replace(i,""),s=e[t];r[n]=s}}),r}(o),methods:a,expiryTimestamp:o.expiryTimestamp?parseInt(o.expiryTimestamp,10):void 0}}function Ep(e){return`${e.protocol}:${e.topic}@${e.version}?`+IT(El(Eo(El({symKey:e.symKey},function(e,t="-"){let r={};return Object.keys(e).forEach(i=>{e[i]&&(r["relay"+t+i]=e[i])}),r}(e.relay)),Ea({expiryTimestamp:e.expiryTimestamp})),e.methods?{methods:e.methods.join(",")}:{}))}function Eg(e,t,r){return`${e}?wc_ev=${r}&topic=${t}`}function Eb(e){let t=[];return e.forEach(e=>{let[r,i]=e.split(":");t.push(`${r}:${i}`)}),t}function Ey(e,t){let r=function(e){let t={};return e?.forEach(e=>{let[r,i]=e.split(":");t[r]||(t[r]={accounts:[],chains:[],events:[]}),t[r].accounts.push(e),t[r].chains.push(`${r}:${i}`)}),t}(t=t.map(e=>e.replace("did:pkh:","")));for(let[t,i]of Object.entries(r))i.methods?i.methods=function(e=[],t=[]){return[...new Set([...e,...t])]}(i.methods,e):i.methods=e,i.events=["chainChanged","accountsChanged"];return r}Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;const Em={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Ev={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Ew(e,t){let{message:r,code:i}=Ev[e];return{message:t?`${r} ${t}`:r,code:i}}function ED(e,t){let{message:r,code:i}=Em[e];return{message:t?`${r} ${t}`:r,code:i}}function Ex(e,t){return!!Array.isArray(e)&&(!("u">typeof t)||!e.length||e.every(t))}function EE(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function E_(e){return typeof e>"u"}function ES(e,t){return!!(t&&E_(e))||"string"==typeof e&&!!e.trim().length}function EI(e,t){return!!(t&&E_(e))||"number"==typeof e&&!isNaN(e)}function EA(e){return!!(ES(e,!1)&&e.includes(":"))&&2===e.split(":").length}function EM(e){let t=!0;return Ex(e)?e.length&&(t=e.every(e=>ES(e,!1))):t=!1,t}function EC(e,t){let r=null;return Object.values(e).forEach(e=>{var i;let n;if(r)return;let s=(i=`${t}, namespace`,n=null,EM(e?.methods)?EM(e?.events)||(n=ED("UNSUPPORTED_EVENTS",`${i}, events should be an array of strings or empty array for no events`)):n=ED("UNSUPPORTED_METHODS",`${i}, methods should be an array of strings or empty array for no methods`),n);s&&(r=s)}),r}function EO(e,t){let r=null;if(e&&EE(e)){let i,n=EC(e,t);n&&(r=n);let s=(i=null,Object.values(e).forEach(e=>{var r,n;let s;if(i)return;let o=(r=e?.accounts,n=`${t} namespace`,s=null,Ex(r)?r.forEach(e=>{s||function(e){if(ES(e,!1)&&e.includes(":")){let t=e.split(":");if(3===t.length){let e=t[0]+":"+t[1];return!!t[2]&&EA(e)}}return!1}(e)||(s=ED("UNSUPPORTED_ACCOUNTS",`${n}, account ${e} should be a string and conform to "namespace:chainId:address" format`))}):s=ED("UNSUPPORTED_ACCOUNTS",`${n}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),s);o&&(i=o)}),i);s&&(r=s)}else r=Ew("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return r}function EP(e){return ES(e.protocol,!0)}function ER(e){return"u">typeof e}function ET(e,t){return!(!EA(t)||!(function(e){let t=[];return Object.values(e).forEach(e=>{t.push(...Eb(e.accounts))}),t})(e).includes(t))}function EN(e,t,r){let i=null,n=function(e){let t={};return Object.keys(e).forEach(r=>{var i;r.includes(":")?t[r]=e[r]:null==(i=e[r].chains)||i.forEach(i=>{t[i]={methods:e[r].methods,events:e[r].events}})}),t}(e),s=function(e){let t={};return Object.keys(e).forEach(r=>{if(r.includes(":"))t[r]=e[r];else{let i=Eb(e[r].accounts);i?.forEach(i=>{t[i]={accounts:e[r].accounts.filter(e=>e.includes(`${i}:`)),methods:e[r].methods,events:e[r].events}})}}),t}(t),o=Object.keys(n),a=Object.keys(s),h=EB(Object.keys(e)),u=EB(Object.keys(t)),f=h.filter(e=>!u.includes(e));return f.length&&(i=Ew("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${f.toString()}
      Received: ${Object.keys(t).toString()}`)),xm(o,a)||(i=Ew("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(t).forEach(e=>{if(!e.includes(":")||i)return;let n=Eb(t[e].accounts);n.includes(e)||(i=Ew("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${e}
        Required: ${e}
        Approved: ${n.toString()}`))}),o.forEach(e=>{i||(xm(n[e].methods,s[e].methods)?xm(n[e].events,s[e].events)||(i=Ew("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${e}`)):i=Ew("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${e}`))}),i}function EB(e){return[...new Set(e.map(e=>e.includes(":")?e.split(":")[0]:e))]}function EL(){let e=xg();return new Promise(t=>{switch(e){case xl:t(xp()&&navigator?.onLine);break;case xc:t(Ek());break;default:t(!0)}})}async function Ek(){if(xd()&&"u">typeof t&&null!=t&&t.NetInfo){let e=await (null==t?void 0:t.NetInfo.fetch());return e?.isConnected}return!0}const EU={};class Ez{static get(e){return EU[e]}static set(e,t){EU[e]=t}static delete(e){delete EU[e]}}const Ej=e=>e.split("?")[0],Eq="u">typeof WebSocket?WebSocket:"u">typeof t&&"u">typeof t.WebSocket?t.WebSocket:"u">typeof window&&"u">typeof window.WebSocket?window.WebSocket:"u">typeof self&&"u">typeof self.WebSocket?self.WebSocket:s("fvaAM");class EF{constructor(e){if(this.url=e,this.events=new(0,a.EventEmitter),this.registering=!1,!d3(e))throw Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return"u">typeof this.socket}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,t)=>{if(typeof this.socket>"u")return void t(Error("Connection already closed"));this.socket.onclose=t=>{this.onClose(t),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(e_(e))}catch(t){this.onError(e.id,t)}}register(e=this.url){if(!d3(e))throw Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){let e=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=e||this.events.listenerCount("open")>=e)&&this.events.setMaxListeners(e+1),new Promise((e,t)=>{this.events.once("register_error",e=>{this.resetMaxListeners(),t(e)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return t(Error("WebSocket connection is missing or invalid"));e(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,i)=>{let n=new URLSearchParams(e).get("origin"),s=(0,dV.isReactNative)()?{headers:{origin:n}}:{rejectUnauthorized:!d2(e)},o=new Eq(e,[],s);"u">typeof WebSocket||"u">typeof t&&"u">typeof t.WebSocket||"u">typeof window&&"u">typeof window.WebSocket||"u">typeof self&&"u">typeof self.WebSocket?o.onerror=e=>{i(this.emitError(e.error))}:o.on("error",e=>{i(this.emitError(e))}),o.onopen=()=>{this.onOpen(o),r(o)}})}onOpen(e){e.onmessage=e=>this.onPayload(e),e.onclose=e=>this.onClose(e),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;let t="string"==typeof e.data?eE(e.data):e.data;this.events.emit("payload",t)}onError(e,t){let r=this.parseError(t),i=dX(e,r.message||r.toString());this.events.emit("payload",i)}parseError(e,t=this.url){return d$(e,Ej(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}emitError(e){let t=this.parseError(Error(e?.message||`WebSocket connection failed for host: ${Ej(this.url)}`));return this.events.emit("register_error",t),t}}var EH=s("6cqMT");const EK="core",E$=`wc@2:${EK}:`,EV={database:":memory:"},EW="client_ed25519_seed",EG=x.ONE_DAY,EY=x.SIX_HOURS,EZ="wss://relay.walletconnect.org",EJ="relayer_message",EX="relayer_message_ack",EQ="relayer_connection_stalled",E0="relayer_publish",E1="payload",E3="connect",E2="disconnect",E8="error",E6="2.17.1",E5="link_mode",E4="relay",E9="WALLETCONNECT_LINK_MODE_APPS",E7="subscription_created",_e="subscription_deleted",_t=(x.THIRTY_DAYS,1e3*x.FIVE_SECONDS),_r=(x.THIRTY_DAYS,{wc_pairingDelete:{req:{ttl:x.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:x.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:x.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:x.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:x.ONE_DAY,prompt:!1,tag:0},res:{ttl:x.ONE_DAY,prompt:!1,tag:0}}}),_i="pairing_create",_n="pairing_delete",_s="history_created",_o="history_updated",_a="history_deleted",_h="expirer_created",_u="expirer_deleted",_f="expirer_expired",_c=(x.ONE_DAY,"https://verify.walletconnect.org"),_l=`${_c}/v3`,_d=["https://verify.walletconnect.com",_c],_p="malformed_pairing_uri",_g="session_approve_started";var _b=function(e,t){if(e.length>=255)throw TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<e.length;n++){var s=e.charAt(n),o=s.charCodeAt(0);if(255!==r[o])throw TypeError(s+" is ambiguous");r[o]=n}var a=e.length,h=e.charAt(0),u=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function c(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[0]){for(var i=0,n=0;e[t]===h;)i++,t++;for(var s=(e.length-t)*u+1>>>0,o=new Uint8Array(s);e[t];){var f=r[e.charCodeAt(t)];if(255===f)return;for(var c=0,l=s-1;(0!==f||c<n)&&-1!==l;l--,c++)f+=a*o[l]>>>0,o[l]=f%256>>>0,f=f/256>>>0;if(0!==f)throw Error("Non-zero carry");n=c,t++}if(" "!==e[t]){for(var d=s-n;d!==s&&0===o[d];)d++;for(var p=new Uint8Array(i+(s-d)),g=i;d!==s;)p[g++]=o[d++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,i=0,n=0,s=t.length;n!==s&&0===t[n];)n++,r++;for(var o=(s-n)*f+1>>>0,u=new Uint8Array(o);n!==s;){for(var c=t[n],l=0,d=o-1;(0!==c||l<i)&&-1!==d;d--,l++)c+=256*u[d]>>>0,u[d]=c%a>>>0,c=c/a>>>0;if(0!==c)throw Error("Non-zero carry");i=l,n++}for(var p=o-i;p!==o&&0===u[p];)p++;for(var g=h.repeat(r);p<o;++p)g+=e.charAt(u[p]);return g},decodeUnsafe:c,decode:function(e){var r=c(e);if(r)return r;throw Error(`Non-${t} character`)}}};const _y=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw Error("Unknown type, must be binary type")};class _m{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class _v{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return _D(this,e)}}class _w{constructor(e){this.decoders=e}or(e){return _D(this,e)}decode(e){let t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const _D=(e,t)=>new _w({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class _x{constructor(e,t,r,i){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=i,this.encoder=new _m(e,t,r),this.decoder=new _v(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const _E=({name:e,prefix:t,encode:r,decode:i})=>new _x(e,t,r,i),__=({prefix:e,name:t,alphabet:r})=>{let{encode:i,decode:n}=_b(r,t);return _E({prefix:e,name:t,encode:i,decode:e=>_y(n(e))})},_S=({name:e,prefix:t,bitsPerChar:r,alphabet:i})=>_E({prefix:t,name:e,encode:e=>((e,t,r)=>{let i="="===t[t.length-1],n=(1<<r)-1,s="",o=0,a=0;for(let i=0;i<e.length;++i)for(a=a<<8|e[i],o+=8;o>r;)o-=r,s+=t[n&a>>o];if(o&&(s+=t[n&a<<r-o]),i)for(;s.length*r&7;)s+="=";return s})(e,i,r),decode:t=>((e,t,r,i)=>{let n={};for(let e=0;e<t.length;++e)n[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;let o=new Uint8Array(s*r/8|0),a=0,h=0,u=0;for(let t=0;t<s;++t){let s=n[e[t]];if(void 0===s)throw SyntaxError(`Non-${i} character`);h=h<<r|s,(a+=r)>=8&&(a-=8,o[u++]=255&h>>a)}if(a>=r||255&h<<8-a)throw SyntaxError("Unexpected end of data");return o})(t,i,r,e)});var _I=Object.freeze({__proto__:null,identity:_E({prefix:"\0",name:"identity",encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)})}),_A=Object.freeze({__proto__:null,base2:_S({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})}),_M=Object.freeze({__proto__:null,base8:_S({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})}),_C=Object.freeze({__proto__:null,base10:__({prefix:"9",name:"base10",alphabet:"0123456789"})}),_O=Object.freeze({__proto__:null,base16:_S({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper:_S({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})});const _P=_S({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),_R=_S({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),_T=_S({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),_N=_S({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),_B=_S({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),_L=_S({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),_k=_S({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});var _U=Object.freeze({__proto__:null,base32:_P,base32upper:_R,base32pad:_T,base32padupper:_N,base32hex:_B,base32hexupper:_L,base32hexpad:_k,base32hexpadupper:_S({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z:_S({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})}),_z=Object.freeze({__proto__:null,base36:__({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper:__({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})}),_j=Object.freeze({__proto__:null,base58btc:__({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr:__({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})});const _q=_S({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),_F=_S({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});var _H=Object.freeze({__proto__:null,base64:_q,base64pad:_F,base64url:_S({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad:_S({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})});const _K=Array.from("\uD83D\uDE80\uD83E\uDE90\uD83D\uDEF0\uD83C\uDF0C\uD83C\uDF11\uD83C\uDF12\uD83C\uDF13\uD83C\uDF14\uD83C\uDF15\uD83C\uDF16\uD83C\uDF17\uD83C\uDF18\uD83C\uDF0D\uD83C\uDF0F\uD83C\uDF0E\uD83D\uDC09\uD83D\uDCBB\uD83D\uDDA5\uD83D\uDCBE\uD83D\uDCBF\uD83D\uDE02\uD83D\uDE0D\uD83E\uDD23\uD83D\uDE0A\uD83D\uDE4F\uD83D\uDC95\uD83D\uDE2D\uD83D\uDE18\uD83D\uDC4D\uD83D\uDE05\uD83D\uDC4F\uD83D\uDE01\uD83D\uDD25\uD83E\uDD70\uD83D\uDC94\uD83D\uDC96\uD83D\uDC99\uD83D\uDE22\uD83E\uDD14\uD83D\uDE06\uD83D\uDE44\uD83D\uDCAA\uD83D\uDE09\uD83D\uDC4C\uD83E\uDD17\uD83D\uDC9C\uD83D\uDE14\uD83D\uDE0E\uD83D\uDE07\uD83C\uDF39\uD83E\uDD26\uD83C\uDF89\uD83D\uDC9E\uD83E\uDD37\uD83D\uDE31\uD83D\uDE0C\uD83C\uDF38\uD83D\uDE4C\uD83D\uDE0B\uD83D\uDC97\uD83D\uDC9A\uD83D\uDE0F\uD83D\uDC9B\uD83D\uDE42\uD83D\uDC93\uD83E\uDD29\uD83D\uDE04\uD83D\uDE00\uD83D\uDDA4\uD83D\uDE03\uD83D\uDCAF\uD83D\uDE48\uD83D\uDC47\uD83C\uDFB6\uD83D\uDE12\uD83E\uDD2D\uD83D\uDE1C\uD83D\uDC8B\uD83D\uDC40\uD83D\uDE2A\uD83D\uDE11\uD83D\uDCA5\uD83D\uDE4B\uD83D\uDE1E\uD83D\uDE29\uD83D\uDE21\uD83E\uDD2A\uD83D\uDC4A\uD83E\uDD73\uD83D\uDE25\uD83E\uDD24\uD83D\uDC49\uD83D\uDC83\uD83D\uDE33\uD83D\uDE1A\uD83D\uDE1D\uD83D\uDE34\uD83C\uDF1F\uD83D\uDE2C\uD83D\uDE43\uD83C\uDF40\uD83C\uDF37\uD83D\uDE3B\uD83D\uDE13\uD83E\uDD7A\uD83C\uDF08\uD83D\uDE08\uD83E\uDD18\uD83D\uDCA6\uD83D\uDE23\uD83C\uDFC3\uD83D\uDC90\uD83C\uDF8A\uD83D\uDC98\uD83D\uDE20\uD83D\uDE15\uD83C\uDF3A\uD83C\uDF82\uD83C\uDF3B\uD83D\uDE10\uD83D\uDD95\uD83D\uDC9D\uD83D\uDE4A\uD83D\uDE39\uD83D\uDDE3\uD83D\uDCAB\uD83D\uDC80\uD83D\uDC51\uD83C\uDFB5\uD83E\uDD1E\uD83D\uDE1B\uD83D\uDD34\uD83D\uDE24\uD83C\uDF3C\uD83D\uDE2B\uD83E\uDD19\uD83C\uDFC6\uD83E\uDD2B\uD83D\uDC48\uD83D\uDE2E\uD83D\uDE46\uD83C\uDF7B\uD83C\uDF43\uD83D\uDC36\uD83D\uDC81\uD83D\uDE32\uD83C\uDF3F\uD83E\uDDE1\uD83C\uDF81\uD83C\uDF1E\uD83C\uDF88\uD83D\uDC4B\uD83D\uDE30\uD83E\uDD28\uD83D\uDE36\uD83E\uDD1D\uD83D\uDEB6\uD83D\uDCB0\uD83C\uDF53\uD83D\uDCA2\uD83E\uDD1F\uD83D\uDE41\uD83D\uDEA8\uD83D\uDCA8\uD83E\uDD2C\uD83C\uDF80\uD83C\uDF7A\uD83E\uDD13\uD83D\uDE19\uD83D\uDC9F\uD83C\uDF31\uD83D\uDE16\uD83D\uDC76\uD83E\uDD74\uD83D\uDC8E\uD83D\uDCB8\uD83D\uDE28\uD83C\uDF1A\uD83E\uDD8B\uD83D\uDE37\uD83D\uDD7A\uD83D\uDE45\uD83D\uDE1F\uD83D\uDE35\uD83D\uDC4E\uD83E\uDD32\uD83E\uDD20\uD83E\uDD27\uD83D\uDCCC\uD83D\uDD35\uD83D\uDC85\uD83E\uDDD0\uD83D\uDC3E\uD83C\uDF52\uD83D\uDE17\uD83E\uDD11\uD83C\uDF0A\uD83E\uDD2F\uD83D\uDC37\uD83D\uDCA7\uD83D\uDE2F\uD83D\uDC86\uD83D\uDC46\uD83C\uDFA4\uD83D\uDE47\uD83C\uDF51\uD83C\uDF34\uD83D\uDCA3\uD83D\uDC38\uD83D\uDC8C\uD83D\uDCCD\uD83E\uDD40\uD83E\uDD22\uD83D\uDC45\uD83D\uDCA1\uD83D\uDCA9\uD83D\uDC50\uD83D\uDCF8\uD83D\uDC7B\uD83E\uDD10\uD83E\uDD2E\uD83C\uDFBC\uD83E\uDD75\uD83D\uDEA9\uD83C\uDF4E\uD83C\uDF4A\uD83D\uDC7C\uD83D\uDC8D\uD83D\uDCE3\uD83E\uDD42"),_$=_K.reduce((e,t,r)=>(e[r]=t,e),[]),_V=_K.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]);var _W=Object.freeze({__proto__:null,base256emoji:_E({prefix:"\uD83D\uDE80",name:"base256emoji",encode:function(e){return e.reduce((e,t)=>e+=_$[t],"")},decode:function(e){let t=[];for(let r of e){let e=_V[r.codePointAt(0)];if(void 0===e)throw Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}})});function _G(e,t,r){t=t||[],r=r||0;for(var i=r;e>=0x80000000;)t[r++]=255&e|128,e/=128;for(;-128&e;)t[r++]=255&e|128,e>>>=7;return t[r]=0|e,_G.bytes=r-i+1,t}const _Y=(e,t,r=0)=>(_G(e,t,r),t),_Z=e=>{var t;return(t=e)<128?1:t<16384?2:t<2097152?3:t<0x10000000?4:t<0x800000000?5:t<0x40000000000?6:t<0x2000000000000?7:t<0x100000000000000?8:t<0x8000000000000000?9:10},_J=(e,t)=>{let r=t.byteLength,i=_Z(e),n=i+_Z(r),s=new Uint8Array(n+r);return _Y(e,s,0),_Y(r,s,i),s.set(t,n),new _X(e,r,t,s)};class _X{constructor(e,t,r,i){this.code=e,this.size=t,this.digest=r,this.bytes=i}}const _Q=({name:e,code:t,encode:r})=>new _0(e,t,r);class _0{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?_J(this.code,t):t.then(e=>_J(this.code,e))}throw Error("Unknown type, must be binary type")}}const _1=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t));var _3=Object.freeze({__proto__:null,sha256:_Q({name:"sha2-256",code:18,encode:_1("SHA-256")}),sha512:_Q({name:"sha2-512",code:19,encode:_1("SHA-512")})}),_2=Object.freeze({__proto__:null,identity:{code:0,name:"identity",encode:_y,digest:e=>_J(0,_y(e))}});new TextEncoder,new TextDecoder;const _8={..._I,..._A,..._M,..._C,..._O,..._U,..._z,..._j,..._H,..._W};function _6(e,t,r,i){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:i}}}({..._3,..._2});const _5=_6("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),_4=_6("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{let t=function(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),_9={utf8:_5,"utf-8":_5,hex:_8.base16,latin1:_4,ascii:_4,binary:_4,..._8};class _7{constructor(e,t){this.core=e,this.logger=t,this.keychain=new Map,this.name="keychain",this.version="0.3",this.initialized=!1,this.storagePrefix=E$,this.init=async()=>{if(!this.initialized){let e=await this.getKeyChain();"u">typeof e&&(this.keychain=e),this.initialized=!0}},this.has=e=>(this.isInitialized(),this.keychain.has(e)),this.set=async(e,t)=>{this.isInitialized(),this.keychain.set(e,t),await this.persist()},this.get=e=>{this.isInitialized();let t=this.keychain.get(e);if(typeof t>"u"){let{message:t}=Ew("NO_MATCHING_KEY",`${this.name}: ${e}`);throw Error(t)}return t},this.del=async e=>{this.isInitialized(),this.keychain.delete(e),await this.persist()},this.core=e,this.logger=wx(t,this.name)}get context(){return wD(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,xv(e))}async getKeyChain(){let e=await this.core.storage.getItem(this.storageKey);return"u">typeof e?xw(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){let{message:e}=Ew("NOT_INITIALIZED",this.name);throw Error(e)}}}class Se{constructor(e,t,r){this.core=e,this.logger=t,this.name="crypto",this.randomSessionIdentifier=x8(),this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=e=>(this.isInitialized(),this.keychain.has(e)),this.getClientId=async()=>(this.isInitialized(),DD(DE(await this.getClientSeed()).publicKey)),this.generateKeyPair=()=>{this.isInitialized();let e=function(){let e=DZ.generateKeyPair();return{privateKey:(0,D9.toString)(e.secretKey,x0),publicKey:(0,D9.toString)(e.publicKey,x0)}}();return this.setPrivateKey(e.publicKey,e.privateKey)},this.signJWT=async e=>{this.isInitialized();let t=DE(await this.getClientSeed()),r=this.randomSessionIdentifier;return await D_(r,e,EG,t)},this.generateSharedKey=(e,t,r)=>{this.isInitialized();let i=function(e,t){let r=DZ.sharedKey((0,D9.fromString)(e,x0),(0,D9.fromString)(t,x0),!0),i=new(0,DV.HKDF)(m$.SHA256,r).expand(32);return(0,D9.toString)(i,x0)}(this.getPrivateKey(e),t);return this.setSymKey(i,r)},this.setSymKey=async(e,t)=>{this.isInitialized();let r=t||x6(e);return await this.keychain.set(r,e),r},this.deleteKeyPair=async e=>{this.isInitialized(),await this.keychain.del(e)},this.deleteSymKey=async e=>{this.isInitialized(),await this.keychain.del(e)},this.encode=async(e,t,r)=>{this.isInitialized();let i=Et(r),n=e_(t);if(2===i.type){var s=r?.encoding;let e=x4(2),t=(0,mS.randomBytes)(12);return x7({type:e,sealed:(0,D9.fromString)(n,x2),iv:t,encoding:s})}if(Er(i)){let t=i.senderPublicKey,r=i.receiverPublicKey;e=await this.generateSharedKey(t,r)}let o=this.getSymKey(e),{type:a,senderPublicKey:h}=i;return function(e){let t=x4("u">typeof e.type?e.type:0);if(1===x9(t)&&typeof e.senderPublicKey>"u")throw Error("Missing sender public key for type 1 envelope");let r="u">typeof e.senderPublicKey?(0,D9.fromString)(e.senderPublicKey,x0):void 0,i="u">typeof e.iv?(0,D9.fromString)(e.iv,x0):(0,mS.randomBytes)(12);return x7({type:t,sealed:new(0,Dk.ChaCha20Poly1305)((0,D9.fromString)(e.symKey,x0)).seal(i,(0,D9.fromString)(e.message,x2)),iv:i,senderPublicKey:r,encoding:e.encoding})}({type:a,symKey:o,message:n,senderPublicKey:h,encoding:r?.encoding})},this.decode=async(e,t,r)=>{this.isInitialized();let i=function(e,t){let r=Ee({encoded:e,encoding:t?.encoding});return Et({type:x9(r.type),senderPublicKey:"u">typeof r.senderPublicKey?(0,D9.toString)(r.senderPublicKey,x0):void 0,receiverPublicKey:t?.receiverPublicKey})}(t,r);if(2===i.type)return eE(function(e,t){let{sealed:r}=Ee({encoded:e,encoding:t});return(0,D9.toString)(r,x2)}(t,r?.encoding));if(Er(i)){let t=i.receiverPublicKey,r=i.senderPublicKey;e=await this.generateSharedKey(t,r)}try{let i=this.getSymKey(e),n=function(e){let t=new(0,Dk.ChaCha20Poly1305)((0,D9.fromString)(e.symKey,x0)),{sealed:r,iv:i}=Ee({encoded:e.encoded,encoding:e?.encoding}),n=t.open(i,r);if(null===n)throw Error("Failed to decrypt");return(0,D9.toString)(n,x2)}({symKey:i,encoded:t,encoding:r?.encoding});return eE(n)}catch(t){this.logger.error(`Failed to decode message from topic: '${e}', clientId: '${await this.getClientId()}'`),this.logger.error(t)}},this.getPayloadType=(e,t=x1)=>x9(Ee({encoded:e,encoding:t}).type),this.getPayloadSenderPublicKey=(e,t=x1)=>{let r=Ee({encoded:e,encoding:t});return r.senderPublicKey?(0,D9.toString)(r.senderPublicKey,x0):void 0},this.core=e,this.logger=wx(t,this.name),this.keychain=r||new _7(this.core,this.logger)}get context(){return wD(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(EW)}catch{e=x8(),await this.keychain.set(EW,e)}return function(e,t="utf8"){let r=_9[t];if(!r)throw Error(`Unsupported encoding "${t}"`);return("utf8"===t||"utf-8"===t)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?globalThis.Buffer.from(e,"utf8"):r.decoder.decode(`${r.prefix}${e}`)}(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){let{message:e}=Ew("NOT_INITIALIZED",this.name);throw Error(e)}}}class St extends wS{constructor(e,t){super(e,t),this.logger=e,this.core=t,this.messages=new Map,this.name="messages",this.version="0.3",this.initialized=!1,this.storagePrefix=E$,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{let e=await this.getRelayerMessages();"u">typeof e&&(this.messages=e),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}finally{this.initialized=!0}}},this.set=async(e,t)=>{this.isInitialized();let r=x5(t),i=this.messages.get(e);return typeof i>"u"&&(i={}),"u">typeof i[r]||(i[r]=t,this.messages.set(e,i),await this.persist()),r},this.get=e=>{this.isInitialized();let t=this.messages.get(e);return typeof t>"u"&&(t={}),t},this.has=(e,t)=>(this.isInitialized(),"u">typeof this.get(e)[x5(t)]),this.del=async e=>{this.isInitialized(),this.messages.delete(e),await this.persist()},this.logger=wx(e,this.name),this.core=t}get context(){return wD(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,xv(e))}async getRelayerMessages(){let e=await this.core.storage.getItem(this.storageKey);return"u">typeof e?xw(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){let{message:e}=Ew("NOT_INITIALIZED",this.name);throw Error(e)}}}class Sr extends wI{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.events=new(0,a.EventEmitter),this.name="publisher",this.queue=new Map,this.publishTimeout=(0,x.toMiliseconds)(x.ONE_MINUTE),this.failedPublishTimeout=(0,x.toMiliseconds)(x.ONE_SECOND),this.needsTransportRestart=!1,this.publish=async(e,t,r)=>{var i;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:e,message:t,opts:r}});let n=r?.ttl||EY,s=Ei(r),o=r?.prompt||!1,a=r?.tag||0,h=r?.id||dY().toString(),u={topic:e,message:t,opts:{ttl:n,relay:s,prompt:o,tag:a,id:h,attestation:r?.attestation}},f=`Failed to publish payload, please try again. id:${h} tag:${a}`,c=Date.now(),l,d=1;try{for(;void 0===l;){if(Date.now()-c>this.publishTimeout)throw Error(f);this.logger.trace({id:h,attempts:d},`publisher.publish - attempt ${d}`),l=await await xx(this.rpcPublish(e,t,n,s,o,a,h,r?.attestation).catch(e=>this.logger.warn(e)),this.publishTimeout,f),d++,l||await new Promise(e=>setTimeout(e,this.failedPublishTimeout))}this.relayer.events.emit(E0,u),this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{id:h,topic:e,message:t,opts:r}})}catch(e){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(e),null!=(i=r?.internal)&&i.throwOnFailedPublish)throw e;this.queue.set(h,u)}},this.on=(e,t)=>{this.events.on(e,t)},this.once=(e,t)=>{this.events.once(e,t)},this.off=(e,t)=>{this.events.off(e,t)},this.removeListener=(e,t)=>{this.events.removeListener(e,t)},this.relayer=e,this.logger=wx(t,this.name),this.registerEventListeners()}get context(){return wD(this.logger)}rpcPublish(e,t,r,i,n,s,o,a){var h,u,f,c;let l={method:En(i.protocol).publish,params:{topic:e,message:t,ttl:r,prompt:n,tag:s,attestation:a},id:o};return E_(null==(h=l.params)?void 0:h.prompt)&&(null==(u=l.params)||delete u.prompt),E_(null==(f=l.params)?void 0:f.tag)&&(null==(c=l.params)||delete c.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:l}),this.relayer.request(l)}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{let{topic:t,message:r,opts:i}=e;await this.publish(t,r,i)})}registerEventListeners(){this.relayer.core.heartbeat.on(A,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(EQ);return}this.checkQueue()}),this.relayer.on(EX,e=>{this.removeRequestFromQueue(e.id.toString())})}}class Si{constructor(){this.map=new Map,this.set=(e,t)=>{let r=this.get(e);this.exists(e,t)||this.map.set(e,[...r,t])},this.get=e=>this.map.get(e)||[],this.exists=(e,t)=>this.get(e).includes(t),this.delete=(e,t)=>{if(typeof t>"u")return void this.map.delete(e);if(!this.map.has(e))return;let r=this.get(e);if(!this.exists(e,t))return;let i=r.filter(e=>e!==t);if(!i.length)return void this.map.delete(e);this.map.set(e,i)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var Sn=Object.defineProperty,Ss=Object.defineProperties,So=Object.getOwnPropertyDescriptors,Sa=Object.getOwnPropertySymbols,Sh=Object.prototype.hasOwnProperty,Su=Object.prototype.propertyIsEnumerable,Sf=(e,t,r)=>t in e?Sn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Sc=(e,t)=>{for(var r in t||(t={}))Sh.call(t,r)&&Sf(e,r,t[r]);if(Sa)for(var r of Sa(t))Su.call(t,r)&&Sf(e,r,t[r]);return e},Sl=(e,t)=>Ss(e,So(t));class Sd extends wC{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.subscriptions=new Map,this.topicMap=new Si,this.events=new(0,a.EventEmitter),this.name="subscription",this.version="0.3",this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=E$,this.subscribeTimeout=(0,x.toMiliseconds)(x.ONE_MINUTE),this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.pendingBatchMessages=[],this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId(),await this.restore()),this.initialized=!0},this.subscribe=async(e,t)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:e,opts:t}});try{let r=Ei(t),i={topic:e,relay:r,transportType:t?.transportType};this.pending.set(e,i);let n=await this.rpcSubscribe(e,r,t);return"string"==typeof n&&(this.onSubscribe(n,i),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:e,opts:t}})),n}catch(e){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(e),e}},this.unsubscribe=async(e,t)=>{await this.restartToComplete(),this.isInitialized(),"u">typeof t?.id?await this.unsubscribeById(e,t.id,t):await this.unsubscribeByTopic(e,t)},this.isSubscribed=async e=>{if(this.topics.includes(e))return!0;let t=`${this.pendingSubscriptionWatchLabel}_${e}`;return await new Promise((r,i)=>{let n=new(0,x.Watch);n.start(t);let s=setInterval(()=>{!this.pending.has(e)&&this.topics.includes(e)&&(clearInterval(s),n.stop(t),r(!0)),n.elapsed(t)>=_t&&(clearInterval(s),n.stop(t),i(Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1)},this.on=(e,t)=>{this.events.on(e,t)},this.once=(e,t)=>{this.events.once(e,t)},this.off=(e,t)=>{this.events.off(e,t)},this.removeListener=(e,t)=>{this.events.removeListener(e,t)},this.start=async()=>{await this.onConnect()},this.stop=async()=>{await this.onDisconnect()},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=wx(t,this.name),this.clientId=""}get context(){return wD(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,t){let r=!1;try{r=this.getSubscription(e).topic===t}catch{}return r}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){let r=this.topicMap.get(e);await Promise.all(r.map(async r=>await this.unsubscribeById(e,r,t)))}async unsubscribeById(e,t,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}});try{let i=Ei(r);await this.rpcUnsubscribe(e,t,i);let n=ED("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,n),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}})}catch(e){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(e),e}}async rpcSubscribe(e,t,r){var i;r?.transportType===E4&&await this.restartToComplete();let n={method:En(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});let s=null==(i=r?.internal)?void 0:i.throwOnFailedPublish;try{let t=x5(e+this.clientId);if(r?.transportType===E5)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(n).catch(e=>this.logger.warn(e))},(0,x.toMiliseconds)(x.ONE_SECOND)),t;let i=await xx(this.relayer.request(n).catch(e=>this.logger.warn(e)),this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!i&&s)throw Error(`Subscribing to ${e} failed, please try again`);return i?t:null}catch(e){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(EQ),s)throw e}return null}async rpcBatchSubscribe(e){if(!e.length)return;let t={method:En(e[0].relay.protocol).batchSubscribe,params:{topics:e.map(e=>e.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:t});try{return await await xx(this.relayer.request(t).catch(e=>this.logger.warn(e)),this.subscribeTimeout)}catch{this.relayer.events.emit(EQ)}}async rpcBatchFetchMessages(e){let t;if(!e.length)return;let r={method:En(e[0].relay.protocol).batchFetchMessages,params:{topics:e.map(e=>e.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{t=await await xx(this.relayer.request(r).catch(e=>this.logger.warn(e)),this.subscribeTimeout)}catch{this.relayer.events.emit(EQ)}return t}rpcUnsubscribe(e,t,r){let i={method:En(r.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,t){this.setSubscription(e,Sl(Sc({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(e=>{this.setSubscription(e.id,Sc({},e)),this.pending.delete(e.topic)})}async onUnsubscribe(e,t,r){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t)}addSubscription(e,t){this.subscriptions.set(e,Sc({},t)),this.topicMap.set(t.topic,e),this.events.emit(E7,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});let t=this.subscriptions.get(e);if(!t){let{message:t}=Ew("NO_MATCHING_KEY",`${this.name}: ${e}`);throw Error(t)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});let r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(_e,Sl(Sc({},r),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit("subscription_sync")}async reset(){if(this.cached.length){let e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let t=0;t<e;t++){let e=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchFetchMessages(e),await this.batchSubscribe(e)}}this.events.emit("subscription_resubscribed")}async restore(){try{let e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){let{message:e}=Ew("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),Error(e)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;let t=await this.rpcBatchSubscribe(e);Ex(t)&&this.onBatchSubscribe(t.map((t,r)=>Sl(Sc({},e[r]),{id:t})))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);let t=await this.rpcBatchFetchMessages(e);t&&t.messages&&(this.pendingBatchMessages=this.pendingBatchMessages.concat(t.messages))}async onConnect(){await this.restart(),this.onEnable()}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||!this.relayer.connected)return;let e=[];this.pending.forEach(t=>{e.push(t)}),await this.batchSubscribe(e),this.pendingBatchMessages.length&&(await this.relayer.handleBatchMessageEvents(this.pendingBatchMessages),this.pendingBatchMessages=[])}registerEventListeners(){this.relayer.core.heartbeat.on(A,async()=>{await this.checkPending()}),this.events.on(E7,async e=>{this.logger.info(`Emitting ${E7}`),this.logger.debug({type:"event",event:E7,data:e}),await this.persist()}),this.events.on(_e,async e=>{this.logger.info(`Emitting ${_e}`),this.logger.debug({type:"event",event:_e,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){let{message:e}=Ew("NOT_INITIALIZED",this.name);throw Error(e)}}async restartToComplete(){this.relayer.connected||this.relayer.connecting||await this.relayer.transportOpen(),this.restartInProgress&&await new Promise(e=>{let t=setInterval(()=>{this.restartInProgress||(clearInterval(t),e())},this.pollingInterval)})}}var Sp=Object.defineProperty,Sg=Object.getOwnPropertySymbols,Sb=Object.prototype.hasOwnProperty,Sy=Object.prototype.propertyIsEnumerable,Sm=(e,t,r)=>t in e?Sp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Sv=(e,t)=>{for(var r in t||(t={}))Sb.call(t,r)&&Sm(e,r,t[r]);if(Sg)for(var r of Sg(t))Sy.call(t,r)&&Sm(e,r,t[r]);return e};class Sw extends wA{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new(0,a.EventEmitter),this.name="relayer",this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","stalled","interrupted"],this.hasExperiencedNetworkDisruption=!1,this.requestsInFlight=new Map,this.heartBeatTimeout=(0,x.toMiliseconds)(x.THIRTY_SECONDS+x.ONE_SECOND),this.request=async e=>{var t,r;this.logger.debug("Publishing Request Payload");let i=e.id||dY().toString();await this.toEstablishConnection();try{let n=this.provider.request(e);this.requestsInFlight.set(i,{promise:n,request:e}),this.logger.trace({id:i,method:e.method,topic:null==(t=e.params)?void 0:t.topic},"relayer.request - attempt to publish...");let s=await new Promise(async(e,t)=>{let r=()=>{t(Error(`relayer.request - publish interrupted, id: ${i}`))};this.provider.on(E2,r);let s=await n;this.provider.off(E2,r),e(s)});return this.logger.trace({id:i,method:e.method,topic:null==(r=e.params)?void 0:r.topic},"relayer.request - published"),s}catch(e){throw this.logger.debug(`Failed to Publish Request: ${i}`),e}finally{this.requestsInFlight.delete(i)}},this.resetPingTimeout=()=>{},this.onPayloadHandler=e=>{this.onProviderPayload(e),this.resetPingTimeout()},this.onConnectHandler=()=>{this.logger.trace("relayer connected"),this.startPingTimeout(),this.events.emit("relayer_connect")},this.onDisconnectHandler=()=>{this.logger.trace("relayer disconnected"),this.onProviderDisconnect()},this.onProviderErrorHandler=e=>{this.logger.error(e),this.events.emit("relayer_error",e),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(E1,this.onPayloadHandler),this.provider.on(E3,this.onConnectHandler),this.provider.on(E2,this.onDisconnectHandler),this.provider.on(E8,this.onProviderErrorHandler)},this.core=e.core,this.logger="u">typeof e.logger&&"string"!=typeof e.logger?wx(e.logger,this.name):r(v2)(ww({level:e.logger||"error"})),this.messages=new St(this.logger,e.core),this.subscriber=new Sd(this,this.logger),this.publisher=new Sr(this,this.logger),this.relayUrl=e?.relayUrl||EZ,this.projectId=e.projectId,this.bundleId=function(){var e;try{return xd()&&"u">typeof t&&"u">typeof(null==t?void 0:t.Application)?null==(e=t.Application)?void 0:e.applicationId:void 0}catch{return}}(),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.cached.length>0)try{await this.transportOpen()}catch(e){this.logger.warn(e)}}get context(){return wD(this.logger)}get connected(){var e,t,r;return(null==(r=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:r.readyState)===1}get connecting(){var e,t,r;return(null==(r=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:r.readyState)===0}async publish(e,t,r){this.isInitialized(),await this.publisher.publish(e,t,r),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now(),transportType:E4})}async subscribe(e,t){var r,i,n;this.isInitialized(),t?.transportType==="relay"&&await this.toEstablishConnection();let s=typeof(null==(r=t?.internal)?void 0:r.throwOnFailedPublish)>"u"||(null==(i=t?.internal)?void 0:i.throwOnFailedPublish),o=(null==(n=this.subscriber.topicMap.get(e))?void 0:n[0])||"",a,h=t=>{t.topic===e&&(this.subscriber.off(E7,h),a())};return await Promise.all([new Promise(e=>{a=e,this.subscriber.on(E7,h)}),new Promise(async(r,i)=>{o=await this.subscriber.subscribe(e,Sv({internal:{throwOnFailedPublish:s}},t)).catch(e=>{s&&i(e)})||o,r()})]),o}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportDisconnect(){if(!this.hasExperiencedNetworkDisruption&&this.connected&&this.requestsInFlight.size>0)try{await Promise.all(Array.from(this.requestsInFlight.values()).map(e=>e.promise))}catch(e){this.logger.warn(e)}this.hasExperiencedNetworkDisruption||this.connected?await xx(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),await this.createProvider(),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;try{await new Promise(async(e,t)=>{let r=()=>{this.provider.off(E2,r),t(Error("Connection interrupted while trying to subscribe"))};this.provider.on(E2,r),await xx(this.provider.connect(),(0,x.toMiliseconds)(x.ONE_MINUTE),`Socket stalled when trying to connect to ${this.relayUrl}`).catch(e=>{t(e)}).finally(()=>{clearTimeout(this.reconnectTimeout),this.reconnectTimeout=void 0}),this.subscriber.start().catch(e=>{this.logger.error(e),this.onDisconnectHandler()}),this.hasExperiencedNetworkDisruption=!1,e()})}catch(e){if(this.logger.error(e),this.hasExperiencedNetworkDisruption=!0,!this.isConnectionStalled(e.message))throw e}finally{this.connectionAttemptInProgress=!1}}async restartTransport(e){this.connectionAttemptInProgress||(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await EL())throw Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if(e?.length===0)return void this.logger.trace("Batch message events is empty. Ignoring...");let t=e.sort((e,t)=>e.publishedAt-t.publishedAt);for(let e of(this.logger.trace(`Batch of ${t.length} message events sorted`),t))try{await this.onMessageEvent(e)}catch(e){this.logger.warn(e)}this.logger.trace(`Batch of ${t.length} message events processed`)}async onLinkMessageEvent(e,t){let{topic:r}=e;if(!t.sessionExists){let e=xS(x.FIVE_MINUTES);await this.core.pairing.pairings.set(r,{topic:r,expiry:e,relay:{protocol:"irn"},active:!1})}this.events.emit(EJ,e),await this.recordMessageEvent(e)}startPingTimeout(){}isConnectionStalled(e){return this.staleConnectionErrors.some(t=>e.includes(t))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();let e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new d7(new EF(function({protocol:e,version:t,relayUrl:r,sdkVersion:i,auth:n,projectId:s,useOnCloseEvent:o,bundleId:a}){var h,u;let f=r.split("?"),c=xy(e,t,i),l=(h=f[1]||"",u={auth:n,ua:c,projectId:s,useOnCloseEvent:o||void 0,origin:a||void 0},IT(xf(xf({},DB(h)),u)));return f[0]+"?"+l}({sdkVersion:E6,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId}))),this.registerProviderListeners()}async recordMessageEvent(e){let{topic:t,message:r}=e;await this.messages.set(t,r)}async shouldIgnoreMessageEvent(e){let{topic:t,message:r}=e;if(!r||0===r.length)return this.logger.debug(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isSubscribed(t))return this.logger.debug(`Ignoring message for non-subscribed topic ${t}`),!0;let i=this.messages.has(t,r);return i&&this.logger.debug(`Ignoring duplicate message: ${r}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),d6(e)){if(!e.method.endsWith("_subscription"))return;let t=e.params,{topic:r,message:i,publishedAt:n,attestation:s}=t.data,o={topic:r,message:i,publishedAt:n,transportType:E4,attestation:s};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Sv({type:"event",event:t.id},o)),this.events.emit(t.id,o),await this.acknowledgePayload(e),await this.onMessageEvent(o)}else d5(e)&&this.events.emit(EX,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(EJ,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){let t=dJ(e.id,!0);await this.provider.connection.send(t)}unregisterProviderListeners(){this.provider.off(E1,this.onPayloadHandler),this.provider.off(E3,this.onConnectHandler),this.provider.off(E2,this.onDisconnectHandler),this.provider.off(E8,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await EL();var r,i,n=async t=>{e!==t&&(e=t,t?await this.restartTransport().catch(e=>this.logger.error(e)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))};switch(xg()){case xl:r=n,!xd()&&xp()&&(window.addEventListener("online",()=>r(!0)),window.addEventListener("offline",()=>r(!1)));break;case xc:i=n,xd()&&"u">typeof t&&null!=t&&t.NetInfo&&t?.NetInfo.addEventListener(e=>i(e?.isConnected))}}async onProviderDisconnect(){await this.subscriber.stop(),this.requestsInFlight.clear(),clearTimeout(this.pingTimeout),this.events.emit("relayer_disconnect"),this.connectionAttemptInProgress=!1,!this.transportExplicitlyClosed&&(this.reconnectTimeout||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e))},(0,x.toMiliseconds)(.1))))}isInitialized(){if(!this.initialized){let{message:e}=Ew("NOT_INITIALIZED",this.name);throw Error(e)}}async toEstablishConnection(){await this.confirmOnlineStateOrThrow(),this.connected||(this.connectionAttemptInProgress&&await new Promise(e=>{let t=setInterval(()=>{this.connected&&(clearInterval(t),e())},this.connectionStatusPollingInterval)}),await this.transportOpen())}}var SD=Object.defineProperty,Sx=Object.getOwnPropertySymbols,SE=Object.prototype.hasOwnProperty,S_=Object.prototype.propertyIsEnumerable,SS=(e,t,r)=>t in e?SD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,SI=(e,t)=>{for(var r in t||(t={}))SE.call(t,r)&&SS(e,r,t[r]);if(Sx)for(var r of Sx(t))S_.call(t,r)&&SS(e,r,t[r]);return e};class SA extends wM{constructor(e,t,i,n=E$,s){super(e,t,i,n),this.core=e,this.logger=t,this.name=i,this.map=new Map,this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=E$,this.recentlyDeleted=[],this.recentlyDeletedLimit=200,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(e=>{var t;this.getKey&&null!==e&&!E_(e)?this.map.set(this.getKey(e),e):(null==(t=e?.proposer)?void 0:t.publicKey)?this.map.set(e.id,e):e?.topic&&this.map.set(e.topic,e)}),this.cached=[],this.initialized=!0)},this.set=async(e,t)=>{this.isInitialized(),this.map.has(e)?await this.update(e,t):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:e,value:t}),this.map.set(e,t),await this.persist())},this.get=e=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:e}),this.getData(e)),this.getAll=e=>(this.isInitialized(),e?this.values.filter(t=>Object.keys(e).every(i=>r(EH)(t[i],e[i]))):this.values),this.update=async(e,t)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:e,update:t});let r=SI(SI({},this.getData(e)),t);this.map.set(e,r),await this.persist()},this.delete=async(e,t)=>{this.isInitialized(),this.map.has(e)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:e,reason:t}),this.map.delete(e),this.addToRecentlyDeleted(e),await this.persist())},this.logger=wx(t,this.name),this.storagePrefix=n,this.getKey=s}get context(){return wD(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){let t=this.map.get(e);if(!t){if(this.recentlyDeleted.includes(e)){let{message:t}=Ew("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(t),Error(t)}let{message:t}=Ew("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(t),Error(t)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{let e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){let{message:e}=Ew("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),Error(e)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){let{message:e}=Ew("NOT_INITIALIZED",this.name);throw Error(e)}}}class SM{constructor(e,t){this.core=e,this.logger=t,this.name="pairing",this.version="0.3",this.events=new(r(a)),this.initialized=!1,this.storagePrefix=E$,this.ignoredPayloadTypes=[1],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:e})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...e])]},this.create=async e=>{this.isInitialized();let t=x8(),r=await this.core.crypto.setSymKey(t),i=xS(x.FIVE_MINUTES),n={protocol:"irn"},s={topic:r,expiry:i,relay:n,active:!1,methods:e?.methods},o=Ep({protocol:this.core.protocol,version:this.core.version,topic:r,symKey:t,relay:n,expiryTimestamp:i,methods:e?.methods});return this.events.emit(_i,s),this.core.expirer.set(r,i),await this.pairings.set(r,s),await this.core.relayer.subscribe(r,{transportType:e?.transportType}),{topic:r,uri:o}},this.pair=async e=>{let t;this.isInitialized();let r=this.core.eventClient.createEvent({properties:{topic:e?.uri,trace:["pairing_started"]}});this.isValidPair(e,r);let{topic:i,symKey:n,relay:s,expiryTimestamp:o,methods:a}=Ed(e.uri);if(r.props.properties.topic=i,r.addTrace("pairing_uri_validation_success"),r.addTrace("pairing_uri_not_expired"),this.pairings.keys.includes(i)){if(t=this.pairings.get(i),r.addTrace("existing_pairing"),t.active)throw r.setError("active_pairing_already_exists"),Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);r.addTrace("pairing_not_expired")}let h=o||xS(x.FIVE_MINUTES),u={topic:i,relay:s,expiry:h,active:!1,methods:a};this.core.expirer.set(i,h),await this.pairings.set(i,u),r.addTrace("store_new_pairing"),e.activatePairing&&await this.activate({topic:i}),this.events.emit(_i,u),r.addTrace("emit_inactive_pairing"),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(n,i),r.addTrace("subscribing_pairing_topic");try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{r.setError("no_internet_connection")}try{await this.core.relayer.subscribe(i,{relay:s})}catch(e){throw r.setError("subscribe_pairing_topic_failure"),e}return r.addTrace("subscribe_pairing_topic_success"),u},this.activate=async({topic:e})=>{this.isInitialized();let t=xS(x.THIRTY_DAYS);this.core.expirer.set(e,t),await this.pairings.update(e,{active:!0,expiry:t})},this.ping=async e=>{this.isInitialized(),await this.isValidPing(e);let{topic:t}=e;if(this.pairings.keys.includes(t)){let e=await this.sendRequest(t,"wc_pairingPing",{}),{done:r,resolve:i,reject:n}=xD();this.events.once(xA("pairing_ping",e),({error:e})=>{e?n(e):i()}),await r()}},this.updateExpiry=async({topic:e,expiry:t})=>{this.isInitialized(),await this.pairings.update(e,{expiry:t})},this.updateMetadata=async({topic:e,metadata:t})=>{this.isInitialized(),await this.pairings.update(e,{peerMetadata:t})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async e=>{this.isInitialized(),await this.isValidDisconnect(e);let{topic:t}=e;this.pairings.keys.includes(t)&&(await this.sendRequest(t,"wc_pairingDelete",ED("USER_DISCONNECTED")),await this.deletePairing(t))},this.formatUriFromPairing=e=>{this.isInitialized();let{topic:t,relay:r,expiry:i,methods:n}=e,s=this.core.crypto.keychain.get(t);return Ep({protocol:this.core.protocol,version:this.core.version,topic:t,symKey:s,relay:r,expiryTimestamp:i,methods:n})},this.sendRequest=async(e,t,r)=>{let i=dZ(t,r),n=await this.core.crypto.encode(e,i),s=_r[t].req;return this.core.history.set(e,i),this.core.relayer.publish(e,n,s),i.id},this.sendResult=async(e,t,r)=>{let i=dJ(e,r),n=await this.core.crypto.encode(t,i),s=_r[(await this.core.history.get(t,e)).request.method].res;await this.core.relayer.publish(t,n,s),await this.core.history.resolve(i)},this.sendError=async(e,t,r)=>{let i=dX(e,r),n=await this.core.crypto.encode(t,i),s=await this.core.history.get(t,e),o=_r[s.request.method]?_r[s.request.method].res:_r.unregistered_method.res;await this.core.relayer.publish(t,n,o),await this.core.history.resolve(i)},this.deletePairing=async(e,t)=>{await this.core.relayer.unsubscribe(e),await Promise.all([this.pairings.delete(e,ED("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(e),t?Promise.resolve():this.core.expirer.del(e)])},this.cleanup=async()=>{let e=this.pairings.getAll().filter(e=>xI(e.expiry));await Promise.all(e.map(e=>this.deletePairing(e.topic)))},this.onRelayEventRequest=e=>{let{topic:t,payload:r}=e;switch(r.method){case"wc_pairingPing":return this.onPairingPingRequest(t,r);case"wc_pairingDelete":return this.onPairingDeleteRequest(t,r);default:return this.onUnknownRpcMethodRequest(t,r)}},this.onRelayEventResponse=async e=>{let{topic:t,payload:r}=e,i=(await this.core.history.get(t,r.id)).request.method;return"wc_pairingPing"===i?this.onPairingPingResponse(t,r):this.onUnknownRpcMethodResponse(i)},this.onPairingPingRequest=async(e,t)=>{let{id:r}=t;try{this.isValidPing({topic:e}),await this.sendResult(r,e,!0),this.events.emit("pairing_ping",{id:r,topic:e})}catch(t){await this.sendError(r,e,t),this.logger.error(t)}},this.onPairingPingResponse=(e,t)=>{let{id:r}=t;setTimeout(()=>{d4(t)?this.events.emit(xA("pairing_ping",r),{}):d9(t)&&this.events.emit(xA("pairing_ping",r),{error:t.error})},500)},this.onPairingDeleteRequest=async(e,t)=>{let{id:r}=t;try{this.isValidDisconnect({topic:e}),await this.deletePairing(e),this.events.emit(_n,{id:r,topic:e})}catch(t){await this.sendError(r,e,t),this.logger.error(t)}},this.onUnknownRpcMethodRequest=async(e,t)=>{let{id:r,method:i}=t;try{if(this.registeredMethods.includes(i))return;let t=ED("WC_METHOD_UNSUPPORTED",i);await this.sendError(r,e,t),this.logger.error(t)}catch(t){await this.sendError(r,e,t),this.logger.error(t)}},this.onUnknownRpcMethodResponse=e=>{this.registeredMethods.includes(e)||this.logger.error(ED("WC_METHOD_UNSUPPORTED",e))},this.isValidPair=(e,t)=>{var r;if(!ER(e)){let{message:r}=Ew("MISSING_OR_INVALID",`pair() params: ${e}`);throw t.setError(_p),Error(r)}if(!function(e){function t(e){try{return"u">typeof new URL(e)}catch{return!1}}try{if(ES(e,!1)){if(t(e))return!0;let r=xR(e);return t(r)}}catch{}return!1}(e.uri)){let{message:r}=Ew("MISSING_OR_INVALID",`pair() uri: ${e.uri}`);throw t.setError(_p),Error(r)}let i=Ed(e?.uri);if(!(null!=(r=i?.relay)&&r.protocol)){let{message:e}=Ew("MISSING_OR_INVALID","pair() uri#relay-protocol");throw t.setError(_p),Error(e)}if(!(null!=i&&i.symKey)){let{message:e}=Ew("MISSING_OR_INVALID","pair() uri#symKey");throw t.setError(_p),Error(e)}if(null!=i&&i.expiryTimestamp&&(0,x.toMiliseconds)(i?.expiryTimestamp)<Date.now()){t.setError("pairing_expired");let{message:e}=Ew("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw Error(e)}},this.isValidPing=async e=>{if(!ER(e)){let{message:t}=Ew("MISSING_OR_INVALID",`ping() params: ${e}`);throw Error(t)}let{topic:t}=e;await this.isValidPairingTopic(t)},this.isValidDisconnect=async e=>{if(!ER(e)){let{message:t}=Ew("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw Error(t)}let{topic:t}=e;await this.isValidPairingTopic(t)},this.isValidPairingTopic=async e=>{if(!ES(e,!1)){let{message:t}=Ew("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw Error(t)}if(!this.pairings.keys.includes(e)){let{message:t}=Ew("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw Error(t)}if(xI(this.pairings.get(e).expiry)){await this.deletePairing(e);let{message:t}=Ew("EXPIRED",`pairing topic: ${e}`);throw Error(t)}},this.core=e,this.logger=wx(t,this.name),this.pairings=new SA(this.core,this.logger,this.name,this.storagePrefix)}get context(){return wD(this.logger)}isInitialized(){if(!this.initialized){let{message:e}=Ew("NOT_INITIALIZED",this.name);throw Error(e)}}registerRelayerEvents(){this.core.relayer.on(EJ,async e=>{let{topic:t,message:r,transportType:i}=e;if(!this.pairings.keys.includes(t)||i===E5||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))return;let n=await this.core.crypto.decode(t,r);try{d6(n)?(this.core.history.set(t,n),this.onRelayEventRequest({topic:t,payload:n})):d5(n)&&(await this.core.history.resolve(n),await this.onRelayEventResponse({topic:t,payload:n}),this.core.history.delete(t,n.id))}catch(e){this.logger.error(e)}})}registerExpirerEvents(){this.core.expirer.on(_f,async e=>{let{topic:t}=x_(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit("pairing_expire",{topic:t}))})}}class SC extends w_{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.records=new Map,this.events=new(0,a.EventEmitter),this.name="history",this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=E$,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(e=>this.records.set(e.id,e)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(e,t,r)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:e,request:t,chainId:r}),this.records.has(t.id))return;let i={id:t.id,topic:e,request:{method:t.method,params:t.params||null},chainId:r,expiry:xS(x.THIRTY_DAYS)};this.records.set(i.id,i),this.persist(),this.events.emit(_s,i)},this.resolve=async e=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:e}),!this.records.has(e.id))return;let t=await this.getRecord(e.id);typeof t.response>"u"&&(t.response=d9(e)?{error:e.error}:{result:e.result},this.records.set(t.id,t),this.persist(),this.events.emit(_o,t))},this.get=async(e,t)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:e,id:t}),await this.getRecord(t)),this.delete=(e,t)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:t}),this.values.forEach(r=>{r.topic===e&&("u">typeof t&&r.id!==t||(this.records.delete(r.id),this.events.emit(_a,r)))}),this.persist()},this.exists=async(e,t)=>(this.isInitialized(),!!this.records.has(t)&&(await this.getRecord(t)).topic===e),this.on=(e,t)=>{this.events.on(e,t)},this.once=(e,t)=>{this.events.once(e,t)},this.off=(e,t)=>{this.events.off(e,t)},this.removeListener=(e,t)=>{this.events.removeListener(e,t)},this.logger=wx(t,this.name)}get context(){return wD(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){let e=[];return this.values.forEach(t=>{if("u">typeof t.response)return;let r={topic:t.topic,request:dZ(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();let t=this.records.get(e);if(!t){let{message:t}=Ew("NO_MATCHING_KEY",`${this.name}: ${e}`);throw Error(t)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit("history_sync")}async restore(){try{let e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){let{message:e}=Ew("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),Error(e)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(_s,e=>{this.logger.info(`Emitting ${_s}`),this.logger.debug({type:"event",event:_s,record:e})}),this.events.on(_o,e=>{this.logger.info(`Emitting ${_o}`),this.logger.debug({type:"event",event:_o,record:e})}),this.events.on(_a,e=>{this.logger.info(`Emitting ${_a}`),this.logger.debug({type:"event",event:_a,record:e})}),this.core.heartbeat.on(A,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(t=>{(0,x.toMiliseconds)(t.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${t.id}`),this.records.delete(t.id),this.events.emit(_a,t,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){let{message:e}=Ew("NOT_INITIALIZED",this.name);throw Error(e)}}}class SO extends wO{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.expirations=new Map,this.events=new(0,a.EventEmitter),this.name="expirer",this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=E$,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(e=>this.expirations.set(e.target,e)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=e=>{try{let t=this.formatTarget(e);return"u">typeof this.getExpiration(t)}catch{return!1}},this.set=(e,t)=>{this.isInitialized();let r=this.formatTarget(e),i={target:r,expiry:t};this.expirations.set(r,i),this.checkExpiry(r,i),this.events.emit(_h,{target:r,expiration:i})},this.get=e=>{this.isInitialized();let t=this.formatTarget(e);return this.getExpiration(t)},this.del=e=>{if(this.isInitialized(),this.has(e)){let t=this.formatTarget(e),r=this.getExpiration(t);this.expirations.delete(t),this.events.emit(_u,{target:t,expiration:r})}},this.on=(e,t)=>{this.events.on(e,t)},this.once=(e,t)=>{this.events.once(e,t)},this.off=(e,t)=>{this.events.off(e,t)},this.removeListener=(e,t)=>{this.events.removeListener(e,t)},this.logger=wx(t,this.name)}get context(){return wD(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if("string"==typeof e)return xE("topic",e);if("number"==typeof e)return xE("id",e);let{message:t}=Ew("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit("expirer_sync")}async restore(){try{let e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){let{message:e}=Ew("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),Error(e)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){let t=this.expirations.get(e);if(!t){let{message:t}=Ew("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(t),Error(t)}return t}checkExpiry(e,t){let{expiry:r}=t;(0,x.toMiliseconds)(r)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(_f,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(A,()=>this.checkExpirations()),this.events.on(_h,e=>{this.logger.info(`Emitting ${_h}`),this.logger.debug({type:"event",event:_h,data:e}),this.persist()}),this.events.on(_f,e=>{this.logger.info(`Emitting ${_f}`),this.logger.debug({type:"event",event:_f,data:e}),this.persist()}),this.events.on(_u,e=>{this.logger.info(`Emitting ${_u}`),this.logger.debug({type:"event",event:_u,data:e}),this.persist()})}isInitialized(){if(!this.initialized){let{message:e}=Ew("NOT_INITIALIZED",this.name);throw Error(e)}}}class SP extends wP{constructor(e,t,r){super(e,t,r),this.core=e,this.logger=t,this.store=r,this.name="verify-api",this.verifyUrlV3=_l,this.storagePrefix=E$,this.version=2,this.init=async()=>{var e;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&(0,x.toMiliseconds)(null==(e=this.publicKey)?void 0:e.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))},this.register=async e=>{if(!xp()||this.isDevEnv)return;let t=window.location.origin,{id:r,decryptedId:i}=e,n=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${t}&id=${r}&decryptedId=${i}`;try{let e=(0,nn.getDocument)(),t=this.startAbortTimer(5*x.ONE_SECOND),i=await new Promise((i,s)=>{let o=()=>{window.removeEventListener("message",h),e.body.removeChild(a),s("attestation aborted")};this.abortController.signal.addEventListener("abort",o);let a=e.createElement("iframe");a.src=n,a.style.display="none",a.addEventListener("error",o,{signal:this.abortController.signal});let h=n=>{if(n.data&&"string"==typeof n.data)try{let s=JSON.parse(n.data);if("verify_attestation"===s.type){if(Dx(s.attestation).payload.id!==r)return;clearInterval(t),e.body.removeChild(a),this.abortController.signal.removeEventListener("abort",o),window.removeEventListener("message",h),i(null===s.attestation?"":s.attestation)}}catch(e){this.logger.warn(e)}};e.body.appendChild(a),window.addEventListener("message",h,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",i),i}catch(e){this.logger.warn(e)}return""},this.resolve=async e=>{if(this.isDevEnv)return"";let{attestationId:t,hash:r,encryptedId:i}=e;if(""===t)return void this.logger.debug("resolve: attestationId is empty, skipping");if(t){if(Dx(t).payload.id!==i)return;let e=await this.isValidJwtAttestation(t);if(e)return e.isVerified?e:void this.logger.warn("resolve: jwt attestation: origin url not verified")}if(!r)return;let n=this.getVerifyUrl(e?.verifyUrl);return this.fetchAttestation(r,n)},this.fetchAttestation=async(e,t)=>{this.logger.debug(`resolving attestation: ${e} from url: ${t}`);let r=this.startAbortTimer(5*x.ONE_SECOND),i=await fetch(`${t}/attestation/${e}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(r),200===i.status?await i.json():void 0},this.getVerifyUrl=e=>{let t=e||_c;return _d.includes(t)||(this.logger.info(`verify url: ${t}, not included in trusted list, assigning default: ${_c}`),t=_c),t},this.fetchPublicKey=async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);let e=this.startAbortTimer(x.FIVE_SECONDS),t=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(e),await t.json()}catch(e){this.logger.warn(e)}},this.persistPublicKey=async e=>{this.logger.debug("persisting public key to local storage",e),await this.store.setItem(this.storeKey,e),this.publicKey=e},this.removePublicKey=async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0},this.isValidJwtAttestation=async e=>{let t=await this.getPublicKey();try{if(t)return this.validateAttestation(e,t)}catch(e){this.logger.error(e),this.logger.warn("error validating attestation")}let r=await this.fetchAndPersistPublicKey();try{if(r)return this.validateAttestation(e,r)}catch(e){this.logger.error(e),this.logger.warn("error validating attestation")}},this.getPublicKey=async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey(),this.fetchAndPersistPublicKey=async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async e=>{let t=await this.fetchPublicKey();t&&(await this.persistPublicKey(t),e(t))});let e=await this.fetchPromise;return this.fetchPromise=void 0,e},this.validateAttestation=(e,t)=>{let r=function(e,t){let[r,i,n]=e.split("."),s=F.from(function(e){let t=e.replace(/-/g,"+").replace(/_/g,"/"),r=t.length%4;return r>0&&(t+="=".repeat(4-r)),t}(n),"base64");if(64!==s.length)throw Error("Invalid signature length");let o=s.slice(0,32).toString("hex"),a=s.slice(32,64).toString("hex"),h=`${r}.${i}`,u=new(0,m$.SHA256)().update(F.from(h)).digest(),f=new(0,xr.ec)("p256").keyFromPublic({x:F.from(t.x,"base64").toString("hex"),y:F.from(t.y,"base64").toString("hex")},"hex"),c=F.from(u).toString("hex");if(!f.verify(c,{r:o,s:a}))throw Error("Invalid signature");return Dx(e).payload}(e,t.publicKey),i={hasExpired:(0,x.toMiliseconds)(r.exp)<Date.now(),payload:r};if(i.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),Error("JWT attestation expired");return{origin:i.payload.origin,isScam:i.payload.isScam,isVerified:i.payload.isVerified}},this.logger=wx(t,this.name),this.abortController=new AbortController,this.isDevEnv=!1,this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return wD(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),(0,x.toMiliseconds)(e))}}class SR extends wR{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,this.context="echo",this.registerDeviceToken=async e=>{let{clientId:t,token:r,notificationType:i,enableEncrypted:n=!1}=e,s=`https://echo.walletconnect.com/${this.projectId}/clients`;await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:t,type:i,token:r,always_raw:n})})},this.logger=wx(t,this.context)}}var ST=Object.defineProperty,SN=Object.getOwnPropertySymbols,SB=Object.prototype.hasOwnProperty,SL=Object.prototype.propertyIsEnumerable,Sk=(e,t,r)=>t in e?ST(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,SU=(e,t)=>{for(var r in t||(t={}))SB.call(t,r)&&Sk(e,r,t[r]);if(SN)for(var r of SN(t))SL.call(t,r)&&Sk(e,r,t[r]);return e};class Sz extends wT{constructor(e,t,r=!0){super(e,t,r),this.core=e,this.logger=t,this.context="event-client",this.storagePrefix=E$,this.storageVersion=.1,this.events=new Map,this.shouldPersist=!1,this.init=async()=>{try{let e={eventId:xP(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:xy(this.core.relayer.protocol,this.core.relayer.version,E6)}}};await this.sendEvent([e])}catch(e){this.logger.warn(e)}},this.createEvent=e=>{let{event:t="ERROR",type:r="",properties:{topic:i,trace:n}}=e,s=xP(),o=this.core.projectId||"",a=SU({eventId:s,timestamp:Date.now(),props:{event:t,type:r,properties:{topic:i,trace:n}},bundleId:o,domain:this.getAppDomain()},this.setMethods(s));return this.telemetryEnabled&&(this.events.set(s,a),this.shouldPersist=!0),a},this.getEvent=e=>{let{eventId:t,topic:r}=e;if(t)return this.events.get(t);let i=Array.from(this.events.values()).find(e=>e.props.properties.topic===r);if(i)return SU(SU({},i),this.setMethods(i.eventId))},this.deleteEvent=e=>{let{eventId:t}=e;this.events.delete(t),this.shouldPersist=!0},this.setEventListeners=()=>{this.core.heartbeat.on(A,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(e=>{(0,x.fromMiliseconds)(Date.now())-(0,x.fromMiliseconds)(e.timestamp)>86400&&(this.events.delete(e.eventId),this.shouldPersist=!0)})})},this.setMethods=e=>({addTrace:t=>this.addTrace(e,t),setError:t=>this.setError(e,t)}),this.addTrace=(e,t)=>{let r=this.events.get(e);r&&(r.props.properties.trace.push(t),this.events.set(e,r),this.shouldPersist=!0)},this.setError=(e,t)=>{let r=this.events.get(e);r&&(r.props.type=t,r.timestamp=Date.now(),this.events.set(e,r),this.shouldPersist=!0)},this.persist=async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1},this.restore=async()=>{try{let e=await this.core.storage.getItem(this.storageKey)||[];if(!e.length)return;e.forEach(e=>{this.events.set(e.eventId,SU(SU({},e),this.setMethods(e.eventId)))})}catch(e){this.logger.warn(e)}},this.submit=async()=>{if(!this.telemetryEnabled||0===this.events.size)return;let e=[];for(let[t,r]of this.events)r.props.type&&e.push(r);if(0!==e.length)try{if((await this.sendEvent(e)).ok)for(let t of e)this.events.delete(t.eventId),this.shouldPersist=!0}catch(e){this.logger.warn(e)}},this.sendEvent=async e=>{let t=this.getAppDomain()?"":"&sp=desktop";return await fetch(`https://pulse.walletconnect.org/batch?projectId=${this.core.projectId}&st=events_sdk&sv=js-${E6}${t}`,{method:"POST",body:JSON.stringify(e)})},this.getAppDomain=()=>xb().url,this.logger=wx(t,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var Sj=Object.defineProperty,Sq=Object.getOwnPropertySymbols,SF=Object.prototype.hasOwnProperty,SH=Object.prototype.propertyIsEnumerable,SK=(e,t,r)=>t in e?Sj(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,S$=(e,t)=>{for(var r in t||(t={}))SF.call(t,r)&&SK(e,r,t[r]);if(Sq)for(var r of Sq(t))SH.call(t,r)&&SK(e,r,t[r]);return e};class SV extends wE{constructor(e){var t,i;super(e),this.protocol="wc",this.version=2,this.name=EK,this.events=new(0,a.EventEmitter),this.initialized=!1,this.on=(e,t)=>this.events.on(e,t),this.once=(e,t)=>this.events.once(e,t),this.off=(e,t)=>this.events.off(e,t),this.removeListener=(e,t)=>this.events.removeListener(e,t),this.dispatchEnvelope=({topic:e,message:t,sessionExists:r})=>{if(!e||!t)return;let i={topic:e,message:t,publishedAt:Date.now(),transportType:E5};this.relayer.onLinkMessageEvent(i,{sessionExists:r})},this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||EZ,this.customStoragePrefix=null!=e&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";let{logger:n,chunkLoggerController:s}="u">typeof(i={opts:ww({level:"string"==typeof e?.logger&&e.logger?e.logger:"error"}),maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger}).loggerOverride&&"string"!=typeof i.loggerOverride?{logger:i.loggerOverride,chunkLoggerController:null}:"u">typeof window?function(e){var t,i;let n=new wu(null==(t=e.opts)?void 0:t.level,e.maxSizeInBytes);return{logger:r(v2)(wv(wm({},e.opts),{level:"trace",browser:wv(wm({},null==(i=e.opts)?void 0:i.browser),{write:e=>n.write(e)})})),chunkLoggerController:n}}(i):function(e){var t;let i=new wf(null==(t=e.opts)?void 0:t.level,e.maxSizeInBytes);return{logger:r(v2)(wv(wm({},e.opts),{level:"trace"}),i),chunkLoggerController:i}}(i);this.logChunkController=s,null!=(t=this.logChunkController)&&t.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var e,t;null!=(e=this.logChunkController)&&e.downloadLogsBlobInBrowser&&(null==(t=this.logChunkController)||t.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=wx(n,this.name),this.heartbeat=new M,this.crypto=new Se(this,this.logger,e?.keychain),this.history=new SC(this,this.logger),this.expirer=new SO(this,this.logger),this.storage=null!=e&&e.storage?e.storage:new eT(S$(S$({},EV),e?.storageOptions)),this.relayer=new Sw({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new SM(this,this.logger),this.verify=new SP(this,this.logger,this.storage),this.echoClient=new SR(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new Sz(this,this.logger,e?.telemetryEnabled)}static async init(e){let t=new SV(e);await t.initialize();let r=await t.crypto.getClientId();return await t.storage.setItem("WALLETCONNECT_CLIENT_ID",r),t}get context(){return wD(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return null==(e=this.logChunkController)?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(E9,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.eventClient.init(),this.linkModeSupportedApps=await this.storage.getItem(E9)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}const SW="client",SG=`wc@2:${SW}:`,SY="WALLETCONNECT_DEEPLINK_CHOICE",SZ=(x.THIRTY_DAYS,x.SEVEN_DAYS),SJ={wc_sessionPropose:{req:{ttl:x.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:x.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:x.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:x.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:x.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:x.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:x.ONE_DAY,prompt:!1,tag:1104},res:{ttl:x.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:x.ONE_DAY,prompt:!1,tag:1106},res:{ttl:x.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:x.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:x.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:x.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:x.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:x.ONE_DAY,prompt:!1,tag:1112},res:{ttl:x.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:x.ONE_DAY,prompt:!1,tag:1114},res:{ttl:x.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:x.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:x.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:x.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:x.FIVE_MINUTES,prompt:!1,tag:1119}}},SX={min:x.FIVE_MINUTES,max:x.SEVEN_DAYS},SQ="IDLE",S0="ACTIVE",S1=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],S3="wc@1.5:auth:",S2=`${S3}:PUB_KEY`;var S8=Object.defineProperty,S6=Object.defineProperties,S5=Object.getOwnPropertyDescriptors,S4=Object.getOwnPropertySymbols,S9=Object.prototype.hasOwnProperty,S7=Object.prototype.propertyIsEnumerable,Ie=(e,t,r)=>t in e?S8(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,It=(e,t)=>{for(var r in t||(t={}))S9.call(t,r)&&Ie(e,r,t[r]);if(S4)for(var r of S4(t))S7.call(t,r)&&Ie(e,r,t[r]);return e},Ir=(e,t)=>S6(e,S5(t));class Ii extends wB{constructor(e){super(e),this.name="engine",this.events=new(r(a)),this.initialized=!1,this.requestQueue={state:SQ,queue:[]},this.sessionRequestQueue={state:SQ,queue:[]},this.requestQueueDelay=x.ONE_SECOND,this.expectedPairingMethodMap=new Map,this.recentlyDeletedMap=new Map,this.recentlyDeletedLimit=200,this.relayMessageCache=[],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(SJ)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},(0,x.toMiliseconds)(this.requestQueueDelay)))},this.connect=async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();let t=Ir(It({},e),{requiredNamespaces:e.requiredNamespaces||{},optionalNamespaces:e.optionalNamespaces||{}});await this.isValidConnect(t);let{pairingTopic:r,requiredNamespaces:i,optionalNamespaces:n,sessionProperties:s,relays:o}=t,a=r,h,u=!1;try{a&&(u=this.client.core.pairing.pairings.get(a).active)}catch(e){throw this.client.logger.error(`connect() -> pairing.get(${a}) failed`),e}if(!a||!u){let{topic:e,uri:t}=await this.client.core.pairing.create();a=e,h=t}if(!a){let{message:e}=Ew("NO_MATCHING_KEY",`connect() pairing topic: ${a}`);throw Error(e)}let f=await this.client.core.crypto.generateKeyPair(),c=SJ.wc_sessionPropose.req.ttl||x.FIVE_MINUTES,l=xS(c),d=It({requiredNamespaces:i,optionalNamespaces:n,relays:o??[{protocol:"irn"}],proposer:{publicKey:f,metadata:this.client.metadata},expiryTimestamp:l,pairingTopic:a},s&&{sessionProperties:s}),{reject:p,resolve:g,done:b}=xD(c,"Proposal expired");this.events.once(xA("session_connect"),async({error:e,session:t})=>{if(e)p(e);else if(t){t.self.publicKey=f;let e=Ir(It({},t),{pairingTopic:d.pairingTopic,requiredNamespaces:d.requiredNamespaces,optionalNamespaces:d.optionalNamespaces,transportType:E4});await this.client.session.set(t.topic,e),await this.setExpiry(t.topic,t.expiry),a&&await this.client.core.pairing.updateMetadata({topic:a,metadata:t.peer.metadata}),this.cleanupDuplicatePairings(e),g(e)}});let y=await this.sendRequest({topic:a,method:"wc_sessionPropose",params:d,throwOnFailedPublish:!0});return await this.setProposal(y,It({id:y},d)),{uri:h,approval:b}},this.pair=async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(e)}catch(e){throw this.client.logger.error("pair() failed"),e}},this.approve=async e=>{var t,r,i;let n=this.client.core.eventClient.createEvent({properties:{topic:null==(t=e?.id)?void 0:t.toString(),trace:[_g]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(e){throw n.setError("no_internet_connection"),e}try{await this.isValidProposalId(e?.id)}catch(t){throw this.client.logger.error(`approve() -> proposal.get(${e?.id}) failed`),n.setError("proposal_not_found"),t}try{await this.isValidApprove(e)}catch(e){throw this.client.logger.error("approve() -> isValidApprove() failed"),n.setError("session_approve_namespace_validation_failure"),e}let{id:s,relayProtocol:o,namespaces:a,sessionProperties:h,sessionConfig:u}=e,f=this.client.proposal.get(s);this.client.core.eventClient.deleteEvent({eventId:n.eventId});let{pairingTopic:c,proposer:l,requiredNamespaces:d,optionalNamespaces:p}=f,g=null==(r=this.client.core.eventClient)?void 0:r.getEvent({topic:c});g||(g=null==(i=this.client.core.eventClient)?void 0:i.createEvent({type:_g,properties:{topic:c,trace:[_g,"session_namespaces_validation_success"]}}));let b=await this.client.core.crypto.generateKeyPair(),y=l.publicKey,m=await this.client.core.crypto.generateSharedKey(b,y),v=It(It({relay:{protocol:o??"irn"},namespaces:a,controller:{publicKey:b,metadata:this.client.metadata},expiry:xS(SZ)},h&&{sessionProperties:h}),u&&{sessionConfig:u});g.addTrace("subscribing_session_topic");try{await this.client.core.relayer.subscribe(m,{transportType:E4})}catch(e){throw g.setError("subscribe_session_topic_failure"),e}g.addTrace("subscribe_session_topic_success");let w=Ir(It({},v),{topic:m,requiredNamespaces:d,optionalNamespaces:p,pairingTopic:c,acknowledged:!1,self:v.controller,peer:{publicKey:l.publicKey,metadata:l.metadata},controller:b,transportType:E4});await this.client.session.set(m,w),g.addTrace("store_session");try{g.addTrace("publishing_session_settle"),await this.sendRequest({topic:m,method:"wc_sessionSettle",params:v,throwOnFailedPublish:!0}).catch(e=>{throw g?.setError("session_settle_publish_failure"),e}),g.addTrace("session_settle_publish_success"),g.addTrace("publishing_session_approve"),await this.sendResult({id:s,topic:c,result:{relay:{protocol:o??"irn"},responderPublicKey:b},throwOnFailedPublish:!0}).catch(e=>{throw g?.setError("session_approve_publish_failure"),e}),g.addTrace("session_approve_publish_success")}catch(e){throw this.client.logger.error(e),this.client.session.delete(m,ED("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(m),e}return this.client.core.eventClient.deleteEvent({eventId:g.eventId}),await this.client.core.pairing.updateMetadata({topic:c,metadata:l.metadata}),await this.client.proposal.delete(s,ED("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:c}),await this.setExpiry(m,xS(SZ)),{topic:m,acknowledged:()=>Promise.resolve(this.client.session.get(m))}},this.reject=async e=>{let t;this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(e)}catch(e){throw this.client.logger.error("reject() -> isValidReject() failed"),e}let{id:r,reason:i}=e;try{t=this.client.proposal.get(r).pairingTopic}catch(e){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),e}t&&(await this.sendError({id:r,topic:t,error:i,rpcOpts:SJ.wc_sessionPropose.reject}),await this.client.proposal.delete(r,ED("USER_DISCONNECTED")))},this.update=async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(e)}catch(e){throw this.client.logger.error("update() -> isValidUpdate() failed"),e}let{topic:t,namespaces:r}=e,{done:i,resolve:n,reject:s}=xD(),o=dG(),a=dY().toString(),h=this.client.session.get(t).namespaces;return this.events.once(xA("session_update",o),({error:e})=>{e?s(e):n()}),await this.client.session.update(t,{namespaces:r}),await this.sendRequest({topic:t,method:"wc_sessionUpdate",params:{namespaces:r},throwOnFailedPublish:!0,clientRpcId:o,relayRpcId:a}).catch(e=>{this.client.logger.error(e),this.client.session.update(t,{namespaces:h}),s(e)}),{acknowledged:i}},this.extend=async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(e)}catch(e){throw this.client.logger.error("extend() -> isValidExtend() failed"),e}let{topic:t}=e,r=dG(),{done:i,resolve:n,reject:s}=xD();return this.events.once(xA("session_extend",r),({error:e})=>{e?s(e):n()}),await this.setExpiry(t,xS(SZ)),this.sendRequest({topic:t,method:"wc_sessionExtend",params:{},clientRpcId:r,throwOnFailedPublish:!0}).catch(e=>{s(e)}),{acknowledged:i}},this.request=async e=>{this.isInitialized();try{await this.isValidRequest(e)}catch(e){throw this.client.logger.error("request() -> isValidRequest() failed"),e}let{chainId:t,request:r,topic:i,expiry:n=SJ.wc_sessionRequest.req.ttl}=e,s=this.client.session.get(i);s?.transportType===E4&&await this.confirmOnlineStateOrThrow();let o=dG(),a=dY().toString(),{done:h,resolve:u,reject:f}=xD(n,"Request expired. Please try again.");this.events.once(xA("session_request",o),({error:e,result:t})=>{e?f(e):u(t)});let c=this.getAppLinkIfEnabled(s.peer.metadata,s.transportType);return c?(await this.sendRequest({clientRpcId:o,relayRpcId:a,topic:i,method:"wc_sessionRequest",params:{request:Ir(It({},r),{expiryTimestamp:xS(n)}),chainId:t},expiry:n,throwOnFailedPublish:!0,appLink:c}).catch(e=>f(e)),this.client.events.emit("session_request_sent",{topic:i,request:r,chainId:t,id:o}),await h()):await Promise.all([new Promise(async e=>{await this.sendRequest({clientRpcId:o,relayRpcId:a,topic:i,method:"wc_sessionRequest",params:{request:Ir(It({},r),{expiryTimestamp:xS(n)}),chainId:t},expiry:n,throwOnFailedPublish:!0}).catch(e=>f(e)),this.client.events.emit("session_request_sent",{topic:i,request:r,chainId:t,id:o}),e()}),new Promise(async e=>{var t;if(!(null!=(t=s.sessionConfig)&&t.disableDeepLink)){let e=await xC(this.client.core.storage,SY);await xM({id:o,topic:i,wcDeepLink:e})}e()}),h()]).then(e=>e[2])},this.respond=async e=>{this.isInitialized(),await this.isValidRespond(e);let{topic:t,response:r}=e,{id:i}=r,n=this.client.session.get(t);n.transportType===E4&&await this.confirmOnlineStateOrThrow();let s=this.getAppLinkIfEnabled(n.peer.metadata,n.transportType);d4(r)?await this.sendResult({id:i,topic:t,result:r.result,throwOnFailedPublish:!0,appLink:s}):d9(r)&&await this.sendError({id:i,topic:t,error:r.error,appLink:s}),this.cleanupAfterResponse(e)},this.ping=async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(e)}catch(e){throw this.client.logger.error("ping() -> isValidPing() failed"),e}let{topic:t}=e;if(this.client.session.keys.includes(t)){let e=dG(),r=dY().toString(),{done:i,resolve:n,reject:s}=xD();this.events.once(xA("session_ping",e),({error:e})=>{e?s(e):n()}),await Promise.all([this.sendRequest({topic:t,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:e,relayRpcId:r}),i()])}else this.client.core.pairing.pairings.keys.includes(t)&&await this.client.core.pairing.ping({topic:t})},this.emit=async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(e);let{topic:t,event:r,chainId:i}=e,n=dY().toString();await this.sendRequest({topic:t,method:"wc_sessionEvent",params:{event:r,chainId:i},throwOnFailedPublish:!0,relayRpcId:n})},this.disconnect=async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(e);let{topic:t}=e;if(this.client.session.keys.includes(t))await this.sendRequest({topic:t,method:"wc_sessionDelete",params:ED("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:t,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(t))await this.client.core.pairing.disconnect({topic:t});else{let{message:e}=Ew("MISMATCHED_TOPIC",`Session or pairing topic not found: ${t}`);throw Error(e)}},this.find=e=>(this.isInitialized(),this.client.session.getAll().filter(t=>(function(e,t){let{requiredNamespaces:r}=t,i=Object.keys(e.namespaces),n=Object.keys(r),s=!0;return!!xm(n,i)&&(i.forEach(t=>{let{accounts:i,methods:n,events:o}=e.namespaces[t],a=Eb(i),h=r[t];xm(xn(t,h),a)&&xm(h.methods,n)&&xm(h.events,o)||(s=!1)}),s)})(t,e))),this.getPendingSessionRequests=()=>this.client.pendingRequest.getAll(),this.authenticate=async(e,t)=>{var r,i,n;let s;this.isInitialized(),this.isValidAuthenticate(e);let o=t&&this.client.core.linkModeSupportedApps.includes(t)&&(null==(r=this.client.metadata.redirect)?void 0:r.linkMode),a=o?E5:E4;a===E4&&await this.confirmOnlineStateOrThrow();let{chains:h,statement:u="",uri:f,domain:c,nonce:l,type:d,exp:p,nbf:g,methods:b=[],expiry:y}=e,m=[...e.resources||[]],{topic:v,uri:w}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:a});this.client.logger.info({message:"Generated new pairing",pairing:{topic:v,uri:w}});let D=await this.client.core.crypto.generateKeyPair(),x=x6(D);if(await Promise.all([this.client.auth.authKeys.set(S2,{responseTopic:x,publicKey:D}),this.client.auth.pairingTopics.set(x,{topic:x,pairingTopic:v})]),await this.client.core.relayer.subscribe(x,{transportType:a}),this.client.logger.info(`sending request to new pairing topic: ${v}`),b.length>0){let{namespace:e}=xi(h[0]),t=xG(function(e,t,r,i={}){return r?.sort((e,t)=>e.localeCompare(t)),{att:{[e]:function(e,t,r={}){return Object.assign({},...(t=t?.sort((e,t)=>e.localeCompare(t))).map(t=>({[`${e}/${t}`]:[r]})))}(t,r,i)}}}(e,"request",b));xX(m)&&(i=t,n=m.pop(),t=xG(function(e,t){xW(e),xW(t);let r=Object.keys(e.att).concat(Object.keys(t.att)).sort((e,t)=>e.localeCompare(t)),i={att:{}};return r.forEach(r=>{var n,s;Object.keys((null==(n=e.att)?void 0:n[r])||{}).concat(Object.keys((null==(s=t.att)?void 0:s[r])||{})).sort((e,t)=>e.localeCompare(t)).forEach(n=>{var s,o;i.att[r]=xL(((e,t)=>{for(var r in t||(t={}))xz.call(t,r)&&xq(e,r,t[r]);if(xU)for(var r of xU(t))xj.call(t,r)&&xq(e,r,t[r]);return e})({},i.att[r]),xk({[n]:(null==(s=e.att[r])?void 0:s[n])||(null==(o=t.att[r])?void 0:o[n])}))})}),i}(xY(i),xY(n)))),m.push(t)}let E=y&&y>SJ.wc_sessionAuthenticate.req.ttl?y:SJ.wc_sessionAuthenticate.req.ttl,_={authPayload:{type:d??"caip122",chains:h,statement:u,aud:f,domain:c,version:"1",nonce:l,iat:new Date().toISOString(),exp:p,nbf:g,resources:m},requester:{publicKey:D,metadata:this.client.metadata},expiryTimestamp:xS(E)},S={requiredNamespaces:{},optionalNamespaces:{eip155:{chains:h,methods:[...new Set(["personal_sign",...b])],events:["chainChanged","accountsChanged"]}},relays:[{protocol:"irn"}],pairingTopic:v,proposer:{publicKey:D,metadata:this.client.metadata},expiryTimestamp:xS(SJ.wc_sessionPropose.req.ttl)},{done:I,resolve:A,reject:M}=xD(E,"Request expired"),C=async({error:e,session:t})=>{if(this.events.off(xA("session_request",P),O),e)M(e);else if(t){t.self.publicKey=D,await this.client.session.set(t.topic,t),await this.setExpiry(t.topic,t.expiry),v&&await this.client.core.pairing.updateMetadata({topic:v,metadata:t.peer.metadata});let e=this.client.session.get(t.topic);await this.deleteProposal(R),A({session:e})}},O=async e=>{var r,i,n;let s;if(await this.deletePendingAuthRequest(P,{message:"fulfilled",code:0}),e.error){let t=ED("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return e.error.code===t.code?void 0:(this.events.off(xA("session_connect"),C),M(e.error.message))}await this.deleteProposal(R),this.events.off(xA("session_connect"),C);let{cacaos:o,responder:h}=e.result,u=[],f=[];for(let e of o){await x$({cacao:e,projectId:this.client.core.projectId})||(this.client.logger.error(e,"Signature verification failed"),M(ED("SESSION_SETTLEMENT_FAILED","Signature verification failed")));let{p:t}=e,r=xX(t.resources),i=[xH(t.iss)],n=xK(t.iss);if(r){let e=xZ(r),t=xJ(r);u.push(...e),i.push(...t)}for(let e of i)f.push(`${e}:${n}`)}let c=await this.client.core.crypto.generateSharedKey(D,h.publicKey);u.length>0&&(s={topic:c,acknowledged:!0,self:{publicKey:D,metadata:this.client.metadata},peer:h,controller:h.publicKey,expiry:xS(SZ),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:v,namespaces:Ey([...new Set(u)],[...new Set(f)]),transportType:a},await this.client.core.relayer.subscribe(c,{transportType:a}),await this.client.session.set(c,s),v&&await this.client.core.pairing.updateMetadata({topic:v,metadata:h.metadata}),s=this.client.session.get(c)),null!=(r=this.client.metadata.redirect)&&r.linkMode&&null!=(i=h.metadata.redirect)&&i.linkMode&&null!=(n=h.metadata.redirect)&&n.universal&&t&&(this.client.core.addLinkModeSupportedApp(h.metadata.redirect.universal),this.client.session.update(c,{transportType:E5})),A({auths:o,session:s})},P=dG(),R=dG();this.events.once(xA("session_connect"),C),this.events.once(xA("session_request",P),O);try{if(o){let e=dZ("wc_sessionAuthenticate",_,P);this.client.core.history.set(v,e);let r=await this.client.core.crypto.encode("",e,{type:2,encoding:x3});s=Eg(t,v,r)}else await Promise.all([this.sendRequest({topic:v,method:"wc_sessionAuthenticate",params:_,expiry:e.expiry,throwOnFailedPublish:!0,clientRpcId:P}),this.sendRequest({topic:v,method:"wc_sessionPropose",params:S,expiry:SJ.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:R})])}catch(e){throw this.events.off(xA("session_connect"),C),this.events.off(xA("session_request",P),O),e}return await this.setProposal(R,It({id:R},S)),await this.setAuthRequest(P,{request:Ir(It({},_),{verifyContext:{}}),pairingTopic:v,transportType:a}),{uri:s??w,response:I}},this.approveSessionAuthenticate=async e=>{let t,{id:r,auths:i}=e,n=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:["authenticated_session_approve_started"]}});try{this.isInitialized()}catch(e){throw n.setError("no_internet_connection"),e}let s=this.getPendingAuthRequest(r);if(!s)throw n.setError("authenticated_session_pending_request_not_found"),Error(`Could not find pending auth request with id ${r}`);let o=s.transportType||E4;o===E4&&await this.confirmOnlineStateOrThrow();let a=s.requester.publicKey,h=await this.client.core.crypto.generateKeyPair(),u=x6(a),f={type:1,receiverPublicKey:a,senderPublicKey:h},c=[],l=[];for(let e of i){if(!await x$({cacao:e,projectId:this.client.core.projectId})){n.setError("invalid_cacao");let e=ED("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:u,error:e,encodeOpts:f}),Error(e.message)}n.addTrace("cacaos_verified");let{p:t}=e,i=xX(t.resources),s=[xH(t.iss)],o=xK(t.iss);if(i){let e=xZ(i),t=xJ(i);c.push(...e),s.push(...t)}for(let e of s)l.push(`${e}:${o}`)}let d=await this.client.core.crypto.generateSharedKey(h,a);if(n.addTrace("create_authenticated_session_topic"),c?.length>0){t={topic:d,acknowledged:!0,self:{publicKey:h,metadata:this.client.metadata},peer:{publicKey:a,metadata:s.requester.metadata},controller:a,expiry:xS(SZ),authentication:i,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:s.pairingTopic,namespaces:Ey([...new Set(c)],[...new Set(l)]),transportType:o},n.addTrace("subscribing_authenticated_session_topic");try{await this.client.core.relayer.subscribe(d,{transportType:o})}catch(e){throw n.setError("subscribe_authenticated_session_topic_failure"),e}n.addTrace("subscribe_authenticated_session_topic_success"),await this.client.session.set(d,t),n.addTrace("store_authenticated_session"),await this.client.core.pairing.updateMetadata({topic:s.pairingTopic,metadata:s.requester.metadata})}n.addTrace("publishing_authenticated_session_approve");try{await this.sendResult({topic:u,id:r,result:{cacaos:i,responder:{publicKey:h,metadata:this.client.metadata}},encodeOpts:f,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(s.requester.metadata,o)})}catch(e){throw n.setError("authenticated_session_approve_publish_failure"),e}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:s.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:n.eventId}),{session:t}},this.rejectSessionAuthenticate=async e=>{this.isInitialized();let{id:t,reason:r}=e,i=this.getPendingAuthRequest(t);if(!i)throw Error(`Could not find pending auth request with id ${t}`);i.transportType===E4&&await this.confirmOnlineStateOrThrow();let n=i.requester.publicKey,s=await this.client.core.crypto.generateKeyPair(),o=x6(n);await this.sendError({id:t,topic:o,error:r,encodeOpts:{type:1,receiverPublicKey:n,senderPublicKey:s},rpcOpts:SJ.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(t,{message:"rejected",code:0}),await this.client.proposal.delete(t,ED("USER_DISCONNECTED"))},this.formatAuthMessage=e=>{this.isInitialized();let{request:t,iss:r}=e;return xV(t,r)},this.processRelayMessageCache=()=>{setTimeout(async()=>{if(0!==this.relayMessageCache.length)for(;this.relayMessageCache.length>0;)try{let e=this.relayMessageCache.shift();e&&await this.onRelayMessage(e)}catch(e){this.client.logger.error(e)}},50)},this.cleanupDuplicatePairings=async e=>{if(e.pairingTopic)try{let t=this.client.core.pairing.pairings.get(e.pairingTopic),r=this.client.core.pairing.pairings.getAll().filter(r=>{var i,n;return(null==(i=r.peerMetadata)?void 0:i.url)&&(null==(n=r.peerMetadata)?void 0:n.url)===e.peer.metadata.url&&r.topic&&r.topic!==t.topic});if(0===r.length)return;this.client.logger.info(`Cleaning up ${r.length} duplicate pairing(s)`),await Promise.all(r.map(e=>this.client.core.pairing.disconnect({topic:e.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(e){this.client.logger.error(e)}},this.deleteSession=async e=>{var t;let{topic:r,expirerHasDeleted:i=!1,emitEvent:n=!0,id:s=0}=e,{self:o}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),await this.client.session.delete(r,ED("USER_DISCONNECTED")),this.addToRecentlyDeleted(r,"session"),this.client.core.crypto.keychain.has(o.publicKey)&&await this.client.core.crypto.deleteKeyPair(o.publicKey),this.client.core.crypto.keychain.has(r)&&await this.client.core.crypto.deleteSymKey(r),i||this.client.core.expirer.del(r),this.client.core.storage.removeItem(SY).catch(e=>this.client.logger.warn(e)),this.getPendingSessionRequests().forEach(e=>{e.topic===r&&this.deletePendingSessionRequest(e.id,ED("USER_DISCONNECTED"))}),r===(null==(t=this.sessionRequestQueue.queue[0])?void 0:t.topic)&&(this.sessionRequestQueue.state=SQ),n&&this.client.events.emit("session_delete",{id:s,topic:r})},this.deleteProposal=async(e,t)=>{if(t)try{let t=this.client.proposal.get(e),r=this.client.core.eventClient.getEvent({topic:t.pairingTopic});r?.setError("proposal_expired")}catch{}await Promise.all([this.client.proposal.delete(e,ED("USER_DISCONNECTED")),t?Promise.resolve():this.client.core.expirer.del(e)]),this.addToRecentlyDeleted(e,"proposal")},this.deletePendingSessionRequest=async(e,t,r=!1)=>{await Promise.all([this.client.pendingRequest.delete(e,t),r?Promise.resolve():this.client.core.expirer.del(e)]),this.addToRecentlyDeleted(e,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(t=>t.id!==e),r&&(this.sessionRequestQueue.state=SQ,this.client.events.emit("session_request_expire",{id:e}))},this.deletePendingAuthRequest=async(e,t,r=!1)=>{await Promise.all([this.client.auth.requests.delete(e,t),r?Promise.resolve():this.client.core.expirer.del(e)])},this.setExpiry=async(e,t)=>{this.client.session.keys.includes(e)&&(this.client.core.expirer.set(e,t),await this.client.session.update(e,{expiry:t}))},this.setProposal=async(e,t)=>{this.client.core.expirer.set(e,xS(SJ.wc_sessionPropose.req.ttl)),await this.client.proposal.set(e,t)},this.setAuthRequest=async(e,t)=>{let{request:r,pairingTopic:i,transportType:n=E4}=t;this.client.core.expirer.set(e,r.expiryTimestamp),await this.client.auth.requests.set(e,{authPayload:r.authPayload,requester:r.requester,expiryTimestamp:r.expiryTimestamp,id:e,pairingTopic:i,verifyContext:r.verifyContext,transportType:n})},this.setPendingSessionRequest=async e=>{let{id:t,topic:r,params:i,verifyContext:n}=e,s=i.request.expiryTimestamp||xS(SJ.wc_sessionRequest.req.ttl);this.client.core.expirer.set(t,s),await this.client.pendingRequest.set(t,{id:t,topic:r,params:i,verifyContext:n})},this.sendRequest=async e=>{let r,i,{topic:n,method:s,params:o,expiry:a,relayRpcId:h,clientRpcId:u,throwOnFailedPublish:f,appLink:c}=e,l=dZ(s,o,u),d=!!c;try{let e=d?x3:x1;r=await this.client.core.crypto.encode(n,l,{encoding:e})}catch(e){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${n} failed`),e}if(S1.includes(s)){let e=x5(JSON.stringify(l)),t=x5(r);i=await this.client.core.verify.register({id:t,decryptedId:e})}let p=SJ[s].req;if(p.attestation=i,a&&(p.ttl=a),h&&(p.id=h),this.client.core.history.set(n,l),d){let e=Eg(c,n,r);await t.Linking.openURL(e,this.client.name)}else{let e=SJ[s].req;a&&(e.ttl=a),h&&(e.id=h),f?(e.internal=Ir(It({},e.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,r,e)):this.client.core.relayer.publish(n,r,e).catch(e=>this.client.logger.error(e))}return l.id},this.sendResult=async e=>{let r,i,{id:n,topic:s,result:o,throwOnFailedPublish:a,encodeOpts:h,appLink:u}=e,f=dJ(n,o),c=u&&"u">typeof(null==t?void 0:t.Linking);try{let e=c?x3:x1;r=await this.client.core.crypto.encode(s,f,Ir(It({},h||{}),{encoding:e}))}catch(e){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),e}try{i=await this.client.core.history.get(s,n)}catch(e){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${n}) failed`),e}if(c){let e=Eg(u,s,r);await t.Linking.openURL(e,this.client.name)}else{let e=SJ[i.request.method].res;a?(e.internal=Ir(It({},e.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,r,e)):this.client.core.relayer.publish(s,r,e).catch(e=>this.client.logger.error(e))}await this.client.core.history.resolve(f)},this.sendError=async e=>{let r,i,{id:n,topic:s,error:o,encodeOpts:a,rpcOpts:h,appLink:u}=e,f=dX(n,o),c=u&&"u">typeof(null==t?void 0:t.Linking);try{let e=c?x3:x1;r=await this.client.core.crypto.encode(s,f,Ir(It({},a||{}),{encoding:e}))}catch(e){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),e}try{i=await this.client.core.history.get(s,n)}catch(e){throw this.client.logger.error(`sendError() -> history.get(${s}, ${n}) failed`),e}if(c){let e=Eg(u,s,r);await t.Linking.openURL(e,this.client.name)}else{let e=h||SJ[i.request.method].res;this.client.core.relayer.publish(s,r,e)}await this.client.core.history.resolve(f)},this.cleanup=async()=>{let e=[],t=[];this.client.session.getAll().forEach(t=>{let r=!1;xI(t.expiry)&&(r=!0),this.client.core.crypto.keychain.has(t.topic)||(r=!0),r&&e.push(t.topic)}),this.client.proposal.getAll().forEach(e=>{xI(e.expiryTimestamp)&&t.push(e.id)}),await Promise.all([...e.map(e=>this.deleteSession({topic:e})),...t.map(e=>this.deleteProposal(e))])},this.onRelayEventRequest=async e=>{this.requestQueue.queue.push(e),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===S0)return void this.client.logger.info("Request queue already active, skipping...");for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=S0;let e=this.requestQueue.queue.shift();if(e)try{await this.processRequest(e)}catch(e){this.client.logger.warn(e)}}this.requestQueue.state=SQ},this.processRequest=async e=>{let{topic:t,payload:r,attestation:i,transportType:n,encryptedId:s}=e,o=r.method;if(!this.shouldIgnorePairingRequest({topic:t,requestMethod:o}))switch(o){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:t,payload:r,attestation:i,encryptedId:s});case"wc_sessionSettle":return await this.onSessionSettleRequest(t,r);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(t,r);case"wc_sessionExtend":return await this.onSessionExtendRequest(t,r);case"wc_sessionPing":return await this.onSessionPingRequest(t,r);case"wc_sessionDelete":return await this.onSessionDeleteRequest(t,r);case"wc_sessionRequest":return await this.onSessionRequest({topic:t,payload:r,attestation:i,encryptedId:s,transportType:n});case"wc_sessionEvent":return await this.onSessionEventRequest(t,r);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:t,payload:r,attestation:i,encryptedId:s,transportType:n});default:return this.client.logger.info(`Unsupported request method ${o}`)}},this.onRelayEventResponse=async e=>{let{topic:t,payload:r,transportType:i}=e,n=(await this.client.core.history.get(t,r.id)).request.method;switch(n){case"wc_sessionPropose":return this.onSessionProposeResponse(t,r,i);case"wc_sessionSettle":return this.onSessionSettleResponse(t,r);case"wc_sessionUpdate":return this.onSessionUpdateResponse(t,r);case"wc_sessionExtend":return this.onSessionExtendResponse(t,r);case"wc_sessionPing":return this.onSessionPingResponse(t,r);case"wc_sessionRequest":return this.onSessionRequestResponse(t,r);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(t,r);default:return this.client.logger.info(`Unsupported response method ${n}`)}},this.onRelayEventUnknownPayload=e=>{let{topic:t}=e,{message:r}=Ew("MISSING_OR_INVALID",`Decoded payload on topic ${t} is not identifiable as a JSON-RPC request or a response.`);throw Error(r)},this.shouldIgnorePairingRequest=e=>{let{topic:t,requestMethod:r}=e,i=this.expectedPairingMethodMap.get(t);return!(!i||i.includes(r))&&!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)},this.onSessionProposeRequest=async e=>{let{topic:t,payload:r,attestation:i,encryptedId:n}=e,{params:s,id:o}=r;try{let e=this.client.core.eventClient.getEvent({topic:t});this.isValidConnect(It({},r.params));let a=s.expiryTimestamp||xS(SJ.wc_sessionPropose.req.ttl),h=It({id:o,pairingTopic:t,expiryTimestamp:a},s);await this.setProposal(o,h);let u=await this.getVerifyContext({attestationId:i,hash:x5(JSON.stringify(r)),encryptedId:n,metadata:h.proposer.metadata});0===this.client.events.listenerCount("session_proposal")&&(console.warn("No listener for session_proposal event"),e?.setError("proposal_listener_not_found")),e?.addTrace("emit_session_proposal"),this.client.events.emit("session_proposal",{id:o,params:h,verifyContext:u})}catch(e){await this.sendError({id:o,topic:t,error:e,rpcOpts:SJ.wc_sessionPropose.autoReject}),this.client.logger.error(e)}},this.onSessionProposeResponse=async(e,t,r)=>{let{id:i}=t;if(d4(t)){let{result:n}=t;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:n});let s=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:s});let o=s.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:o});let a=n.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:a});let h=await this.client.core.crypto.generateSharedKey(o,a);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:h});let u=await this.client.core.relayer.subscribe(h,{transportType:r});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:u}),await this.client.core.pairing.activate({topic:e})}else if(d9(t)){await this.client.proposal.delete(i,ED("USER_DISCONNECTED"));let e=xA("session_connect");if(0===this.events.listenerCount(e))throw Error(`emitting ${e} without any listeners, 954`);this.events.emit(xA("session_connect"),{error:t.error})}},this.onSessionSettleRequest=async(e,t)=>{let{id:r,params:i}=t;try{this.isValidSessionSettleRequest(i);let{relay:r,controller:n,expiry:s,namespaces:o,sessionProperties:a,sessionConfig:h}=t.params,u=Ir(It(It({topic:e,relay:r,expiry:s,namespaces:o,acknowledged:!0,pairingTopic:"",requiredNamespaces:{},optionalNamespaces:{},controller:n.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:n.publicKey,metadata:n.metadata}},a&&{sessionProperties:a}),h&&{sessionConfig:h}),{transportType:E4}),f=xA("session_connect");if(0===this.events.listenerCount(f))throw Error(`emitting ${f} without any listeners 997`);this.events.emit(xA("session_connect"),{session:u}),await this.sendResult({id:t.id,topic:e,result:!0,throwOnFailedPublish:!0})}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}},this.onSessionSettleResponse=async(e,t)=>{let{id:r}=t;d4(t)?(await this.client.session.update(e,{acknowledged:!0}),this.events.emit(xA("session_approve",r),{})):d9(t)&&(await this.client.session.delete(e,ED("USER_DISCONNECTED")),this.events.emit(xA("session_approve",r),{error:t.error}))},this.onSessionUpdateRequest=async(e,t)=>{let{params:r,id:i}=t;try{let t=`${e}_session_update`,n=Ez.get(t);if(n&&this.isRequestOutOfSync(n,i)){this.client.logger.info(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:e,error:ED("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(It({topic:e},r));try{Ez.set(t,i),await this.client.session.update(e,{namespaces:r.namespaces}),await this.sendResult({id:i,topic:e,result:!0,throwOnFailedPublish:!0})}catch(e){throw Ez.delete(t),e}this.client.events.emit("session_update",{id:i,topic:e,params:r})}catch(t){await this.sendError({id:i,topic:e,error:t}),this.client.logger.error(t)}},this.isRequestOutOfSync=(e,t)=>parseInt(t.toString().slice(0,-3))<=parseInt(e.toString().slice(0,-3)),this.onSessionUpdateResponse=(e,t)=>{let{id:r}=t,i=xA("session_update",r);if(0===this.events.listenerCount(i))throw Error(`emitting ${i} without any listeners`);d4(t)?this.events.emit(xA("session_update",r),{}):d9(t)&&this.events.emit(xA("session_update",r),{error:t.error})},this.onSessionExtendRequest=async(e,t)=>{let{id:r}=t;try{this.isValidExtend({topic:e}),await this.setExpiry(e,xS(SZ)),await this.sendResult({id:r,topic:e,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:r,topic:e})}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}},this.onSessionExtendResponse=(e,t)=>{let{id:r}=t,i=xA("session_extend",r);if(0===this.events.listenerCount(i))throw Error(`emitting ${i} without any listeners`);d4(t)?this.events.emit(xA("session_extend",r),{}):d9(t)&&this.events.emit(xA("session_extend",r),{error:t.error})},this.onSessionPingRequest=async(e,t)=>{let{id:r}=t;try{this.isValidPing({topic:e}),await this.sendResult({id:r,topic:e,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:r,topic:e})}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}},this.onSessionPingResponse=(e,t)=>{let{id:r}=t,i=xA("session_ping",r);if(0===this.events.listenerCount(i))throw Error(`emitting ${i} without any listeners`);setTimeout(()=>{d4(t)?this.events.emit(xA("session_ping",r),{}):d9(t)&&this.events.emit(xA("session_ping",r),{error:t.error})},500)},this.onSessionDeleteRequest=async(e,t)=>{let{id:r}=t;try{this.isValidDisconnect({topic:e,reason:t.params}),Promise.all([new Promise(t=>{this.client.core.relayer.once(E0,async()=>{t(await this.deleteSession({topic:e,id:r}))})}),this.sendResult({id:r,topic:e,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:e,error:ED("USER_DISCONNECTED")})]).catch(e=>this.client.logger.error(e))}catch(e){this.client.logger.error(e)}},this.onSessionRequest=async e=>{var t,r,i;let{topic:n,payload:s,attestation:o,encryptedId:a,transportType:h}=e,{id:u,params:f}=s;try{await this.isValidRequest(It({topic:n},f));let e=this.client.session.get(n),s=await this.getVerifyContext({attestationId:o,hash:x5(JSON.stringify(dZ("wc_sessionRequest",f,u))),encryptedId:a,metadata:e.peer.metadata,transportType:h}),c={id:u,topic:n,params:f,verifyContext:s};await this.setPendingSessionRequest(c),h===E5&&null!=(t=e.peer.metadata.redirect)&&t.universal&&this.client.core.addLinkModeSupportedApp(null==(r=e.peer.metadata.redirect)?void 0:r.universal),null!=(i=this.client.signConfig)&&i.disableRequestQueue?this.emitSessionRequest(c):(this.addSessionRequestToSessionRequestQueue(c),this.processSessionRequestQueue())}catch(e){await this.sendError({id:u,topic:n,error:e}),this.client.logger.error(e)}},this.onSessionRequestResponse=(e,t)=>{let{id:r}=t,i=xA("session_request",r);if(0===this.events.listenerCount(i))throw Error(`emitting ${i} without any listeners`);d4(t)?this.events.emit(xA("session_request",r),{result:t.result}):d9(t)&&this.events.emit(xA("session_request",r),{error:t.error})},this.onSessionEventRequest=async(e,t)=>{let{id:r,params:i}=t;try{let t=`${e}_session_event_${i.event.name}`,n=Ez.get(t);if(n&&this.isRequestOutOfSync(n,r))return void this.client.logger.info(`Discarding out of sync request - ${r}`);this.isValidEmit(It({topic:e},i)),this.client.events.emit("session_event",{id:r,topic:e,params:i}),Ez.set(t,r)}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}},this.onSessionAuthenticateResponse=(e,t)=>{let{id:r}=t;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:e,payload:t}),d4(t)?this.events.emit(xA("session_request",r),{result:t.result}):d9(t)&&this.events.emit(xA("session_request",r),{error:t.error})},this.onSessionAuthenticateRequest=async e=>{var t;let{topic:r,payload:i,attestation:n,encryptedId:s,transportType:o}=e;try{let{requester:e,authPayload:a,expiryTimestamp:h}=i.params,u=await this.getVerifyContext({attestationId:n,hash:x5(JSON.stringify(i)),encryptedId:s,metadata:e.metadata,transportType:o}),f={requester:e,pairingTopic:r,id:i.id,authPayload:a,verifyContext:u,expiryTimestamp:h};await this.setAuthRequest(i.id,{request:f,pairingTopic:r,transportType:o}),o===E5&&null!=(t=e.metadata.redirect)&&t.universal&&this.client.core.addLinkModeSupportedApp(e.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:r,params:i.params,id:i.id,verifyContext:u})}catch(s){this.client.logger.error(s);let e=i.params.requester.publicKey,t=await this.client.core.crypto.generateKeyPair(),n=this.getAppLinkIfEnabled(i.params.requester.metadata,o);await this.sendError({id:i.id,topic:r,error:s,encodeOpts:{type:1,receiverPublicKey:e,senderPublicKey:t},rpcOpts:SJ.wc_sessionAuthenticate.autoReject,appLink:n})}},this.addSessionRequestToSessionRequestQueue=e=>{this.sessionRequestQueue.queue.push(e)},this.cleanupAfterResponse=e=>{this.deletePendingSessionRequest(e.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=SQ,this.processSessionRequestQueue()},(0,x.toMiliseconds)(this.requestQueueDelay))},this.cleanupPendingSentRequestsForTopic=({topic:e,error:t})=>{let r=this.client.core.history.pending;r.length>0&&r.filter(t=>t.topic===e&&"wc_sessionRequest"===t.request.method).forEach(e=>{let r=xA("session_request",e.request.id);if(0===this.events.listenerCount(r))throw Error(`emitting ${r} without any listeners`);this.events.emit(xA("session_request",e.request.id),{error:t})})},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===S0)return void this.client.logger.info("session request queue is already active.");let e=this.sessionRequestQueue.queue[0];if(!e)return void this.client.logger.info("session request queue is empty.");try{this.sessionRequestQueue.state=S0,this.emitSessionRequest(e)}catch(e){this.client.logger.error(e)}},this.emitSessionRequest=e=>{this.client.events.emit("session_request",e)},this.onPairingCreated=e=>{if(e.methods&&this.expectedPairingMethodMap.set(e.topic,e.methods),e.active)return;let t=this.client.proposal.getAll().find(t=>t.pairingTopic===e.topic);t&&this.onSessionProposeRequest({topic:e.topic,payload:dZ("wc_sessionPropose",{requiredNamespaces:t.requiredNamespaces,optionalNamespaces:t.optionalNamespaces,relays:t.relays,proposer:t.proposer,sessionProperties:t.sessionProperties},t.id)})},this.isValidConnect=async e=>{let t;if(!ER(e)){let{message:t}=Ew("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(e)}`);throw Error(t)}let{pairingTopic:r,requiredNamespaces:i,optionalNamespaces:n,sessionProperties:s,relays:o}=e;if(E_(r)||await this.isValidPairingTopic(r),t=!1,o?o&&Ex(o)&&o.length&&o.forEach(e=>{t=EP(e)}):t=!0,!t){let{message:e}=Ew("MISSING_OR_INVALID",`connect() relays: ${o}`);throw Error(e)}E_(i)||0===EE(i)||this.validateNamespaces(i,"requiredNamespaces"),E_(n)||0===EE(n)||this.validateNamespaces(n,"optionalNamespaces"),E_(s)||this.validateSessionProps(s,"sessionProperties")},this.validateNamespaces=(e,t)=>{let r=function(e,t,r){let i=null;if(e&&EE(e)){let n,s=EC(e,t);s&&(i=s);let o=(n=null,Object.entries(e).forEach(([e,i])=>{var s,o;let a;if(n)return;let h=(s=xn(e,i),o=`${t} ${r}`,a=null,Ex(s)&&s.length?s.forEach(e=>{a||EA(e)||(a=ED("UNSUPPORTED_CHAINS",`${o}, chain ${e} should be a string and conform to "namespace:chainId" format`))}):EA(e)||(a=ED("UNSUPPORTED_CHAINS",`${o}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),a);h&&(n=h)}),n);o&&(i=o)}else i=Ew("MISSING_OR_INVALID",`${t}, ${r} should be an object with data`);return i}(e,"connect()",t);if(r)throw Error(r.message)},this.isValidApprove=async e=>{if(!ER(e))throw Error(Ew("MISSING_OR_INVALID",`approve() params: ${e}`).message);let{id:t,namespaces:r,relayProtocol:i,sessionProperties:n}=e;this.checkRecentlyDeleted(t),await this.isValidProposalId(t);let s=this.client.proposal.get(t),o=EO(r,"approve()");if(o)throw Error(o.message);let a=EN(s.requiredNamespaces,r,"approve()");if(a)throw Error(a.message);if(!ES(i,!0)){let{message:e}=Ew("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw Error(e)}E_(n)||this.validateSessionProps(n,"sessionProperties")},this.isValidReject=async e=>{if(!ER(e)){let{message:t}=Ew("MISSING_OR_INVALID",`reject() params: ${e}`);throw Error(t)}let{id:t,reason:r}=e;if(this.checkRecentlyDeleted(t),await this.isValidProposalId(t),!r||"object"!=typeof r||!r.code||!EI(r.code,!1)||!r.message||!ES(r.message,!1)){let{message:e}=Ew("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(r)}`);throw Error(e)}},this.isValidSessionSettleRequest=e=>{let t;if(!ER(e)){let{message:t}=Ew("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${e}`);throw Error(t)}let{relay:r,controller:i,namespaces:n,expiry:s}=e;if(!EP(r)){let{message:e}=Ew("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw Error(e)}let o=(t=null,ES(i?.publicKey,!1)||(t=Ew("MISSING_OR_INVALID","onSessionSettleRequest() controller public key should be a string")),t);if(o)throw Error(o.message);let a=EO(n,"onSessionSettleRequest()");if(a)throw Error(a.message);if(xI(s)){let{message:e}=Ew("EXPIRED","onSessionSettleRequest()");throw Error(e)}},this.isValidUpdate=async e=>{if(!ER(e)){let{message:t}=Ew("MISSING_OR_INVALID",`update() params: ${e}`);throw Error(t)}let{topic:t,namespaces:r}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t);let i=this.client.session.get(t),n=EO(r,"update()");if(n)throw Error(n.message);let s=EN(i.requiredNamespaces,r,"update()");if(s)throw Error(s.message)},this.isValidExtend=async e=>{if(!ER(e)){let{message:t}=Ew("MISSING_OR_INVALID",`extend() params: ${e}`);throw Error(t)}let{topic:t}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t)},this.isValidRequest=async e=>{var t;if(!ER(e)){let{message:t}=Ew("MISSING_OR_INVALID",`request() params: ${e}`);throw Error(t)}let{topic:r,request:i,chainId:n,expiry:s}=e;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);let{namespaces:o}=this.client.session.get(r);if(!ET(o,n)){let{message:e}=Ew("MISSING_OR_INVALID",`request() chainId: ${n}`);throw Error(e)}if(E_(i)||!ES(i.method,!1)){let{message:e}=Ew("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw Error(e)}if(!(ES(t=i.method,!1)&&(function(e,t){let r=[];return Object.values(e).forEach(e=>{Eb(e.accounts).includes(t)&&r.push(...e.methods)}),r})(o,n).includes(t))){let{message:e}=Ew("MISSING_OR_INVALID",`request() method: ${i.method}`);throw Error(e)}if(s&&(!EI(s,!1)||!(s<=SX.max)||!(s>=SX.min))){let{message:e}=Ew("MISSING_OR_INVALID",`request() expiry: ${s}. Expiry must be a number (in seconds) between ${SX.min} and ${SX.max}`);throw Error(e)}},this.isValidRespond=async e=>{var t;if(!ER(e)){let{message:t}=Ew("MISSING_OR_INVALID",`respond() params: ${e}`);throw Error(t)}let{topic:r,response:i}=e;try{await this.isValidSessionTopic(r)}catch(r){throw null!=(t=e?.response)&&t.id&&this.cleanupAfterResponse(e),r}if(E_(i)||E_(i.result)&&E_(i.error)||!EI(i.id,!1)||!ES(i.jsonrpc,!1)){let{message:e}=Ew("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw Error(e)}},this.isValidPing=async e=>{if(!ER(e)){let{message:t}=Ew("MISSING_OR_INVALID",`ping() params: ${e}`);throw Error(t)}let{topic:t}=e;await this.isValidSessionOrPairingTopic(t)},this.isValidEmit=async e=>{var t;if(!ER(e)){let{message:t}=Ew("MISSING_OR_INVALID",`emit() params: ${e}`);throw Error(t)}let{topic:r,event:i,chainId:n}=e;await this.isValidSessionTopic(r);let{namespaces:s}=this.client.session.get(r);if(!ET(s,n)){let{message:e}=Ew("MISSING_OR_INVALID",`emit() chainId: ${n}`);throw Error(e)}if(E_(i)||!ES(i.name,!1)||!(ES(t=i.name,!1)&&(function(e,t){let r=[];return Object.values(e).forEach(e=>{Eb(e.accounts).includes(t)&&r.push(...e.events)}),r})(s,n).includes(t))){let{message:e}=Ew("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw Error(e)}},this.isValidDisconnect=async e=>{if(!ER(e)){let{message:t}=Ew("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw Error(t)}let{topic:t}=e;await this.isValidSessionOrPairingTopic(t)},this.isValidAuthenticate=e=>{let{chains:t,uri:r,domain:i,nonce:n}=e;if(!Array.isArray(t)||0===t.length)throw Error("chains is required and must be a non-empty array");if(!ES(r,!1))throw Error("uri is required parameter");if(!ES(i,!1))throw Error("domain is required parameter");if(!ES(n,!1))throw Error("nonce is required parameter");if([...new Set(t.map(e=>xi(e).namespace))].length>1)throw Error("Multi-namespace requests are not supported. Please request single namespace only.");let{namespace:s}=xi(t[0]);if("eip155"!==s)throw Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")},this.getVerifyContext=async e=>{let{attestationId:t,hash:r,encryptedId:i,metadata:n,transportType:s}=e,o={verified:{verifyUrl:n.verifyUrl||_c,validation:"UNKNOWN",origin:n.url||""}};try{if(s===E5){let e=this.getAppLinkIfEnabled(n,s);return o.verified.validation=e&&new URL(e).origin===new URL(n.url).origin?"VALID":"INVALID",o}let e=await this.client.core.verify.resolve({attestationId:t,hash:r,encryptedId:i,verifyUrl:n.verifyUrl});e&&(o.verified.origin=e.origin,o.verified.isScam=e.isScam,o.verified.validation=e.origin===new URL(n.url).origin?"VALID":"INVALID")}catch(e){this.client.logger.warn(e)}return this.client.logger.debug(`Verify context: ${JSON.stringify(o)}`),o},this.validateSessionProps=(e,t)=>{Object.values(e).forEach(e=>{if(!ES(e,!1)){let{message:r}=Ew("MISSING_OR_INVALID",`${t} must be in Record<string, string> format. Received: ${JSON.stringify(e)}`);throw Error(r)}})},this.getPendingAuthRequest=e=>{let t=this.client.auth.requests.get(e);return"object"==typeof t?t:void 0},this.addToRecentlyDeleted=(e,t)=>{if(this.recentlyDeletedMap.set(e,t),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let e=0,t=this.recentlyDeletedLimit/2;for(let r of this.recentlyDeletedMap.keys()){if(e++>=t)break;this.recentlyDeletedMap.delete(r)}}},this.checkRecentlyDeleted=e=>{let t=this.recentlyDeletedMap.get(e);if(t){let{message:r}=Ew("MISSING_OR_INVALID",`Record was recently deleted - ${t}: ${e}`);throw Error(r)}},this.isLinkModeEnabled=(e,r)=>{var i,n,s,o,a,h,u,f,c;return!!e&&r===E5&&(null==(n=null==(i=this.client.metadata)?void 0:i.redirect)?void 0:n.linkMode)===!0&&(null==(o=null==(s=this.client.metadata)?void 0:s.redirect)?void 0:o.universal)!==void 0&&(null==(h=null==(a=this.client.metadata)?void 0:a.redirect)?void 0:h.universal)!==""&&(null==(u=e?.redirect)?void 0:u.universal)!==void 0&&(null==(f=e?.redirect)?void 0:f.universal)!==""&&(null==(c=e?.redirect)?void 0:c.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(e.redirect.universal)&&"u">typeof(null==t?void 0:t.Linking)},this.getAppLinkIfEnabled=(e,t)=>{var r;return this.isLinkModeEnabled(e,t)?null==(r=e?.redirect)?void 0:r.universal:void 0},this.handleLinkModeMessage=({url:e})=>{if(!e||!e.includes("wc_ev")||!e.includes("topic"))return;let t=xO(e,"topic")||"",r=decodeURIComponent(xO(e,"wc_ev")||""),i=this.client.session.keys.includes(t);i&&this.client.session.update(t,{transportType:E5}),this.client.core.dispatchEnvelope({topic:t,message:r,sessionExists:i})},this.registerLinkModeListeners=async()=>{var e;if(xd()&&null!=(e=this.client.metadata.redirect)&&e.linkMode){let e=null==t?void 0:t.Linking;if("u">typeof e){e.addEventListener("url",this.handleLinkModeMessage,this.client.name);let t=await e.getInitialURL();t&&setTimeout(()=>{this.handleLinkModeMessage({url:t})},50)}}}}isInitialized(){if(!this.initialized){let{message:e}=Ew("NOT_INITIALIZED",this.name);throw Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(EJ,e=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(e):this.onRelayMessage(e)})}async onRelayMessage(e){let{topic:t,message:r,attestation:i,transportType:n}=e,{publicKey:s}=this.client.auth.authKeys.keys.includes(S2)?this.client.auth.authKeys.get(S2):{responseTopic:void 0,publicKey:void 0},o=await this.client.core.crypto.decode(t,r,{receiverPublicKey:s,encoding:n===E5?x3:x1});try{d6(o)?(this.client.core.history.set(t,o),this.onRelayEventRequest({topic:t,payload:o,attestation:i,transportType:n,encryptedId:x5(r)})):d5(o)?(await this.client.core.history.resolve(o),await this.onRelayEventResponse({topic:t,payload:o,transportType:n}),this.client.core.history.delete(t,o.id)):this.onRelayEventUnknownPayload({topic:t,payload:o,transportType:n})}catch(e){this.client.logger.error(e)}}registerExpirerEvents(){this.client.core.expirer.on(_f,async e=>{let{topic:t,id:r}=x_(e.target);return r&&this.client.pendingRequest.keys.includes(r)?await this.deletePendingSessionRequest(r,Ew("EXPIRED"),!0):r&&this.client.auth.requests.keys.includes(r)?await this.deletePendingAuthRequest(r,Ew("EXPIRED"),!0):void(t?this.client.session.keys.includes(t)&&(await this.deleteSession({topic:t,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:t})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r})))})}registerPairingEvents(){this.client.core.pairing.events.on(_i,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(_n,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!ES(e,!1)){let{message:t}=Ew("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){let{message:t}=Ew("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw Error(t)}if(xI(this.client.core.pairing.pairings.get(e).expiry)){let{message:t}=Ew("EXPIRED",`pairing topic: ${e}`);throw Error(t)}}async isValidSessionTopic(e){if(!ES(e,!1)){let{message:t}=Ew("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw Error(t)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){let{message:t}=Ew("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw Error(t)}if(xI(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});let{message:t}=Ew("EXPIRED",`session topic: ${e}`);throw Error(t)}if(!this.client.core.crypto.keychain.has(e)){let{message:t}=Ew("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),Error(t)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(ES(e,!1)){let{message:t}=Ew("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw Error(t)}else{let{message:t}=Ew("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw Error(t)}}async isValidProposalId(e){if("number"!=typeof e){let{message:t}=Ew("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw Error(t)}if(!this.client.proposal.keys.includes(e)){let{message:t}=Ew("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw Error(t)}if(xI(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);let{message:t}=Ew("EXPIRED",`proposal id: ${e}`);throw Error(t)}}}class In extends SA{constructor(e,t){super(e,t,"proposal",SG),this.core=e,this.logger=t}}class Is extends SA{constructor(e,t){super(e,t,"session",SG),this.core=e,this.logger=t}}class Io extends SA{constructor(e,t){super(e,t,"request",SG,e=>e.id),this.core=e,this.logger=t}}class Ia extends SA{constructor(e,t){super(e,t,"authKeys",S3,()=>S2),this.core=e,this.logger=t}}class Ih extends SA{constructor(e,t){super(e,t,"pairingTopics",S3),this.core=e,this.logger=t}}class Iu extends SA{constructor(e,t){super(e,t,"requests",S3,e=>e.id),this.core=e,this.logger=t}}class If{constructor(e,t){this.core=e,this.logger=t,this.authKeys=new Ia(this.core,this.logger),this.pairingTopics=new Ih(this.core,this.logger),this.requests=new Iu(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}class Ic extends wN{constructor(e){super(e),this.protocol="wc",this.version=2,this.name=SW,this.events=new(0,a.EventEmitter),this.on=(e,t)=>this.events.on(e,t),this.once=(e,t)=>this.events.once(e,t),this.off=(e,t)=>this.events.off(e,t),this.removeListener=(e,t)=>this.events.removeListener(e,t),this.removeAllListeners=e=>this.events.removeAllListeners(e),this.connect=async e=>{try{return await this.engine.connect(e)}catch(e){throw this.logger.error(e.message),e}},this.pair=async e=>{try{return await this.engine.pair(e)}catch(e){throw this.logger.error(e.message),e}},this.approve=async e=>{try{return await this.engine.approve(e)}catch(e){throw this.logger.error(e.message),e}},this.reject=async e=>{try{return await this.engine.reject(e)}catch(e){throw this.logger.error(e.message),e}},this.update=async e=>{try{return await this.engine.update(e)}catch(e){throw this.logger.error(e.message),e}},this.extend=async e=>{try{return await this.engine.extend(e)}catch(e){throw this.logger.error(e.message),e}},this.request=async e=>{try{return await this.engine.request(e)}catch(e){throw this.logger.error(e.message),e}},this.respond=async e=>{try{return await this.engine.respond(e)}catch(e){throw this.logger.error(e.message),e}},this.ping=async e=>{try{return await this.engine.ping(e)}catch(e){throw this.logger.error(e.message),e}},this.emit=async e=>{try{return await this.engine.emit(e)}catch(e){throw this.logger.error(e.message),e}},this.disconnect=async e=>{try{return await this.engine.disconnect(e)}catch(e){throw this.logger.error(e.message),e}},this.find=e=>{try{return this.engine.find(e)}catch(e){throw this.logger.error(e.message),e}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(e){throw this.logger.error(e.message),e}},this.authenticate=async(e,t)=>{try{return await this.engine.authenticate(e,t)}catch(e){throw this.logger.error(e.message),e}},this.formatAuthMessage=e=>{try{return this.engine.formatAuthMessage(e)}catch(e){throw this.logger.error(e.message),e}},this.approveSessionAuthenticate=async e=>{try{return await this.engine.approveSessionAuthenticate(e)}catch(e){throw this.logger.error(e.message),e}},this.rejectSessionAuthenticate=async e=>{try{return await this.engine.rejectSessionAuthenticate(e)}catch(e){throw this.logger.error(e.message),e}},this.name=e?.name||SW,this.metadata=e?.metadata||xb(),this.signConfig=e?.signConfig;let t="u">typeof e?.logger&&"string"!=typeof e?.logger?e.logger:r(v2)(ww({level:e?.logger||"error"}));this.core=e?.core||new SV(e),this.logger=wx(t,this.name),this.session=new Is(this.core,this.logger),this.proposal=new In(this.core,this.logger),this.pendingRequest=new Io(this.core,this.logger),this.engine=new Ii(this),this.auth=new If(this.core,this.logger)}static async init(e){let t=new Ic(e);return await t.initialize(),t}get context(){return wD(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),this.engine.processRelayMessageCache()}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}var Il,Id,Ip,Ig,Ib,Iy,Im,Iv,Iw,ID,Ix,IE,I_,IS,II,IA,IM,IC,IO,IP,IR,IT,IN,IB,IL={exports:{}},Ik="object"==typeof Reflect?Reflect:null,IU=Ik&&"function"==typeof Ik.apply?Ik.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};IB=Ik&&"function"==typeof Ik.ownKeys?Ik.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var Iz=Number.isNaN||function(e){return e!=e};function Ij(){Ij.init.call(this)}IL.exports=Ij,IL.exports.once=function(e,t){return new Promise(function(r,i){var n,s,o;function a(r){e.removeListener(t,h),i(r)}function h(){"function"==typeof e.removeListener&&e.removeListener("error",a),r([].slice.call(arguments))}IZ(e,t,h,{once:!0}),"error"!==t&&(n=e,s=a,o={once:!0},"function"==typeof n.on&&IZ(n,"error",s,o))})},Ij.EventEmitter=Ij,Ij.prototype._events=void 0,Ij.prototype._eventsCount=0,Ij.prototype._maxListeners=void 0;var Iq=10;function IF(e){if("function"!=typeof e)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function IH(e){return void 0===e._maxListeners?Ij.defaultMaxListeners:e._maxListeners}function IK(e,t,r,i){var n,s,o;if(IF(r),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),s=e._events),o=s[t]),void 0===o)o=s[t]=r,++e._eventsCount;else if("function"==typeof o?o=s[t]=i?[r,o]:[o,r]:i?o.unshift(r):o.push(r),(n=IH(e))>0&&o.length>n&&!o.warned){o.warned=!0;var a=Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=o.length,console&&console.warn&&console.warn(a)}return e}function I$(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function IV(e,t,r){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},n=I$.bind(i);return n.listener=r,i.wrapFn=n,n}function IW(e,t,r){var i=e._events;if(void 0===i)return[];var n=i[t];return void 0===n?[]:"function"==typeof n?r?[n.listener||n]:[n]:r?function(e){for(var t=Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(n):IY(n,n.length)}function IG(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function IY(e,t){for(var r=Array(t),i=0;i<t;++i)r[i]=e[i];return r}function IZ(e,t,r,i){if("function"==typeof e.on)i.once?e.once(t,r):e.on(t,r);else if("function"==typeof e.addEventListener)e.addEventListener(t,function n(s){i.once&&e.removeEventListener(t,n),r(s)});else throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}Object.defineProperty(Ij,"defaultMaxListeners",{enumerable:!0,get:function(){return Iq},set:function(e){if("number"!=typeof e||e<0||Iz(e))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");Iq=e}}),Ij.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Ij.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||Iz(e))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},Ij.prototype.getMaxListeners=function(){return IH(this)},Ij.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,n=this._events;if(void 0!==n)i=i&&void 0===n.error;else if(!i)return!1;if(i){if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var s,o=Error("Unhandled error."+(s?" ("+s.message+")":""));throw o.context=s,o}var a=n[e];if(void 0===a)return!1;if("function"==typeof a)IU(a,this,t);else for(var h=a.length,u=IY(a,h),r=0;r<h;++r)IU(u[r],this,t);return!0},Ij.prototype.addListener=function(e,t){return IK(this,e,t,!1)},Ij.prototype.on=Ij.prototype.addListener,Ij.prototype.prependListener=function(e,t){return IK(this,e,t,!0)},Ij.prototype.once=function(e,t){return IF(t),this.on(e,IV(this,e,t)),this},Ij.prototype.prependOnceListener=function(e,t){return IF(t),this.prependListener(e,IV(this,e,t)),this},Ij.prototype.removeListener=function(e,t){var r,i,n,s,o;if(IF(t),void 0===(i=this._events)||void 0===(r=i[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(n=-1,s=r.length-1;s>=0;s--)if(r[s]===t||r[s].listener===t){o=r[s].listener,n=s;break}if(n<0)return this;0===n?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,n),1===r.length&&(i[e]=r[0]),void 0!==i.removeListener&&this.emit("removeListener",e,o||t)}return this},Ij.prototype.off=Ij.prototype.removeListener,Ij.prototype.removeAllListeners=function(e){var t,r,i;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0==arguments.length){var n,s=Object.keys(r);for(i=0;i<s.length;++i)"removeListener"!==(n=s[i])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},Ij.prototype.listeners=function(e){return IW(this,e,!0)},Ij.prototype.rawListeners=function(e){return IW(this,e,!1)},Ij.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):IG.call(e,t)},Ij.prototype.listenerCount=IG,Ij.prototype.eventNames=function(){return this._eventsCount>0?IB(this._events):[]};IL.exports;class IJ{constructor(e){this.opts=e}}class IX{constructor(e){this.client=e}}var IQ=Object.defineProperty,I0=Object.defineProperties,I1=Object.getOwnPropertyDescriptors,I3=Object.getOwnPropertySymbols,I2=Object.prototype.hasOwnProperty,I8=Object.prototype.propertyIsEnumerable,I6=(e,t,r)=>t in e?IQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class I5 extends IX{constructor(e){super(e),this.init=async()=>{this.signClient=await Ic.init({core:this.client.core,metadata:this.client.metadata,signConfig:this.client.signConfig}),this.authClient=await v3.init({core:this.client.core,projectId:"",metadata:this.client.metadata})},this.pair=async e=>{await this.client.core.pairing.pair(e)},this.approveSession=async e=>{let{topic:t,acknowledged:r}=await this.signClient.approve(I0(((e,t)=>{for(var r in t||(t={}))I2.call(t,r)&&I6(e,r,t[r]);if(I3)for(var r of I3(t))I8.call(t,r)&&I6(e,r,t[r]);return e})({},e),I1({id:e.id,namespaces:e.namespaces,sessionProperties:e.sessionProperties,sessionConfig:e.sessionConfig})));return await r(),this.signClient.session.get(t)},this.rejectSession=async e=>await this.signClient.reject(e),this.updateSession=async e=>await this.signClient.update(e),this.extendSession=async e=>await this.signClient.extend(e),this.respondSessionRequest=async e=>await this.signClient.respond(e),this.disconnectSession=async e=>await this.signClient.disconnect(e),this.emitSessionEvent=async e=>await this.signClient.emit(e),this.getActiveSessions=()=>this.signClient.session.getAll().reduce((e,t)=>(e[t.topic]=t,e),{}),this.getPendingSessionProposals=()=>this.signClient.proposal.getAll(),this.getPendingSessionRequests=()=>this.signClient.getPendingSessionRequests(),this.respondAuthRequest=async(e,t)=>await this.authClient.respond(e,t),this.getPendingAuthRequests=()=>this.authClient.requests.getAll().filter(e=>"requester"in e),this.formatMessage=(e,t)=>this.authClient.formatMessage(e,t),this.approveSessionAuthenticate=async e=>await this.signClient.approveSessionAuthenticate(e),this.rejectSessionAuthenticate=async e=>await this.signClient.rejectSessionAuthenticate(e),this.formatAuthMessage=e=>this.signClient.formatAuthMessage(e),this.registerDeviceToken=e=>this.client.core.echoClient.registerDeviceToken(e),this.on=(e,t)=>(this.setEvent(e,"off"),this.setEvent(e,"on"),this.client.events.on(e,t)),this.once=(e,t)=>(this.setEvent(e,"off"),this.setEvent(e,"once"),this.client.events.once(e,t)),this.off=(e,t)=>(this.setEvent(e,"off"),this.client.events.off(e,t)),this.removeListener=(e,t)=>(this.setEvent(e,"removeListener"),this.client.events.removeListener(e,t)),this.onSessionRequest=e=>{this.client.events.emit("session_request",e)},this.onSessionProposal=e=>{this.client.events.emit("session_proposal",e)},this.onSessionDelete=e=>{this.client.events.emit("session_delete",e)},this.onAuthRequest=e=>{this.client.events.emit("auth_request",e)},this.onProposalExpire=e=>{this.client.events.emit("proposal_expire",e)},this.onSessionRequestExpire=e=>{this.client.events.emit("session_request_expire",e)},this.onSessionRequestAuthenticate=e=>{this.client.events.emit("session_authenticate",e)},this.setEvent=(e,t)=>{switch(e){case"session_request":this.signClient.events[t]("session_request",this.onSessionRequest);break;case"session_proposal":this.signClient.events[t]("session_proposal",this.onSessionProposal);break;case"session_delete":this.signClient.events[t]("session_delete",this.onSessionDelete);break;case"auth_request":this.authClient[t]("auth_request",this.onAuthRequest);break;case"proposal_expire":this.signClient.events[t]("proposal_expire",this.onProposalExpire);break;case"session_request_expire":this.signClient.events[t]("session_request_expire",this.onSessionRequestExpire);break;case"session_authenticate":this.signClient.events[t]("session_authenticate",this.onSessionRequestAuthenticate)}},this.signClient={},this.authClient={}}}const I4=class extends IJ{constructor(e){super(e),this.events=new IL.exports,this.on=(e,t)=>this.engine.on(e,t),this.once=(e,t)=>this.engine.once(e,t),this.off=(e,t)=>this.engine.off(e,t),this.removeListener=(e,t)=>this.engine.removeListener(e,t),this.pair=async e=>{try{return await this.engine.pair(e)}catch(e){throw this.logger.error(e.message),e}},this.approveSession=async e=>{try{return await this.engine.approveSession(e)}catch(e){throw this.logger.error(e.message),e}},this.rejectSession=async e=>{try{return await this.engine.rejectSession(e)}catch(e){throw this.logger.error(e.message),e}},this.updateSession=async e=>{try{return await this.engine.updateSession(e)}catch(e){throw this.logger.error(e.message),e}},this.extendSession=async e=>{try{return await this.engine.extendSession(e)}catch(e){throw this.logger.error(e.message),e}},this.respondSessionRequest=async e=>{try{return await this.engine.respondSessionRequest(e)}catch(e){throw this.logger.error(e.message),e}},this.disconnectSession=async e=>{try{return await this.engine.disconnectSession(e)}catch(e){throw this.logger.error(e.message),e}},this.emitSessionEvent=async e=>{try{return await this.engine.emitSessionEvent(e)}catch(e){throw this.logger.error(e.message),e}},this.getActiveSessions=()=>{try{return this.engine.getActiveSessions()}catch(e){throw this.logger.error(e.message),e}},this.getPendingSessionProposals=()=>{try{return this.engine.getPendingSessionProposals()}catch(e){throw this.logger.error(e.message),e}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(e){throw this.logger.error(e.message),e}},this.respondAuthRequest=async(e,t)=>{try{return await this.engine.respondAuthRequest(e,t)}catch(e){throw this.logger.error(e.message),e}},this.getPendingAuthRequests=()=>{try{return this.engine.getPendingAuthRequests()}catch(e){throw this.logger.error(e.message),e}},this.formatMessage=(e,t)=>{try{return this.engine.formatMessage(e,t)}catch(e){throw this.logger.error(e.message),e}},this.registerDeviceToken=e=>{try{return this.engine.registerDeviceToken(e)}catch(e){throw this.logger.error(e.message),e}},this.approveSessionAuthenticate=e=>{try{return this.engine.approveSessionAuthenticate(e)}catch(e){throw this.logger.error(e.message),e}},this.rejectSessionAuthenticate=e=>{try{return this.engine.rejectSessionAuthenticate(e)}catch(e){throw this.logger.error(e.message),e}},this.formatAuthMessage=e=>{try{return this.engine.formatAuthMessage(e)}catch(e){throw this.logger.error(e.message),e}},this.metadata=e.metadata,this.name=e.name||"Web3Wallet",this.signConfig=e.signConfig,this.core=e.core,this.logger=this.core.logger,this.engine=new I5(this)}static async init(e){let t=new I4(e);return await t.initialize(),t}async initialize(){this.logger.trace("Initialized");try{await this.engine.init(),this.logger.info("Web3Wallet Initialization Success")}catch(e){throw this.logger.info("Web3Wallet Initialization Failure"),this.logger.error(e.message),e}}};I4.notifications={decryptMessage:async e=>{let t={core:new SV({storageOptions:e.storageOptions,storage:e.storage})};await t.core.crypto.init();let r=t.core.crypto.decode(e.topic,e.encryptedMessage);return t.core=null,r},getMetadata:async e=>{let t={core:new SV({storageOptions:e.storageOptions,storage:e.storage}),sessionStore:null};t.sessionStore=new Is(t.core,t.core.logger),await t.sessionStore.init();let r=t.sessionStore.get(e.topic),i=r?.peer.metadata;return t.core=null,t.sessionStore=null,i}},x.THIRTY_DAYS,x.SEVEN_DAYS,x.FIVE_MINUTES,x.FIVE_MINUTES,x.FIVE_MINUTES,x.FIVE_MINUTES,x.FIVE_MINUTES,x.FIVE_MINUTES,x.ONE_DAY,x.ONE_DAY,x.ONE_DAY,x.ONE_DAY,x.FIVE_MINUTES,x.FIVE_MINUTES,x.FIVE_MINUTES,x.FIVE_MINUTES,x.ONE_DAY,x.ONE_DAY,x.ONE_DAY,x.ONE_DAY,x.ONE_HOUR,x.ONE_HOUR,x.FIVE_MINUTES,x.FIVE_MINUTES,x.FIVE_MINUTES,x.SEVEN_DAYS,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable,window.addEventListener("walletDeepLink",async e=>{console.log("Received wallet deep link:",e.detail);try{let t=new URL(e.detail);console.log("Parsed deep link:",{scheme:t.protocol,channelId:t.searchParams.get("channelId"),version:t.searchParams.get("v")});let r=document.getElementById("gameFrame");r&&r.contentWindow&&r.contentWindow.postMessage({type:"WALLET_LINK",url:e.detail},"*")}catch(e){console.error("Error handling wallet deep link:",e)}}),document.getElementById("connectWallet").addEventListener("click",async()=>{try{let e=await null.core.pairing.create(),t=encodeURIComponent(e),r=`metamask://wc?uri=${t}`;window.location.href=r,console.log("Opening MetaMask with URI:",e)}catch(e){console.error("Failed to create pairing:",e)}}),window.addEventListener("walletconnectDeepLink",e=>{var t=e.detail;try{console.log("Received WalletConnect URI:",t),null.pair({uri:t})}catch(e){console.error("Failed to handle WalletConnect deep link:",e)}}),window.location.href="https://play.sunflower-land.com";
//# sourceMappingURL=mobile.b68be477.js.map
